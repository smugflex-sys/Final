function WC(r,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in r)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(r,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var fM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ky(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wg={exports:{}},oh={},bg={exports:{}},Ms={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function qC(){if(ww)return Ms;ww=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),c=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.iterator;function x(se){return se===null||typeof se!="object"?null:(se=f&&se[f]||se["@@iterator"],typeof se=="function"?se:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function B(se,R,q){this.props=se,this.context=R,this.refs=b,this.updater=q||g}B.prototype.isReactComponent={},B.prototype.setState=function(se,R){if(typeof se!="object"&&typeof se!="function"&&se!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,se,R,"setState")},B.prototype.forceUpdate=function(se){this.updater.enqueueForceUpdate(this,se,"forceUpdate")};function N(){}N.prototype=B.prototype;function E(se,R,q){this.props=se,this.context=R,this.refs=b,this.updater=q||g}var I=E.prototype=new N;I.constructor=E,y(I,B.prototype),I.isPureReactComponent=!0;var k=Array.isArray,$=Object.prototype.hasOwnProperty,z={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function T(se,R,q){var te,de={},fe=null,me=null;if(R!=null)for(te in R.ref!==void 0&&(me=R.ref),R.key!==void 0&&(fe=""+R.key),R)$.call(R,te)&&!H.hasOwnProperty(te)&&(de[te]=R[te]);var pe=arguments.length-2;if(pe===1)de.children=q;else if(1<pe){for(var ee=Array(pe),je=0;je<pe;je++)ee[je]=arguments[je+2];de.children=ee}if(se&&se.defaultProps)for(te in pe=se.defaultProps,pe)de[te]===void 0&&(de[te]=pe[te]);return{$$typeof:r,type:se,key:fe,ref:me,props:de,_owner:z.current}}function V(se,R){return{$$typeof:r,type:se.type,key:R,ref:se.ref,props:se.props,_owner:se._owner}}function G(se){return typeof se=="object"&&se!==null&&se.$$typeof===r}function L(se){var R={"=":"=0",":":"=2"};return"$"+se.replace(/[=:]/g,function(q){return R[q]})}var F=/\/+/g;function O(se,R){return typeof se=="object"&&se!==null&&se.key!=null?L(""+se.key):R.toString(36)}function P(se,R,q,te,de){var fe=typeof se;(fe==="undefined"||fe==="boolean")&&(se=null);var me=!1;if(se===null)me=!0;else switch(fe){case"string":case"number":me=!0;break;case"object":switch(se.$$typeof){case r:case t:me=!0}}if(me)return me=se,de=de(me),se=te===""?"."+O(me,0):te,k(de)?(q="",se!=null&&(q=se.replace(F,"$&/")+"/"),P(de,R,q,"",function(je){return je})):de!=null&&(G(de)&&(de=V(de,q+(!de.key||me&&me.key===de.key?"":(""+de.key).replace(F,"$&/")+"/")+se)),R.push(de)),1;if(me=0,te=te===""?".":te+":",k(se))for(var pe=0;pe<se.length;pe++){fe=se[pe];var ee=te+O(fe,pe);me+=P(fe,R,q,ee,de)}else if(ee=x(se),typeof ee=="function")for(se=ee.call(se),pe=0;!(fe=se.next()).done;)fe=fe.value,ee=te+O(fe,pe++),me+=P(fe,R,q,ee,de);else if(fe==="object")throw R=String(se),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(se).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return me}function ce(se,R,q){if(se==null)return se;var te=[],de=0;return P(se,te,"","",function(fe){return R.call(q,fe,de++)}),te}function W(se){if(se._status===-1){var R=se._result;R=R(),R.then(function(q){(se._status===0||se._status===-1)&&(se._status=1,se._result=q)},function(q){(se._status===0||se._status===-1)&&(se._status=2,se._result=q)}),se._status===-1&&(se._status=0,se._result=R)}if(se._status===1)return se._result.default;throw se._result}var ae={current:null},K={transition:null},le={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:K,ReactCurrentOwner:z};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ms.Children={map:ce,forEach:function(se,R,q){ce(se,function(){R.apply(this,arguments)},q)},count:function(se){var R=0;return ce(se,function(){R++}),R},toArray:function(se){return ce(se,function(R){return R})||[]},only:function(se){if(!G(se))throw Error("React.Children.only expected to receive a single React element child.");return se}},Ms.Component=B,Ms.Fragment=s,Ms.Profiler=a,Ms.PureComponent=E,Ms.StrictMode=n,Ms.Suspense=d,Ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Ms.act=ie,Ms.cloneElement=function(se,R,q){if(se==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+se+".");var te=y({},se.props),de=se.key,fe=se.ref,me=se._owner;if(R!=null){if(R.ref!==void 0&&(fe=R.ref,me=z.current),R.key!==void 0&&(de=""+R.key),se.type&&se.type.defaultProps)var pe=se.type.defaultProps;for(ee in R)$.call(R,ee)&&!H.hasOwnProperty(ee)&&(te[ee]=R[ee]===void 0&&pe!==void 0?pe[ee]:R[ee])}var ee=arguments.length-2;if(ee===1)te.children=q;else if(1<ee){pe=Array(ee);for(var je=0;je<ee;je++)pe[je]=arguments[je+2];te.children=pe}return{$$typeof:r,type:se.type,key:de,ref:fe,props:te,_owner:me}},Ms.createContext=function(se){return se={$$typeof:c,_currentValue:se,_currentValue2:se,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},se.Provider={$$typeof:i,_context:se},se.Consumer=se},Ms.createElement=T,Ms.createFactory=function(se){var R=T.bind(null,se);return R.type=se,R},Ms.createRef=function(){return{current:null}},Ms.forwardRef=function(se){return{$$typeof:A,render:se}},Ms.isValidElement=G,Ms.lazy=function(se){return{$$typeof:m,_payload:{_status:-1,_result:se},_init:W}},Ms.memo=function(se,R){return{$$typeof:u,type:se,compare:R===void 0?null:R}},Ms.startTransition=function(se){var R=K.transition;K.transition={};try{se()}finally{K.transition=R}},Ms.unstable_act=ie,Ms.useCallback=function(se,R){return ae.current.useCallback(se,R)},Ms.useContext=function(se){return ae.current.useContext(se)},Ms.useDebugValue=function(){},Ms.useDeferredValue=function(se){return ae.current.useDeferredValue(se)},Ms.useEffect=function(se,R){return ae.current.useEffect(se,R)},Ms.useId=function(){return ae.current.useId()},Ms.useImperativeHandle=function(se,R,q){return ae.current.useImperativeHandle(se,R,q)},Ms.useInsertionEffect=function(se,R){return ae.current.useInsertionEffect(se,R)},Ms.useLayoutEffect=function(se,R){return ae.current.useLayoutEffect(se,R)},Ms.useMemo=function(se,R){return ae.current.useMemo(se,R)},Ms.useReducer=function(se,R,q){return ae.current.useReducer(se,R,q)},Ms.useRef=function(se){return ae.current.useRef(se)},Ms.useState=function(se){return ae.current.useState(se)},Ms.useSyncExternalStore=function(se,R,q){return ae.current.useSyncExternalStore(se,R,q)},Ms.useTransition=function(){return ae.current.useTransition()},Ms.version="18.3.1",Ms}var bw;function ip(){return bw||(bw=1,bg.exports=qC()),bg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw;function YC(){if(yw)return oh;yw=1;var r=ip(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(A,d,u){var m,f={},x=null,g=null;u!==void 0&&(x=""+u),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(g=d.ref);for(m in d)n.call(d,m)&&!i.hasOwnProperty(m)&&(f[m]=d[m]);if(A&&A.defaultProps)for(m in d=A.defaultProps,d)f[m]===void 0&&(f[m]=d[m]);return{$$typeof:t,type:A,key:x,ref:g,props:f,_owner:a.current}}return oh.Fragment=s,oh.jsx=c,oh.jsxs=c,oh}var Nw;function JC(){return Nw||(Nw=1,wg.exports=YC()),wg.exports}var e=JC(),Bm={},yg={exports:{}},yi={},Ng={exports:{}},jg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function XC(){return jw||(jw=1,(function(r){function t(K,le){var ie=K.length;K.push(le);e:for(;0<ie;){var se=ie-1>>>1,R=K[se];if(0<a(R,le))K[se]=le,K[ie]=R,ie=se;else break e}}function s(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var le=K[0],ie=K.pop();if(ie!==le){K[0]=ie;e:for(var se=0,R=K.length,q=R>>>1;se<q;){var te=2*(se+1)-1,de=K[te],fe=te+1,me=K[fe];if(0>a(de,ie))fe<R&&0>a(me,de)?(K[se]=me,K[fe]=ie,se=fe):(K[se]=de,K[te]=ie,se=te);else if(fe<R&&0>a(me,ie))K[se]=me,K[fe]=ie,se=fe;else break e}}return le}function a(K,le){var ie=K.sortIndex-le.sortIndex;return ie!==0?ie:K.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var c=Date,A=c.now();r.unstable_now=function(){return c.now()-A}}var d=[],u=[],m=1,f=null,x=3,g=!1,y=!1,b=!1,B=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(K){for(var le=s(u);le!==null;){if(le.callback===null)n(u);else if(le.startTime<=K)n(u),le.sortIndex=le.expirationTime,t(d,le);else break;le=s(u)}}function k(K){if(b=!1,I(K),!y)if(s(d)!==null)y=!0,W($);else{var le=s(u);le!==null&&ae(k,le.startTime-K)}}function $(K,le){y=!1,b&&(b=!1,N(T),T=-1),g=!0;var ie=x;try{for(I(le),f=s(d);f!==null&&(!(f.expirationTime>le)||K&&!L());){var se=f.callback;if(typeof se=="function"){f.callback=null,x=f.priorityLevel;var R=se(f.expirationTime<=le);le=r.unstable_now(),typeof R=="function"?f.callback=R:f===s(d)&&n(d),I(le)}else n(d);f=s(d)}if(f!==null)var q=!0;else{var te=s(u);te!==null&&ae(k,te.startTime-le),q=!1}return q}finally{f=null,x=ie,g=!1}}var z=!1,H=null,T=-1,V=5,G=-1;function L(){return!(r.unstable_now()-G<V)}function F(){if(H!==null){var K=r.unstable_now();G=K;var le=!0;try{le=H(!0,K)}finally{le?O():(z=!1,H=null)}}else z=!1}var O;if(typeof E=="function")O=function(){E(F)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ce=P.port2;P.port1.onmessage=F,O=function(){ce.postMessage(null)}}else O=function(){B(F,0)};function W(K){H=K,z||(z=!0,O())}function ae(K,le){T=B(function(){K(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_continueExecution=function(){y||g||(y=!0,W($))},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return s(d)},r.unstable_next=function(K){switch(x){case 1:case 2:case 3:var le=3;break;default:le=x}var ie=x;x=le;try{return K()}finally{x=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(K,le){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ie=x;x=K;try{return le()}finally{x=ie}},r.unstable_scheduleCallback=function(K,le,ie){var se=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?se+ie:se):ie=se,K){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=ie+R,K={id:m++,callback:le,priorityLevel:K,startTime:ie,expirationTime:R,sortIndex:-1},ie>se?(K.sortIndex=ie,t(u,K),s(d)===null&&K===s(u)&&(b?(N(T),T=-1):b=!0,ae(k,ie-se))):(K.sortIndex=R,t(d,K),y||g||(y=!0,W($))),K},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(K){var le=x;return function(){var ie=x;x=le;try{return K.apply(this,arguments)}finally{x=ie}}}})(jg)),jg}var Bw;function ZC(){return Bw||(Bw=1,Ng.exports=XC()),Ng.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function e4(){if(Cw)return yi;Cw=1;var r=ip(),t=ZC();function s(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(o,l){c(o,l),c(o+"Capture",l)}function c(o,l){for(a[o]=l,o=0;o<l.length;o++)n.add(l[o])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function x(o){return d.call(f,o)?!0:d.call(m,o)?!1:u.test(o)?f[o]=!0:(m[o]=!0,!1)}function g(o,l,h,v){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return v?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function y(o,l,h,v){if(l===null||typeof l>"u"||g(o,l,h,v))return!0;if(v)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(o,l,h,v,S,Q,re){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=v,this.attributeNamespace=S,this.mustUseProperty=h,this.propertyName=o,this.type=l,this.sanitizeURL=Q,this.removeEmptyString=re}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){B[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];B[l]=new b(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){B[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){B[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){B[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){B[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){B[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){B[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){B[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(N,E);B[l]=new b(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(N,E);B[l]=new b(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(N,E);B[l]=new b(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){B[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),B.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){B[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function I(o,l,h,v){var S=B.hasOwnProperty(l)?B[l]:null;(S!==null?S.type!==0:v||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(y(l,h,S,v)&&(h=null),v||S===null?x(l)&&(h===null?o.removeAttribute(l):o.setAttribute(l,""+h)):S.mustUseProperty?o[S.propertyName]=h===null?S.type===3?!1:"":h:(l=S.attributeName,v=S.attributeNamespace,h===null?o.removeAttribute(l):(S=S.type,h=S===3||S===4&&h===!0?"":""+h,v?o.setAttributeNS(v,l,h):o.setAttribute(l,h))))}var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),z=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),K=Symbol.iterator;function le(o){return o===null||typeof o!="object"?null:(o=K&&o[K]||o["@@iterator"],typeof o=="function"?o:null)}var ie=Object.assign,se;function R(o){if(se===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);se=l&&l[1]||""}return`
`+se+o}var q=!1;function te(o,l){if(!o||q)return"";q=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(at){var v=at}Reflect.construct(o,[],l)}else{try{l.call()}catch(at){v=at}o.call(l.prototype)}else{try{throw Error()}catch(at){v=at}o()}}catch(at){if(at&&v&&typeof at.stack=="string"){for(var S=at.stack.split(`
`),Q=v.stack.split(`
`),re=S.length-1,Ne=Q.length-1;1<=re&&0<=Ne&&S[re]!==Q[Ne];)Ne--;for(;1<=re&&0<=Ne;re--,Ne--)if(S[re]!==Q[Ne]){if(re!==1||Ne!==1)do if(re--,Ne--,0>Ne||S[re]!==Q[Ne]){var Qe=`
`+S[re].replace(" at new "," at ");return o.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",o.displayName)),Qe}while(1<=re&&0<=Ne);break}}}finally{q=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?R(o):""}function de(o){switch(o.tag){case 5:return R(o.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return o=te(o.type,!1),o;case 11:return o=te(o.type.render,!1),o;case 1:return o=te(o.type,!0),o;default:return""}}function fe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case H:return"Fragment";case z:return"Portal";case V:return"Profiler";case T:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case L:return(o.displayName||"Context")+".Consumer";case G:return(o._context.displayName||"Context")+".Provider";case F:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ce:return l=o.displayName||null,l!==null?l:fe(o.type)||"Memo";case W:l=o._payload,o=o._init;try{return fe(o(l))}catch{}}return null}function me(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(l);case 8:return l===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function pe(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ee(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function je(o){var l=ee(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),v=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var S=h.get,Q=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return S.call(this)},set:function(re){v=""+re,Q.call(this,re)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return v},setValue:function(re){v=""+re},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Pe(o){o._valueTracker||(o._valueTracker=je(o))}function De(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),v="";return o&&(v=ee(o)?o.checked?"true":"false":o.value),o=v,o!==h?(l.setValue(o),!0):!1}function nt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Se(o,l){var h=l.checked;return ie({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function X(o,l){var h=l.defaultValue==null?"":l.defaultValue,v=l.checked!=null?l.checked:l.defaultChecked;h=pe(l.value!=null?l.value:h),o._wrapperState={initialChecked:v,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ie(o,l){l=l.checked,l!=null&&I(o,"checked",l,!1)}function rt(o,l){Ie(o,l);var h=pe(l.value),v=l.type;if(h!=null)v==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(v==="submit"||v==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Te(o,l.type,h):l.hasOwnProperty("defaultValue")&&Te(o,l.type,pe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Ee(o,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var v=l.type;if(!(v!=="submit"&&v!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,h||l===o.value||(o.value=l),o.defaultValue=l}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Te(o,l,h){(l!=="number"||nt(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var dt=Array.isArray;function st(o,l,h,v){if(o=o.options,l){l={};for(var S=0;S<h.length;S++)l["$"+h[S]]=!0;for(h=0;h<o.length;h++)S=l.hasOwnProperty("$"+o[h].value),o[h].selected!==S&&(o[h].selected=S),S&&v&&(o[h].defaultSelected=!0)}else{for(h=""+pe(h),l=null,S=0;S<o.length;S++){if(o[S].value===h){o[S].selected=!0,v&&(o[S].defaultSelected=!0);return}l!==null||o[S].disabled||(l=o[S])}l!==null&&(l.selected=!0)}}function ft(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(s(91));return ie({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function et(o,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(s(92));if(dt(h)){if(1<h.length)throw Error(s(93));h=h[0]}l=h}l==null&&(l=""),h=l}o._wrapperState={initialValue:pe(h)}}function it(o,l){var h=pe(l.value),v=pe(l.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),l.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),v!=null&&(o.defaultValue=""+v)}function Ue(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function We(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bt(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?We(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mt,Me=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,v,S){MSApp.execUnsafeLocalFunction(function(){return o(l,h,v,S)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(mt=mt||document.createElement("div"),mt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=mt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Ve(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},As=["Webkit","ms","Moz","O"];Object.keys(wt).forEach(function(o){As.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),wt[l]=wt[o]})});function _e(o,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||wt.hasOwnProperty(o)&&wt[o]?(""+l).trim():l+"px"}function $e(o,l){o=o.style;for(var h in l)if(l.hasOwnProperty(h)){var v=h.indexOf("--")===0,S=_e(h,l[h],v);h==="float"&&(h="cssFloat"),v?o.setProperty(h,S):o[h]=S}}var gt=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ft(o,l){if(l){if(gt[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(s(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(s(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(s(61))}if(l.style!=null&&typeof l.style!="object")throw Error(s(62))}}function bt(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ot=null;function Lt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Vt=null,Ns=null,Yt=null;function Ht(o){if(o=rA(o)){if(typeof Vt!="function")throw Error(s(280));var l=o.stateNode;l&&(l=td(l),Vt(o.stateNode,o.type,l))}}function _t(o){Ns?Yt?Yt.push(o):Yt=[o]:Ns=o}function Ls(){if(Ns){var o=Ns,l=Yt;if(Yt=Ns=null,Ht(o),l)for(o=0;o<l.length;o++)Ht(l[o])}}function vs(o,l){return o(l)}function Gt(){}var Xs=!1;function yt(o,l,h){if(Xs)return o(l,h);Xs=!0;try{return vs(o,l,h)}finally{Xs=!1,(Ns!==null||Yt!==null)&&(Gt(),Ls())}}function Fs(o,l){var h=o.stateNode;if(h===null)return null;var v=td(h);if(v===null)return null;h=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(o=o.type,v=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!v;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(s(231,l,typeof h));return h}var us=!1;if(A)try{var Ts={};Object.defineProperty(Ts,"passive",{get:function(){us=!0}}),window.addEventListener("test",Ts,Ts),window.removeEventListener("test",Ts,Ts)}catch{us=!1}function tr(o,l,h,v,S,Q,re,Ne,Qe){var at=Array.prototype.slice.call(arguments,3);try{l.apply(h,at)}catch(jt){this.onError(jt)}}var Vs=!1,zs=null,mr=!1,$n=null,Na={onError:function(o){Vs=!0,zs=o}};function Qn(o,l,h,v,S,Q,re,Ne,Qe){Vs=!1,zs=null,tr.apply(Na,arguments)}function ze(o,l,h,v,S,Q,re,Ne,Qe){if(Qn.apply(this,arguments),Vs){if(Vs){var at=zs;Vs=!1,zs=null}else throw Error(s(198));mr||(mr=!0,$n=at)}}function ms(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function Cs(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function sr(o){if(ms(o)!==o)throw Error(s(188))}function Be(o){var l=o.alternate;if(!l){if(l=ms(o),l===null)throw Error(s(188));return l!==o?null:o}for(var h=o,v=l;;){var S=h.return;if(S===null)break;var Q=S.alternate;if(Q===null){if(v=S.return,v!==null){h=v;continue}break}if(S.child===Q.child){for(Q=S.child;Q;){if(Q===h)return sr(S),o;if(Q===v)return sr(S),l;Q=Q.sibling}throw Error(s(188))}if(h.return!==v.return)h=S,v=Q;else{for(var re=!1,Ne=S.child;Ne;){if(Ne===h){re=!0,h=S,v=Q;break}if(Ne===v){re=!0,v=S,h=Q;break}Ne=Ne.sibling}if(!re){for(Ne=Q.child;Ne;){if(Ne===h){re=!0,h=Q,v=S;break}if(Ne===v){re=!0,v=Q,h=S;break}Ne=Ne.sibling}if(!re)throw Error(s(189))}}if(h.alternate!==v)throw Error(s(190))}if(h.tag!==3)throw Error(s(188));return h.stateNode.current===h?o:l}function js(o){return o=Be(o),o!==null?rr(o):null}function rr(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=rr(o);if(l!==null)return l;o=o.sibling}return null}var Gn=t.unstable_scheduleCallback,li=t.unstable_cancelCallback,Wn=t.unstable_shouldYield,lr=t.unstable_requestPaint,wr=t.unstable_now,Hc=t.unstable_getCurrentPriorityLevel,pl=t.unstable_ImmediatePriority,Aa=t.unstable_UserBlockingPriority,Wi=t.unstable_NormalPriority,Kc=t.unstable_LowPriority,gl=t.unstable_IdlePriority,jo=null,da=null;function Vc(o){if(da&&typeof da.onCommitFiberRoot=="function")try{da.onCommitFiberRoot(jo,o,void 0,(o.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:$r,xl=Math.log,WA=Math.LN2;function $r(o){return o>>>=0,o===0?32:31-(xl(o)/WA|0)|0}var Bo=64,qn=4194304;function qa(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Co(o,l){var h=o.pendingLanes;if(h===0)return 0;var v=0,S=o.suspendedLanes,Q=o.pingedLanes,re=h&268435455;if(re!==0){var Ne=re&~S;Ne!==0?v=qa(Ne):(Q&=re,Q!==0&&(v=qa(Q)))}else re=h&~S,re!==0?v=qa(re):Q!==0&&(v=qa(Q));if(v===0)return 0;if(l!==0&&l!==v&&(l&S)===0&&(S=v&-v,Q=l&-l,S>=Q||S===16&&(Q&4194240)!==0))return l;if((v&4)!==0&&(v|=h&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=v;0<l;)h=31-zr(l),S=1<<h,v|=o[h],l&=~S;return v}function ja(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(o,l){for(var h=o.suspendedLanes,v=o.pingedLanes,S=o.expirationTimes,Q=o.pendingLanes;0<Q;){var re=31-zr(Q),Ne=1<<re,Qe=S[re];Qe===-1?((Ne&h)===0||(Ne&v)!==0)&&(S[re]=ja(Ne,l)):Qe<=l&&(o.expiredLanes|=Ne),Q&=~Ne}}function Ya(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ac(){var o=Bo;return Bo<<=1,(Bo&4194240)===0&&(Bo=64),o}function vl(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function So(o,l,h){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-zr(l),o[l]=h}function Ja(o,l){var h=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var v=o.eventTimes;for(o=o.expirationTimes;0<h;){var S=31-zr(h),Q=1<<S;l[S]=0,v[S]=-1,o[S]=-1,h&=~Q}}function wl(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var v=31-zr(h),S=1<<v;S&l|o[v]&l&&(o[v]|=l),h&=~S}}var Ys=0;function Eo(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var qi,Fo,zc,ic,_o,ko=!1,Tn=[],ci=null,Yn=null,ua=null,Uo=new Map,fs=new Map,Ai=[],qA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $c(o,l){switch(o){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":Uo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":fs.delete(l.pointerId)}}function ha(o,l,h,v,S,Q){return o===null||o.nativeEvent!==Q?(o={blockedOn:l,domEventName:h,eventSystemFlags:v,nativeEvent:Q,targetContainers:[S]},l!==null&&(l=rA(l),l!==null&&Fo(l)),o):(o.eventSystemFlags|=v,l=o.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),o)}function Fi(o,l,h,v,S){switch(l){case"focusin":return ci=ha(ci,o,l,h,v,S),!0;case"dragenter":return Yn=ha(Yn,o,l,h,v,S),!0;case"mouseover":return ua=ha(ua,o,l,h,v,S),!0;case"pointerover":var Q=S.pointerId;return Uo.set(Q,ha(Uo.get(Q)||null,o,l,h,v,S)),!0;case"gotpointercapture":return Q=S.pointerId,fs.set(Q,ha(fs.get(Q)||null,o,l,h,v,S)),!0}return!1}function Gc(o){var l=Tl(o.target);if(l!==null){var h=ms(l);if(h!==null){if(l=h.tag,l===13){if(l=Cs(h),l!==null){o.blockedOn=l,_o(o.priority,function(){zc(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function bl(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=To(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var v=new h.constructor(h.type,h);Ot=v,h.target.dispatchEvent(v),Ot=null}else return l=rA(h),l!==null&&Fo(l),o.blockedOn=h,!1;l.shift()}return!0}function Io(o,l,h){bl(o)&&h.delete(l)}function oc(){ko=!1,ci!==null&&bl(ci)&&(ci=null),Yn!==null&&bl(Yn)&&(Yn=null),ua!==null&&bl(ua)&&(ua=null),Uo.forEach(Io),fs.forEach(Io)}function Xa(o,l){o.blockedOn===l&&(o.blockedOn=null,ko||(ko=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oc)))}function Lo(o){function l(S){return Xa(S,o)}if(0<Tn.length){Xa(Tn[0],o);for(var h=1;h<Tn.length;h++){var v=Tn[h];v.blockedOn===o&&(v.blockedOn=null)}}for(ci!==null&&Xa(ci,o),Yn!==null&&Xa(Yn,o),ua!==null&&Xa(ua,o),Uo.forEach(l),fs.forEach(l),h=0;h<Ai.length;h++)v=Ai[h],v.blockedOn===o&&(v.blockedOn=null);for(;0<Ai.length&&(h=Ai[0],h.blockedOn===null);)Gc(h),h.blockedOn===null&&Ai.shift()}var Jn=k.ReactCurrentBatchConfig,yl=!0;function Qo(o,l,h,v){var S=Ys,Q=Jn.transition;Jn.transition=null;try{Ys=1,jl(o,l,h,v)}finally{Ys=S,Jn.transition=Q}}function Nl(o,l,h,v){var S=Ys,Q=Jn.transition;Jn.transition=null;try{Ys=4,jl(o,l,h,v)}finally{Ys=S,Jn.transition=Q}}function jl(o,l,h,v){if(yl){var S=To(o,l,h,v);if(S===null)eA(o,l,v,Ba,h),$c(o,v);else if(Fi(S,o,l,h,v))v.stopPropagation();else if($c(o,v),l&4&&-1<qA.indexOf(o)){for(;S!==null;){var Q=rA(S);if(Q!==null&&qi(Q),Q=To(o,l,h,v),Q===null&&eA(o,l,v,Ba,h),Q===S)break;S=Q}S!==null&&v.stopPropagation()}else eA(o,l,v,null,h)}}var Ba=null;function To(o,l,h,v){if(Ba=null,o=Lt(v),o=Tl(o),o!==null)if(l=ms(o),l===null)o=null;else if(h=l.tag,h===13){if(o=Cs(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Ba=o,null}function Po(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hc()){case pl:return 1;case Aa:return 4;case Wi:case Kc:return 16;case gl:return 536870912;default:return 16}default:return 16}}var Ca=null,_i=null,Yi=null;function lc(){if(Yi)return Yi;var o,l=_i,h=l.length,v,S="value"in Ca?Ca.value:Ca.textContent,Q=S.length;for(o=0;o<h&&l[o]===S[o];o++);var re=h-o;for(v=1;v<=re&&l[h-v]===S[Q-v];v++);return Yi=S.slice(o,1<v?1-v:void 0)}function Ro(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Sa(){return!0}function di(){return!1}function Bn(o){function l(h,v,S,Q,re){this._reactName=h,this._targetInst=S,this.type=v,this.nativeEvent=Q,this.target=re,this.currentTarget=null;for(var Ne in o)o.hasOwnProperty(Ne)&&(h=o[Ne],this[Ne]=h?h(Q):Q[Ne]);return this.isDefaultPrevented=(Q.defaultPrevented!=null?Q.defaultPrevented:Q.returnValue===!1)?Sa:di,this.isPropagationStopped=di,this}return ie(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),l}var Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bl=Bn(Ea),C=ie({},Ea,{view:0,detail:0}),Y=Bn(C),ve,Fe,Ke,ht=ie({},C,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ui,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ke&&(Ke&&o.type==="mousemove"?(ve=o.screenX-Ke.screenX,Fe=o.screenY-Ke.screenY):Fe=ve=0,Ke=o),ve)},movementY:function(o){return"movementY"in o?o.movementY:Fe}}),vt=Bn(ht),Zt=ie({},ht,{dataTransfer:0}),is=Bn(Zt),ws=ie({},C,{relatedTarget:0}),Bs=Bn(ws),$s=ie({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0}),Br=Bn($s),Rr=ie({},Ea,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),fr=Bn(Rr),Zr=ie({},Ea,{data:0}),cr=Bn(Zr),mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fa(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Xn[o])?!!l[o]:!1}function ui(){return Fa}var Cl=ie({},C,{key:function(o){if(o.key){var l=mn[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Ro(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Pn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ui,charCode:function(o){return o.type==="keypress"?Ro(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ro(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Ji=Bn(Cl),Do=ie({},ht,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=Bn(Do),Zi=ie({},C,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ui}),fn=Bn(Zi),_a=ie({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),Za=Bn(_a),Oo=ie({},ht,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Sl=Bn(Oo),en=[9,13,27,32],ka=A&&"CompositionEvent"in window,ei=null;A&&"documentMode"in document&&(ei=document.documentMode);var cc=A&&"TextEvent"in window&&!ei,Zn=A&&(!ka||ei&&8<ei&&11>=ei),eo=" ",Mo=!1;function El(o,l){switch(o){case"keyup":return en.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ki(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ua=!1;function ma(o,l){switch(o){case"compositionend":return ki(l);case"keypress":return l.which!==32?null:(Mo=!0,eo);case"textInput":return o=l.data,o===eo&&Mo?null:o;default:return null}}function fa(o,l){if(Ua)return o==="compositionend"||!ka&&El(o,l)?(o=lc(),Yi=_i=Ca=null,Ua=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Zn&&l.locale!=="ko"?null:l.data;default:return null}}var to={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hi(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!to[o.type]:l==="textarea"}function Ui(o,l,h,v){_t(v),l=ed(l,"onChange"),0<l.length&&(h=new Bl("onChange","change",null,h,v),o.push({event:h,listeners:l}))}var Ii=null,mi=null;function Dr(o){Xc(o,0)}function Ho(o){var l=mc(o);if(De(l))return o}function fi(o,l){if(o==="change")return l}var ti=!1;if(A){var Ko;if(A){var Vo="oninput"in document;if(!Vo){var Fl=document.createElement("div");Fl.setAttribute("oninput","return;"),Vo=typeof Fl.oninput=="function"}Ko=Vo}else Ko=!1;ti=Ko&&(!document.documentMode||9<document.documentMode)}function _l(){Ii&&(Ii.detachEvent("onpropertychange",Li),mi=Ii=null)}function Li(o){if(o.propertyName==="value"&&Ho(mi)){var l=[];Ui(l,mi,o,Lt(o)),yt(Dr,l)}}function so(o,l,h){o==="focusin"?(_l(),Ii=l,mi=h,Ii.attachEvent("onpropertychange",Li)):o==="focusout"&&_l()}function ro(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ho(mi)}function zo(o,l){if(o==="click")return Ho(l)}function no(o,l){if(o==="input"||o==="change")return Ho(l)}function $o(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Ir=typeof Object.is=="function"?Object.is:$o;function ea(o,l){if(Ir(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),v=Object.keys(l);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var S=h[v];if(!d.call(l,S)||!Ir(o[S],l[S]))return!1}return!0}function Gs(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ar(o,l){var h=Gs(o);o=0;for(var v;h;){if(h.nodeType===3){if(v=o+h.textContent.length,o<=l&&v>=l)return{node:h,offset:l-o};o=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Gs(h)}}function Or(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Or(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function tn(){for(var o=window,l=nt();l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=nt(o.document)}return l}function pi(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function Wc(o){var l=tn(),h=o.focusedElem,v=o.selectionRange;if(l!==h&&h&&h.ownerDocument&&Or(h.ownerDocument.documentElement,h)){if(v!==null&&pi(h)){if(l=v.start,o=v.end,o===void 0&&(o=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(o,h.value.length);else if(o=(l=h.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var S=h.textContent.length,Q=Math.min(v.start,S);v=v.end===void 0?Q:Math.min(v.end,S),!o.extend&&Q>v&&(S=v,v=Q,Q=S),S=Ar(h,Q);var re=Ar(h,v);S&&re&&(o.rangeCount!==1||o.anchorNode!==S.node||o.anchorOffset!==S.offset||o.focusNode!==re.node||o.focusOffset!==re.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),o.removeAllRanges(),Q>v?(o.addRange(l),o.extend(re.node,re.offset)):(l.setEnd(re.node,re.offset),o.addRange(l)))}}for(l=[],o=h;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)o=l[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Ac=A&&"documentMode"in document&&11>=document.documentMode,ao=null,YA=null,dc=null,JA=!1;function kd(o,l,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;JA||ao==null||ao!==nt(v)||(v=ao,"selectionStart"in v&&pi(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),dc&&ea(dc,v)||(dc=v,v=ed(YA,"onSelect"),0<v.length&&(l=new Bl("onSelect","select",null,l,h),o.push({event:l,listeners:v}),l.target=ao)))}function qc(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var kl={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},Ul={},Ud={};A&&(Ud=document.createElement("div").style,"AnimationEvent"in window||(delete kl.animationend.animation,delete kl.animationiteration.animation,delete kl.animationstart.animation),"TransitionEvent"in window||delete kl.transitionend.transition);function Yc(o){if(Ul[o])return Ul[o];if(!kl[o])return o;var l=kl[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in Ud)return Ul[o]=l[h];return o}var Id=Yc("animationend"),Ld=Yc("animationiteration"),Qd=Yc("animationstart"),Td=Yc("transitionend"),Pd=new Map,Rd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qi(o,l){Pd.set(o,l),i(l,[o])}for(var uc=0;uc<Rd.length;uc++){var ta=Rd[uc],si=ta.toLowerCase(),XA=ta[0].toUpperCase()+ta.slice(1);Qi(si,"on"+XA)}Qi(Id,"onAnimationEnd"),Qi(Ld,"onAnimationIteration"),Qi(Qd,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(Td,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ku=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function Jc(o,l,h){var v=o.type||"unknown-event";o.currentTarget=h,ze(v,l,void 0,o),o.currentTarget=null}function Xc(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var v=o[h],S=v.event;v=v.listeners;e:{var Q=void 0;if(l)for(var re=v.length-1;0<=re;re--){var Ne=v[re],Qe=Ne.instance,at=Ne.currentTarget;if(Ne=Ne.listener,Qe!==Q&&S.isPropagationStopped())break e;Jc(S,Ne,at),Q=Qe}else for(re=0;re<v.length;re++){if(Ne=v[re],Qe=Ne.instance,at=Ne.currentTarget,Ne=Ne.listener,Qe!==Q&&S.isPropagationStopped())break e;Jc(S,Ne,at),Q=Qe}}}if(mr)throw o=$n,mr=!1,$n=null,o}function pr(o,l){var h=l[La];h===void 0&&(h=l[La]=new Set);var v=o+"__bubble";h.has(v)||(Zc(l,o,2,!1),h.add(v))}function ZA(o,l,h){var v=0;l&&(v|=4),Zc(h,o,v,l)}var hc="_reactListening"+Math.random().toString(36).slice(2);function Il(o){if(!o[hc]){o[hc]=!0,n.forEach(function(h){h!=="selectionchange"&&(Ku.has(h)||ZA(h,!1,o),ZA(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[hc]||(l[hc]=!0,ZA("selectionchange",!1,l))}}function Zc(o,l,h,v){switch(Po(l)){case 1:var S=Qo;break;case 4:S=Nl;break;default:S=jl}h=S.bind(null,l,h,o),S=void 0,!us||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),v?S!==void 0?o.addEventListener(l,h,{capture:!0,passive:S}):o.addEventListener(l,h,!0):S!==void 0?o.addEventListener(l,h,{passive:S}):o.addEventListener(l,h,!1)}function eA(o,l,h,v,S){var Q=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var re=v.tag;if(re===3||re===4){var Ne=v.stateNode.containerInfo;if(Ne===S||Ne.nodeType===8&&Ne.parentNode===S)break;if(re===4)for(re=v.return;re!==null;){var Qe=re.tag;if((Qe===3||Qe===4)&&(Qe=re.stateNode.containerInfo,Qe===S||Qe.nodeType===8&&Qe.parentNode===S))return;re=re.return}for(;Ne!==null;){if(re=Tl(Ne),re===null)return;if(Qe=re.tag,Qe===5||Qe===6){v=Q=re;continue e}Ne=Ne.parentNode}}v=v.return}yt(function(){var at=Q,jt=Lt(h),St=[];e:{var Nt=Pd.get(o);if(Nt!==void 0){var $t=Bl,ss=o;switch(o){case"keypress":if(Ro(h)===0)break e;case"keydown":case"keyup":$t=Ji;break;case"focusin":ss="focus",$t=Bs;break;case"focusout":ss="blur",$t=Bs;break;case"beforeblur":case"afterblur":$t=Bs;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=vt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=is;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=fn;break;case Id:case Ld:case Qd:$t=Br;break;case Td:$t=Za;break;case"scroll":$t=Y;break;case"wheel":$t=Sl;break;case"copy":case"cut":case"paste":$t=fr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=Xi}var ls=(l&4)!==0,xn=!ls&&o==="scroll",Xe=ls?Nt!==null?Nt+"Capture":null:Nt;ls=[];for(var Oe=at,tt;Oe!==null;){tt=Oe;var kt=tt.stateNode;if(tt.tag===5&&kt!==null&&(tt=kt,Xe!==null&&(kt=Fs(Oe,Xe),kt!=null&&ls.push(tA(Oe,kt,tt)))),xn)break;Oe=Oe.return}0<ls.length&&(Nt=new $t(Nt,ss,null,h,jt),St.push({event:Nt,listeners:ls}))}}if((l&7)===0){e:{if(Nt=o==="mouseover"||o==="pointerover",$t=o==="mouseout"||o==="pointerout",Nt&&h!==Ot&&(ss=h.relatedTarget||h.fromElement)&&(Tl(ss)||ss[sa]))break e;if(($t||Nt)&&(Nt=jt.window===jt?jt:(Nt=jt.ownerDocument)?Nt.defaultView||Nt.parentWindow:window,$t?(ss=h.relatedTarget||h.toElement,$t=at,ss=ss?Tl(ss):null,ss!==null&&(xn=ms(ss),ss!==xn||ss.tag!==5&&ss.tag!==6)&&(ss=null)):($t=null,ss=at),$t!==ss)){if(ls=vt,kt="onMouseLeave",Xe="onMouseEnter",Oe="mouse",(o==="pointerout"||o==="pointerover")&&(ls=Xi,kt="onPointerLeave",Xe="onPointerEnter",Oe="pointer"),xn=$t==null?Nt:mc($t),tt=ss==null?Nt:mc(ss),Nt=new ls(kt,Oe+"leave",$t,h,jt),Nt.target=xn,Nt.relatedTarget=tt,kt=null,Tl(jt)===at&&(ls=new ls(Xe,Oe+"enter",ss,h,jt),ls.target=tt,ls.relatedTarget=xn,kt=ls),xn=kt,$t&&ss)t:{for(ls=$t,Xe=ss,Oe=0,tt=ls;tt;tt=Ll(tt))Oe++;for(tt=0,kt=Xe;kt;kt=Ll(kt))tt++;for(;0<Oe-tt;)ls=Ll(ls),Oe--;for(;0<tt-Oe;)Xe=Ll(Xe),tt--;for(;Oe--;){if(ls===Xe||Xe!==null&&ls===Xe.alternate)break t;ls=Ll(ls),Xe=Ll(Xe)}ls=null}else ls=null;$t!==null&&Vu(St,Nt,$t,ls,!1),ss!==null&&xn!==null&&Vu(St,xn,ss,ls,!0)}}e:{if(Nt=at?mc(at):window,$t=Nt.nodeName&&Nt.nodeName.toLowerCase(),$t==="select"||$t==="input"&&Nt.type==="file")var ds=fi;else if(hi(Nt))if(ti)ds=no;else{ds=ro;var gs=so}else($t=Nt.nodeName)&&$t.toLowerCase()==="input"&&(Nt.type==="checkbox"||Nt.type==="radio")&&(ds=zo);if(ds&&(ds=ds(o,at))){Ui(St,ds,h,jt);break e}gs&&gs(o,Nt,at),o==="focusout"&&(gs=Nt._wrapperState)&&gs.controlled&&Nt.type==="number"&&Te(Nt,"number",Nt.value)}switch(gs=at?mc(at):window,o){case"focusin":(hi(gs)||gs.contentEditable==="true")&&(ao=gs,YA=at,dc=null);break;case"focusout":dc=YA=ao=null;break;case"mousedown":JA=!0;break;case"contextmenu":case"mouseup":case"dragend":JA=!1,kd(St,h,jt);break;case"selectionchange":if(Ac)break;case"keydown":case"keyup":kd(St,h,jt)}var xs;if(ka)e:{switch(o){case"compositionstart":var Ss="onCompositionStart";break e;case"compositionend":Ss="onCompositionEnd";break e;case"compositionupdate":Ss="onCompositionUpdate";break e}Ss=void 0}else Ua?El(o,h)&&(Ss="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Ss="onCompositionStart");Ss&&(Zn&&h.locale!=="ko"&&(Ua||Ss!=="onCompositionStart"?Ss==="onCompositionEnd"&&Ua&&(xs=lc()):(Ca=jt,_i="value"in Ca?Ca.value:Ca.textContent,Ua=!0)),gs=ed(at,Ss),0<gs.length&&(Ss=new cr(Ss,o,null,h,jt),St.push({event:Ss,listeners:gs}),xs?Ss.data=xs:(xs=ki(h),xs!==null&&(Ss.data=xs)))),(xs=cc?ma(o,h):fa(o,h))&&(at=ed(at,"onBeforeInput"),0<at.length&&(jt=new cr("onBeforeInput","beforeinput",null,h,jt),St.push({event:jt,listeners:at}),jt.data=xs))}Xc(St,l)})}function tA(o,l,h){return{instance:o,listener:l,currentTarget:h}}function ed(o,l){for(var h=l+"Capture",v=[];o!==null;){var S=o,Q=S.stateNode;S.tag===5&&Q!==null&&(S=Q,Q=Fs(o,h),Q!=null&&v.unshift(tA(o,Q,S)),Q=Fs(o,l),Q!=null&&v.push(tA(o,Q,S))),o=o.return}return v}function Ll(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Vu(o,l,h,v,S){for(var Q=l._reactName,re=[];h!==null&&h!==v;){var Ne=h,Qe=Ne.alternate,at=Ne.stateNode;if(Qe!==null&&Qe===v)break;Ne.tag===5&&at!==null&&(Ne=at,S?(Qe=Fs(h,Q),Qe!=null&&re.unshift(tA(h,Qe,Ne))):S||(Qe=Fs(h,Q),Qe!=null&&re.push(tA(h,Qe,Ne)))),h=h.return}re.length!==0&&o.push({event:l,listeners:re})}var zu=/\r\n?/g,_=/\u0000|\uFFFD/g;function M(o){return(typeof o=="string"?o:""+o).replace(zu,`
`).replace(_,"")}function Z(o,l,h){if(l=M(l),M(o)!==l&&h)throw Error(s(425))}function we(){}var qe=null,Kt=null;function Wt(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ps=typeof setTimeout=="function"?setTimeout:void 0,sn=typeof clearTimeout=="function"?clearTimeout:void 0,Mr=typeof Promise=="function"?Promise:void 0,Ql=typeof queueMicrotask=="function"?queueMicrotask:typeof Mr<"u"?function(o){return Mr.resolve(null).then(o).catch($u)}:Ps;function $u(o){setTimeout(function(){throw o})}function Gu(o,l){var h=l,v=0;do{var S=h.nextSibling;if(o.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(v===0){o.removeChild(S),Lo(l);return}v--}else h!=="$"&&h!=="$?"&&h!=="$!"||v++;h=S}while(h);Lo(l)}function pa(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function gi(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}var Ia=Math.random().toString(36).slice(2),io="__reactFiber$"+Ia,sA="__reactProps$"+Ia,sa="__reactContainer$"+Ia,La="__reactEvents$"+Ia,Rp="__reactListeners$"+Ia,Dp="__reactHandles$"+Ia;function Tl(o){var l=o[io];if(l)return l;for(var h=o.parentNode;h;){if(l=h[sa]||h[io]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=gi(o);o!==null;){if(h=o[io])return h;o=gi(o)}return l}o=h,h=o.parentNode}return null}function rA(o){return o=o[io]||o[sa],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function mc(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(s(33))}function td(o){return o[sA]||null}var Wu=[],Wo=-1;function Ti(o){return{current:o}}function dr(o){0>Wo||(o.current=Wu[Wo],Wu[Wo]=null,Wo--)}function gr(o,l){Wo++,Wu[Wo]=o.current,o.current=l}var Pl={},Rn=Ti(Pl),Qa=Ti(!1),fc=Pl;function nA(o,l){var h=o.type.contextTypes;if(!h)return Pl;var v=o.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===l)return v.__reactInternalMemoizedMaskedChildContext;var S={},Q;for(Q in h)S[Q]=l[Q];return v&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=S),S}function Ta(o){return o=o.childContextTypes,o!=null}function Dd(){dr(Qa),dr(Rn)}function Yh(o,l,h){if(Rn.current!==Pl)throw Error(s(168));gr(Rn,l),gr(Qa,h)}function qu(o,l,h){var v=o.stateNode;if(l=l.childContextTypes,typeof v.getChildContext!="function")return h;v=v.getChildContext();for(var S in v)if(!(S in l))throw Error(s(108,me(o)||"Unknown",S));return ie({},h,v)}function pc(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Pl,fc=Rn.current,gr(Rn,o),gr(Qa,Qa.current),!0}function Jh(o,l,h){var v=o.stateNode;if(!v)throw Error(s(169));h?(o=qu(o,l,fc),v.__reactInternalMemoizedMergedChildContext=o,dr(Qa),dr(Rn),gr(Rn,o)):dr(Qa),gr(Qa,h)}var qo=null,sd=!1,p=!1;function w(o){qo===null?qo=[o]:qo.push(o)}function U(o){sd=!0,w(o)}function D(){if(!p&&qo!==null){p=!0;var o=0,l=Ys;try{var h=qo;for(Ys=1;o<h.length;o++){var v=h[o];do v=v(!0);while(v!==null)}qo=null,sd=!1}catch(S){throw qo!==null&&(qo=qo.slice(o+1)),Gn(pl,D),S}finally{Ys=l,p=!1}}return null}var J=[],ne=0,oe=null,Ae=0,ue=[],ge=0,Le=null,Ye=1,xe="";function Re(o,l){J[ne++]=Ae,J[ne++]=oe,oe=o,Ae=l}function Ge(o,l,h){ue[ge++]=Ye,ue[ge++]=xe,ue[ge++]=Le,Le=o;var v=Ye;o=xe;var S=32-zr(v)-1;v&=~(1<<S),h+=1;var Q=32-zr(l)+S;if(30<Q){var re=S-S%5;Q=(v&(1<<re)-1).toString(32),v>>=re,S-=re,Ye=1<<32-zr(l)+S|h<<S|v,xe=Q+o}else Ye=1<<Q|h<<S|v,xe=o}function ut(o){o.return!==null&&(Re(o,1),Ge(o,1,0))}function Ze(o){for(;o===oe;)oe=J[--ne],J[ne]=null,Ae=J[--ne],J[ne]=null;for(;o===Le;)Le=ue[--ge],ue[ge]=null,xe=ue[--ge],ue[ge]=null,Ye=ue[--ge],ue[ge]=null}var ot=null,ct=null,pt=!1,xt=null;function cs(o,l){var h=uo(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=o,l=o.deletions,l===null?(o.deletions=[h],o.flags|=16):l.push(h)}function Jt(o,l){switch(o.tag){case 5:var h=o.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,ot=o,ct=pa(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,ot=o,ct=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=Le!==null?{id:Ye,overflow:xe}:null,o.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=uo(18,null,null,0),h.stateNode=l,h.return=o,o.child=h,ot=o,ct=null,!0):!1;default:return!1}}function _s(o){return(o.mode&1)!==0&&(o.flags&128)===0}function ts(o){if(pt){var l=ct;if(l){var h=l;if(!Jt(o,l)){if(_s(o))throw Error(s(418));l=pa(h.nextSibling);var v=ot;l&&Jt(o,l)?cs(v,h):(o.flags=o.flags&-4097|2,pt=!1,ot=o)}}else{if(_s(o))throw Error(s(418));o.flags=o.flags&-4097|2,pt=!1,ot=o}}}function Os(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ot=o}function Gr(o){if(o!==ot)return!1;if(!pt)return Os(o),pt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Wt(o.type,o.memoizedProps)),l&&(l=ct)){if(_s(o))throw ks(),Error(s(418));for(;l;)cs(o,l),l=pa(l.nextSibling)}if(Os(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(l===0){ct=pa(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}o=o.nextSibling}ct=null}}else ct=ot?pa(o.stateNode.nextSibling):null;return!0}function ks(){for(var o=ct;o;)o=pa(o.nextSibling)}function Xt(){ct=ot=null,pt=!1}function Dt(o){xt===null?xt=[o]:xt.push(o)}var rn=k.ReactCurrentBatchConfig;function bs(o,l,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(s(309));var v=h.stateNode}if(!v)throw Error(s(147,o));var S=v,Q=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===Q?l.ref:(l=function(re){var Ne=S.refs;re===null?delete Ne[Q]:Ne[Q]=re},l._stringRef=Q,l)}if(typeof o!="string")throw Error(s(284));if(!h._owner)throw Error(s(290,o))}return o}function Rs(o,l){throw o=Object.prototype.toString.call(l),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function Cr(o){var l=o._init;return l(o._payload)}function Cn(o){function l(Xe,Oe){if(o){var tt=Xe.deletions;tt===null?(Xe.deletions=[Oe],Xe.flags|=16):tt.push(Oe)}}function h(Xe,Oe){if(!o)return null;for(;Oe!==null;)l(Xe,Oe),Oe=Oe.sibling;return null}function v(Xe,Oe){for(Xe=new Map;Oe!==null;)Oe.key!==null?Xe.set(Oe.key,Oe):Xe.set(Oe.index,Oe),Oe=Oe.sibling;return Xe}function S(Xe,Oe){return Xe=mA(Xe,Oe),Xe.index=0,Xe.sibling=null,Xe}function Q(Xe,Oe,tt){return Xe.index=tt,o?(tt=Xe.alternate,tt!==null?(tt=tt.index,tt<Oe?(Xe.flags|=2,Oe):tt):(Xe.flags|=2,Oe)):(Xe.flags|=1048576,Oe)}function re(Xe){return o&&Xe.alternate===null&&(Xe.flags|=2),Xe}function Ne(Xe,Oe,tt,kt){return Oe===null||Oe.tag!==6?(Oe=mg(tt,Xe.mode,kt),Oe.return=Xe,Oe):(Oe=S(Oe,tt),Oe.return=Xe,Oe)}function Qe(Xe,Oe,tt,kt){var ds=tt.type;return ds===H?jt(Xe,Oe,tt.props.children,kt,tt.key):Oe!==null&&(Oe.elementType===ds||typeof ds=="object"&&ds!==null&&ds.$$typeof===W&&Cr(ds)===Oe.type)?(kt=S(Oe,tt.props),kt.ref=bs(Xe,Oe,tt),kt.return=Xe,kt):(kt=gm(tt.type,tt.key,tt.props,null,Xe.mode,kt),kt.ref=bs(Xe,Oe,tt),kt.return=Xe,kt)}function at(Xe,Oe,tt,kt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==tt.containerInfo||Oe.stateNode.implementation!==tt.implementation?(Oe=fg(tt,Xe.mode,kt),Oe.return=Xe,Oe):(Oe=S(Oe,tt.children||[]),Oe.return=Xe,Oe)}function jt(Xe,Oe,tt,kt,ds){return Oe===null||Oe.tag!==7?(Oe=Ad(tt,Xe.mode,kt,ds),Oe.return=Xe,Oe):(Oe=S(Oe,tt),Oe.return=Xe,Oe)}function St(Xe,Oe,tt){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=mg(""+Oe,Xe.mode,tt),Oe.return=Xe,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case $:return tt=gm(Oe.type,Oe.key,Oe.props,null,Xe.mode,tt),tt.ref=bs(Xe,null,Oe),tt.return=Xe,tt;case z:return Oe=fg(Oe,Xe.mode,tt),Oe.return=Xe,Oe;case W:var kt=Oe._init;return St(Xe,kt(Oe._payload),tt)}if(dt(Oe)||le(Oe))return Oe=Ad(Oe,Xe.mode,tt,null),Oe.return=Xe,Oe;Rs(Xe,Oe)}return null}function Nt(Xe,Oe,tt,kt){var ds=Oe!==null?Oe.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number")return ds!==null?null:Ne(Xe,Oe,""+tt,kt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case $:return tt.key===ds?Qe(Xe,Oe,tt,kt):null;case z:return tt.key===ds?at(Xe,Oe,tt,kt):null;case W:return ds=tt._init,Nt(Xe,Oe,ds(tt._payload),kt)}if(dt(tt)||le(tt))return ds!==null?null:jt(Xe,Oe,tt,kt,null);Rs(Xe,tt)}return null}function $t(Xe,Oe,tt,kt,ds){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return Xe=Xe.get(tt)||null,Ne(Oe,Xe,""+kt,ds);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case $:return Xe=Xe.get(kt.key===null?tt:kt.key)||null,Qe(Oe,Xe,kt,ds);case z:return Xe=Xe.get(kt.key===null?tt:kt.key)||null,at(Oe,Xe,kt,ds);case W:var gs=kt._init;return $t(Xe,Oe,tt,gs(kt._payload),ds)}if(dt(kt)||le(kt))return Xe=Xe.get(tt)||null,jt(Oe,Xe,kt,ds,null);Rs(Oe,kt)}return null}function ss(Xe,Oe,tt,kt){for(var ds=null,gs=null,xs=Oe,Ss=Oe=0,oa=null;xs!==null&&Ss<tt.length;Ss++){xs.index>Ss?(oa=xs,xs=null):oa=xs.sibling;var or=Nt(Xe,xs,tt[Ss],kt);if(or===null){xs===null&&(xs=oa);break}o&&xs&&or.alternate===null&&l(Xe,xs),Oe=Q(or,Oe,Ss),gs===null?ds=or:gs.sibling=or,gs=or,xs=oa}if(Ss===tt.length)return h(Xe,xs),pt&&Re(Xe,Ss),ds;if(xs===null){for(;Ss<tt.length;Ss++)xs=St(Xe,tt[Ss],kt),xs!==null&&(Oe=Q(xs,Oe,Ss),gs===null?ds=xs:gs.sibling=xs,gs=xs);return pt&&Re(Xe,Ss),ds}for(xs=v(Xe,xs);Ss<tt.length;Ss++)oa=$t(xs,Xe,Ss,tt[Ss],kt),oa!==null&&(o&&oa.alternate!==null&&xs.delete(oa.key===null?Ss:oa.key),Oe=Q(oa,Oe,Ss),gs===null?ds=oa:gs.sibling=oa,gs=oa);return o&&xs.forEach(function(fA){return l(Xe,fA)}),pt&&Re(Xe,Ss),ds}function ls(Xe,Oe,tt,kt){var ds=le(tt);if(typeof ds!="function")throw Error(s(150));if(tt=ds.call(tt),tt==null)throw Error(s(151));for(var gs=ds=null,xs=Oe,Ss=Oe=0,oa=null,or=tt.next();xs!==null&&!or.done;Ss++,or=tt.next()){xs.index>Ss?(oa=xs,xs=null):oa=xs.sibling;var fA=Nt(Xe,xs,or.value,kt);if(fA===null){xs===null&&(xs=oa);break}o&&xs&&fA.alternate===null&&l(Xe,xs),Oe=Q(fA,Oe,Ss),gs===null?ds=fA:gs.sibling=fA,gs=fA,xs=oa}if(or.done)return h(Xe,xs),pt&&Re(Xe,Ss),ds;if(xs===null){for(;!or.done;Ss++,or=tt.next())or=St(Xe,or.value,kt),or!==null&&(Oe=Q(or,Oe,Ss),gs===null?ds=or:gs.sibling=or,gs=or);return pt&&Re(Xe,Ss),ds}for(xs=v(Xe,xs);!or.done;Ss++,or=tt.next())or=$t(xs,Xe,Ss,or.value,kt),or!==null&&(o&&or.alternate!==null&&xs.delete(or.key===null?Ss:or.key),Oe=Q(or,Oe,Ss),gs===null?ds=or:gs.sibling=or,gs=or);return o&&xs.forEach(function(GC){return l(Xe,GC)}),pt&&Re(Xe,Ss),ds}function xn(Xe,Oe,tt,kt){if(typeof tt=="object"&&tt!==null&&tt.type===H&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case $:e:{for(var ds=tt.key,gs=Oe;gs!==null;){if(gs.key===ds){if(ds=tt.type,ds===H){if(gs.tag===7){h(Xe,gs.sibling),Oe=S(gs,tt.props.children),Oe.return=Xe,Xe=Oe;break e}}else if(gs.elementType===ds||typeof ds=="object"&&ds!==null&&ds.$$typeof===W&&Cr(ds)===gs.type){h(Xe,gs.sibling),Oe=S(gs,tt.props),Oe.ref=bs(Xe,gs,tt),Oe.return=Xe,Xe=Oe;break e}h(Xe,gs);break}else l(Xe,gs);gs=gs.sibling}tt.type===H?(Oe=Ad(tt.props.children,Xe.mode,kt,tt.key),Oe.return=Xe,Xe=Oe):(kt=gm(tt.type,tt.key,tt.props,null,Xe.mode,kt),kt.ref=bs(Xe,Oe,tt),kt.return=Xe,Xe=kt)}return re(Xe);case z:e:{for(gs=tt.key;Oe!==null;){if(Oe.key===gs)if(Oe.tag===4&&Oe.stateNode.containerInfo===tt.containerInfo&&Oe.stateNode.implementation===tt.implementation){h(Xe,Oe.sibling),Oe=S(Oe,tt.children||[]),Oe.return=Xe,Xe=Oe;break e}else{h(Xe,Oe);break}else l(Xe,Oe);Oe=Oe.sibling}Oe=fg(tt,Xe.mode,kt),Oe.return=Xe,Xe=Oe}return re(Xe);case W:return gs=tt._init,xn(Xe,Oe,gs(tt._payload),kt)}if(dt(tt))return ss(Xe,Oe,tt,kt);if(le(tt))return ls(Xe,Oe,tt,kt);Rs(Xe,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"?(tt=""+tt,Oe!==null&&Oe.tag===6?(h(Xe,Oe.sibling),Oe=S(Oe,tt),Oe.return=Xe,Xe=Oe):(h(Xe,Oe),Oe=mg(tt,Xe.mode,kt),Oe.return=Xe,Xe=Oe),re(Xe)):h(Xe,Oe)}return xn}var cn=Cn(!0),Hr=Cn(!1),pn=Ti(null),Sn=null,Lr=null,Ws=null;function nr(){Ws=Lr=Sn=null}function Qr(o){var l=pn.current;dr(pn),o._currentValue=l}function ar(o,l,h){for(;o!==null;){var v=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),o===h)break;o=o.return}}function Wr(o,l){Sn=o,Ws=Lr=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(vi=!0),o.firstContext=null)}function qr(o){var l=o._currentValue;if(Ws!==o)if(o={context:o,memoizedValue:l,next:null},Lr===null){if(Sn===null)throw Error(s(308));Lr=o,Sn.dependencies={lanes:0,firstContext:o}}else Lr=Lr.next=o;return l}var br=null;function ra(o){br===null?br=[o]:br.push(o)}function xr(o,l,h,v){var S=l.interleaved;return S===null?(h.next=h,ra(l)):(h.next=S.next,S.next=h),l.interleaved=h,yr(o,v)}function yr(o,l){o.lanes|=l;var h=o.alternate;for(h!==null&&(h.lanes|=l),h=o,o=o.return;o!==null;)o.childLanes|=l,h=o.alternate,h!==null&&(h.childLanes|=l),h=o,o=o.return;return h.tag===3?h.stateNode:null}var An=!1;function Dn(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function nn(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function an(o,l,h){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(ir&2)!==0){var S=v.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),v.pending=l,yr(o,h)}return S=v.interleaved,S===null?(l.next=l,ra(v)):(l.next=S.next,S.next=l),v.interleaved=l,yr(o,h)}function na(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var v=l.lanes;v&=o.pendingLanes,h|=v,l.lanes=h,wl(o,h)}}function Nr(o,l){var h=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var S=null,Q=null;if(h=h.firstBaseUpdate,h!==null){do{var re={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};Q===null?S=Q=re:Q=Q.next=re,h=h.next}while(h!==null);Q===null?S=Q=l:Q=Q.next=l}else S=Q=l;h={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:Q,shared:v.shared,effects:v.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}function aa(o,l,h,v){var S=o.updateQueue;An=!1;var Q=S.firstBaseUpdate,re=S.lastBaseUpdate,Ne=S.shared.pending;if(Ne!==null){S.shared.pending=null;var Qe=Ne,at=Qe.next;Qe.next=null,re===null?Q=at:re.next=at,re=Qe;var jt=o.alternate;jt!==null&&(jt=jt.updateQueue,Ne=jt.lastBaseUpdate,Ne!==re&&(Ne===null?jt.firstBaseUpdate=at:Ne.next=at,jt.lastBaseUpdate=Qe))}if(Q!==null){var St=S.baseState;re=0,jt=at=Qe=null,Ne=Q;do{var Nt=Ne.lane,$t=Ne.eventTime;if((v&Nt)===Nt){jt!==null&&(jt=jt.next={eventTime:$t,lane:0,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null});e:{var ss=o,ls=Ne;switch(Nt=l,$t=h,ls.tag){case 1:if(ss=ls.payload,typeof ss=="function"){St=ss.call($t,St,Nt);break e}St=ss;break e;case 3:ss.flags=ss.flags&-65537|128;case 0:if(ss=ls.payload,Nt=typeof ss=="function"?ss.call($t,St,Nt):ss,Nt==null)break e;St=ie({},St,Nt);break e;case 2:An=!0}}Ne.callback!==null&&Ne.lane!==0&&(o.flags|=64,Nt=S.effects,Nt===null?S.effects=[Ne]:Nt.push(Ne))}else $t={eventTime:$t,lane:Nt,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null},jt===null?(at=jt=$t,Qe=St):jt=jt.next=$t,re|=Nt;if(Ne=Ne.next,Ne===null){if(Ne=S.shared.pending,Ne===null)break;Nt=Ne,Ne=Nt.next,Nt.next=null,S.lastBaseUpdate=Nt,S.shared.pending=null}}while(!0);if(jt===null&&(Qe=St),S.baseState=Qe,S.firstBaseUpdate=at,S.lastBaseUpdate=jt,l=S.shared.interleaved,l!==null){S=l;do re|=S.lane,S=S.next;while(S!==l)}else Q===null&&(S.shared.lanes=0);id|=re,o.lanes=re,o.memoizedState=St}}function xi(o,l,h){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var v=o[l],S=v.callback;if(S!==null){if(v.callback=null,v=h,typeof S!="function")throw Error(s(191,S));S.call(v)}}}var Pi={},En=Ti(Pi),on=Ti(Pi),Rl=Ti(Pi);function Yo(o){if(o===Pi)throw Error(s(174));return o}function aA(o,l){switch(gr(Rl,l),gr(on,o),gr(En,Pi),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Bt(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Bt(l,o)}dr(En),gr(En,l)}function oo(){dr(En),dr(on),dr(Rl)}function Xh(o){Yo(Rl.current);var l=Yo(En.current),h=Bt(l,o.type);l!==h&&(gr(on,o),gr(En,h))}function Yu(o){on.current===o&&(dr(En),dr(on))}var Fr=Ti(0);function Ri(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ju=[];function Xu(){for(var o=0;o<Ju.length;o++)Ju[o]._workInProgressVersionPrimary=null;Ju.length=0}var Od=k.ReactCurrentDispatcher,Md=k.ReactCurrentBatchConfig,lo=0,Tr=null,dn=null,ln=null,iA=!1,Jo=!1,oA=0,Op=0;function gn(){throw Error(s(321))}function Hd(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Ir(o[h],l[h]))return!1;return!0}function rd(o,l,h,v,S,Q){if(lo=Q,Tr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Od.current=o===null||o.memoizedState===null?vC:wC,o=h(v,S),Jo){Q=0;do{if(Jo=!1,oA=0,25<=Q)throw Error(s(301));Q+=1,ln=dn=null,l.updateQueue=null,Od.current=bC,o=h(v,S)}while(Jo)}if(Od.current=rm,l=dn!==null&&dn.next!==null,lo=0,ln=dn=Tr=null,iA=!1,l)throw Error(s(300));return o}function co(){var o=oA!==0;return oA=0,o}function Di(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Tr.memoizedState=ln=o:ln=ln.next=o,ln}function ri(){if(dn===null){var o=Tr.alternate;o=o!==null?o.memoizedState:null}else o=dn.next;var l=ln===null?Tr.memoizedState:ln.next;if(l!==null)ln=l,dn=o;else{if(o===null)throw Error(s(310));dn=o,o={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},ln===null?Tr.memoizedState=ln=o:ln=ln.next=o}return ln}function nd(o,l){return typeof l=="function"?l(o):l}function Kd(o){var l=ri(),h=l.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=o;var v=dn,S=v.baseQueue,Q=h.pending;if(Q!==null){if(S!==null){var re=S.next;S.next=Q.next,Q.next=re}v.baseQueue=S=Q,h.pending=null}if(S!==null){Q=S.next,v=v.baseState;var Ne=re=null,Qe=null,at=Q;do{var jt=at.lane;if((lo&jt)===jt)Qe!==null&&(Qe=Qe.next={lane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),v=at.hasEagerState?at.eagerState:o(v,at.action);else{var St={lane:jt,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};Qe===null?(Ne=Qe=St,re=v):Qe=Qe.next=St,Tr.lanes|=jt,id|=jt}at=at.next}while(at!==null&&at!==Q);Qe===null?re=v:Qe.next=Ne,Ir(v,l.memoizedState)||(vi=!0),l.memoizedState=v,l.baseState=re,l.baseQueue=Qe,h.lastRenderedState=v}if(o=h.interleaved,o!==null){S=o;do Q=S.lane,Tr.lanes|=Q,id|=Q,S=S.next;while(S!==o)}else S===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Dl(o){var l=ri(),h=l.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=o;var v=h.dispatch,S=h.pending,Q=l.memoizedState;if(S!==null){h.pending=null;var re=S=S.next;do Q=o(Q,re.action),re=re.next;while(re!==S);Ir(Q,l.memoizedState)||(vi=!0),l.memoizedState=Q,l.baseQueue===null&&(l.baseState=Q),h.lastRenderedState=Q}return[Q,v]}function Zh(){}function Zu(o,l){var h=Tr,v=ri(),S=l(),Q=!Ir(v.memoizedState,S);if(Q&&(v.memoizedState=S,vi=!0),v=v.queue,$d(tm.bind(null,h,v,o),[o]),v.getSnapshot!==l||Q||ln!==null&&ln.memoizedState.tag&1){if(h.flags|=2048,ni(9,eh.bind(null,h,v,S,l),void 0,null),ia===null)throw Error(s(349));(lo&30)!==0||em(h,l,S)}return S}function em(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=Tr.updateQueue,l===null?(l={lastEffect:null,stores:null},Tr.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function eh(o,l,h,v){l.value=h,l.getSnapshot=v,lA(l)&&Vd(o)}function tm(o,l,h){return h(function(){lA(l)&&Vd(o)})}function lA(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Ir(o,h)}catch{return!0}}function Vd(o){var l=yr(o,1);l!==null&&sl(l,o,1,-1)}function ad(o){var l=Di();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:o},l.queue=o,o=o.dispatch=xC.bind(null,Tr,o),[l.memoizedState,o]}function ni(o,l,h,v){return o={tag:o,create:l,destroy:h,deps:v,next:null},l=Tr.updateQueue,l===null?(l={lastEffect:null,stores:null},Tr.updateQueue=l,l.lastEffect=o.next=o):(h=l.lastEffect,h===null?l.lastEffect=o.next=o:(v=h.next,h.next=o,o.next=v,l.lastEffect=o)),o}function Xo(){return ri().memoizedState}function Oi(o,l,h,v){var S=Di();Tr.flags|=o,S.memoizedState=ni(1|l,h,void 0,v===void 0?null:v)}function gc(o,l,h,v){var S=ri();v=v===void 0?null:v;var Q=void 0;if(dn!==null){var re=dn.memoizedState;if(Q=re.destroy,v!==null&&Hd(v,re.deps)){S.memoizedState=ni(l,h,Q,v);return}}Tr.flags|=o,S.memoizedState=ni(1|l,h,Q,v)}function zd(o,l){return Oi(8390656,8,o,l)}function $d(o,l){return gc(2048,8,o,l)}function sm(o,l){return gc(4,2,o,l)}function Gd(o,l){return gc(4,4,o,l)}function Wd(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function xv(o,l,h){return h=h!=null?h.concat([o]):null,gc(4,4,Wd.bind(null,l,o),h)}function Mp(){}function vv(o,l){var h=ri();l=l===void 0?null:l;var v=h.memoizedState;return v!==null&&l!==null&&Hd(l,v[1])?v[0]:(h.memoizedState=[o,l],o)}function wv(o,l){var h=ri();l=l===void 0?null:l;var v=h.memoizedState;return v!==null&&l!==null&&Hd(l,v[1])?v[0]:(o=o(),h.memoizedState=[o,l],o)}function bv(o,l,h){return(lo&21)===0?(o.baseState&&(o.baseState=!1,vi=!0),o.memoizedState=h):(Ir(h,l)||(h=ac(),Tr.lanes|=h,id|=h,o.baseState=!0),l)}function pC(o,l){var h=Ys;Ys=h!==0&&4>h?h:4,o(!0);var v=Md.transition;Md.transition={};try{o(!1),l()}finally{Ys=h,Md.transition=v}}function yv(){return ri().memoizedState}function gC(o,l,h){var v=uA(o);if(h={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null},Nv(o))jv(l,h);else if(h=xr(o,l,h,v),h!==null){var S=ii();sl(h,o,v,S),Bv(h,l,v)}}function xC(o,l,h){var v=uA(o),S={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null};if(Nv(o))jv(l,S);else{var Q=o.alternate;if(o.lanes===0&&(Q===null||Q.lanes===0)&&(Q=l.lastRenderedReducer,Q!==null))try{var re=l.lastRenderedState,Ne=Q(re,h);if(S.hasEagerState=!0,S.eagerState=Ne,Ir(Ne,re)){var Qe=l.interleaved;Qe===null?(S.next=S,ra(l)):(S.next=Qe.next,Qe.next=S),l.interleaved=S;return}}catch{}finally{}h=xr(o,l,S,v),h!==null&&(S=ii(),sl(h,o,v,S),Bv(h,l,v))}}function Nv(o){var l=o.alternate;return o===Tr||l!==null&&l===Tr}function jv(o,l){Jo=iA=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function Bv(o,l,h){if((h&4194240)!==0){var v=l.lanes;v&=o.pendingLanes,h|=v,l.lanes=h,wl(o,h)}}var rm={readContext:qr,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},vC={readContext:qr,useCallback:function(o,l){return Di().memoizedState=[o,l===void 0?null:l],o},useContext:qr,useEffect:zd,useImperativeHandle:function(o,l,h){return h=h!=null?h.concat([o]):null,Oi(4194308,4,Wd.bind(null,l,o),h)},useLayoutEffect:function(o,l){return Oi(4194308,4,o,l)},useInsertionEffect:function(o,l){return Oi(4,2,o,l)},useMemo:function(o,l){var h=Di();return l=l===void 0?null:l,o=o(),h.memoizedState=[o,l],o},useReducer:function(o,l,h){var v=Di();return l=h!==void 0?h(l):l,v.memoizedState=v.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},v.queue=o,o=o.dispatch=gC.bind(null,Tr,o),[v.memoizedState,o]},useRef:function(o){var l=Di();return o={current:o},l.memoizedState=o},useState:ad,useDebugValue:Mp,useDeferredValue:function(o){return Di().memoizedState=o},useTransition:function(){var o=ad(!1),l=o[0];return o=pC.bind(null,o[1]),Di().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,h){var v=Tr,S=Di();if(pt){if(h===void 0)throw Error(s(407));h=h()}else{if(h=l(),ia===null)throw Error(s(349));(lo&30)!==0||em(v,l,h)}S.memoizedState=h;var Q={value:h,getSnapshot:l};return S.queue=Q,zd(tm.bind(null,v,Q,o),[o]),v.flags|=2048,ni(9,eh.bind(null,v,Q,h,l),void 0,null),h},useId:function(){var o=Di(),l=ia.identifierPrefix;if(pt){var h=xe,v=Ye;h=(v&~(1<<32-zr(v)-1)).toString(32)+h,l=":"+l+"R"+h,h=oA++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=Op++,l=":"+l+"r"+h.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},wC={readContext:qr,useCallback:vv,useContext:qr,useEffect:$d,useImperativeHandle:xv,useInsertionEffect:sm,useLayoutEffect:Gd,useMemo:wv,useReducer:Kd,useRef:Xo,useState:function(){return Kd(nd)},useDebugValue:Mp,useDeferredValue:function(o){var l=ri();return bv(l,dn.memoizedState,o)},useTransition:function(){var o=Kd(nd)[0],l=ri().memoizedState;return[o,l]},useMutableSource:Zh,useSyncExternalStore:Zu,useId:yv,unstable_isNewReconciler:!1},bC={readContext:qr,useCallback:vv,useContext:qr,useEffect:$d,useImperativeHandle:xv,useInsertionEffect:sm,useLayoutEffect:Gd,useMemo:wv,useReducer:Dl,useRef:Xo,useState:function(){return Dl(nd)},useDebugValue:Mp,useDeferredValue:function(o){var l=ri();return dn===null?l.memoizedState=o:bv(l,dn.memoizedState,o)},useTransition:function(){var o=Dl(nd)[0],l=ri().memoizedState;return[o,l]},useMutableSource:Zh,useSyncExternalStore:Zu,useId:yv,unstable_isNewReconciler:!1};function Zo(o,l){if(o&&o.defaultProps){l=ie({},l),o=o.defaultProps;for(var h in o)l[h]===void 0&&(l[h]=o[h]);return l}return l}function Hp(o,l,h,v){l=o.memoizedState,h=h(v,l),h=h==null?l:ie({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var nm={isMounted:function(o){return(o=o._reactInternals)?ms(o)===o:!1},enqueueSetState:function(o,l,h){o=o._reactInternals;var v=ii(),S=uA(o),Q=nn(v,S);Q.payload=l,h!=null&&(Q.callback=h),l=an(o,Q,S),l!==null&&(sl(l,o,S,v),na(l,o,S))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var v=ii(),S=uA(o),Q=nn(v,S);Q.tag=1,Q.payload=l,h!=null&&(Q.callback=h),l=an(o,Q,S),l!==null&&(sl(l,o,S,v),na(l,o,S))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=ii(),v=uA(o),S=nn(h,v);S.tag=2,l!=null&&(S.callback=l),l=an(o,S,v),l!==null&&(sl(l,o,v,h),na(l,o,v))}};function Cv(o,l,h,v,S,Q,re){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,Q,re):l.prototype&&l.prototype.isPureReactComponent?!ea(h,v)||!ea(S,Q):!0}function Sv(o,l,h){var v=!1,S=Pl,Q=l.contextType;return typeof Q=="object"&&Q!==null?Q=qr(Q):(S=Ta(l)?fc:Rn.current,v=l.contextTypes,Q=(v=v!=null)?nA(o,S):Pl),l=new l(h,Q),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=nm,o.stateNode=l,l._reactInternals=o,v&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=S,o.__reactInternalMemoizedMaskedChildContext=Q),l}function Ev(o,l,h,v){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,v),l.state!==o&&nm.enqueueReplaceState(l,l.state,null)}function Kp(o,l,h,v){var S=o.stateNode;S.props=h,S.state=o.memoizedState,S.refs={},Dn(o);var Q=l.contextType;typeof Q=="object"&&Q!==null?S.context=qr(Q):(Q=Ta(l)?fc:Rn.current,S.context=nA(o,Q)),S.state=o.memoizedState,Q=l.getDerivedStateFromProps,typeof Q=="function"&&(Hp(o,l,Q,h),S.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&nm.enqueueReplaceState(S,S.state,null),aa(o,h,S,v),S.state=o.memoizedState),typeof S.componentDidMount=="function"&&(o.flags|=4194308)}function qd(o,l){try{var h="",v=l;do h+=de(v),v=v.return;while(v);var S=h}catch(Q){S=`
Error generating stack: `+Q.message+`
`+Q.stack}return{value:o,source:l,stack:S,digest:null}}function Vp(o,l,h){return{value:o,source:null,stack:h??null,digest:l??null}}function zp(o,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var yC=typeof WeakMap=="function"?WeakMap:Map;function Fv(o,l,h){h=nn(-1,h),h.tag=3,h.payload={element:null};var v=l.value;return h.callback=function(){dm||(dm=!0,ig=v),zp(o,l)},h}function _v(o,l,h){h=nn(-1,h),h.tag=3;var v=o.type.getDerivedStateFromError;if(typeof v=="function"){var S=l.value;h.payload=function(){return v(S)},h.callback=function(){zp(o,l)}}var Q=o.stateNode;return Q!==null&&typeof Q.componentDidCatch=="function"&&(h.callback=function(){zp(o,l),typeof v!="function"&&(AA===null?AA=new Set([this]):AA.add(this));var re=l.stack;this.componentDidCatch(l.value,{componentStack:re!==null?re:""})}),h}function kv(o,l,h){var v=o.pingCache;if(v===null){v=o.pingCache=new yC;var S=new Set;v.set(l,S)}else S=v.get(l),S===void 0&&(S=new Set,v.set(l,S));S.has(h)||(S.add(h),o=TC.bind(null,o,l,h),l.then(o,o))}function Uv(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Iv(o,l,h,v,S){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=nn(-1,1),l.tag=2,an(h,l,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=S,o)}var NC=k.ReactCurrentOwner,vi=!1;function ai(o,l,h,v){l.child=o===null?Hr(l,null,h,v):cn(l,o.child,h,v)}function Lv(o,l,h,v,S){h=h.render;var Q=l.ref;return Wr(l,S),v=rd(o,l,h,v,Q,S),h=co(),o!==null&&!vi?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~S,xc(o,l,S)):(pt&&h&&ut(l),l.flags|=1,ai(o,l,v,S),l.child)}function Qv(o,l,h,v,S){if(o===null){var Q=h.type;return typeof Q=="function"&&!hg(Q)&&Q.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=Q,Tv(o,l,Q,v,S)):(o=gm(h.type,null,v,l,l.mode,S),o.ref=l.ref,o.return=l,l.child=o)}if(Q=o.child,(o.lanes&S)===0){var re=Q.memoizedProps;if(h=h.compare,h=h!==null?h:ea,h(re,v)&&o.ref===l.ref)return xc(o,l,S)}return l.flags|=1,o=mA(Q,v),o.ref=l.ref,o.return=l,l.child=o}function Tv(o,l,h,v,S){if(o!==null){var Q=o.memoizedProps;if(ea(Q,v)&&o.ref===l.ref)if(vi=!1,l.pendingProps=v=Q,(o.lanes&S)!==0)(o.flags&131072)!==0&&(vi=!0);else return l.lanes=o.lanes,xc(o,l,S)}return $p(o,l,h,v,S)}function Pv(o,l,h){var v=l.pendingProps,S=v.children,Q=o!==null?o.memoizedState:null;if(v.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},gr(Jd,Mi),Mi|=h;else{if((h&1073741824)===0)return o=Q!==null?Q.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,gr(Jd,Mi),Mi|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=Q!==null?Q.baseLanes:h,gr(Jd,Mi),Mi|=v}else Q!==null?(v=Q.baseLanes|h,l.memoizedState=null):v=h,gr(Jd,Mi),Mi|=v;return ai(o,l,S,h),l.child}function Rv(o,l){var h=l.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function $p(o,l,h,v,S){var Q=Ta(h)?fc:Rn.current;return Q=nA(l,Q),Wr(l,S),h=rd(o,l,h,v,Q,S),v=co(),o!==null&&!vi?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~S,xc(o,l,S)):(pt&&v&&ut(l),l.flags|=1,ai(o,l,h,S),l.child)}function Dv(o,l,h,v,S){if(Ta(h)){var Q=!0;pc(l)}else Q=!1;if(Wr(l,S),l.stateNode===null)im(o,l),Sv(l,h,v),Kp(l,h,v,S),v=!0;else if(o===null){var re=l.stateNode,Ne=l.memoizedProps;re.props=Ne;var Qe=re.context,at=h.contextType;typeof at=="object"&&at!==null?at=qr(at):(at=Ta(h)?fc:Rn.current,at=nA(l,at));var jt=h.getDerivedStateFromProps,St=typeof jt=="function"||typeof re.getSnapshotBeforeUpdate=="function";St||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(Ne!==v||Qe!==at)&&Ev(l,re,v,at),An=!1;var Nt=l.memoizedState;re.state=Nt,aa(l,v,re,S),Qe=l.memoizedState,Ne!==v||Nt!==Qe||Qa.current||An?(typeof jt=="function"&&(Hp(l,h,jt,v),Qe=l.memoizedState),(Ne=An||Cv(l,h,Ne,v,Nt,Qe,at))?(St||typeof re.UNSAFE_componentWillMount!="function"&&typeof re.componentWillMount!="function"||(typeof re.componentWillMount=="function"&&re.componentWillMount(),typeof re.UNSAFE_componentWillMount=="function"&&re.UNSAFE_componentWillMount()),typeof re.componentDidMount=="function"&&(l.flags|=4194308)):(typeof re.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=Qe),re.props=v,re.state=Qe,re.context=at,v=Ne):(typeof re.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{re=l.stateNode,Pa(o,l),Ne=l.memoizedProps,at=l.type===l.elementType?Ne:Zo(l.type,Ne),re.props=at,St=l.pendingProps,Nt=re.context,Qe=h.contextType,typeof Qe=="object"&&Qe!==null?Qe=qr(Qe):(Qe=Ta(h)?fc:Rn.current,Qe=nA(l,Qe));var $t=h.getDerivedStateFromProps;(jt=typeof $t=="function"||typeof re.getSnapshotBeforeUpdate=="function")||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(Ne!==St||Nt!==Qe)&&Ev(l,re,v,Qe),An=!1,Nt=l.memoizedState,re.state=Nt,aa(l,v,re,S);var ss=l.memoizedState;Ne!==St||Nt!==ss||Qa.current||An?(typeof $t=="function"&&(Hp(l,h,$t,v),ss=l.memoizedState),(at=An||Cv(l,h,at,v,Nt,ss,Qe)||!1)?(jt||typeof re.UNSAFE_componentWillUpdate!="function"&&typeof re.componentWillUpdate!="function"||(typeof re.componentWillUpdate=="function"&&re.componentWillUpdate(v,ss,Qe),typeof re.UNSAFE_componentWillUpdate=="function"&&re.UNSAFE_componentWillUpdate(v,ss,Qe)),typeof re.componentDidUpdate=="function"&&(l.flags|=4),typeof re.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof re.componentDidUpdate!="function"||Ne===o.memoizedProps&&Nt===o.memoizedState||(l.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||Ne===o.memoizedProps&&Nt===o.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=ss),re.props=v,re.state=ss,re.context=Qe,v=at):(typeof re.componentDidUpdate!="function"||Ne===o.memoizedProps&&Nt===o.memoizedState||(l.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||Ne===o.memoizedProps&&Nt===o.memoizedState||(l.flags|=1024),v=!1)}return Gp(o,l,h,v,Q,S)}function Gp(o,l,h,v,S,Q){Rv(o,l);var re=(l.flags&128)!==0;if(!v&&!re)return S&&Jh(l,h,!1),xc(o,l,Q);v=l.stateNode,NC.current=l;var Ne=re&&typeof h.getDerivedStateFromError!="function"?null:v.render();return l.flags|=1,o!==null&&re?(l.child=cn(l,o.child,null,Q),l.child=cn(l,null,Ne,Q)):ai(o,l,Ne,Q),l.memoizedState=v.state,S&&Jh(l,h,!0),l.child}function Ov(o){var l=o.stateNode;l.pendingContext?Yh(o,l.pendingContext,l.pendingContext!==l.context):l.context&&Yh(o,l.context,!1),aA(o,l.containerInfo)}function Mv(o,l,h,v,S){return Xt(),Dt(S),l.flags|=256,ai(o,l,h,v),l.child}var Wp={dehydrated:null,treeContext:null,retryLane:0};function qp(o){return{baseLanes:o,cachePool:null,transitions:null}}function Hv(o,l,h){var v=l.pendingProps,S=Fr.current,Q=!1,re=(l.flags&128)!==0,Ne;if((Ne=re)||(Ne=o!==null&&o.memoizedState===null?!1:(S&2)!==0),Ne?(Q=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(S|=1),gr(Fr,S&1),o===null)return ts(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(re=v.children,o=v.fallback,Q?(v=l.mode,Q=l.child,re={mode:"hidden",children:re},(v&1)===0&&Q!==null?(Q.childLanes=0,Q.pendingProps=re):Q=xm(re,v,0,null),o=Ad(o,v,h,null),Q.return=l,o.return=l,Q.sibling=o,l.child=Q,l.child.memoizedState=qp(h),l.memoizedState=Wp,o):Yp(l,re));if(S=o.memoizedState,S!==null&&(Ne=S.dehydrated,Ne!==null))return jC(o,l,re,v,Ne,S,h);if(Q){Q=v.fallback,re=l.mode,S=o.child,Ne=S.sibling;var Qe={mode:"hidden",children:v.children};return(re&1)===0&&l.child!==S?(v=l.child,v.childLanes=0,v.pendingProps=Qe,l.deletions=null):(v=mA(S,Qe),v.subtreeFlags=S.subtreeFlags&14680064),Ne!==null?Q=mA(Ne,Q):(Q=Ad(Q,re,h,null),Q.flags|=2),Q.return=l,v.return=l,v.sibling=Q,l.child=v,v=Q,Q=l.child,re=o.child.memoizedState,re=re===null?qp(h):{baseLanes:re.baseLanes|h,cachePool:null,transitions:re.transitions},Q.memoizedState=re,Q.childLanes=o.childLanes&~h,l.memoizedState=Wp,v}return Q=o.child,o=Q.sibling,v=mA(Q,{mode:"visible",children:v.children}),(l.mode&1)===0&&(v.lanes=h),v.return=l,v.sibling=null,o!==null&&(h=l.deletions,h===null?(l.deletions=[o],l.flags|=16):h.push(o)),l.child=v,l.memoizedState=null,v}function Yp(o,l){return l=xm({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function am(o,l,h,v){return v!==null&&Dt(v),cn(l,o.child,null,h),o=Yp(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function jC(o,l,h,v,S,Q,re){if(h)return l.flags&256?(l.flags&=-257,v=Vp(Error(s(422))),am(o,l,re,v)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(Q=v.fallback,S=l.mode,v=xm({mode:"visible",children:v.children},S,0,null),Q=Ad(Q,S,re,null),Q.flags|=2,v.return=l,Q.return=l,v.sibling=Q,l.child=v,(l.mode&1)!==0&&cn(l,o.child,null,re),l.child.memoizedState=qp(re),l.memoizedState=Wp,Q);if((l.mode&1)===0)return am(o,l,re,null);if(S.data==="$!"){if(v=S.nextSibling&&S.nextSibling.dataset,v)var Ne=v.dgst;return v=Ne,Q=Error(s(419)),v=Vp(Q,v,void 0),am(o,l,re,v)}if(Ne=(re&o.childLanes)!==0,vi||Ne){if(v=ia,v!==null){switch(re&-re){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(v.suspendedLanes|re))!==0?0:S,S!==0&&S!==Q.retryLane&&(Q.retryLane=S,yr(o,S),sl(v,o,S,-1))}return ug(),v=Vp(Error(s(421))),am(o,l,re,v)}return S.data==="$?"?(l.flags|=128,l.child=o.child,l=PC.bind(null,o),S._reactRetry=l,null):(o=Q.treeContext,ct=pa(S.nextSibling),ot=l,pt=!0,xt=null,o!==null&&(ue[ge++]=Ye,ue[ge++]=xe,ue[ge++]=Le,Ye=o.id,xe=o.overflow,Le=l),l=Yp(l,v.children),l.flags|=4096,l)}function Kv(o,l,h){o.lanes|=l;var v=o.alternate;v!==null&&(v.lanes|=l),ar(o.return,l,h)}function Jp(o,l,h,v,S){var Q=o.memoizedState;Q===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:S}:(Q.isBackwards=l,Q.rendering=null,Q.renderingStartTime=0,Q.last=v,Q.tail=h,Q.tailMode=S)}function Vv(o,l,h){var v=l.pendingProps,S=v.revealOrder,Q=v.tail;if(ai(o,l,v.children,h),v=Fr.current,(v&2)!==0)v=v&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Kv(o,h,l);else if(o.tag===19)Kv(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}v&=1}if(gr(Fr,v),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(h=l.child,S=null;h!==null;)o=h.alternate,o!==null&&Ri(o)===null&&(S=h),h=h.sibling;h=S,h===null?(S=l.child,l.child=null):(S=h.sibling,h.sibling=null),Jp(l,!1,S,h,Q);break;case"backwards":for(h=null,S=l.child,l.child=null;S!==null;){if(o=S.alternate,o!==null&&Ri(o)===null){l.child=S;break}o=S.sibling,S.sibling=h,h=S,S=o}Jp(l,!0,h,null,Q);break;case"together":Jp(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function im(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function xc(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),id|=l.lanes,(h&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(s(153));if(l.child!==null){for(o=l.child,h=mA(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=mA(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function BC(o,l,h){switch(l.tag){case 3:Ov(l),Xt();break;case 5:Xh(l);break;case 1:Ta(l.type)&&pc(l);break;case 4:aA(l,l.stateNode.containerInfo);break;case 10:var v=l.type._context,S=l.memoizedProps.value;gr(pn,v._currentValue),v._currentValue=S;break;case 13:if(v=l.memoizedState,v!==null)return v.dehydrated!==null?(gr(Fr,Fr.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?Hv(o,l,h):(gr(Fr,Fr.current&1),o=xc(o,l,h),o!==null?o.sibling:null);gr(Fr,Fr.current&1);break;case 19:if(v=(h&l.childLanes)!==0,(o.flags&128)!==0){if(v)return Vv(o,l,h);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),gr(Fr,Fr.current),v)break;return null;case 22:case 23:return l.lanes=0,Pv(o,l,h)}return xc(o,l,h)}var zv,Xp,$v,Gv;zv=function(o,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Xp=function(){},$v=function(o,l,h,v){var S=o.memoizedProps;if(S!==v){o=l.stateNode,Yo(En.current);var Q=null;switch(h){case"input":S=Se(o,S),v=Se(o,v),Q=[];break;case"select":S=ie({},S,{value:void 0}),v=ie({},v,{value:void 0}),Q=[];break;case"textarea":S=ft(o,S),v=ft(o,v),Q=[];break;default:typeof S.onClick!="function"&&typeof v.onClick=="function"&&(o.onclick=we)}Ft(h,v);var re;h=null;for(at in S)if(!v.hasOwnProperty(at)&&S.hasOwnProperty(at)&&S[at]!=null)if(at==="style"){var Ne=S[at];for(re in Ne)Ne.hasOwnProperty(re)&&(h||(h={}),h[re]="")}else at!=="dangerouslySetInnerHTML"&&at!=="children"&&at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&at!=="autoFocus"&&(a.hasOwnProperty(at)?Q||(Q=[]):(Q=Q||[]).push(at,null));for(at in v){var Qe=v[at];if(Ne=S?.[at],v.hasOwnProperty(at)&&Qe!==Ne&&(Qe!=null||Ne!=null))if(at==="style")if(Ne){for(re in Ne)!Ne.hasOwnProperty(re)||Qe&&Qe.hasOwnProperty(re)||(h||(h={}),h[re]="");for(re in Qe)Qe.hasOwnProperty(re)&&Ne[re]!==Qe[re]&&(h||(h={}),h[re]=Qe[re])}else h||(Q||(Q=[]),Q.push(at,h)),h=Qe;else at==="dangerouslySetInnerHTML"?(Qe=Qe?Qe.__html:void 0,Ne=Ne?Ne.__html:void 0,Qe!=null&&Ne!==Qe&&(Q=Q||[]).push(at,Qe)):at==="children"?typeof Qe!="string"&&typeof Qe!="number"||(Q=Q||[]).push(at,""+Qe):at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&(a.hasOwnProperty(at)?(Qe!=null&&at==="onScroll"&&pr("scroll",o),Q||Ne===Qe||(Q=[])):(Q=Q||[]).push(at,Qe))}h&&(Q=Q||[]).push("style",h);var at=Q;(l.updateQueue=at)&&(l.flags|=4)}},Gv=function(o,l,h,v){h!==v&&(l.flags|=4)};function th(o,l){if(!pt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function Ra(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,v=0;if(l)for(var S=o.child;S!==null;)h|=S.lanes|S.childLanes,v|=S.subtreeFlags&14680064,v|=S.flags&14680064,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)h|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=v,o.childLanes=h,l}function CC(o,l,h){var v=l.pendingProps;switch(Ze(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ra(l),null;case 1:return Ta(l.type)&&Dd(),Ra(l),null;case 3:return v=l.stateNode,oo(),dr(Qa),dr(Rn),Xu(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(o===null||o.child===null)&&(Gr(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,xt!==null&&(cg(xt),xt=null))),Xp(o,l),Ra(l),null;case 5:Yu(l);var S=Yo(Rl.current);if(h=l.type,o!==null&&l.stateNode!=null)$v(o,l,h,v,S),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!v){if(l.stateNode===null)throw Error(s(166));return Ra(l),null}if(o=Yo(En.current),Gr(l)){v=l.stateNode,h=l.type;var Q=l.memoizedProps;switch(v[io]=l,v[sA]=Q,o=(l.mode&1)!==0,h){case"dialog":pr("cancel",v),pr("close",v);break;case"iframe":case"object":case"embed":pr("load",v);break;case"video":case"audio":for(S=0;S<Go.length;S++)pr(Go[S],v);break;case"source":pr("error",v);break;case"img":case"image":case"link":pr("error",v),pr("load",v);break;case"details":pr("toggle",v);break;case"input":X(v,Q),pr("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!Q.multiple},pr("invalid",v);break;case"textarea":et(v,Q),pr("invalid",v)}Ft(h,Q),S=null;for(var re in Q)if(Q.hasOwnProperty(re)){var Ne=Q[re];re==="children"?typeof Ne=="string"?v.textContent!==Ne&&(Q.suppressHydrationWarning!==!0&&Z(v.textContent,Ne,o),S=["children",Ne]):typeof Ne=="number"&&v.textContent!==""+Ne&&(Q.suppressHydrationWarning!==!0&&Z(v.textContent,Ne,o),S=["children",""+Ne]):a.hasOwnProperty(re)&&Ne!=null&&re==="onScroll"&&pr("scroll",v)}switch(h){case"input":Pe(v),Ee(v,Q,!0);break;case"textarea":Pe(v),Ue(v);break;case"select":case"option":break;default:typeof Q.onClick=="function"&&(v.onclick=we)}v=S,l.updateQueue=v,v!==null&&(l.flags|=4)}else{re=S.nodeType===9?S:S.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=We(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=re.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof v.is=="string"?o=re.createElement(h,{is:v.is}):(o=re.createElement(h),h==="select"&&(re=o,v.multiple?re.multiple=!0:v.size&&(re.size=v.size))):o=re.createElementNS(o,h),o[io]=l,o[sA]=v,zv(o,l,!1,!1),l.stateNode=o;e:{switch(re=bt(h,v),h){case"dialog":pr("cancel",o),pr("close",o),S=v;break;case"iframe":case"object":case"embed":pr("load",o),S=v;break;case"video":case"audio":for(S=0;S<Go.length;S++)pr(Go[S],o);S=v;break;case"source":pr("error",o),S=v;break;case"img":case"image":case"link":pr("error",o),pr("load",o),S=v;break;case"details":pr("toggle",o),S=v;break;case"input":X(o,v),S=Se(o,v),pr("invalid",o);break;case"option":S=v;break;case"select":o._wrapperState={wasMultiple:!!v.multiple},S=ie({},v,{value:void 0}),pr("invalid",o);break;case"textarea":et(o,v),S=ft(o,v),pr("invalid",o);break;default:S=v}Ft(h,S),Ne=S;for(Q in Ne)if(Ne.hasOwnProperty(Q)){var Qe=Ne[Q];Q==="style"?$e(o,Qe):Q==="dangerouslySetInnerHTML"?(Qe=Qe?Qe.__html:void 0,Qe!=null&&Me(o,Qe)):Q==="children"?typeof Qe=="string"?(h!=="textarea"||Qe!=="")&&Ve(o,Qe):typeof Qe=="number"&&Ve(o,""+Qe):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(a.hasOwnProperty(Q)?Qe!=null&&Q==="onScroll"&&pr("scroll",o):Qe!=null&&I(o,Q,Qe,re))}switch(h){case"input":Pe(o),Ee(o,v,!1);break;case"textarea":Pe(o),Ue(o);break;case"option":v.value!=null&&o.setAttribute("value",""+pe(v.value));break;case"select":o.multiple=!!v.multiple,Q=v.value,Q!=null?st(o,!!v.multiple,Q,!1):v.defaultValue!=null&&st(o,!!v.multiple,v.defaultValue,!0);break;default:typeof S.onClick=="function"&&(o.onclick=we)}switch(h){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Ra(l),null;case 6:if(o&&l.stateNode!=null)Gv(o,l,o.memoizedProps,v);else{if(typeof v!="string"&&l.stateNode===null)throw Error(s(166));if(h=Yo(Rl.current),Yo(En.current),Gr(l)){if(v=l.stateNode,h=l.memoizedProps,v[io]=l,(Q=v.nodeValue!==h)&&(o=ot,o!==null))switch(o.tag){case 3:Z(v.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Z(v.nodeValue,h,(o.mode&1)!==0)}Q&&(l.flags|=4)}else v=(h.nodeType===9?h:h.ownerDocument).createTextNode(v),v[io]=l,l.stateNode=v}return Ra(l),null;case 13:if(dr(Fr),v=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(pt&&ct!==null&&(l.mode&1)!==0&&(l.flags&128)===0)ks(),Xt(),l.flags|=98560,Q=!1;else if(Q=Gr(l),v!==null&&v.dehydrated!==null){if(o===null){if(!Q)throw Error(s(318));if(Q=l.memoizedState,Q=Q!==null?Q.dehydrated:null,!Q)throw Error(s(317));Q[io]=l}else Xt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ra(l),Q=!1}else xt!==null&&(cg(xt),xt=null),Q=!0;if(!Q)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(v=v!==null,v!==(o!==null&&o.memoizedState!==null)&&v&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Fr.current&1)!==0?On===0&&(On=3):ug())),l.updateQueue!==null&&(l.flags|=4),Ra(l),null);case 4:return oo(),Xp(o,l),o===null&&Il(l.stateNode.containerInfo),Ra(l),null;case 10:return Qr(l.type._context),Ra(l),null;case 17:return Ta(l.type)&&Dd(),Ra(l),null;case 19:if(dr(Fr),Q=l.memoizedState,Q===null)return Ra(l),null;if(v=(l.flags&128)!==0,re=Q.rendering,re===null)if(v)th(Q,!1);else{if(On!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(re=Ri(o),re!==null){for(l.flags|=128,th(Q,!1),v=re.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),l.subtreeFlags=0,v=h,h=l.child;h!==null;)Q=h,o=v,Q.flags&=14680066,re=Q.alternate,re===null?(Q.childLanes=0,Q.lanes=o,Q.child=null,Q.subtreeFlags=0,Q.memoizedProps=null,Q.memoizedState=null,Q.updateQueue=null,Q.dependencies=null,Q.stateNode=null):(Q.childLanes=re.childLanes,Q.lanes=re.lanes,Q.child=re.child,Q.subtreeFlags=0,Q.deletions=null,Q.memoizedProps=re.memoizedProps,Q.memoizedState=re.memoizedState,Q.updateQueue=re.updateQueue,Q.type=re.type,o=re.dependencies,Q.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return gr(Fr,Fr.current&1|2),l.child}o=o.sibling}Q.tail!==null&&wr()>Xd&&(l.flags|=128,v=!0,th(Q,!1),l.lanes=4194304)}else{if(!v)if(o=Ri(re),o!==null){if(l.flags|=128,v=!0,h=o.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),th(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!re.alternate&&!pt)return Ra(l),null}else 2*wr()-Q.renderingStartTime>Xd&&h!==1073741824&&(l.flags|=128,v=!0,th(Q,!1),l.lanes=4194304);Q.isBackwards?(re.sibling=l.child,l.child=re):(h=Q.last,h!==null?h.sibling=re:l.child=re,Q.last=re)}return Q.tail!==null?(l=Q.tail,Q.rendering=l,Q.tail=l.sibling,Q.renderingStartTime=wr(),l.sibling=null,h=Fr.current,gr(Fr,v?h&1|2:h&1),l):(Ra(l),null);case 22:case 23:return dg(),v=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==v&&(l.flags|=8192),v&&(l.mode&1)!==0?(Mi&1073741824)!==0&&(Ra(l),l.subtreeFlags&6&&(l.flags|=8192)):Ra(l),null;case 24:return null;case 25:return null}throw Error(s(156,l.tag))}function SC(o,l){switch(Ze(l),l.tag){case 1:return Ta(l.type)&&Dd(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return oo(),dr(Qa),dr(Rn),Xu(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return Yu(l),null;case 13:if(dr(Fr),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(s(340));Xt()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return dr(Fr),null;case 4:return oo(),null;case 10:return Qr(l.type._context),null;case 22:case 23:return dg(),null;case 24:return null;default:return null}}var om=!1,Da=!1,EC=typeof WeakSet=="function"?WeakSet:Set,es=null;function Yd(o,l){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(v){un(o,l,v)}else h.current=null}function Zp(o,l,h){try{h()}catch(v){un(o,l,v)}}var Wv=!1;function FC(o,l){if(qe=yl,o=tn(),pi(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var S=v.anchorOffset,Q=v.focusNode;v=v.focusOffset;try{h.nodeType,Q.nodeType}catch{h=null;break e}var re=0,Ne=-1,Qe=-1,at=0,jt=0,St=o,Nt=null;t:for(;;){for(var $t;St!==h||S!==0&&St.nodeType!==3||(Ne=re+S),St!==Q||v!==0&&St.nodeType!==3||(Qe=re+v),St.nodeType===3&&(re+=St.nodeValue.length),($t=St.firstChild)!==null;)Nt=St,St=$t;for(;;){if(St===o)break t;if(Nt===h&&++at===S&&(Ne=re),Nt===Q&&++jt===v&&(Qe=re),($t=St.nextSibling)!==null)break;St=Nt,Nt=St.parentNode}St=$t}h=Ne===-1||Qe===-1?null:{start:Ne,end:Qe}}else h=null}h=h||{start:0,end:0}}else h=null;for(Kt={focusedElem:o,selectionRange:h},yl=!1,es=l;es!==null;)if(l=es,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,es=o;else for(;es!==null;){l=es;try{var ss=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ss!==null){var ls=ss.memoizedProps,xn=ss.memoizedState,Xe=l.stateNode,Oe=Xe.getSnapshotBeforeUpdate(l.elementType===l.type?ls:Zo(l.type,ls),xn);Xe.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:var tt=l.stateNode.containerInfo;tt.nodeType===1?tt.textContent="":tt.nodeType===9&&tt.documentElement&&tt.removeChild(tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(kt){un(l,l.return,kt)}if(o=l.sibling,o!==null){o.return=l.return,es=o;break}es=l.return}return ss=Wv,Wv=!1,ss}function sh(o,l,h){var v=l.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var S=v=v.next;do{if((S.tag&o)===o){var Q=S.destroy;S.destroy=void 0,Q!==void 0&&Zp(l,h,Q)}S=S.next}while(S!==v)}}function lm(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&o)===o){var v=h.create;h.destroy=v()}h=h.next}while(h!==l)}}function eg(o){var l=o.ref;if(l!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof l=="function"?l(o):l.current=o}}function qv(o){var l=o.alternate;l!==null&&(o.alternate=null,qv(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[io],delete l[sA],delete l[La],delete l[Rp],delete l[Dp])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Yv(o){return o.tag===5||o.tag===3||o.tag===4}function Jv(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Yv(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function tg(o,l,h){var v=o.tag;if(v===5||v===6)o=o.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(o,l):h.insertBefore(o,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(o,h)):(l=h,l.appendChild(o)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=we));else if(v!==4&&(o=o.child,o!==null))for(tg(o,l,h),o=o.sibling;o!==null;)tg(o,l,h),o=o.sibling}function sg(o,l,h){var v=o.tag;if(v===5||v===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(v!==4&&(o=o.child,o!==null))for(sg(o,l,h),o=o.sibling;o!==null;)sg(o,l,h),o=o.sibling}var ga=null,el=!1;function cA(o,l,h){for(h=h.child;h!==null;)Xv(o,l,h),h=h.sibling}function Xv(o,l,h){if(da&&typeof da.onCommitFiberUnmount=="function")try{da.onCommitFiberUnmount(jo,h)}catch{}switch(h.tag){case 5:Da||Yd(h,l);case 6:var v=ga,S=el;ga=null,cA(o,l,h),ga=v,el=S,ga!==null&&(el?(o=ga,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):ga.removeChild(h.stateNode));break;case 18:ga!==null&&(el?(o=ga,h=h.stateNode,o.nodeType===8?Gu(o.parentNode,h):o.nodeType===1&&Gu(o,h),Lo(o)):Gu(ga,h.stateNode));break;case 4:v=ga,S=el,ga=h.stateNode.containerInfo,el=!0,cA(o,l,h),ga=v,el=S;break;case 0:case 11:case 14:case 15:if(!Da&&(v=h.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){S=v=v.next;do{var Q=S,re=Q.destroy;Q=Q.tag,re!==void 0&&((Q&2)!==0||(Q&4)!==0)&&Zp(h,l,re),S=S.next}while(S!==v)}cA(o,l,h);break;case 1:if(!Da&&(Yd(h,l),v=h.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=h.memoizedProps,v.state=h.memoizedState,v.componentWillUnmount()}catch(Ne){un(h,l,Ne)}cA(o,l,h);break;case 21:cA(o,l,h);break;case 22:h.mode&1?(Da=(v=Da)||h.memoizedState!==null,cA(o,l,h),Da=v):cA(o,l,h);break;default:cA(o,l,h)}}function Zv(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new EC),l.forEach(function(v){var S=RC.bind(null,o,v);h.has(v)||(h.add(v),v.then(S,S))})}}function tl(o,l){var h=l.deletions;if(h!==null)for(var v=0;v<h.length;v++){var S=h[v];try{var Q=o,re=l,Ne=re;e:for(;Ne!==null;){switch(Ne.tag){case 5:ga=Ne.stateNode,el=!1;break e;case 3:ga=Ne.stateNode.containerInfo,el=!0;break e;case 4:ga=Ne.stateNode.containerInfo,el=!0;break e}Ne=Ne.return}if(ga===null)throw Error(s(160));Xv(Q,re,S),ga=null,el=!1;var Qe=S.alternate;Qe!==null&&(Qe.return=null),S.return=null}catch(at){un(S,l,at)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)ew(l,o),l=l.sibling}function ew(o,l){var h=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(tl(l,o),Ol(o),v&4){try{sh(3,o,o.return),lm(3,o)}catch(ls){un(o,o.return,ls)}try{sh(5,o,o.return)}catch(ls){un(o,o.return,ls)}}break;case 1:tl(l,o),Ol(o),v&512&&h!==null&&Yd(h,h.return);break;case 5:if(tl(l,o),Ol(o),v&512&&h!==null&&Yd(h,h.return),o.flags&32){var S=o.stateNode;try{Ve(S,"")}catch(ls){un(o,o.return,ls)}}if(v&4&&(S=o.stateNode,S!=null)){var Q=o.memoizedProps,re=h!==null?h.memoizedProps:Q,Ne=o.type,Qe=o.updateQueue;if(o.updateQueue=null,Qe!==null)try{Ne==="input"&&Q.type==="radio"&&Q.name!=null&&Ie(S,Q),bt(Ne,re);var at=bt(Ne,Q);for(re=0;re<Qe.length;re+=2){var jt=Qe[re],St=Qe[re+1];jt==="style"?$e(S,St):jt==="dangerouslySetInnerHTML"?Me(S,St):jt==="children"?Ve(S,St):I(S,jt,St,at)}switch(Ne){case"input":rt(S,Q);break;case"textarea":it(S,Q);break;case"select":var Nt=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!Q.multiple;var $t=Q.value;$t!=null?st(S,!!Q.multiple,$t,!1):Nt!==!!Q.multiple&&(Q.defaultValue!=null?st(S,!!Q.multiple,Q.defaultValue,!0):st(S,!!Q.multiple,Q.multiple?[]:"",!1))}S[sA]=Q}catch(ls){un(o,o.return,ls)}}break;case 6:if(tl(l,o),Ol(o),v&4){if(o.stateNode===null)throw Error(s(162));S=o.stateNode,Q=o.memoizedProps;try{S.nodeValue=Q}catch(ls){un(o,o.return,ls)}}break;case 3:if(tl(l,o),Ol(o),v&4&&h!==null&&h.memoizedState.isDehydrated)try{Lo(l.containerInfo)}catch(ls){un(o,o.return,ls)}break;case 4:tl(l,o),Ol(o);break;case 13:tl(l,o),Ol(o),S=o.child,S.flags&8192&&(Q=S.memoizedState!==null,S.stateNode.isHidden=Q,!Q||S.alternate!==null&&S.alternate.memoizedState!==null||(ag=wr())),v&4&&Zv(o);break;case 22:if(jt=h!==null&&h.memoizedState!==null,o.mode&1?(Da=(at=Da)||jt,tl(l,o),Da=at):tl(l,o),Ol(o),v&8192){if(at=o.memoizedState!==null,(o.stateNode.isHidden=at)&&!jt&&(o.mode&1)!==0)for(es=o,jt=o.child;jt!==null;){for(St=es=jt;es!==null;){switch(Nt=es,$t=Nt.child,Nt.tag){case 0:case 11:case 14:case 15:sh(4,Nt,Nt.return);break;case 1:Yd(Nt,Nt.return);var ss=Nt.stateNode;if(typeof ss.componentWillUnmount=="function"){v=Nt,h=Nt.return;try{l=v,ss.props=l.memoizedProps,ss.state=l.memoizedState,ss.componentWillUnmount()}catch(ls){un(v,h,ls)}}break;case 5:Yd(Nt,Nt.return);break;case 22:if(Nt.memoizedState!==null){rw(St);continue}}$t!==null?($t.return=Nt,es=$t):rw(St)}jt=jt.sibling}e:for(jt=null,St=o;;){if(St.tag===5){if(jt===null){jt=St;try{S=St.stateNode,at?(Q=S.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none"):(Ne=St.stateNode,Qe=St.memoizedProps.style,re=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null,Ne.style.display=_e("display",re))}catch(ls){un(o,o.return,ls)}}}else if(St.tag===6){if(jt===null)try{St.stateNode.nodeValue=at?"":St.memoizedProps}catch(ls){un(o,o.return,ls)}}else if((St.tag!==22&&St.tag!==23||St.memoizedState===null||St===o)&&St.child!==null){St.child.return=St,St=St.child;continue}if(St===o)break e;for(;St.sibling===null;){if(St.return===null||St.return===o)break e;jt===St&&(jt=null),St=St.return}jt===St&&(jt=null),St.sibling.return=St.return,St=St.sibling}}break;case 19:tl(l,o),Ol(o),v&4&&Zv(o);break;case 21:break;default:tl(l,o),Ol(o)}}function Ol(o){var l=o.flags;if(l&2){try{e:{for(var h=o.return;h!==null;){if(Yv(h)){var v=h;break e}h=h.return}throw Error(s(160))}switch(v.tag){case 5:var S=v.stateNode;v.flags&32&&(Ve(S,""),v.flags&=-33);var Q=Jv(o);sg(o,Q,S);break;case 3:case 4:var re=v.stateNode.containerInfo,Ne=Jv(o);tg(o,Ne,re);break;default:throw Error(s(161))}}catch(Qe){un(o,o.return,Qe)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function _C(o,l,h){es=o,tw(o)}function tw(o,l,h){for(var v=(o.mode&1)!==0;es!==null;){var S=es,Q=S.child;if(S.tag===22&&v){var re=S.memoizedState!==null||om;if(!re){var Ne=S.alternate,Qe=Ne!==null&&Ne.memoizedState!==null||Da;Ne=om;var at=Da;if(om=re,(Da=Qe)&&!at)for(es=S;es!==null;)re=es,Qe=re.child,re.tag===22&&re.memoizedState!==null?nw(S):Qe!==null?(Qe.return=re,es=Qe):nw(S);for(;Q!==null;)es=Q,tw(Q),Q=Q.sibling;es=S,om=Ne,Da=at}sw(o)}else(S.subtreeFlags&8772)!==0&&Q!==null?(Q.return=S,es=Q):sw(o)}}function sw(o){for(;es!==null;){var l=es;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Da||lm(5,l);break;case 1:var v=l.stateNode;if(l.flags&4&&!Da)if(h===null)v.componentDidMount();else{var S=l.elementType===l.type?h.memoizedProps:Zo(l.type,h.memoizedProps);v.componentDidUpdate(S,h.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var Q=l.updateQueue;Q!==null&&xi(l,Q,v);break;case 3:var re=l.updateQueue;if(re!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}xi(l,re,h)}break;case 5:var Ne=l.stateNode;if(h===null&&l.flags&4){h=Ne;var Qe=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Qe.autoFocus&&h.focus();break;case"img":Qe.src&&(h.src=Qe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var at=l.alternate;if(at!==null){var jt=at.memoizedState;if(jt!==null){var St=jt.dehydrated;St!==null&&Lo(St)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Da||l.flags&512&&eg(l)}catch(Nt){un(l,l.return,Nt)}}if(l===o){es=null;break}if(h=l.sibling,h!==null){h.return=l.return,es=h;break}es=l.return}}function rw(o){for(;es!==null;){var l=es;if(l===o){es=null;break}var h=l.sibling;if(h!==null){h.return=l.return,es=h;break}es=l.return}}function nw(o){for(;es!==null;){var l=es;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{lm(4,l)}catch(Qe){un(l,h,Qe)}break;case 1:var v=l.stateNode;if(typeof v.componentDidMount=="function"){var S=l.return;try{v.componentDidMount()}catch(Qe){un(l,S,Qe)}}var Q=l.return;try{eg(l)}catch(Qe){un(l,Q,Qe)}break;case 5:var re=l.return;try{eg(l)}catch(Qe){un(l,re,Qe)}}}catch(Qe){un(l,l.return,Qe)}if(l===o){es=null;break}var Ne=l.sibling;if(Ne!==null){Ne.return=l.return,es=Ne;break}es=l.return}}var kC=Math.ceil,cm=k.ReactCurrentDispatcher,rg=k.ReactCurrentOwner,Ao=k.ReactCurrentBatchConfig,ir=0,ia=null,Fn=null,xa=0,Mi=0,Jd=Ti(0),On=0,rh=null,id=0,Am=0,ng=0,nh=null,wi=null,ag=0,Xd=1/0,vc=null,dm=!1,ig=null,AA=null,um=!1,dA=null,hm=0,ah=0,og=null,mm=-1,fm=0;function ii(){return(ir&6)!==0?wr():mm!==-1?mm:mm=wr()}function uA(o){return(o.mode&1)===0?1:(ir&2)!==0&&xa!==0?xa&-xa:rn.transition!==null?(fm===0&&(fm=ac()),fm):(o=Ys,o!==0||(o=window.event,o=o===void 0?16:Po(o.type)),o)}function sl(o,l,h,v){if(50<ah)throw ah=0,og=null,Error(s(185));So(o,h,v),((ir&2)===0||o!==ia)&&(o===ia&&((ir&2)===0&&(Am|=h),On===4&&hA(o,xa)),bi(o,v),h===1&&ir===0&&(l.mode&1)===0&&(Xd=wr()+500,sd&&D()))}function bi(o,l){var h=o.callbackNode;Xr(o,l);var v=Co(o,o===ia?xa:0);if(v===0)h!==null&&li(h),o.callbackNode=null,o.callbackPriority=0;else if(l=v&-v,o.callbackPriority!==l){if(h!=null&&li(h),l===1)o.tag===0?U(iw.bind(null,o)):w(iw.bind(null,o)),Ql(function(){(ir&6)===0&&D()}),h=null;else{switch(Eo(v)){case 1:h=pl;break;case 4:h=Aa;break;case 16:h=Wi;break;case 536870912:h=gl;break;default:h=Wi}h=mw(h,aw.bind(null,o))}o.callbackPriority=l,o.callbackNode=h}}function aw(o,l){if(mm=-1,fm=0,(ir&6)!==0)throw Error(s(327));var h=o.callbackNode;if(Zd()&&o.callbackNode!==h)return null;var v=Co(o,o===ia?xa:0);if(v===0)return null;if((v&30)!==0||(v&o.expiredLanes)!==0||l)l=pm(o,v);else{l=v;var S=ir;ir|=2;var Q=lw();(ia!==o||xa!==l)&&(vc=null,Xd=wr()+500,ld(o,l));do try{LC();break}catch(Ne){ow(o,Ne)}while(!0);nr(),cm.current=Q,ir=S,Fn!==null?l=0:(ia=null,xa=0,l=On)}if(l!==0){if(l===2&&(S=Ya(o),S!==0&&(v=S,l=lg(o,S))),l===1)throw h=rh,ld(o,0),hA(o,v),bi(o,wr()),h;if(l===6)hA(o,v);else{if(S=o.current.alternate,(v&30)===0&&!UC(S)&&(l=pm(o,v),l===2&&(Q=Ya(o),Q!==0&&(v=Q,l=lg(o,Q))),l===1))throw h=rh,ld(o,0),hA(o,v),bi(o,wr()),h;switch(o.finishedWork=S,o.finishedLanes=v,l){case 0:case 1:throw Error(s(345));case 2:cd(o,wi,vc);break;case 3:if(hA(o,v),(v&130023424)===v&&(l=ag+500-wr(),10<l)){if(Co(o,0)!==0)break;if(S=o.suspendedLanes,(S&v)!==v){ii(),o.pingedLanes|=o.suspendedLanes&S;break}o.timeoutHandle=Ps(cd.bind(null,o,wi,vc),l);break}cd(o,wi,vc);break;case 4:if(hA(o,v),(v&4194240)===v)break;for(l=o.eventTimes,S=-1;0<v;){var re=31-zr(v);Q=1<<re,re=l[re],re>S&&(S=re),v&=~Q}if(v=S,v=wr()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*kC(v/1960))-v,10<v){o.timeoutHandle=Ps(cd.bind(null,o,wi,vc),v);break}cd(o,wi,vc);break;case 5:cd(o,wi,vc);break;default:throw Error(s(329))}}}return bi(o,wr()),o.callbackNode===h?aw.bind(null,o):null}function lg(o,l){var h=nh;return o.current.memoizedState.isDehydrated&&(ld(o,l).flags|=256),o=pm(o,l),o!==2&&(l=wi,wi=h,l!==null&&cg(l)),o}function cg(o){wi===null?wi=o:wi.push.apply(wi,o)}function UC(o){for(var l=o;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var v=0;v<h.length;v++){var S=h[v],Q=S.getSnapshot;S=S.value;try{if(!Ir(Q(),S))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function hA(o,l){for(l&=~ng,l&=~Am,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var h=31-zr(l),v=1<<h;o[h]=-1,l&=~v}}function iw(o){if((ir&6)!==0)throw Error(s(327));Zd();var l=Co(o,0);if((l&1)===0)return bi(o,wr()),null;var h=pm(o,l);if(o.tag!==0&&h===2){var v=Ya(o);v!==0&&(l=v,h=lg(o,v))}if(h===1)throw h=rh,ld(o,0),hA(o,l),bi(o,wr()),h;if(h===6)throw Error(s(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,cd(o,wi,vc),bi(o,wr()),null}function Ag(o,l){var h=ir;ir|=1;try{return o(l)}finally{ir=h,ir===0&&(Xd=wr()+500,sd&&D())}}function od(o){dA!==null&&dA.tag===0&&(ir&6)===0&&Zd();var l=ir;ir|=1;var h=Ao.transition,v=Ys;try{if(Ao.transition=null,Ys=1,o)return o()}finally{Ys=v,Ao.transition=h,ir=l,(ir&6)===0&&D()}}function dg(){Mi=Jd.current,dr(Jd)}function ld(o,l){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,sn(h)),Fn!==null)for(h=Fn.return;h!==null;){var v=h;switch(Ze(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Dd();break;case 3:oo(),dr(Qa),dr(Rn),Xu();break;case 5:Yu(v);break;case 4:oo();break;case 13:dr(Fr);break;case 19:dr(Fr);break;case 10:Qr(v.type._context);break;case 22:case 23:dg()}h=h.return}if(ia=o,Fn=o=mA(o.current,null),xa=Mi=l,On=0,rh=null,ng=Am=id=0,wi=nh=null,br!==null){for(l=0;l<br.length;l++)if(h=br[l],v=h.interleaved,v!==null){h.interleaved=null;var S=v.next,Q=h.pending;if(Q!==null){var re=Q.next;Q.next=S,v.next=re}h.pending=v}br=null}return o}function ow(o,l){do{var h=Fn;try{if(nr(),Od.current=rm,iA){for(var v=Tr.memoizedState;v!==null;){var S=v.queue;S!==null&&(S.pending=null),v=v.next}iA=!1}if(lo=0,ln=dn=Tr=null,Jo=!1,oA=0,rg.current=null,h===null||h.return===null){On=1,rh=l,Fn=null;break}e:{var Q=o,re=h.return,Ne=h,Qe=l;if(l=xa,Ne.flags|=32768,Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var at=Qe,jt=Ne,St=jt.tag;if((jt.mode&1)===0&&(St===0||St===11||St===15)){var Nt=jt.alternate;Nt?(jt.updateQueue=Nt.updateQueue,jt.memoizedState=Nt.memoizedState,jt.lanes=Nt.lanes):(jt.updateQueue=null,jt.memoizedState=null)}var $t=Uv(re);if($t!==null){$t.flags&=-257,Iv($t,re,Ne,Q,l),$t.mode&1&&kv(Q,at,l),l=$t,Qe=at;var ss=l.updateQueue;if(ss===null){var ls=new Set;ls.add(Qe),l.updateQueue=ls}else ss.add(Qe);break e}else{if((l&1)===0){kv(Q,at,l),ug();break e}Qe=Error(s(426))}}else if(pt&&Ne.mode&1){var xn=Uv(re);if(xn!==null){(xn.flags&65536)===0&&(xn.flags|=256),Iv(xn,re,Ne,Q,l),Dt(qd(Qe,Ne));break e}}Q=Qe=qd(Qe,Ne),On!==4&&(On=2),nh===null?nh=[Q]:nh.push(Q),Q=re;do{switch(Q.tag){case 3:Q.flags|=65536,l&=-l,Q.lanes|=l;var Xe=Fv(Q,Qe,l);Nr(Q,Xe);break e;case 1:Ne=Qe;var Oe=Q.type,tt=Q.stateNode;if((Q.flags&128)===0&&(typeof Oe.getDerivedStateFromError=="function"||tt!==null&&typeof tt.componentDidCatch=="function"&&(AA===null||!AA.has(tt)))){Q.flags|=65536,l&=-l,Q.lanes|=l;var kt=_v(Q,Ne,l);Nr(Q,kt);break e}}Q=Q.return}while(Q!==null)}Aw(h)}catch(ds){l=ds,Fn===h&&h!==null&&(Fn=h=h.return);continue}break}while(!0)}function lw(){var o=cm.current;return cm.current=rm,o===null?rm:o}function ug(){(On===0||On===3||On===2)&&(On=4),ia===null||(id&268435455)===0&&(Am&268435455)===0||hA(ia,xa)}function pm(o,l){var h=ir;ir|=2;var v=lw();(ia!==o||xa!==l)&&(vc=null,ld(o,l));do try{IC();break}catch(S){ow(o,S)}while(!0);if(nr(),ir=h,cm.current=v,Fn!==null)throw Error(s(261));return ia=null,xa=0,On}function IC(){for(;Fn!==null;)cw(Fn)}function LC(){for(;Fn!==null&&!Wn();)cw(Fn)}function cw(o){var l=hw(o.alternate,o,Mi);o.memoizedProps=o.pendingProps,l===null?Aw(o):Fn=l,rg.current=null}function Aw(o){var l=o;do{var h=l.alternate;if(o=l.return,(l.flags&32768)===0){if(h=CC(h,l,Mi),h!==null){Fn=h;return}}else{if(h=SC(h,l),h!==null){h.flags&=32767,Fn=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{On=6,Fn=null;return}}if(l=l.sibling,l!==null){Fn=l;return}Fn=l=o}while(l!==null);On===0&&(On=5)}function cd(o,l,h){var v=Ys,S=Ao.transition;try{Ao.transition=null,Ys=1,QC(o,l,h,v)}finally{Ao.transition=S,Ys=v}return null}function QC(o,l,h,v){do Zd();while(dA!==null);if((ir&6)!==0)throw Error(s(327));h=o.finishedWork;var S=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(s(177));o.callbackNode=null,o.callbackPriority=0;var Q=h.lanes|h.childLanes;if(Ja(o,Q),o===ia&&(Fn=ia=null,xa=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||um||(um=!0,mw(Wi,function(){return Zd(),null})),Q=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||Q){Q=Ao.transition,Ao.transition=null;var re=Ys;Ys=1;var Ne=ir;ir|=4,rg.current=null,FC(o,h),ew(h,o),Wc(Kt),yl=!!qe,Kt=qe=null,o.current=h,_C(h),lr(),ir=Ne,Ys=re,Ao.transition=Q}else o.current=h;if(um&&(um=!1,dA=o,hm=S),Q=o.pendingLanes,Q===0&&(AA=null),Vc(h.stateNode),bi(o,wr()),l!==null)for(v=o.onRecoverableError,h=0;h<l.length;h++)S=l[h],v(S.value,{componentStack:S.stack,digest:S.digest});if(dm)throw dm=!1,o=ig,ig=null,o;return(hm&1)!==0&&o.tag!==0&&Zd(),Q=o.pendingLanes,(Q&1)!==0?o===og?ah++:(ah=0,og=o):ah=0,D(),null}function Zd(){if(dA!==null){var o=Eo(hm),l=Ao.transition,h=Ys;try{if(Ao.transition=null,Ys=16>o?16:o,dA===null)var v=!1;else{if(o=dA,dA=null,hm=0,(ir&6)!==0)throw Error(s(331));var S=ir;for(ir|=4,es=o.current;es!==null;){var Q=es,re=Q.child;if((es.flags&16)!==0){var Ne=Q.deletions;if(Ne!==null){for(var Qe=0;Qe<Ne.length;Qe++){var at=Ne[Qe];for(es=at;es!==null;){var jt=es;switch(jt.tag){case 0:case 11:case 15:sh(8,jt,Q)}var St=jt.child;if(St!==null)St.return=jt,es=St;else for(;es!==null;){jt=es;var Nt=jt.sibling,$t=jt.return;if(qv(jt),jt===at){es=null;break}if(Nt!==null){Nt.return=$t,es=Nt;break}es=$t}}}var ss=Q.alternate;if(ss!==null){var ls=ss.child;if(ls!==null){ss.child=null;do{var xn=ls.sibling;ls.sibling=null,ls=xn}while(ls!==null)}}es=Q}}if((Q.subtreeFlags&2064)!==0&&re!==null)re.return=Q,es=re;else e:for(;es!==null;){if(Q=es,(Q.flags&2048)!==0)switch(Q.tag){case 0:case 11:case 15:sh(9,Q,Q.return)}var Xe=Q.sibling;if(Xe!==null){Xe.return=Q.return,es=Xe;break e}es=Q.return}}var Oe=o.current;for(es=Oe;es!==null;){re=es;var tt=re.child;if((re.subtreeFlags&2064)!==0&&tt!==null)tt.return=re,es=tt;else e:for(re=Oe;es!==null;){if(Ne=es,(Ne.flags&2048)!==0)try{switch(Ne.tag){case 0:case 11:case 15:lm(9,Ne)}}catch(ds){un(Ne,Ne.return,ds)}if(Ne===re){es=null;break e}var kt=Ne.sibling;if(kt!==null){kt.return=Ne.return,es=kt;break e}es=Ne.return}}if(ir=S,D(),da&&typeof da.onPostCommitFiberRoot=="function")try{da.onPostCommitFiberRoot(jo,o)}catch{}v=!0}return v}finally{Ys=h,Ao.transition=l}}return!1}function dw(o,l,h){l=qd(h,l),l=Fv(o,l,1),o=an(o,l,1),l=ii(),o!==null&&(So(o,1,l),bi(o,l))}function un(o,l,h){if(o.tag===3)dw(o,o,h);else for(;l!==null;){if(l.tag===3){dw(l,o,h);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(AA===null||!AA.has(v))){o=qd(h,o),o=_v(l,o,1),l=an(l,o,1),o=ii(),l!==null&&(So(l,1,o),bi(l,o));break}}l=l.return}}function TC(o,l,h){var v=o.pingCache;v!==null&&v.delete(l),l=ii(),o.pingedLanes|=o.suspendedLanes&h,ia===o&&(xa&h)===h&&(On===4||On===3&&(xa&130023424)===xa&&500>wr()-ag?ld(o,0):ng|=h),bi(o,l)}function uw(o,l){l===0&&((o.mode&1)===0?l=1:(l=qn,qn<<=1,(qn&130023424)===0&&(qn=4194304)));var h=ii();o=yr(o,l),o!==null&&(So(o,l,h),bi(o,h))}function PC(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),uw(o,h)}function RC(o,l){var h=0;switch(o.tag){case 13:var v=o.stateNode,S=o.memoizedState;S!==null&&(h=S.retryLane);break;case 19:v=o.stateNode;break;default:throw Error(s(314))}v!==null&&v.delete(l),uw(o,h)}var hw;hw=function(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps||Qa.current)vi=!0;else{if((o.lanes&h)===0&&(l.flags&128)===0)return vi=!1,BC(o,l,h);vi=(o.flags&131072)!==0}else vi=!1,pt&&(l.flags&1048576)!==0&&Ge(l,Ae,l.index);switch(l.lanes=0,l.tag){case 2:var v=l.type;im(o,l),o=l.pendingProps;var S=nA(l,Rn.current);Wr(l,h),S=rd(null,l,v,o,S,h);var Q=co();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Ta(v)?(Q=!0,pc(l)):Q=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Dn(l),S.updater=nm,l.stateNode=S,S._reactInternals=l,Kp(l,v,o,h),l=Gp(null,l,v,!0,Q,h)):(l.tag=0,pt&&Q&&ut(l),ai(null,l,S,h),l=l.child),l;case 16:v=l.elementType;e:{switch(im(o,l),o=l.pendingProps,S=v._init,v=S(v._payload),l.type=v,S=l.tag=OC(v),o=Zo(v,o),S){case 0:l=$p(null,l,v,o,h);break e;case 1:l=Dv(null,l,v,o,h);break e;case 11:l=Lv(null,l,v,o,h);break e;case 14:l=Qv(null,l,v,Zo(v.type,o),h);break e}throw Error(s(306,v,""))}return l;case 0:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:Zo(v,S),$p(o,l,v,S,h);case 1:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:Zo(v,S),Dv(o,l,v,S,h);case 3:e:{if(Ov(l),o===null)throw Error(s(387));v=l.pendingProps,Q=l.memoizedState,S=Q.element,Pa(o,l),aa(l,v,null,h);var re=l.memoizedState;if(v=re.element,Q.isDehydrated)if(Q={element:v,isDehydrated:!1,cache:re.cache,pendingSuspenseBoundaries:re.pendingSuspenseBoundaries,transitions:re.transitions},l.updateQueue.baseState=Q,l.memoizedState=Q,l.flags&256){S=qd(Error(s(423)),l),l=Mv(o,l,v,h,S);break e}else if(v!==S){S=qd(Error(s(424)),l),l=Mv(o,l,v,h,S);break e}else for(ct=pa(l.stateNode.containerInfo.firstChild),ot=l,pt=!0,xt=null,h=Hr(l,null,v,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Xt(),v===S){l=xc(o,l,h);break e}ai(o,l,v,h)}l=l.child}return l;case 5:return Xh(l),o===null&&ts(l),v=l.type,S=l.pendingProps,Q=o!==null?o.memoizedProps:null,re=S.children,Wt(v,S)?re=null:Q!==null&&Wt(v,Q)&&(l.flags|=32),Rv(o,l),ai(o,l,re,h),l.child;case 6:return o===null&&ts(l),null;case 13:return Hv(o,l,h);case 4:return aA(l,l.stateNode.containerInfo),v=l.pendingProps,o===null?l.child=cn(l,null,v,h):ai(o,l,v,h),l.child;case 11:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:Zo(v,S),Lv(o,l,v,S,h);case 7:return ai(o,l,l.pendingProps,h),l.child;case 8:return ai(o,l,l.pendingProps.children,h),l.child;case 12:return ai(o,l,l.pendingProps.children,h),l.child;case 10:e:{if(v=l.type._context,S=l.pendingProps,Q=l.memoizedProps,re=S.value,gr(pn,v._currentValue),v._currentValue=re,Q!==null)if(Ir(Q.value,re)){if(Q.children===S.children&&!Qa.current){l=xc(o,l,h);break e}}else for(Q=l.child,Q!==null&&(Q.return=l);Q!==null;){var Ne=Q.dependencies;if(Ne!==null){re=Q.child;for(var Qe=Ne.firstContext;Qe!==null;){if(Qe.context===v){if(Q.tag===1){Qe=nn(-1,h&-h),Qe.tag=2;var at=Q.updateQueue;if(at!==null){at=at.shared;var jt=at.pending;jt===null?Qe.next=Qe:(Qe.next=jt.next,jt.next=Qe),at.pending=Qe}}Q.lanes|=h,Qe=Q.alternate,Qe!==null&&(Qe.lanes|=h),ar(Q.return,h,l),Ne.lanes|=h;break}Qe=Qe.next}}else if(Q.tag===10)re=Q.type===l.type?null:Q.child;else if(Q.tag===18){if(re=Q.return,re===null)throw Error(s(341));re.lanes|=h,Ne=re.alternate,Ne!==null&&(Ne.lanes|=h),ar(re,h,l),re=Q.sibling}else re=Q.child;if(re!==null)re.return=Q;else for(re=Q;re!==null;){if(re===l){re=null;break}if(Q=re.sibling,Q!==null){Q.return=re.return,re=Q;break}re=re.return}Q=re}ai(o,l,S.children,h),l=l.child}return l;case 9:return S=l.type,v=l.pendingProps.children,Wr(l,h),S=qr(S),v=v(S),l.flags|=1,ai(o,l,v,h),l.child;case 14:return v=l.type,S=Zo(v,l.pendingProps),S=Zo(v.type,S),Qv(o,l,v,S,h);case 15:return Tv(o,l,l.type,l.pendingProps,h);case 17:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:Zo(v,S),im(o,l),l.tag=1,Ta(v)?(o=!0,pc(l)):o=!1,Wr(l,h),Sv(l,v,S),Kp(l,v,S,h),Gp(null,l,v,!0,o,h);case 19:return Vv(o,l,h);case 22:return Pv(o,l,h)}throw Error(s(156,l.tag))};function mw(o,l){return Gn(o,l)}function DC(o,l,h,v){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uo(o,l,h,v){return new DC(o,l,h,v)}function hg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function OC(o){if(typeof o=="function")return hg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===F)return 11;if(o===ce)return 14}return 2}function mA(o,l){var h=o.alternate;return h===null?(h=uo(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function gm(o,l,h,v,S,Q){var re=2;if(v=o,typeof o=="function")hg(o)&&(re=1);else if(typeof o=="string")re=5;else e:switch(o){case H:return Ad(h.children,S,Q,l);case T:re=8,S|=8;break;case V:return o=uo(12,h,l,S|2),o.elementType=V,o.lanes=Q,o;case O:return o=uo(13,h,l,S),o.elementType=O,o.lanes=Q,o;case P:return o=uo(19,h,l,S),o.elementType=P,o.lanes=Q,o;case ae:return xm(h,S,Q,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case G:re=10;break e;case L:re=9;break e;case F:re=11;break e;case ce:re=14;break e;case W:re=16,v=null;break e}throw Error(s(130,o==null?o:typeof o,""))}return l=uo(re,h,l,S),l.elementType=o,l.type=v,l.lanes=Q,l}function Ad(o,l,h,v){return o=uo(7,o,v,l),o.lanes=h,o}function xm(o,l,h,v){return o=uo(22,o,v,l),o.elementType=ae,o.lanes=h,o.stateNode={isHidden:!1},o}function mg(o,l,h){return o=uo(6,o,null,l),o.lanes=h,o}function fg(o,l,h){return l=uo(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function MC(o,l,h,v,S){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vl(0),this.expirationTimes=vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.identifierPrefix=v,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function pg(o,l,h,v,S,Q,re,Ne,Qe){return o=new MC(o,l,h,Ne,Qe),l===1?(l=1,Q===!0&&(l|=8)):l=0,Q=uo(3,null,null,l),o.current=Q,Q.stateNode=o,Q.memoizedState={element:v,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dn(Q),o}function HC(o,l,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:v==null?null:""+v,children:o,containerInfo:l,implementation:h}}function fw(o){if(!o)return Pl;o=o._reactInternals;e:{if(ms(o)!==o||o.tag!==1)throw Error(s(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Ta(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(s(171))}if(o.tag===1){var h=o.type;if(Ta(h))return qu(o,h,l)}return l}function pw(o,l,h,v,S,Q,re,Ne,Qe){return o=pg(h,v,!0,o,S,Q,re,Ne,Qe),o.context=fw(null),h=o.current,v=ii(),S=uA(h),Q=nn(v,S),Q.callback=l??null,an(h,Q,S),o.current.lanes=S,So(o,S,v),bi(o,v),o}function vm(o,l,h,v){var S=l.current,Q=ii(),re=uA(S);return h=fw(h),l.context===null?l.context=h:l.pendingContext=h,l=nn(Q,re),l.payload={element:o},v=v===void 0?null:v,v!==null&&(l.callback=v),o=an(S,l,re),o!==null&&(sl(o,S,re,Q),na(o,S,re)),re}function wm(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function gw(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function gg(o,l){gw(o,l),(o=o.alternate)&&gw(o,l)}function KC(){return null}var xw=typeof reportError=="function"?reportError:function(o){console.error(o)};function xg(o){this._internalRoot=o}bm.prototype.render=xg.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(s(409));vm(o,l,null,null)},bm.prototype.unmount=xg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;od(function(){vm(null,o,null,null)}),l[sa]=null}};function bm(o){this._internalRoot=o}bm.prototype.unstable_scheduleHydration=function(o){if(o){var l=ic();o={blockedOn:null,target:o,priority:l};for(var h=0;h<Ai.length&&l!==0&&l<Ai[h].priority;h++);Ai.splice(h,0,o),h===0&&Gc(o)}};function vg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ym(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function vw(){}function VC(o,l,h,v,S){if(S){if(typeof v=="function"){var Q=v;v=function(){var at=wm(re);Q.call(at)}}var re=pw(l,v,o,0,null,!1,!1,"",vw);return o._reactRootContainer=re,o[sa]=re.current,Il(o.nodeType===8?o.parentNode:o),od(),re}for(;S=o.lastChild;)o.removeChild(S);if(typeof v=="function"){var Ne=v;v=function(){var at=wm(Qe);Ne.call(at)}}var Qe=pg(o,0,!1,null,null,!1,!1,"",vw);return o._reactRootContainer=Qe,o[sa]=Qe.current,Il(o.nodeType===8?o.parentNode:o),od(function(){vm(l,Qe,h,v)}),Qe}function Nm(o,l,h,v,S){var Q=h._reactRootContainer;if(Q){var re=Q;if(typeof S=="function"){var Ne=S;S=function(){var Qe=wm(re);Ne.call(Qe)}}vm(l,re,o,S)}else re=VC(h,l,o,S,v);return wm(re)}qi=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var h=qa(l.pendingLanes);h!==0&&(wl(l,h|1),bi(l,wr()),(ir&6)===0&&(Xd=wr()+500,D()))}break;case 13:od(function(){var v=yr(o,1);if(v!==null){var S=ii();sl(v,o,1,S)}}),gg(o,1)}},Fo=function(o){if(o.tag===13){var l=yr(o,134217728);if(l!==null){var h=ii();sl(l,o,134217728,h)}gg(o,134217728)}},zc=function(o){if(o.tag===13){var l=uA(o),h=yr(o,l);if(h!==null){var v=ii();sl(h,o,l,v)}gg(o,l)}},ic=function(){return Ys},_o=function(o,l){var h=Ys;try{return Ys=o,l()}finally{Ys=h}},Vt=function(o,l,h){switch(l){case"input":if(rt(o,h),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var v=h[l];if(v!==o&&v.form===o.form){var S=td(v);if(!S)throw Error(s(90));De(v),rt(v,S)}}}break;case"textarea":it(o,h);break;case"select":l=h.value,l!=null&&st(o,!!h.multiple,l,!1)}},vs=Ag,Gt=od;var zC={usingClientEntryPoint:!1,Events:[rA,mc,td,_t,Ls,Ag]},ih={findFiberByHostInstance:Tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$C={bundleType:ih.bundleType,version:ih.version,rendererPackageName:ih.rendererPackageName,rendererConfig:ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=js(o),o===null?null:o.stateNode},findFiberByHostInstance:ih.findFiberByHostInstance||KC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jm.isDisabled&&jm.supportsFiber)try{jo=jm.inject($C),da=jm}catch{}}return yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zC,yi.createPortal=function(o,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vg(l))throw Error(s(200));return HC(o,l,null,h)},yi.createRoot=function(o,l){if(!vg(o))throw Error(s(299));var h=!1,v="",S=xw;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=pg(o,1,!1,null,null,h,!1,v,S),o[sa]=l.current,Il(o.nodeType===8?o.parentNode:o),new xg(l)},yi.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=js(l),o=o===null?null:o.stateNode,o},yi.flushSync=function(o){return od(o)},yi.hydrate=function(o,l,h){if(!ym(l))throw Error(s(200));return Nm(null,o,l,!0,h)},yi.hydrateRoot=function(o,l,h){if(!vg(o))throw Error(s(405));var v=h!=null&&h.hydratedSources||null,S=!1,Q="",re=xw;if(h!=null&&(h.unstable_strictMode===!0&&(S=!0),h.identifierPrefix!==void 0&&(Q=h.identifierPrefix),h.onRecoverableError!==void 0&&(re=h.onRecoverableError)),l=pw(l,null,o,1,h??null,S,!1,Q,re),o[sa]=l.current,Il(o),v)for(o=0;o<v.length;o++)h=v[o],S=h._getVersion,S=S(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,S]:l.mutableSourceEagerHydrationData.push(h,S);return new bm(l)},yi.render=function(o,l,h){if(!ym(l))throw Error(s(200));return Nm(null,o,l,!1,h)},yi.unmountComponentAtNode=function(o){if(!ym(o))throw Error(s(40));return o._reactRootContainer?(od(function(){Nm(null,null,o,!1,function(){o._reactRootContainer=null,o[sa]=null})}),!0):!1},yi.unstable_batchedUpdates=Ag,yi.unstable_renderSubtreeIntoContainer=function(o,l,h,v){if(!ym(h))throw Error(s(200));if(o==null||o._reactInternals===void 0)throw Error(s(38));return Nm(o,l,h,!1,v)},yi.version="18.3.1-next-f1338f8080-20240426",yi}var Sw;function Vy(){if(Sw)return yg.exports;Sw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),yg.exports=e4(),yg.exports}var Ew;function t4(){if(Ew)return Bm;Ew=1;var r=Vy();return Bm.createRoot=r.createRoot,Bm.hydrateRoot=r.hydrateRoot,Bm}var s4=t4(),j=ip();const Ut=Ky(j),F0=WC({__proto__:null,default:Ut},[j]);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,n)=>n?n.toUpperCase():s.toLowerCase()),Fw=r=>{const t=n4(r);return t.charAt(0).toUpperCase()+t.slice(1)},zy=(...r)=>r.filter((t,s,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=j.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:c,...A},d)=>j.createElement("svg",{ref:d,...a4,width:t,height:t,stroke:r,strokeWidth:n?Number(s)*24/Number(t):s,className:zy("lucide",a),...A},[...c.map(([u,m])=>j.createElement(u,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=(r,t)=>{const s=j.forwardRef(({className:n,...a},i)=>j.createElement(i4,{ref:i,iconNode:t,className:zy(`lucide-${r4(Fw(r))}`,`lucide-${r}`,n),...a}));return s.displayName=Fw(r),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],l4=Mt("activity",o4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],A4=Mt("archive",c4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Fu=Mt("arrow-left",d4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],h4=Mt("arrow-right",u4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],kc=Mt("award",m4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],zi=Mt("bell",f4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Kr=Mt("book-open",p4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],$y=Mt("building-2",g4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Gy=Mt("calculator",x4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jn=Mt("calendar",v4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],_f=Mt("chart-column",w4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fo=Mt("check",b4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wy=Mt("chevron-down",y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],j4=Mt("chevron-up",N4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Is=Mt("circle-alert",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kr=Mt("circle-check-big",C4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Cc=Mt("circle-check",S4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ba=Mt("circle-x",E4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ci=Mt("clock",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Xl=Mt("credit-card",_4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],jh=Mt("database",k4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],bo=Mt("dollar-sign",U4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ur=Mt("download",I4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Bg=Mt("eye-off",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kn=Mt("eye",Q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],P4=Mt("facebook",T4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],D4=Mt("file-spreadsheet",R4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Vn=Mt("file-text",O4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],op=Mt("funnel",M4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Yl=Mt("graduation-cap",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],_w=Mt("grid-3x3",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],z4=Mt("hard-drive",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],G4=Mt("heart",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],q4=Mt("image",W4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],J4=Mt("instagram",Y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],qy=Mt("key-round",X4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],eS=Mt("key",Z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],lp=Mt("layout-dashboard",tS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],rS=Mt("link-2",sS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],kf=Mt("link",nS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Yy=Mt("list",aS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],oS=Mt("loader-circle",iS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_u=Mt("lock",lS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],_0=Mt("log-out",cS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Uf=Mt("mail",AS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Jy=Mt("map-pin",dS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Xy=Mt("menu",uS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],xo=Mt("message-square",hS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],fS=Mt("pen-line",mS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],gS=Mt("pen",pS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],If=Mt("phone",xS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],il=Mt("plus",vS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],kw=Mt("power",wS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Lh=Mt("printer",bS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],gd=Mt("receipt",yS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],vu=Mt("refresh-cw",NS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],Zy=Mt("reply",jS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ol=Mt("save",BS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Lf=Mt("school",CS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ya=Mt("search",SS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Uc=Mt("send",ES);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],e2=Mt("settings",FS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ux=Mt("shield",_S);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Uw=Mt("square-check-big",kS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Gl=Mt("square-pen",US);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Iw=Mt("square",IS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Bi=Mt("trash-2",LS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Ed=Mt("trending-up",QS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Lw=Mt("triangle-alert",TS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],RS=Mt("twitter",PS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],t2=Mt("unlink",DS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],yo=Mt("upload",OS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Qh=Mt("user-check",MS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],Bh=Mt("user-cog",HS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],MA=Mt("user-plus",KS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zl=Mt("user",VS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Qs=Mt("users",zS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ll=Mt("x",$S);function Qw(r,t){if(typeof r=="function")return r(t);r!=null&&(r.current=t)}function Lu(...r){return t=>{let s=!1;const n=r.map(a=>{const i=Qw(a,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Qw(r[a],null)}}}}function Er(...r){return j.useCallback(Lu(...r),r)}var GS=Symbol.for("react.lazy"),Qf=F0[" use ".trim().toString()];function WS(r){return typeof r=="object"&&r!==null&&"then"in r}function s2(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===GS&&"_payload"in r&&WS(r._payload)}function cp(r){const t=qS(r),s=j.forwardRef((n,a)=>{let{children:i,...c}=n;s2(i)&&typeof Qf=="function"&&(i=Qf(i._payload));const A=j.Children.toArray(i),d=A.find(JS);if(d){const u=d.props.children,m=A.map(f=>f===d?j.Children.count(u)>1?j.Children.only(null):j.isValidElement(u)?u.props.children:null:f);return e.jsx(t,{...c,ref:a,children:j.isValidElement(u)?j.cloneElement(u,void 0,m):null})}return e.jsx(t,{...c,ref:a,children:i})});return s.displayName=`${r}.Slot`,s}var r2=cp("Slot");function qS(r){const t=j.forwardRef((s,n)=>{let{children:a,...i}=s;if(s2(a)&&typeof Qf=="function"&&(a=Qf(a._payload)),j.isValidElement(a)){const c=ZS(a),A=XS(i,a.props);return a.type!==j.Fragment&&(A.ref=n?Lu(n,c):c),j.cloneElement(a,A)}return j.Children.count(a)>1?j.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var YS=Symbol("radix.slottable");function JS(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===YS}function XS(r,t){const s={...t};for(const n in t){const a=r[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...A)=>{const d=i(...A);return a(...A),d}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...r,...s}}function ZS(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}function n2(r){var t,s,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(t=0;t<a;t++)r[t]&&(s=n2(r[t]))&&(n&&(n+=" "),n+=s)}else for(s in r)r[s]&&(n&&(n+=" "),n+=s);return n}function a2(){for(var r,t,s=0,n="",a=arguments.length;s<a;s++)(r=arguments[s])&&(t=n2(r))&&(n&&(n+=" "),n+=t);return n}const Tw=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Pw=a2,k0=(r,t)=>s=>{var n;if(t?.variants==null)return Pw(r,s?.class,s?.className);const{variants:a,defaultVariants:i}=t,c=Object.keys(a).map(u=>{const m=s?.[u],f=i?.[u];if(m===null)return null;const x=Tw(m)||Tw(f);return a[u][x]}),A=s&&Object.entries(s).reduce((u,m)=>{let[f,x]=m;return x===void 0||(u[f]=x),u},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,m)=>{let{class:f,className:x,...g}=m;return Object.entries(g).every(y=>{let[b,B]=y;return Array.isArray(B)?B.includes({...i,...A}[b]):{...i,...A}[b]===B})?[...u,f,x]:u},[]);return Pw(r,c,d,s?.class,s?.className)},eE=(r,t)=>{const s=new Array(r.length+t.length);for(let n=0;n<r.length;n++)s[n]=r[n];for(let n=0;n<t.length;n++)s[r.length+n]=t[n];return s},tE=(r,t)=>({classGroupId:r,validator:t}),i2=(r=new Map,t=null,s)=>({nextPart:r,validators:t,classGroupId:s}),Tf="-",Rw=[],sE="arbitrary..",rE=r=>{const t=aE(r),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return nE(c);const A=c.split(Tf),d=A[0]===""&&A.length>1?1:0;return o2(A,d,t)},getConflictingClassGroupIds:(c,A)=>{if(A){const d=n[c],u=s[c];return d?u?eE(u,d):d:u||Rw}return s[c]||Rw}}},o2=(r,t,s)=>{if(r.length-t===0)return s.classGroupId;const a=r[t],i=s.nextPart.get(a);if(i){const u=o2(r,t+1,i);if(u)return u}const c=s.validators;if(c===null)return;const A=t===0?r.join(Tf):r.slice(t).join(Tf),d=c.length;for(let u=0;u<d;u++){const m=c[u];if(m.validator(A))return m.classGroupId}},nE=r=>r.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=r.slice(1,-1),s=t.indexOf(":"),n=t.slice(0,s);return n?sE+n:void 0})(),aE=r=>{const{theme:t,classGroups:s}=r;return iE(s,t)},iE=(r,t)=>{const s=i2();for(const n in r){const a=r[n];U0(a,s,n,t)}return s},U0=(r,t,s,n)=>{const a=r.length;for(let i=0;i<a;i++){const c=r[i];oE(c,t,s,n)}},oE=(r,t,s,n)=>{if(typeof r=="string"){lE(r,t,s);return}if(typeof r=="function"){cE(r,t,s,n);return}AE(r,t,s,n)},lE=(r,t,s)=>{const n=r===""?t:l2(t,r);n.classGroupId=s},cE=(r,t,s,n)=>{if(dE(r)){U0(r(n),t,s,n);return}t.validators===null&&(t.validators=[]),t.validators.push(tE(s,r))},AE=(r,t,s,n)=>{const a=Object.entries(r),i=a.length;for(let c=0;c<i;c++){const[A,d]=a[c];U0(d,l2(t,A),s,n)}},l2=(r,t)=>{let s=r;const n=t.split(Tf),a=n.length;for(let i=0;i<a;i++){const c=n[i];let A=s.nextPart.get(c);A||(A=i2(),s.nextPart.set(c,A)),s=A}return s},dE=r=>"isThemeGetter"in r&&r.isThemeGetter===!0,uE=r=>{if(r<1)return{get:()=>{},set:()=>{}};let t=0,s=Object.create(null),n=Object.create(null);const a=(i,c)=>{s[i]=c,t++,t>r&&(t=0,n=s,s=Object.create(null))};return{get(i){let c=s[i];if(c!==void 0)return c;if((c=n[i])!==void 0)return a(i,c),c},set(i,c){i in s?s[i]=c:a(i,c)}}},Ix="!",Dw=":",hE=[],Ow=(r,t,s,n,a)=>({modifiers:r,hasImportantModifier:t,baseClassName:s,maybePostfixModifierPosition:n,isExternal:a}),mE=r=>{const{prefix:t,experimentalParseClassName:s}=r;let n=a=>{const i=[];let c=0,A=0,d=0,u;const m=a.length;for(let b=0;b<m;b++){const B=a[b];if(c===0&&A===0){if(B===Dw){i.push(a.slice(d,b)),d=b+1;continue}if(B==="/"){u=b;continue}}B==="["?c++:B==="]"?c--:B==="("?A++:B===")"&&A--}const f=i.length===0?a:a.slice(d);let x=f,g=!1;f.endsWith(Ix)?(x=f.slice(0,-1),g=!0):f.startsWith(Ix)&&(x=f.slice(1),g=!0);const y=u&&u>d?u-d:void 0;return Ow(i,g,x,y)};if(t){const a=t+Dw,i=n;n=c=>c.startsWith(a)?i(c.slice(a.length)):Ow(hE,!1,c,void 0,!0)}if(s){const a=n;n=i=>s({className:i,parseClassName:a})}return n},fE=r=>{const t=new Map;return r.orderSensitiveModifiers.forEach((s,n)=>{t.set(s,1e6+n)}),s=>{const n=[];let a=[];for(let i=0;i<s.length;i++){const c=s[i],A=c[0]==="[",d=t.has(c);A||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(c)):a.push(c)}return a.length>0&&(a.sort(),n.push(...a)),n}},pE=r=>({cache:uE(r.cacheSize),parseClassName:mE(r),sortModifiers:fE(r),...rE(r)}),gE=/\s+/,xE=(r,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=t,c=[],A=r.trim().split(gE);let d="";for(let u=A.length-1;u>=0;u-=1){const m=A[u],{isExternal:f,modifiers:x,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:b}=s(m);if(f){d=m+(d.length>0?" "+d:d);continue}let B=!!b,N=n(B?y.substring(0,b):y);if(!N){if(!B){d=m+(d.length>0?" "+d:d);continue}if(N=n(y),!N){d=m+(d.length>0?" "+d:d);continue}B=!1}const E=x.length===0?"":x.length===1?x[0]:i(x).join(":"),I=g?E+Ix:E,k=I+N;if(c.indexOf(k)>-1)continue;c.push(k);const $=a(N,B);for(let z=0;z<$.length;++z){const H=$[z];c.push(I+H)}d=m+(d.length>0?" "+d:d)}return d},vE=(...r)=>{let t=0,s,n,a="";for(;t<r.length;)(s=r[t++])&&(n=c2(s))&&(a&&(a+=" "),a+=n);return a},c2=r=>{if(typeof r=="string")return r;let t,s="";for(let n=0;n<r.length;n++)r[n]&&(t=c2(r[n]))&&(s&&(s+=" "),s+=t);return s},wE=(r,...t)=>{let s,n,a,i;const c=d=>{const u=t.reduce((m,f)=>f(m),r());return s=pE(u),n=s.cache.get,a=s.cache.set,i=A,A(d)},A=d=>{const u=n(d);if(u)return u;const m=xE(d,s);return a(d,m),m};return i=c,(...d)=>i(vE(...d))},bE=[],Mn=r=>{const t=s=>s[r]||bE;return t.isThemeGetter=!0,t},A2=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,d2=/^\((?:(\w[\w-]*):)?(.+)\)$/i,yE=/^\d+\/\d+$/,NE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,BE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,CE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,SE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,eu=r=>yE.test(r),Ds=r=>!!r&&!Number.isNaN(Number(r)),pA=r=>!!r&&Number.isInteger(Number(r)),Cg=r=>r.endsWith("%")&&Ds(r.slice(0,-1)),wc=r=>NE.test(r),EE=()=>!0,FE=r=>jE.test(r)&&!BE.test(r),u2=()=>!1,_E=r=>CE.test(r),kE=r=>SE.test(r),UE=r=>!rs(r)&&!ns(r),IE=r=>Qu(r,f2,u2),rs=r=>A2.test(r),dd=r=>Qu(r,p2,FE),Sg=r=>Qu(r,RE,Ds),Mw=r=>Qu(r,h2,u2),LE=r=>Qu(r,m2,kE),Cm=r=>Qu(r,g2,_E),ns=r=>d2.test(r),lh=r=>Tu(r,p2),QE=r=>Tu(r,DE),Hw=r=>Tu(r,h2),TE=r=>Tu(r,f2),PE=r=>Tu(r,m2),Sm=r=>Tu(r,g2,!0),Qu=(r,t,s)=>{const n=A2.exec(r);return n?n[1]?t(n[1]):s(n[2]):!1},Tu=(r,t,s=!1)=>{const n=d2.exec(r);return n?n[1]?t(n[1]):s:!1},h2=r=>r==="position"||r==="percentage",m2=r=>r==="image"||r==="url",f2=r=>r==="length"||r==="size"||r==="bg-size",p2=r=>r==="length",RE=r=>r==="number",DE=r=>r==="family-name",g2=r=>r==="shadow",OE=()=>{const r=Mn("color"),t=Mn("font"),s=Mn("text"),n=Mn("font-weight"),a=Mn("tracking"),i=Mn("leading"),c=Mn("breakpoint"),A=Mn("container"),d=Mn("spacing"),u=Mn("radius"),m=Mn("shadow"),f=Mn("inset-shadow"),x=Mn("text-shadow"),g=Mn("drop-shadow"),y=Mn("blur"),b=Mn("perspective"),B=Mn("aspect"),N=Mn("ease"),E=Mn("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],$=()=>[...k(),ns,rs],z=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto","contain","none"],T=()=>[ns,rs,d],V=()=>[eu,"full","auto",...T()],G=()=>[pA,"none","subgrid",ns,rs],L=()=>["auto",{span:["full",pA,ns,rs]},pA,ns,rs],F=()=>[pA,"auto",ns,rs],O=()=>["auto","min","max","fr",ns,rs],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ce=()=>["start","end","center","stretch","center-safe","end-safe"],W=()=>["auto",...T()],ae=()=>[eu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],K=()=>[r,ns,rs],le=()=>[...k(),Hw,Mw,{position:[ns,rs]}],ie=()=>["no-repeat",{repeat:["","x","y","space","round"]}],se=()=>["auto","cover","contain",TE,IE,{size:[ns,rs]}],R=()=>[Cg,lh,dd],q=()=>["","none","full",u,ns,rs],te=()=>["",Ds,lh,dd],de=()=>["solid","dashed","dotted","double"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],me=()=>[Ds,Cg,Hw,Mw],pe=()=>["","none",y,ns,rs],ee=()=>["none",Ds,ns,rs],je=()=>["none",Ds,ns,rs],Pe=()=>[Ds,ns,rs],De=()=>[eu,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wc],breakpoint:[wc],color:[EE],container:[wc],"drop-shadow":[wc],ease:["in","out","in-out"],font:[UE],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wc],shadow:[wc],spacing:["px",Ds],text:[wc],"text-shadow":[wc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",eu,rs,ns,B]}],container:["container"],columns:[{columns:[Ds,rs,ns,A]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:$()}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:V()}],"inset-x":[{"inset-x":V()}],"inset-y":[{"inset-y":V()}],start:[{start:V()}],end:[{end:V()}],top:[{top:V()}],right:[{right:V()}],bottom:[{bottom:V()}],left:[{left:V()}],visibility:["visible","invisible","collapse"],z:[{z:[pA,"auto",ns,rs]}],basis:[{basis:[eu,"full","auto",A,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ds,eu,"auto","initial","none",rs]}],grow:[{grow:["",Ds,ns,rs]}],shrink:[{shrink:["",Ds,ns,rs]}],order:[{order:[pA,"first","last","none",ns,rs]}],"grid-cols":[{"grid-cols":G()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":G()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":O()}],"auto-rows":[{"auto-rows":O()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...ce(),"normal"]}],"justify-self":[{"justify-self":["auto",...ce()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...ce(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ce(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...ce(),"baseline"]}],"place-self":[{"place-self":["auto",...ce()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:W()}],mx:[{mx:W()}],my:[{my:W()}],ms:[{ms:W()}],me:[{me:W()}],mt:[{mt:W()}],mr:[{mr:W()}],mb:[{mb:W()}],ml:[{ml:W()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:ae()}],w:[{w:[A,"screen",...ae()]}],"min-w":[{"min-w":[A,"screen","none",...ae()]}],"max-w":[{"max-w":[A,"screen","none","prose",{screen:[c]},...ae()]}],h:[{h:["screen","lh",...ae()]}],"min-h":[{"min-h":["screen","lh","none",...ae()]}],"max-h":[{"max-h":["screen","lh",...ae()]}],"font-size":[{text:["base",s,lh,dd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,ns,Sg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cg,rs]}],"font-family":[{font:[QE,rs,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ns,rs]}],"line-clamp":[{"line-clamp":[Ds,"none",ns,Sg]}],leading:[{leading:[i,...T()]}],"list-image":[{"list-image":["none",ns,rs]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ns,rs]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ds,"from-font","auto",ns,dd]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[Ds,"auto",ns,rs]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ns,rs]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ns,rs]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:le()}],"bg-repeat":[{bg:ie()}],"bg-size":[{bg:se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},pA,ns,rs],radial:["",ns,rs],conic:[pA,ns,rs]},PE,LE]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:R()}],"gradient-via-pos":[{via:R()}],"gradient-to-pos":[{to:R()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...de(),"hidden","none"]}],"divide-style":[{divide:[...de(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...de(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ds,ns,rs]}],"outline-w":[{outline:["",Ds,lh,dd]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",m,Sm,Cm]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",f,Sm,Cm]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[Ds,dd]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",x,Sm,Cm]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[Ds,ns,rs]}],"mix-blend":[{"mix-blend":[...fe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":fe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ds]}],"mask-image-linear-from-pos":[{"mask-linear-from":me()}],"mask-image-linear-to-pos":[{"mask-linear-to":me()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":me()}],"mask-image-t-to-pos":[{"mask-t-to":me()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":me()}],"mask-image-r-to-pos":[{"mask-r-to":me()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":me()}],"mask-image-b-to-pos":[{"mask-b-to":me()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":me()}],"mask-image-l-to-pos":[{"mask-l-to":me()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":me()}],"mask-image-x-to-pos":[{"mask-x-to":me()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":me()}],"mask-image-y-to-pos":[{"mask-y-to":me()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[ns,rs]}],"mask-image-radial-from-pos":[{"mask-radial-from":me()}],"mask-image-radial-to-pos":[{"mask-radial-to":me()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[Ds]}],"mask-image-conic-from-pos":[{"mask-conic-from":me()}],"mask-image-conic-to-pos":[{"mask-conic-to":me()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:le()}],"mask-repeat":[{mask:ie()}],"mask-size":[{mask:se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ns,rs]}],filter:[{filter:["","none",ns,rs]}],blur:[{blur:pe()}],brightness:[{brightness:[Ds,ns,rs]}],contrast:[{contrast:[Ds,ns,rs]}],"drop-shadow":[{"drop-shadow":["","none",g,Sm,Cm]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",Ds,ns,rs]}],"hue-rotate":[{"hue-rotate":[Ds,ns,rs]}],invert:[{invert:["",Ds,ns,rs]}],saturate:[{saturate:[Ds,ns,rs]}],sepia:[{sepia:["",Ds,ns,rs]}],"backdrop-filter":[{"backdrop-filter":["","none",ns,rs]}],"backdrop-blur":[{"backdrop-blur":pe()}],"backdrop-brightness":[{"backdrop-brightness":[Ds,ns,rs]}],"backdrop-contrast":[{"backdrop-contrast":[Ds,ns,rs]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ds,ns,rs]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ds,ns,rs]}],"backdrop-invert":[{"backdrop-invert":["",Ds,ns,rs]}],"backdrop-opacity":[{"backdrop-opacity":[Ds,ns,rs]}],"backdrop-saturate":[{"backdrop-saturate":[Ds,ns,rs]}],"backdrop-sepia":[{"backdrop-sepia":["",Ds,ns,rs]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ns,rs]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ds,"initial",ns,rs]}],ease:[{ease:["linear","initial",N,ns,rs]}],delay:[{delay:[Ds,ns,rs]}],animate:[{animate:["none",E,ns,rs]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,ns,rs]}],"perspective-origin":[{"perspective-origin":$()}],rotate:[{rotate:ee()}],"rotate-x":[{"rotate-x":ee()}],"rotate-y":[{"rotate-y":ee()}],"rotate-z":[{"rotate-z":ee()}],scale:[{scale:je()}],"scale-x":[{"scale-x":je()}],"scale-y":[{"scale-y":je()}],"scale-z":[{"scale-z":je()}],"scale-3d":["scale-3d"],skew:[{skew:Pe()}],"skew-x":[{"skew-x":Pe()}],"skew-y":[{"skew-y":Pe()}],transform:[{transform:[ns,rs,"","none","gpu","cpu"]}],"transform-origin":[{origin:$()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:De()}],"translate-x":[{"translate-x":De()}],"translate-y":[{"translate-y":De()}],"translate-z":[{"translate-z":De()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ns,rs]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ns,rs]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[Ds,lh,dd,Sg]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ME=wE(OE);function ps(...r){return ME(a2(r))}const I0=k0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Ce({className:r,variant:t,size:s,asChild:n=!1,...a}){const i=n?r2:"button";return e.jsx(i,{"data-slot":"button",className:ps(I0({variant:t,size:s,className:r})),...a})}function ye({className:r,...t}){return e.jsx("div",{"data-slot":"card",className:ps("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...t})}function It({className:r,...t}){return e.jsx("div",{"data-slot":"card-header",className:ps("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function Hs({className:r,...t}){return e.jsx("h4",{"data-slot":"card-title",className:ps("leading-none",r),...t})}function HE({className:r,...t}){return e.jsx("p",{"data-slot":"card-description",className:ps("text-muted-foreground",r),...t})}function ke({className:r,...t}){return e.jsx("div",{"data-slot":"card-content",className:ps("px-6 [&:last-child]:pb-6",r),...t})}const ku=""+new URL("school-logo-ZzswyZIT.jpg",import.meta.url).href;function KE({onNavigateToLogin:r}){const[t,s]=j.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-sm backdrop-blur-sm bg-white/95",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-lg ring-2 ring-[#FFD700]/30 p-1",children:e.jsx("img",{src:ku,alt:"Graceland Royal Academy Logo",className:"w-full h-full object-contain rounded-full"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[#0A2540]",children:"Graceland Royal Academy"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gombe"})]})]}),e.jsxs("nav",{className:"hidden lg:flex items-center gap-8",children:[e.jsxs("a",{href:"#home",className:"text-gray-700 hover:text-[#0A2540] transition-colors relative group",children:["Home",e.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-[#FFD700] transition-all group-hover:w-full"})]}),e.jsxs("a",{href:"#about",className:"text-gray-700 hover:text-[#0A2540] transition-colors relative group",children:["About",e.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-[#FFD700] transition-all group-hover:w-full"})]}),e.jsxs("a",{href:"#features",className:"text-gray-700 hover:text-[#0A2540] transition-colors relative group",children:["Features",e.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-[#FFD700] transition-all group-hover:w-full"})]}),e.jsxs("a",{href:"#admissions",className:"text-gray-700 hover:text-[#0A2540] transition-colors relative group",children:["Admissions",e.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-[#FFD700] transition-all group-hover:w-full"})]}),e.jsxs("a",{href:"#contact",className:"text-gray-700 hover:text-[#0A2540] transition-colors relative group",children:["Contact",e.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-[#FFD700] transition-all group-hover:w-full"})]}),e.jsx(Ce,{onClick:r,className:"bg-[#FFD700] text-[#0A2540] hover:bg-[#FFD700]/90 rounded-xl px-6 shadow-lg hover:shadow-xl transition-all hover:scale-105",children:"Login to Portal"})]}),e.jsxs("div",{className:"flex items-center gap-2 lg:hidden",children:[e.jsx(Ce,{onClick:r,className:"bg-[#FFD700] text-[#0A2540] hover:bg-[#FFD700]/90 rounded-xl text-sm px-4",children:"Login"}),e.jsx(Ce,{onClick:()=>s(!t),variant:"ghost",className:"p-2",children:t?e.jsx(ll,{className:"w-6 h-6"}):e.jsx(Xy,{className:"w-6 h-6"})})]})]}),t&&e.jsxs("nav",{className:"lg:hidden mt-4 pb-4 space-y-2 border-t pt-4 animate-in slide-in-from-top-2",children:[e.jsx("a",{href:"#home",className:"block py-2 text-gray-700 hover:text-[#0A2540] transition-colors",children:"Home"}),e.jsx("a",{href:"#about",className:"block py-2 text-gray-700 hover:text-[#0A2540] transition-colors",children:"About"}),e.jsx("a",{href:"#features",className:"block py-2 text-gray-700 hover:text-[#0A2540] transition-colors",children:"Features"}),e.jsx("a",{href:"#admissions",className:"block py-2 text-gray-700 hover:text-[#0A2540] transition-colors",children:"Admissions"}),e.jsx("a",{href:"#contact",className:"block py-2 text-gray-700 hover:text-[#0A2540] transition-colors",children:"Contact"})]})]})}),e.jsxs("section",{id:"home",className:"relative h-[600px] flex items-center justify-center overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1603958956194-cf9718dba4b1?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb2Rlcm4lMjBzY2hvb2wlMjBidWlsZGluZ3xlbnwxfHx8fDE3NjE4ODc3MjR8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral')"},children:e.jsx("div",{className:"absolute inset-0 bg-[#0A2540]/80"})}),e.jsxs("div",{className:"relative z-10 container mx-auto px-4 text-center text-white",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-white flex items-center justify-center mx-auto mb-6",children:e.jsx(Lf,{className:"w-12 h-12 text-[#0A2540]"})}),e.jsx("h1",{className:"text-5xl md:text-6xl mb-4 text-white",children:"Graceland Royal Academy Gombe"}),e.jsx("p",{className:"text-2xl md:text-3xl text-[#FFD700] mb-8 italic",children:'"Wisdom & Illumination"'}),e.jsx("p",{className:"max-w-2xl mx-auto mb-8 text-lg text-white/90",children:"Excellence in education, nurturing young minds to become tomorrow's leaders through innovation, dedication, and moral values."}),e.jsx(Ce,{onClick:r,className:"bg-[#FFD700] text-[#0A2540] hover:bg-[#FFD700]/90 rounded-xl px-8 py-6 h-auto",children:"Login to Portal"})]})]}),e.jsx("section",{id:"about",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl text-[#0A2540] mb-4",children:"About Us"}),e.jsx("div",{className:"w-20 h-1 bg-[#FFD700] mx-auto rounded-full"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("p",{className:"text-center text-gray-700 mb-8",children:"Graceland Royal Academy Gombe is a premier educational institution dedicated to providing quality education that shapes character, builds knowledge, and prepares students for a successful future. Our commitment to excellence has made us a leading choice for parents seeking the best education for their children."}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx(ye,{className:"border-2 border-[#0A2540]/10 rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs(ke,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#0A2540] flex items-center justify-center mx-auto mb-4",children:e.jsx(Kr,{className:"w-8 h-8 text-[#FFD700]"})}),e.jsx("h3",{className:"mb-2 text-[#0A2540]",children:"Quality Education"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Modern curriculum designed to meet international standards"})]})}),e.jsx(ye,{className:"border-2 border-[#0A2540]/10 rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs(ke,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#0A2540] flex items-center justify-center mx-auto mb-4",children:e.jsx(Qs,{className:"w-8 h-8 text-[#FFD700]"})}),e.jsx("h3",{className:"mb-2 text-[#0A2540]",children:"Expert Teachers"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Highly qualified and dedicated teaching staff"})]})}),e.jsx(ye,{className:"border-2 border-[#0A2540]/10 rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs(ke,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#0A2540] flex items-center justify-center mx-auto mb-4",children:e.jsx(kc,{className:"w-8 h-8 text-[#FFD700]"})}),e.jsx("h3",{className:"mb-2 text-[#0A2540]",children:"Excellence"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Proven track record of academic achievements"})]})})]})]})]})}),e.jsx("section",{id:"features",className:"py-20 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl text-[#0A2540] mb-4",children:"Why Choose Us"}),e.jsx("div",{className:"w-20 h-1 bg-[#FFD700] mx-auto rounded-full"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto",children:[{title:"Modern Facilities",description:"State-of-the-art classrooms and laboratories"},{title:"Safe Environment",description:"Secure campus with 24/7 supervision"},{title:"Digital Learning",description:"Technology-enhanced education"},{title:"Moral Values",description:"Character development alongside academics"}].map((n,a)=>e.jsx(ye,{className:"border-2 border-[#0A2540]/10 rounded-xl overflow-hidden hover:border-[#FFD700] transition-all",children:e.jsxs(ke,{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-[#FFD700] flex items-center justify-center mb-4",children:e.jsx(Lf,{className:"w-6 h-6 text-[#0A2540]"})}),e.jsx("h4",{className:"mb-2 text-[#0A2540]",children:n.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:n.description})]})},a))})]})}),e.jsx("section",{className:"py-20 bg-[#0A2540] text-white",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-4xl mb-6",children:"Our Mission"}),e.jsx("p",{className:"max-w-3xl mx-auto text-lg text-white/90",children:"To provide holistic education that develops intellectual, physical, social, and moral capabilities of our students, preparing them to be responsible citizens and leaders who will contribute positively to society with wisdom and illumination."})]})}),e.jsx("section",{id:"admissions",className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl text-[#0A2540] mb-4",children:"Admissions Information"}),e.jsx("div",{className:"w-20 h-1 bg-[#FFD700] mx-auto rounded-full"})]}),e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsx(ye,{className:"border-2 border-[#0A2540]/10 rounded-xl overflow-hidden shadow-lg",children:e.jsxs(ke,{className:"p-8",children:[e.jsx("p",{className:"text-gray-700 mb-6",children:"We are currently accepting applications for the upcoming academic session. Join a community of excellence where your child's future is our priority."}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-[#0A2540] rounded-xl text-white",children:[e.jsx("p",{className:"text-sm text-[#FFD700]",children:"Nursery"}),e.jsx("p",{children:"Ages 2-5"})]}),e.jsxs("div",{className:"p-4 bg-[#0A2540] rounded-xl text-white",children:[e.jsx("p",{className:"text-sm text-[#FFD700]",children:"Primary"}),e.jsx("p",{children:"Ages 6-11"})]}),e.jsxs("div",{className:"p-4 bg-[#0A2540] rounded-xl text-white",children:[e.jsx("p",{className:"text-sm text-[#FFD700]",children:"Secondary"}),e.jsx("p",{children:"Ages 12-17"})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"For admission inquiries, please contact our administrative office or login to the portal."})]})})})]})}),e.jsx("footer",{id:"contact",className:"bg-[#0A2540] text-white py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("img",{src:ku,alt:"Graceland Royal Academy Logo",className:"w-16 h-16 object-contain bg-white rounded-full p-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white",children:"Graceland Royal Academy"}),e.jsx("p",{className:"text-sm text-[#FFD700]",children:"Wisdom & Illumination"})]})]}),e.jsx("p",{className:"text-white/80 text-sm",children:"Building tomorrow's leaders through quality education and moral values."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-white",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Jy,{className:"w-5 h-5 text-[#FFD700]"}),e.jsx("p",{className:"text-sm text-white/80",children:"Gombe State, Nigeria"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(If,{className:"w-5 h-5 text-[#FFD700]"}),e.jsx("p",{className:"text-sm text-white/80",children:"+234 XXX XXX XXXX"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Uf,{className:"w-5 h-5 text-[#FFD700]"}),e.jsx("p",{className:"text-sm text-white/80",children:"info@gracelandroyalacademy.edu.ng"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-4 text-white",children:"Follow Us"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 hover:bg-[#FFD700] flex items-center justify-center cursor-pointer transition-colors",children:e.jsx(P4,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 hover:bg-[#FFD700] flex items-center justify-center cursor-pointer transition-colors",children:e.jsx(RS,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 hover:bg-[#FFD700] flex items-center justify-center cursor-pointer transition-colors",children:e.jsx(J4,{className:"w-5 h-5"})})]})]})]}),e.jsx("div",{className:"border-t border-white/10 pt-6 text-center",children:e.jsx("p",{className:"text-white/60 text-sm",children:" 2025 Graceland Royal Academy Gombe. All rights reserved."})})]})})]})}function Et({className:r,type:t,...s}){return e.jsx("input",{type:t,"data-slot":"input",className:ps("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...s})}var Vh=Vy();const x2=Ky(Vh);var VE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zE=VE.reduce((r,t)=>{const s=cp(`Primitive.${t}`),n=j.forwardRef((a,i)=>{const{asChild:c,...A}=a,d=c?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...A,ref:i})});return n.displayName=`Primitive.${t}`,{...r,[t]:n}},{}),$E="Label",v2=j.forwardRef((r,t)=>e.jsx(zE.label,{...r,ref:t,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(r.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));v2.displayName=$E;var GE=v2;function He({className:r,...t}){return e.jsx(GE,{"data-slot":"label",className:ps("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}function Kw(r,[t,s]){return Math.min(s,Math.max(t,r))}function Ks(r,t,{checkForDefaultPrevented:s=!0}={}){return function(a){if(r?.(a),s===!1||!a.defaultPrevented)return t?.(a)}}function WE(r,t){const s=j.createContext(t),n=i=>{const{children:c,...A}=i,d=j.useMemo(()=>A,Object.values(A));return e.jsx(s.Provider,{value:d,children:c})};n.displayName=r+"Provider";function a(i){const c=j.useContext(s);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${r}\``)}return[n,a]}function Rc(r,t=[]){let s=[];function n(i,c){const A=j.createContext(c),d=s.length;s=[...s,c];const u=f=>{const{scope:x,children:g,...y}=f,b=x?.[r]?.[d]||A,B=j.useMemo(()=>y,Object.values(y));return e.jsx(b.Provider,{value:B,children:g})};u.displayName=i+"Provider";function m(f,x){const g=x?.[r]?.[d]||A,y=j.useContext(g);if(y)return y;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,m]}const a=()=>{const i=s.map(c=>j.createContext(c));return function(A){const d=A?.[r]||i;return j.useMemo(()=>({[`__scope${r}`]:{...A,[r]:d}}),[A,d])}};return a.scopeName=r,[n,qE(a,...t)]}function qE(...r){const t=r[0];if(r.length===1)return t;const s=()=>{const n=r.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const c=n.reduce((A,{useScope:d,scopeName:u})=>{const f=d(i)[`__scope${u}`];return{...A,...f}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return s.scopeName=t.scopeName,s}function Vw(r){const t=YE(r),s=j.forwardRef((n,a)=>{const{children:i,...c}=n,A=j.Children.toArray(i),d=A.find(XE);if(d){const u=d.props.children,m=A.map(f=>f===d?j.Children.count(u)>1?j.Children.only(null):j.isValidElement(u)?u.props.children:null:f);return e.jsx(t,{...c,ref:a,children:j.isValidElement(u)?j.cloneElement(u,void 0,m):null})}return e.jsx(t,{...c,ref:a,children:i})});return s.displayName=`${r}.Slot`,s}function YE(r){const t=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const c=eF(a),A=ZE(i,a.props);return a.type!==j.Fragment&&(A.ref=n?Lu(n,c):c),j.cloneElement(a,A)}return j.Children.count(a)>1?j.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var JE=Symbol("radix.slottable");function XE(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===JE}function ZE(r,t){const s={...t};for(const n in t){const a=r[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...A)=>{const d=i(...A);return a(...A),d}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...r,...s}}function eF(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}function w2(r){const t=r+"CollectionProvider",[s,n]=Rc(t),[a,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:B,children:N}=b,E=Ut.useRef(null),I=Ut.useRef(new Map).current;return e.jsx(a,{scope:B,itemMap:I,collectionRef:E,children:N})};c.displayName=t;const A=r+"CollectionSlot",d=Vw(A),u=Ut.forwardRef((b,B)=>{const{scope:N,children:E}=b,I=i(A,N),k=Er(B,I.collectionRef);return e.jsx(d,{ref:k,children:E})});u.displayName=A;const m=r+"CollectionItemSlot",f="data-radix-collection-item",x=Vw(m),g=Ut.forwardRef((b,B)=>{const{scope:N,children:E,...I}=b,k=Ut.useRef(null),$=Er(B,k),z=i(m,N);return Ut.useEffect(()=>(z.itemMap.set(k,{ref:k,...I}),()=>void z.itemMap.delete(k))),e.jsx(x,{[f]:"",ref:$,children:E})});g.displayName=m;function y(b){const B=i(r+"CollectionConsumer",b);return Ut.useCallback(()=>{const E=B.collectionRef.current;if(!E)return[];const I=Array.from(E.querySelectorAll(`[${f}]`));return Array.from(B.itemMap.values()).sort((z,H)=>I.indexOf(z.ref.current)-I.indexOf(H.ref.current))},[B.collectionRef,B.itemMap])}return[{Provider:c,Slot:u,ItemSlot:g},y,n]}var tF=j.createContext(void 0);function L0(r){const t=j.useContext(tF);return r||t||"ltr"}function sF(r){const t=rF(r),s=j.forwardRef((n,a)=>{const{children:i,...c}=n,A=j.Children.toArray(i),d=A.find(aF);if(d){const u=d.props.children,m=A.map(f=>f===d?j.Children.count(u)>1?j.Children.only(null):j.isValidElement(u)?u.props.children:null:f);return e.jsx(t,{...c,ref:a,children:j.isValidElement(u)?j.cloneElement(u,void 0,m):null})}return e.jsx(t,{...c,ref:a,children:i})});return s.displayName=`${r}.Slot`,s}function rF(r){const t=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const c=oF(a),A=iF(i,a.props);return a.type!==j.Fragment&&(A.ref=n?Lu(n,c):c),j.cloneElement(a,A)}return j.Children.count(a)>1?j.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var nF=Symbol("radix.slottable");function aF(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===nF}function iF(r,t){const s={...t};for(const n in t){const a=r[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...A)=>{const d=i(...A);return a(...A),d}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...r,...s}}function oF(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}var lF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qs=lF.reduce((r,t)=>{const s=sF(`Primitive.${t}`),n=j.forwardRef((a,i)=>{const{asChild:c,...A}=a,d=c?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...A,ref:i})});return n.displayName=`Primitive.${t}`,{...r,[t]:n}},{});function cF(r,t){r&&Vh.flushSync(()=>r.dispatchEvent(t))}function Ic(r){const t=j.useRef(r);return j.useEffect(()=>{t.current=r}),j.useMemo(()=>(...s)=>t.current?.(...s),[])}function AF(r,t=globalThis?.document){const s=Ic(r);j.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[s,t])}var dF="DismissableLayer",Lx="dismissableLayer.update",uF="dismissableLayer.pointerDownOutside",hF="dismissableLayer.focusOutside",zw,b2=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Q0=j.forwardRef((r,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:c,onDismiss:A,...d}=r,u=j.useContext(b2),[m,f]=j.useState(null),x=m?.ownerDocument??globalThis?.document,[,g]=j.useState({}),y=Er(t,H=>f(H)),b=Array.from(u.layers),[B]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),N=b.indexOf(B),E=m?b.indexOf(m):-1,I=u.layersWithOutsidePointerEventsDisabled.size>0,k=E>=N,$=pF(H=>{const T=H.target,V=[...u.branches].some(G=>G.contains(T));!k||V||(a?.(H),c?.(H),H.defaultPrevented||A?.())},x),z=gF(H=>{const T=H.target;[...u.branches].some(G=>G.contains(T))||(i?.(H),c?.(H),H.defaultPrevented||A?.())},x);return AF(H=>{E===u.layers.size-1&&(n?.(H),!H.defaultPrevented&&A&&(H.preventDefault(),A()))},x),j.useEffect(()=>{if(m)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(zw=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),$w(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=zw)}},[m,x,s,u]),j.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),$w())},[m,u]),j.useEffect(()=>{const H=()=>g({});return document.addEventListener(Lx,H),()=>document.removeEventListener(Lx,H)},[]),e.jsx(qs.div,{...d,ref:y,style:{pointerEvents:I?k?"auto":"none":void 0,...r.style},onFocusCapture:Ks(r.onFocusCapture,z.onFocusCapture),onBlurCapture:Ks(r.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Ks(r.onPointerDownCapture,$.onPointerDownCapture)})});Q0.displayName=dF;var mF="DismissableLayerBranch",fF=j.forwardRef((r,t)=>{const s=j.useContext(b2),n=j.useRef(null),a=Er(t,n);return j.useEffect(()=>{const i=n.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),e.jsx(qs.div,{...r,ref:a})});fF.displayName=mF;function pF(r,t=globalThis?.document){const s=Ic(r),n=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const i=A=>{if(A.target&&!n.current){let d=function(){y2(uF,s,u,{discrete:!0})};const u={originalEvent:A};A.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function gF(r,t=globalThis?.document){const s=Ic(r),n=j.useRef(!1);return j.useEffect(()=>{const a=i=>{i.target&&!n.current&&y2(hF,s,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function $w(){const r=new CustomEvent(Lx);document.dispatchEvent(r)}function y2(r,t,s,{discrete:n}){const a=s.originalEvent.target,i=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:s});t&&a.addEventListener(r,t,{once:!0}),n?cF(a,i):a.dispatchEvent(i)}var Eg=0;function N2(){j.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??Gw()),document.body.insertAdjacentElement("beforeend",r[1]??Gw()),Eg++,()=>{Eg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Eg--}},[])}function Gw(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var Fg="focusScope.autoFocusOnMount",_g="focusScope.autoFocusOnUnmount",Ww={bubbles:!1,cancelable:!0},xF="FocusScope",T0=j.forwardRef((r,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...c}=r,[A,d]=j.useState(null),u=Ic(a),m=Ic(i),f=j.useRef(null),x=Er(t,b=>d(b)),g=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(n){let b=function(I){if(g.paused||!A)return;const k=I.target;A.contains(k)?f.current=k:wA(f.current,{select:!0})},B=function(I){if(g.paused||!A)return;const k=I.relatedTarget;k!==null&&(A.contains(k)||wA(f.current,{select:!0}))},N=function(I){if(document.activeElement===document.body)for(const $ of I)$.removedNodes.length>0&&wA(A)};document.addEventListener("focusin",b),document.addEventListener("focusout",B);const E=new MutationObserver(N);return A&&E.observe(A,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",B),E.disconnect()}}},[n,A,g.paused]),j.useEffect(()=>{if(A){Yw.add(g);const b=document.activeElement;if(!A.contains(b)){const N=new CustomEvent(Fg,Ww);A.addEventListener(Fg,u),A.dispatchEvent(N),N.defaultPrevented||(vF(jF(j2(A)),{select:!0}),document.activeElement===b&&wA(A))}return()=>{A.removeEventListener(Fg,u),setTimeout(()=>{const N=new CustomEvent(_g,Ww);A.addEventListener(_g,m),A.dispatchEvent(N),N.defaultPrevented||wA(b??document.body,{select:!0}),A.removeEventListener(_g,m),Yw.remove(g)},0)}}},[A,u,m,g]);const y=j.useCallback(b=>{if(!s&&!n||g.paused)return;const B=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,N=document.activeElement;if(B&&N){const E=b.currentTarget,[I,k]=wF(E);I&&k?!b.shiftKey&&N===k?(b.preventDefault(),s&&wA(I,{select:!0})):b.shiftKey&&N===I&&(b.preventDefault(),s&&wA(k,{select:!0})):N===E&&b.preventDefault()}},[s,n,g.paused]);return e.jsx(qs.div,{tabIndex:-1,...c,ref:x,onKeyDown:y})});T0.displayName=xF;function vF(r,{select:t=!1}={}){const s=document.activeElement;for(const n of r)if(wA(n,{select:t}),document.activeElement!==s)return}function wF(r){const t=j2(r),s=qw(t,r),n=qw(t.reverse(),r);return[s,n]}function j2(r){const t=[],s=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function qw(r,t){for(const s of r)if(!bF(s,{upTo:t}))return s}function bF(r,{upTo:t}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(t!==void 0&&r===t)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function yF(r){return r instanceof HTMLInputElement&&"select"in r}function wA(r,{select:t=!1}={}){if(r&&r.focus){const s=document.activeElement;r.focus({preventScroll:!0}),r!==s&&yF(r)&&t&&r.select()}}var Yw=NF();function NF(){let r=[];return{add(t){const s=r[0];t!==s&&s?.pause(),r=Jw(r,t),r.unshift(t)},remove(t){r=Jw(r,t),r[0]?.resume()}}}function Jw(r,t){const s=[...r],n=s.indexOf(t);return n!==-1&&s.splice(n,1),s}function jF(r){return r.filter(t=>t.tagName!=="A")}var zn=globalThis?.document?j.useLayoutEffect:()=>{},BF=F0[" useId ".trim().toString()]||(()=>{}),CF=0;function FA(r){const[t,s]=j.useState(BF());return zn(()=>{s(n=>n??String(CF++))},[r]),r||(t?`radix-${t}`:"")}const SF=["top","right","bottom","left"],HA=Math.min,Vi=Math.max,Pf=Math.round,Em=Math.floor,Jl=r=>({x:r,y:r}),EF={left:"right",right:"left",bottom:"top",top:"bottom"},FF={start:"end",end:"start"};function Qx(r,t,s){return Vi(r,HA(t,s))}function Lc(r,t){return typeof r=="function"?r(t):r}function Qc(r){return r.split("-")[0]}function Pu(r){return r.split("-")[1]}function P0(r){return r==="x"?"y":"x"}function R0(r){return r==="y"?"height":"width"}const _F=new Set(["top","bottom"]);function Wl(r){return _F.has(Qc(r))?"y":"x"}function D0(r){return P0(Wl(r))}function kF(r,t,s){s===void 0&&(s=!1);const n=Pu(r),a=D0(r),i=R0(a);let c=a==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(c=Rf(c)),[c,Rf(c)]}function UF(r){const t=Rf(r);return[Tx(r),t,Tx(t)]}function Tx(r){return r.replace(/start|end/g,t=>FF[t])}const Xw=["left","right"],Zw=["right","left"],IF=["top","bottom"],LF=["bottom","top"];function QF(r,t,s){switch(r){case"top":case"bottom":return s?t?Zw:Xw:t?Xw:Zw;case"left":case"right":return t?IF:LF;default:return[]}}function TF(r,t,s,n){const a=Pu(r);let i=QF(Qc(r),s==="start",n);return a&&(i=i.map(c=>c+"-"+a),t&&(i=i.concat(i.map(Tx)))),i}function Rf(r){return r.replace(/left|right|bottom|top/g,t=>EF[t])}function PF(r){return{top:0,right:0,bottom:0,left:0,...r}}function B2(r){return typeof r!="number"?PF(r):{top:r,right:r,bottom:r,left:r}}function Df(r){const{x:t,y:s,width:n,height:a}=r;return{width:n,height:a,top:s,left:t,right:t+n,bottom:s+a,x:t,y:s}}function e1(r,t,s){let{reference:n,floating:a}=r;const i=Wl(t),c=D0(t),A=R0(c),d=Qc(t),u=i==="y",m=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,x=n[A]/2-a[A]/2;let g;switch(d){case"top":g={x:m,y:n.y-a.height};break;case"bottom":g={x:m,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:f};break;case"left":g={x:n.x-a.width,y:f};break;default:g={x:n.x,y:n.y}}switch(Pu(t)){case"start":g[c]-=x*(s&&u?-1:1);break;case"end":g[c]+=x*(s&&u?-1:1);break}return g}const RF=async(r,t,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:c}=s,A=i.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(t));let u=await c.getElementRects({reference:r,floating:t,strategy:a}),{x:m,y:f}=e1(u,n,d),x=n,g={},y=0;for(let b=0;b<A.length;b++){const{name:B,fn:N}=A[b],{x:E,y:I,data:k,reset:$}=await N({x:m,y:f,initialPlacement:n,placement:x,strategy:a,middlewareData:g,rects:u,platform:c,elements:{reference:r,floating:t}});m=E??m,f=I??f,g={...g,[B]:{...g[B],...k}},$&&y<=50&&(y++,typeof $=="object"&&($.placement&&(x=$.placement),$.rects&&(u=$.rects===!0?await c.getElementRects({reference:r,floating:t,strategy:a}):$.rects),{x:m,y:f}=e1(u,x,d)),b=-1)}return{x:m,y:f,placement:x,strategy:a,middlewareData:g}};async function Th(r,t){var s;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:c,elements:A,strategy:d}=r,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:x=!1,padding:g=0}=Lc(t,r),y=B2(g),B=A[x?f==="floating"?"reference":"floating":f],N=Df(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(B)))==null||s?B:B.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(A.floating)),boundary:u,rootBoundary:m,strategy:d})),E=f==="floating"?{x:n,y:a,width:c.floating.width,height:c.floating.height}:c.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(A.floating)),k=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},$=Df(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:A,rect:E,offsetParent:I,strategy:d}):E);return{top:(N.top-$.top+y.top)/k.y,bottom:($.bottom-N.bottom+y.bottom)/k.y,left:(N.left-$.left+y.left)/k.x,right:($.right-N.right+y.right)/k.x}}const DF=r=>({name:"arrow",options:r,async fn(t){const{x:s,y:n,placement:a,rects:i,platform:c,elements:A,middlewareData:d}=t,{element:u,padding:m=0}=Lc(r,t)||{};if(u==null)return{};const f=B2(m),x={x:s,y:n},g=D0(a),y=R0(g),b=await c.getDimensions(u),B=g==="y",N=B?"top":"left",E=B?"bottom":"right",I=B?"clientHeight":"clientWidth",k=i.reference[y]+i.reference[g]-x[g]-i.floating[y],$=x[g]-i.reference[g],z=await(c.getOffsetParent==null?void 0:c.getOffsetParent(u));let H=z?z[I]:0;(!H||!await(c.isElement==null?void 0:c.isElement(z)))&&(H=A.floating[I]||i.floating[y]);const T=k/2-$/2,V=H/2-b[y]/2-1,G=HA(f[N],V),L=HA(f[E],V),F=G,O=H-b[y]-L,P=H/2-b[y]/2+T,ce=Qx(F,P,O),W=!d.arrow&&Pu(a)!=null&&P!==ce&&i.reference[y]/2-(P<F?G:L)-b[y]/2<0,ae=W?P<F?P-F:P-O:0;return{[g]:x[g]+ae,data:{[g]:ce,centerOffset:P-ce-ae,...W&&{alignmentOffset:ae}},reset:W}}}),OF=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(t){var s,n;const{placement:a,middlewareData:i,rects:c,initialPlacement:A,platform:d,elements:u}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:x,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...B}=Lc(r,t);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const N=Qc(a),E=Wl(A),I=Qc(A)===A,k=await(d.isRTL==null?void 0:d.isRTL(u.floating)),$=x||(I||!b?[Rf(A)]:UF(A)),z=y!=="none";!x&&z&&$.push(...TF(A,b,y,k));const H=[A,...$],T=await Th(t,B),V=[];let G=((n=i.flip)==null?void 0:n.overflows)||[];if(m&&V.push(T[N]),f){const P=kF(a,c,k);V.push(T[P[0]],T[P[1]])}if(G=[...G,{placement:a,overflows:V}],!V.every(P=>P<=0)){var L,F;const P=(((L=i.flip)==null?void 0:L.index)||0)+1,ce=H[P];if(ce&&(!(f==="alignment"?E!==Wl(ce):!1)||G.every(K=>Wl(K.placement)===E?K.overflows[0]>0:!0)))return{data:{index:P,overflows:G},reset:{placement:ce}};let W=(F=G.filter(ae=>ae.overflows[0]<=0).sort((ae,K)=>ae.overflows[1]-K.overflows[1])[0])==null?void 0:F.placement;if(!W)switch(g){case"bestFit":{var O;const ae=(O=G.filter(K=>{if(z){const le=Wl(K.placement);return le===E||le==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(le=>le>0).reduce((le,ie)=>le+ie,0)]).sort((K,le)=>K[1]-le[1])[0])==null?void 0:O[0];ae&&(W=ae);break}case"initialPlacement":W=A;break}if(a!==W)return{reset:{placement:W}}}return{}}}};function t1(r,t){return{top:r.top-t.height,right:r.right-t.width,bottom:r.bottom-t.height,left:r.left-t.width}}function s1(r){return SF.some(t=>r[t]>=0)}const MF=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(t){const{rects:s}=t,{strategy:n="referenceHidden",...a}=Lc(r,t);switch(n){case"referenceHidden":{const i=await Th(t,{...a,elementContext:"reference"}),c=t1(i,s.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:s1(c)}}}case"escaped":{const i=await Th(t,{...a,altBoundary:!0}),c=t1(i,s.floating);return{data:{escapedOffsets:c,escaped:s1(c)}}}default:return{}}}}},C2=new Set(["left","top"]);async function HF(r,t){const{placement:s,platform:n,elements:a}=r,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),c=Qc(s),A=Pu(s),d=Wl(s)==="y",u=C2.has(c)?-1:1,m=i&&d?-1:1,f=Lc(t,r);let{mainAxis:x,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return A&&typeof y=="number"&&(g=A==="end"?y*-1:y),d?{x:g*m,y:x*u}:{x:x*u,y:g*m}}const KF=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(t){var s,n;const{x:a,y:i,placement:c,middlewareData:A}=t,d=await HF(t,r);return c===((s=A.offset)==null?void 0:s.placement)&&(n=A.arrow)!=null&&n.alignmentOffset?{}:{x:a+d.x,y:i+d.y,data:{...d,placement:c}}}}},VF=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(t){const{x:s,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:c=!1,limiter:A={fn:B=>{let{x:N,y:E}=B;return{x:N,y:E}}},...d}=Lc(r,t),u={x:s,y:n},m=await Th(t,d),f=Wl(Qc(a)),x=P0(f);let g=u[x],y=u[f];if(i){const B=x==="y"?"top":"left",N=x==="y"?"bottom":"right",E=g+m[B],I=g-m[N];g=Qx(E,g,I)}if(c){const B=f==="y"?"top":"left",N=f==="y"?"bottom":"right",E=y+m[B],I=y-m[N];y=Qx(E,y,I)}const b=A.fn({...t,[x]:g,[f]:y});return{...b,data:{x:b.x-s,y:b.y-n,enabled:{[x]:i,[f]:c}}}}}},zF=function(r){return r===void 0&&(r={}),{options:r,fn(t){const{x:s,y:n,placement:a,rects:i,middlewareData:c}=t,{offset:A=0,mainAxis:d=!0,crossAxis:u=!0}=Lc(r,t),m={x:s,y:n},f=Wl(a),x=P0(f);let g=m[x],y=m[f];const b=Lc(A,t),B=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const I=x==="y"?"height":"width",k=i.reference[x]-i.floating[I]+B.mainAxis,$=i.reference[x]+i.reference[I]-B.mainAxis;g<k?g=k:g>$&&(g=$)}if(u){var N,E;const I=x==="y"?"width":"height",k=C2.has(Qc(a)),$=i.reference[f]-i.floating[I]+(k&&((N=c.offset)==null?void 0:N[f])||0)+(k?0:B.crossAxis),z=i.reference[f]+i.reference[I]+(k?0:((E=c.offset)==null?void 0:E[f])||0)-(k?B.crossAxis:0);y<$?y=$:y>z&&(y=z)}return{[x]:g,[f]:y}}}},$F=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(t){var s,n;const{placement:a,rects:i,platform:c,elements:A}=t,{apply:d=()=>{},...u}=Lc(r,t),m=await Th(t,u),f=Qc(a),x=Pu(a),g=Wl(a)==="y",{width:y,height:b}=i.floating;let B,N;f==="top"||f==="bottom"?(B=f,N=x===(await(c.isRTL==null?void 0:c.isRTL(A.floating))?"start":"end")?"left":"right"):(N=f,B=x==="end"?"top":"bottom");const E=b-m.top-m.bottom,I=y-m.left-m.right,k=HA(b-m[B],E),$=HA(y-m[N],I),z=!t.middlewareData.shift;let H=k,T=$;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(T=I),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(H=E),z&&!x){const G=Vi(m.left,0),L=Vi(m.right,0),F=Vi(m.top,0),O=Vi(m.bottom,0);g?T=y-2*(G!==0||L!==0?G+L:Vi(m.left,m.right)):H=b-2*(F!==0||O!==0?F+O:Vi(m.top,m.bottom))}await d({...t,availableWidth:T,availableHeight:H});const V=await c.getDimensions(A.floating);return y!==V.width||b!==V.height?{reset:{rects:!0}}:{}}}};function Ap(){return typeof window<"u"}function Ru(r){return S2(r)?(r.nodeName||"").toLowerCase():"#document"}function Gi(r){var t;return(r==null||(t=r.ownerDocument)==null?void 0:t.defaultView)||window}function tc(r){var t;return(t=(S2(r)?r.ownerDocument:r.document)||window.document)==null?void 0:t.documentElement}function S2(r){return Ap()?r instanceof Node||r instanceof Gi(r).Node:!1}function cl(r){return Ap()?r instanceof Element||r instanceof Gi(r).Element:!1}function ec(r){return Ap()?r instanceof HTMLElement||r instanceof Gi(r).HTMLElement:!1}function r1(r){return!Ap()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Gi(r).ShadowRoot}const GF=new Set(["inline","contents"]);function zh(r){const{overflow:t,overflowX:s,overflowY:n,display:a}=Al(r);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!GF.has(a)}const WF=new Set(["table","td","th"]);function qF(r){return WF.has(Ru(r))}const YF=[":popover-open",":modal"];function dp(r){return YF.some(t=>{try{return r.matches(t)}catch{return!1}})}const JF=["transform","translate","scale","rotate","perspective"],XF=["transform","translate","scale","rotate","perspective","filter"],ZF=["paint","layout","strict","content"];function O0(r){const t=M0(),s=cl(r)?Al(r):r;return JF.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||XF.some(n=>(s.willChange||"").includes(n))||ZF.some(n=>(s.contain||"").includes(n))}function e3(r){let t=KA(r);for(;ec(t)&&!Uu(t);){if(O0(t))return t;if(dp(t))return null;t=KA(t)}return null}function M0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const t3=new Set(["html","body","#document"]);function Uu(r){return t3.has(Ru(r))}function Al(r){return Gi(r).getComputedStyle(r)}function up(r){return cl(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function KA(r){if(Ru(r)==="html")return r;const t=r.assignedSlot||r.parentNode||r1(r)&&r.host||tc(r);return r1(t)?t.host:t}function E2(r){const t=KA(r);return Uu(t)?r.ownerDocument?r.ownerDocument.body:r.body:ec(t)&&zh(t)?t:E2(t)}function Ph(r,t,s){var n;t===void 0&&(t=[]),s===void 0&&(s=!0);const a=E2(r),i=a===((n=r.ownerDocument)==null?void 0:n.body),c=Gi(a);if(i){const A=Px(c);return t.concat(c,c.visualViewport||[],zh(a)?a:[],A&&s?Ph(A):[])}return t.concat(a,Ph(a,[],s))}function Px(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function F2(r){const t=Al(r);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=ec(r),i=a?r.offsetWidth:s,c=a?r.offsetHeight:n,A=Pf(s)!==i||Pf(n)!==c;return A&&(s=i,n=c),{width:s,height:n,$:A}}function H0(r){return cl(r)?r:r.contextElement}function wu(r){const t=H0(r);if(!ec(t))return Jl(1);const s=t.getBoundingClientRect(),{width:n,height:a,$:i}=F2(t);let c=(i?Pf(s.width):s.width)/n,A=(i?Pf(s.height):s.height)/a;return(!c||!Number.isFinite(c))&&(c=1),(!A||!Number.isFinite(A))&&(A=1),{x:c,y:A}}const s3=Jl(0);function _2(r){const t=Gi(r);return!M0()||!t.visualViewport?s3:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function r3(r,t,s){return t===void 0&&(t=!1),!s||t&&s!==Gi(r)?!1:t}function bd(r,t,s,n){t===void 0&&(t=!1),s===void 0&&(s=!1);const a=r.getBoundingClientRect(),i=H0(r);let c=Jl(1);t&&(n?cl(n)&&(c=wu(n)):c=wu(r));const A=r3(i,s,n)?_2(i):Jl(0);let d=(a.left+A.x)/c.x,u=(a.top+A.y)/c.y,m=a.width/c.x,f=a.height/c.y;if(i){const x=Gi(i),g=n&&cl(n)?Gi(n):n;let y=x,b=Px(y);for(;b&&n&&g!==y;){const B=wu(b),N=b.getBoundingClientRect(),E=Al(b),I=N.left+(b.clientLeft+parseFloat(E.paddingLeft))*B.x,k=N.top+(b.clientTop+parseFloat(E.paddingTop))*B.y;d*=B.x,u*=B.y,m*=B.x,f*=B.y,d+=I,u+=k,y=Gi(b),b=Px(y)}}return Df({width:m,height:f,x:d,y:u})}function hp(r,t){const s=up(r).scrollLeft;return t?t.left+s:bd(tc(r)).left+s}function k2(r,t){const s=r.getBoundingClientRect(),n=s.left+t.scrollLeft-hp(r,s),a=s.top+t.scrollTop;return{x:n,y:a}}function n3(r){let{elements:t,rect:s,offsetParent:n,strategy:a}=r;const i=a==="fixed",c=tc(n),A=t?dp(t.floating):!1;if(n===c||A&&i)return s;let d={scrollLeft:0,scrollTop:0},u=Jl(1);const m=Jl(0),f=ec(n);if((f||!f&&!i)&&((Ru(n)!=="body"||zh(c))&&(d=up(n)),ec(n))){const g=bd(n);u=wu(n),m.x=g.x+n.clientLeft,m.y=g.y+n.clientTop}const x=c&&!f&&!i?k2(c,d):Jl(0);return{width:s.width*u.x,height:s.height*u.y,x:s.x*u.x-d.scrollLeft*u.x+m.x+x.x,y:s.y*u.y-d.scrollTop*u.y+m.y+x.y}}function a3(r){return Array.from(r.getClientRects())}function i3(r){const t=tc(r),s=up(r),n=r.ownerDocument.body,a=Vi(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Vi(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let c=-s.scrollLeft+hp(r);const A=-s.scrollTop;return Al(n).direction==="rtl"&&(c+=Vi(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:c,y:A}}const n1=25;function o3(r,t){const s=Gi(r),n=tc(r),a=s.visualViewport;let i=n.clientWidth,c=n.clientHeight,A=0,d=0;if(a){i=a.width,c=a.height;const m=M0();(!m||m&&t==="fixed")&&(A=a.offsetLeft,d=a.offsetTop)}const u=hp(n);if(u<=0){const m=n.ownerDocument,f=m.body,x=getComputedStyle(f),g=m.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,y=Math.abs(n.clientWidth-f.clientWidth-g);y<=n1&&(i-=y)}else u<=n1&&(i+=u);return{width:i,height:c,x:A,y:d}}const l3=new Set(["absolute","fixed"]);function c3(r,t){const s=bd(r,!0,t==="fixed"),n=s.top+r.clientTop,a=s.left+r.clientLeft,i=ec(r)?wu(r):Jl(1),c=r.clientWidth*i.x,A=r.clientHeight*i.y,d=a*i.x,u=n*i.y;return{width:c,height:A,x:d,y:u}}function a1(r,t,s){let n;if(t==="viewport")n=o3(r,s);else if(t==="document")n=i3(tc(r));else if(cl(t))n=c3(t,s);else{const a=_2(r);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Df(n)}function U2(r,t){const s=KA(r);return s===t||!cl(s)||Uu(s)?!1:Al(s).position==="fixed"||U2(s,t)}function A3(r,t){const s=t.get(r);if(s)return s;let n=Ph(r,[],!1).filter(A=>cl(A)&&Ru(A)!=="body"),a=null;const i=Al(r).position==="fixed";let c=i?KA(r):r;for(;cl(c)&&!Uu(c);){const A=Al(c),d=O0(c);!d&&A.position==="fixed"&&(a=null),(i?!d&&!a:!d&&A.position==="static"&&!!a&&l3.has(a.position)||zh(c)&&!d&&U2(r,c))?n=n.filter(m=>m!==c):a=A,c=KA(c)}return t.set(r,n),n}function d3(r){let{element:t,boundary:s,rootBoundary:n,strategy:a}=r;const c=[...s==="clippingAncestors"?dp(t)?[]:A3(t,this._c):[].concat(s),n],A=c[0],d=c.reduce((u,m)=>{const f=a1(t,m,a);return u.top=Vi(f.top,u.top),u.right=HA(f.right,u.right),u.bottom=HA(f.bottom,u.bottom),u.left=Vi(f.left,u.left),u},a1(t,A,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function u3(r){const{width:t,height:s}=F2(r);return{width:t,height:s}}function h3(r,t,s){const n=ec(t),a=tc(t),i=s==="fixed",c=bd(r,!0,i,t);let A={scrollLeft:0,scrollTop:0};const d=Jl(0);function u(){d.x=hp(a)}if(n||!n&&!i)if((Ru(t)!=="body"||zh(a))&&(A=up(t)),n){const g=bd(t,!0,i,t);d.x=g.x+t.clientLeft,d.y=g.y+t.clientTop}else a&&u();i&&!n&&a&&u();const m=a&&!n&&!i?k2(a,A):Jl(0),f=c.left+A.scrollLeft-d.x-m.x,x=c.top+A.scrollTop-d.y-m.y;return{x:f,y:x,width:c.width,height:c.height}}function kg(r){return Al(r).position==="static"}function i1(r,t){if(!ec(r)||Al(r).position==="fixed")return null;if(t)return t(r);let s=r.offsetParent;return tc(r)===s&&(s=s.ownerDocument.body),s}function I2(r,t){const s=Gi(r);if(dp(r))return s;if(!ec(r)){let a=KA(r);for(;a&&!Uu(a);){if(cl(a)&&!kg(a))return a;a=KA(a)}return s}let n=i1(r,t);for(;n&&qF(n)&&kg(n);)n=i1(n,t);return n&&Uu(n)&&kg(n)&&!O0(n)?s:n||e3(r)||s}const m3=async function(r){const t=this.getOffsetParent||I2,s=this.getDimensions,n=await s(r.floating);return{reference:h3(r.reference,await t(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function f3(r){return Al(r).direction==="rtl"}const p3={convertOffsetParentRelativeRectToViewportRelativeRect:n3,getDocumentElement:tc,getClippingRect:d3,getOffsetParent:I2,getElementRects:m3,getClientRects:a3,getDimensions:u3,getScale:wu,isElement:cl,isRTL:f3};function L2(r,t){return r.x===t.x&&r.y===t.y&&r.width===t.width&&r.height===t.height}function g3(r,t){let s=null,n;const a=tc(r);function i(){var A;clearTimeout(n),(A=s)==null||A.disconnect(),s=null}function c(A,d){A===void 0&&(A=!1),d===void 0&&(d=1),i();const u=r.getBoundingClientRect(),{left:m,top:f,width:x,height:g}=u;if(A||t(),!x||!g)return;const y=Em(f),b=Em(a.clientWidth-(m+x)),B=Em(a.clientHeight-(f+g)),N=Em(m),I={rootMargin:-y+"px "+-b+"px "+-B+"px "+-N+"px",threshold:Vi(0,HA(1,d))||1};let k=!0;function $(z){const H=z[0].intersectionRatio;if(H!==d){if(!k)return c();H?c(!1,H):n=setTimeout(()=>{c(!1,1e-7)},1e3)}H===1&&!L2(u,r.getBoundingClientRect())&&c(),k=!1}try{s=new IntersectionObserver($,{...I,root:a.ownerDocument})}catch{s=new IntersectionObserver($,I)}s.observe(r)}return c(!0),i}function x3(r,t,s,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:A=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,u=H0(r),m=a||i?[...u?Ph(u):[],...Ph(t)]:[];m.forEach(N=>{a&&N.addEventListener("scroll",s,{passive:!0}),i&&N.addEventListener("resize",s)});const f=u&&A?g3(u,s):null;let x=-1,g=null;c&&(g=new ResizeObserver(N=>{let[E]=N;E&&E.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var I;(I=g)==null||I.observe(t)})),s()}),u&&!d&&g.observe(u),g.observe(t));let y,b=d?bd(r):null;d&&B();function B(){const N=bd(r);b&&!L2(b,N)&&s(),b=N,y=requestAnimationFrame(B)}return s(),()=>{var N;m.forEach(E=>{a&&E.removeEventListener("scroll",s),i&&E.removeEventListener("resize",s)}),f?.(),(N=g)==null||N.disconnect(),g=null,d&&cancelAnimationFrame(y)}}const v3=KF,w3=VF,b3=OF,y3=$F,N3=MF,o1=DF,j3=zF,B3=(r,t,s)=>{const n=new Map,a={platform:p3,...s},i={...a.platform,_c:n};return RF(r,t,{...a,platform:i})};var C3=typeof document<"u",S3=function(){},mf=C3?j.useLayoutEffect:S3;function Of(r,t){if(r===t)return!0;if(typeof r!=typeof t)return!1;if(typeof r=="function"&&r.toString()===t.toString())return!0;let s,n,a;if(r&&t&&typeof r=="object"){if(Array.isArray(r)){if(s=r.length,s!==t.length)return!1;for(n=s;n--!==0;)if(!Of(r[n],t[n]))return!1;return!0}if(a=Object.keys(r),s=a.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=s;n--!==0;){const i=a[n];if(!(i==="_owner"&&r.$$typeof)&&!Of(r[i],t[i]))return!1}return!0}return r!==r&&t!==t}function Q2(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function l1(r,t){const s=Q2(r);return Math.round(t*s)/s}function Ug(r){const t=j.useRef(r);return mf(()=>{t.current=r}),t}function E3(r){r===void 0&&(r={});const{placement:t="bottom",strategy:s="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:c}={},transform:A=!0,whileElementsMounted:d,open:u}=r,[m,f]=j.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[x,g]=j.useState(n);Of(x,n)||g(n);const[y,b]=j.useState(null),[B,N]=j.useState(null),E=j.useCallback(K=>{K!==z.current&&(z.current=K,b(K))},[]),I=j.useCallback(K=>{K!==H.current&&(H.current=K,N(K))},[]),k=i||y,$=c||B,z=j.useRef(null),H=j.useRef(null),T=j.useRef(m),V=d!=null,G=Ug(d),L=Ug(a),F=Ug(u),O=j.useCallback(()=>{if(!z.current||!H.current)return;const K={placement:t,strategy:s,middleware:x};L.current&&(K.platform=L.current),B3(z.current,H.current,K).then(le=>{const ie={...le,isPositioned:F.current!==!1};P.current&&!Of(T.current,ie)&&(T.current=ie,Vh.flushSync(()=>{f(ie)}))})},[x,t,s,L,F]);mf(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(K=>({...K,isPositioned:!1})))},[u]);const P=j.useRef(!1);mf(()=>(P.current=!0,()=>{P.current=!1}),[]),mf(()=>{if(k&&(z.current=k),$&&(H.current=$),k&&$){if(G.current)return G.current(k,$,O);O()}},[k,$,O,G,V]);const ce=j.useMemo(()=>({reference:z,floating:H,setReference:E,setFloating:I}),[E,I]),W=j.useMemo(()=>({reference:k,floating:$}),[k,$]),ae=j.useMemo(()=>{const K={position:s,left:0,top:0};if(!W.floating)return K;const le=l1(W.floating,m.x),ie=l1(W.floating,m.y);return A?{...K,transform:"translate("+le+"px, "+ie+"px)",...Q2(W.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:le,top:ie}},[s,A,W.floating,m.x,m.y]);return j.useMemo(()=>({...m,update:O,refs:ce,elements:W,floatingStyles:ae}),[m,O,ce,W,ae])}const F3=r=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:r,fn(s){const{element:n,padding:a}=typeof r=="function"?r(s):r;return n&&t(n)?n.current!=null?o1({element:n.current,padding:a}).fn(s):{}:n?o1({element:n,padding:a}).fn(s):{}}}},_3=(r,t)=>({...v3(r),options:[r,t]}),k3=(r,t)=>({...w3(r),options:[r,t]}),U3=(r,t)=>({...j3(r),options:[r,t]}),I3=(r,t)=>({...b3(r),options:[r,t]}),L3=(r,t)=>({...y3(r),options:[r,t]}),Q3=(r,t)=>({...N3(r),options:[r,t]}),T3=(r,t)=>({...F3(r),options:[r,t]});var P3="Arrow",T2=j.forwardRef((r,t)=>{const{children:s,width:n=10,height:a=5,...i}=r;return e.jsx(qs.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?s:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});T2.displayName=P3;var R3=T2;function K0(r){const[t,s]=j.useState(void 0);return zn(()=>{if(r){s({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let c,A;if("borderBoxSize"in i){const d=i.borderBoxSize,u=Array.isArray(d)?d[0]:d;c=u.inlineSize,A=u.blockSize}else c=r.offsetWidth,A=r.offsetHeight;s({width:c,height:A})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else s(void 0)},[r]),t}var V0="Popper",[P2,R2]=Rc(V0),[D3,D2]=P2(V0),O2=r=>{const{__scopePopper:t,children:s}=r,[n,a]=j.useState(null);return e.jsx(D3,{scope:t,anchor:n,onAnchorChange:a,children:s})};O2.displayName=V0;var M2="PopperAnchor",H2=j.forwardRef((r,t)=>{const{__scopePopper:s,virtualRef:n,...a}=r,i=D2(M2,s),c=j.useRef(null),A=Er(t,c),d=j.useRef(null);return j.useEffect(()=>{const u=d.current;d.current=n?.current||c.current,u!==d.current&&i.onAnchorChange(d.current)}),n?null:e.jsx(qs.div,{...a,ref:A})});H2.displayName=M2;var z0="PopperContent",[O3,M3]=P2(z0),K2=j.forwardRef((r,t)=>{const{__scopePopper:s,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:c=0,arrowPadding:A=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:f="partial",hideWhenDetached:x=!1,updatePositionStrategy:g="optimized",onPlaced:y,...b}=r,B=D2(z0,s),[N,E]=j.useState(null),I=Er(t,me=>E(me)),[k,$]=j.useState(null),z=K0(k),H=z?.width??0,T=z?.height??0,V=n+(i!=="center"?"-"+i:""),G=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},L=Array.isArray(u)?u:[u],F=L.length>0,O={padding:G,boundary:L.filter(K3),altBoundary:F},{refs:P,floatingStyles:ce,placement:W,isPositioned:ae,middlewareData:K}=E3({strategy:"fixed",placement:V,whileElementsMounted:(...me)=>x3(...me,{animationFrame:g==="always"}),elements:{reference:B.anchor},middleware:[_3({mainAxis:a+T,alignmentAxis:c}),d&&k3({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?U3():void 0,...O}),d&&I3({...O}),L3({...O,apply:({elements:me,rects:pe,availableWidth:ee,availableHeight:je})=>{const{width:Pe,height:De}=pe.reference,nt=me.floating.style;nt.setProperty("--radix-popper-available-width",`${ee}px`),nt.setProperty("--radix-popper-available-height",`${je}px`),nt.setProperty("--radix-popper-anchor-width",`${Pe}px`),nt.setProperty("--radix-popper-anchor-height",`${De}px`)}}),k&&T3({element:k,padding:A}),V3({arrowWidth:H,arrowHeight:T}),x&&Q3({strategy:"referenceHidden",...O})]}),[le,ie]=$2(W),se=Ic(y);zn(()=>{ae&&se?.()},[ae,se]);const R=K.arrow?.x,q=K.arrow?.y,te=K.arrow?.centerOffset!==0,[de,fe]=j.useState();return zn(()=>{N&&fe(window.getComputedStyle(N).zIndex)},[N]),e.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...ce,transform:ae?ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[K.transformOrigin?.x,K.transformOrigin?.y].join(" "),...K.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:e.jsx(O3,{scope:s,placedSide:le,onArrowChange:$,arrowX:R,arrowY:q,shouldHideArrow:te,children:e.jsx(qs.div,{"data-side":le,"data-align":ie,...b,ref:I,style:{...b.style,animation:ae?void 0:"none"}})})})});K2.displayName=z0;var V2="PopperArrow",H3={top:"bottom",right:"left",bottom:"top",left:"right"},z2=j.forwardRef(function(t,s){const{__scopePopper:n,...a}=t,i=M3(V2,n),c=H3[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(R3,{...a,ref:s,style:{...a.style,display:"block"}})})});z2.displayName=V2;function K3(r){return r!==null}var V3=r=>({name:"transformOrigin",options:r,fn(t){const{placement:s,rects:n,middlewareData:a}=t,c=a.arrow?.centerOffset!==0,A=c?0:r.arrowWidth,d=c?0:r.arrowHeight,[u,m]=$2(s),f={start:"0%",center:"50%",end:"100%"}[m],x=(a.arrow?.x??0)+A/2,g=(a.arrow?.y??0)+d/2;let y="",b="";return u==="bottom"?(y=c?f:`${x}px`,b=`${-d}px`):u==="top"?(y=c?f:`${x}px`,b=`${n.floating.height+d}px`):u==="right"?(y=`${-d}px`,b=c?f:`${g}px`):u==="left"&&(y=`${n.floating.width+d}px`,b=c?f:`${g}px`),{data:{x:y,y:b}}}});function $2(r){const[t,s="center"]=r.split("-");return[t,s]}var z3=O2,$3=H2,G3=K2,W3=z2,q3="Portal",$0=j.forwardRef((r,t)=>{const{container:s,...n}=r,[a,i]=j.useState(!1);zn(()=>i(!0),[]);const c=s||a&&globalThis?.document?.body;return c?x2.createPortal(e.jsx(qs.div,{...n,ref:t}),c):null});$0.displayName=q3;function Y3(r){const t=J3(r),s=j.forwardRef((n,a)=>{const{children:i,...c}=n,A=j.Children.toArray(i),d=A.find(Z3);if(d){const u=d.props.children,m=A.map(f=>f===d?j.Children.count(u)>1?j.Children.only(null):j.isValidElement(u)?u.props.children:null:f);return e.jsx(t,{...c,ref:a,children:j.isValidElement(u)?j.cloneElement(u,void 0,m):null})}return e.jsx(t,{...c,ref:a,children:i})});return s.displayName=`${r}.Slot`,s}function J3(r){const t=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const c=t_(a),A=e_(i,a.props);return a.type!==j.Fragment&&(A.ref=n?Lu(n,c):c),j.cloneElement(a,A)}return j.Children.count(a)>1?j.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var X3=Symbol("radix.slottable");function Z3(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===X3}function e_(r,t){const s={...t};for(const n in t){const a=r[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...A)=>{const d=i(...A);return a(...A),d}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...r,...s}}function t_(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}var s_=F0[" useInsertionEffect ".trim().toString()]||zn;function yd({prop:r,defaultProp:t,onChange:s=()=>{},caller:n}){const[a,i,c]=r_({defaultProp:t,onChange:s}),A=r!==void 0,d=A?r:a;{const m=j.useRef(r!==void 0);j.useEffect(()=>{const f=m.current;f!==A&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${A?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=A},[A,n])}const u=j.useCallback(m=>{if(A){const f=n_(m)?m(r):m;f!==r&&c.current?.(f)}else i(m)},[A,r,i,c]);return[d,u]}function r_({defaultProp:r,onChange:t}){const[s,n]=j.useState(r),a=j.useRef(s),i=j.useRef(t);return s_(()=>{i.current=t},[t]),j.useEffect(()=>{a.current!==s&&(i.current?.(s),a.current=s)},[s,a]),[s,n,i]}function n_(r){return typeof r=="function"}function G0(r){const t=j.useRef({value:r,previous:r});return j.useMemo(()=>(t.current.value!==r&&(t.current.previous=t.current.value,t.current.value=r),t.current.previous),[r])}var G2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),a_="VisuallyHidden",i_=j.forwardRef((r,t)=>e.jsx(qs.span,{...r,ref:t,style:{...G2,...r.style}}));i_.displayName=a_;var o_=function(r){if(typeof document>"u")return null;var t=Array.isArray(r)?r[0]:r;return t.ownerDocument.body},tu=new WeakMap,Fm=new WeakMap,_m={},Ig=0,W2=function(r){return r&&(r.host||W2(r.parentNode))},l_=function(r,t){return t.map(function(s){if(r.contains(s))return s;var n=W2(s);return n&&r.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",r,". Doing nothing"),null)}).filter(function(s){return!!s})},c_=function(r,t,s,n){var a=l_(t,Array.isArray(r)?r:[r]);_m[s]||(_m[s]=new WeakMap);var i=_m[s],c=[],A=new Set,d=new Set(a),u=function(f){!f||A.has(f)||(A.add(f),u(f.parentNode))};a.forEach(u);var m=function(f){!f||d.has(f)||Array.prototype.forEach.call(f.children,function(x){if(A.has(x))m(x);else try{var g=x.getAttribute(n),y=g!==null&&g!=="false",b=(tu.get(x)||0)+1,B=(i.get(x)||0)+1;tu.set(x,b),i.set(x,B),c.push(x),b===1&&y&&Fm.set(x,!0),B===1&&x.setAttribute(s,"true"),y||x.setAttribute(n,"true")}catch(N){console.error("aria-hidden: cannot operate on ",x,N)}})};return m(t),A.clear(),Ig++,function(){c.forEach(function(f){var x=tu.get(f)-1,g=i.get(f)-1;tu.set(f,x),i.set(f,g),x||(Fm.has(f)||f.removeAttribute(n),Fm.delete(f)),g||f.removeAttribute(s)}),Ig--,Ig||(tu=new WeakMap,tu=new WeakMap,Fm=new WeakMap,_m={})}},q2=function(r,t,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(r)?r:[r]),a=o_(r);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),c_(n,a,s,"aria-hidden")):function(){return null}},$l=function(){return $l=Object.assign||function(t){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},$l.apply(this,arguments)};function Y2(r,t){var s={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(s[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(s[n[a]]=r[n[a]]);return s}function A_(r,t,s){if(s||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return r.concat(i||Array.prototype.slice.call(t))}var ff="right-scroll-bar-position",pf="width-before-scroll-bar",d_="with-scroll-bars-hidden",u_="--removed-body-scroll-bar-size";function Lg(r,t){return typeof r=="function"?r(t):r&&(r.current=t),r}function h_(r,t){var s=j.useState(function(){return{value:r,callback:t,facade:{get current(){return s.value},set current(n){var a=s.value;a!==n&&(s.value=n,s.callback(n,a))}}}})[0];return s.callback=t,s.facade}var m_=typeof window<"u"?j.useLayoutEffect:j.useEffect,c1=new WeakMap;function f_(r,t){var s=h_(null,function(n){return r.forEach(function(a){return Lg(a,n)})});return m_(function(){var n=c1.get(s);if(n){var a=new Set(n),i=new Set(r),c=s.current;a.forEach(function(A){i.has(A)||Lg(A,null)}),i.forEach(function(A){a.has(A)||Lg(A,c)})}c1.set(s,r)},[r]),s}function p_(r){return r}function g_(r,t){t===void 0&&(t=p_);var s=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:r},useMedium:function(i){var c=t(i,n);return s.push(c),function(){s=s.filter(function(A){return A!==c})}},assignSyncMedium:function(i){for(n=!0;s.length;){var c=s;s=[],c.forEach(i)}s={push:function(A){return i(A)},filter:function(){return s}}},assignMedium:function(i){n=!0;var c=[];if(s.length){var A=s;s=[],A.forEach(i),c=s}var d=function(){var m=c;c=[],m.forEach(i)},u=function(){return Promise.resolve().then(d)};u(),s={push:function(m){c.push(m),u()},filter:function(m){return c=c.filter(m),s}}}};return a}function x_(r){r===void 0&&(r={});var t=g_(null);return t.options=$l({async:!0,ssr:!1},r),t}var J2=function(r){var t=r.sideCar,s=Y2(r,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return j.createElement(n,$l({},s))};J2.isSideCarExport=!0;function v_(r,t){return r.useMedium(t),J2}var X2=x_(),Qg=function(){},mp=j.forwardRef(function(r,t){var s=j.useRef(null),n=j.useState({onScrollCapture:Qg,onWheelCapture:Qg,onTouchMoveCapture:Qg}),a=n[0],i=n[1],c=r.forwardProps,A=r.children,d=r.className,u=r.removeScrollBar,m=r.enabled,f=r.shards,x=r.sideCar,g=r.noRelative,y=r.noIsolation,b=r.inert,B=r.allowPinchZoom,N=r.as,E=N===void 0?"div":N,I=r.gapMode,k=Y2(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),$=x,z=f_([s,t]),H=$l($l({},k),a);return j.createElement(j.Fragment,null,m&&j.createElement($,{sideCar:X2,removeScrollBar:u,shards:f,noRelative:g,noIsolation:y,inert:b,setCallbacks:i,allowPinchZoom:!!B,lockRef:s,gapMode:I}),c?j.cloneElement(j.Children.only(A),$l($l({},H),{ref:z})):j.createElement(E,$l({},H,{className:d,ref:z}),A))});mp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mp.classNames={fullWidth:pf,zeroRight:ff};var w_=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function b_(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var t=w_();return t&&r.setAttribute("nonce",t),r}function y_(r,t){r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}function N_(r){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(r)}var j_=function(){var r=0,t=null;return{add:function(s){r==0&&(t=b_())&&(y_(t,s),N_(t)),r++},remove:function(){r--,!r&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},B_=function(){var r=j_();return function(t,s){j.useEffect(function(){return r.add(t),function(){r.remove()}},[t&&s])}},Z2=function(){var r=B_(),t=function(s){var n=s.styles,a=s.dynamic;return r(n,a),null};return t},C_={left:0,top:0,right:0,gap:0},Tg=function(r){return parseInt(r||"",10)||0},S_=function(r){var t=window.getComputedStyle(document.body),s=t[r==="padding"?"paddingLeft":"marginLeft"],n=t[r==="padding"?"paddingTop":"marginTop"],a=t[r==="padding"?"paddingRight":"marginRight"];return[Tg(s),Tg(n),Tg(a)]},E_=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return C_;var t=S_(r),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-s+t[2]-t[0])}},F_=Z2(),bu="data-scroll-locked",__=function(r,t,s,n){var a=r.left,i=r.top,c=r.right,A=r.gap;return s===void 0&&(s="margin"),`
  .`.concat(d_,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(A,"px ").concat(n,`;
  }
  body[`).concat(bu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(A,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(A,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ff,` {
    right: `).concat(A,"px ").concat(n,`;
  }
  
  .`).concat(pf,` {
    margin-right: `).concat(A,"px ").concat(n,`;
  }
  
  .`).concat(ff," .").concat(ff,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(pf," .").concat(pf,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(bu,`] {
    `).concat(u_,": ").concat(A,`px;
  }
`)},A1=function(){var r=parseInt(document.body.getAttribute(bu)||"0",10);return isFinite(r)?r:0},k_=function(){j.useEffect(function(){return document.body.setAttribute(bu,(A1()+1).toString()),function(){var r=A1()-1;r<=0?document.body.removeAttribute(bu):document.body.setAttribute(bu,r.toString())}},[])},U_=function(r){var t=r.noRelative,s=r.noImportant,n=r.gapMode,a=n===void 0?"margin":n;k_();var i=j.useMemo(function(){return E_(a)},[a]);return j.createElement(F_,{styles:__(i,!t,a,s?"":"!important")})},Rx=!1;if(typeof window<"u")try{var km=Object.defineProperty({},"passive",{get:function(){return Rx=!0,!0}});window.addEventListener("test",km,km),window.removeEventListener("test",km,km)}catch{Rx=!1}var su=Rx?{passive:!1}:!1,I_=function(r){return r.tagName==="TEXTAREA"},eN=function(r,t){if(!(r instanceof Element))return!1;var s=window.getComputedStyle(r);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!I_(r)&&s[t]==="visible")},L_=function(r){return eN(r,"overflowY")},Q_=function(r){return eN(r,"overflowX")},d1=function(r,t){var s=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=tN(r,n);if(a){var i=sN(r,n),c=i[1],A=i[2];if(c>A)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},T_=function(r){var t=r.scrollTop,s=r.scrollHeight,n=r.clientHeight;return[t,s,n]},P_=function(r){var t=r.scrollLeft,s=r.scrollWidth,n=r.clientWidth;return[t,s,n]},tN=function(r,t){return r==="v"?L_(t):Q_(t)},sN=function(r,t){return r==="v"?T_(t):P_(t)},R_=function(r,t){return r==="h"&&t==="rtl"?-1:1},D_=function(r,t,s,n,a){var i=R_(r,window.getComputedStyle(t).direction),c=i*n,A=s.target,d=t.contains(A),u=!1,m=c>0,f=0,x=0;do{if(!A)break;var g=sN(r,A),y=g[0],b=g[1],B=g[2],N=b-B-i*y;(y||N)&&tN(r,A)&&(f+=N,x+=y);var E=A.parentNode;A=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!d&&A!==document.body||d&&(t.contains(A)||t===A));return(m&&Math.abs(f)<1||!m&&Math.abs(x)<1)&&(u=!0),u},Um=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},u1=function(r){return[r.deltaX,r.deltaY]},h1=function(r){return r&&"current"in r?r.current:r},O_=function(r,t){return r[0]===t[0]&&r[1]===t[1]},M_=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},H_=0,ru=[];function K_(r){var t=j.useRef([]),s=j.useRef([0,0]),n=j.useRef(),a=j.useState(H_++)[0],i=j.useState(Z2)[0],c=j.useRef(r);j.useEffect(function(){c.current=r},[r]),j.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(a));var b=A_([r.lockRef.current],(r.shards||[]).map(h1),!0).filter(Boolean);return b.forEach(function(B){return B.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(B){return B.classList.remove("allow-interactivity-".concat(a))})}}},[r.inert,r.lockRef.current,r.shards]);var A=j.useCallback(function(b,B){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!c.current.allowPinchZoom;var N=Um(b),E=s.current,I="deltaX"in b?b.deltaX:E[0]-N[0],k="deltaY"in b?b.deltaY:E[1]-N[1],$,z=b.target,H=Math.abs(I)>Math.abs(k)?"h":"v";if("touches"in b&&H==="h"&&z.type==="range")return!1;var T=d1(H,z);if(!T)return!0;if(T?$=H:($=H==="v"?"h":"v",T=d1(H,z)),!T)return!1;if(!n.current&&"changedTouches"in b&&(I||k)&&(n.current=$),!$)return!0;var V=n.current||$;return D_(V,B,b,V==="h"?I:k)},[]),d=j.useCallback(function(b){var B=b;if(!(!ru.length||ru[ru.length-1]!==i)){var N="deltaY"in B?u1(B):Um(B),E=t.current.filter(function($){return $.name===B.type&&($.target===B.target||B.target===$.shadowParent)&&O_($.delta,N)})[0];if(E&&E.should){B.cancelable&&B.preventDefault();return}if(!E){var I=(c.current.shards||[]).map(h1).filter(Boolean).filter(function($){return $.contains(B.target)}),k=I.length>0?A(B,I[0]):!c.current.noIsolation;k&&B.cancelable&&B.preventDefault()}}},[]),u=j.useCallback(function(b,B,N,E){var I={name:b,delta:B,target:N,should:E,shadowParent:V_(N)};t.current.push(I),setTimeout(function(){t.current=t.current.filter(function(k){return k!==I})},1)},[]),m=j.useCallback(function(b){s.current=Um(b),n.current=void 0},[]),f=j.useCallback(function(b){u(b.type,u1(b),b.target,A(b,r.lockRef.current))},[]),x=j.useCallback(function(b){u(b.type,Um(b),b.target,A(b,r.lockRef.current))},[]);j.useEffect(function(){return ru.push(i),r.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:x}),document.addEventListener("wheel",d,su),document.addEventListener("touchmove",d,su),document.addEventListener("touchstart",m,su),function(){ru=ru.filter(function(b){return b!==i}),document.removeEventListener("wheel",d,su),document.removeEventListener("touchmove",d,su),document.removeEventListener("touchstart",m,su)}},[]);var g=r.removeScrollBar,y=r.inert;return j.createElement(j.Fragment,null,y?j.createElement(i,{styles:M_(a)}):null,g?j.createElement(U_,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function V_(r){for(var t=null;r!==null;)r instanceof ShadowRoot&&(t=r.host,r=r.host),r=r.parentNode;return t}const z_=v_(X2,K_);var W0=j.forwardRef(function(r,t){return j.createElement(mp,$l({},r,{ref:t,sideCar:z_}))});W0.classNames=mp.classNames;var $_=[" ","Enter","ArrowUp","ArrowDown"],G_=[" ","Enter"],Nd="Select",[fp,pp,W_]=w2(Nd),[Du]=Rc(Nd,[W_,R2]),gp=R2(),[q_,$A]=Du(Nd),[Y_,J_]=Du(Nd),rN=r=>{const{__scopeSelect:t,children:s,open:n,defaultOpen:a,onOpenChange:i,value:c,defaultValue:A,onValueChange:d,dir:u,name:m,autoComplete:f,disabled:x,required:g,form:y}=r,b=gp(t),[B,N]=j.useState(null),[E,I]=j.useState(null),[k,$]=j.useState(!1),z=L0(u),[H,T]=yd({prop:n,defaultProp:a??!1,onChange:i,caller:Nd}),[V,G]=yd({prop:c,defaultProp:A,onChange:d,caller:Nd}),L=j.useRef(null),F=B?y||!!B.closest("form"):!0,[O,P]=j.useState(new Set),ce=Array.from(O).map(W=>W.props.value).join(";");return e.jsx(z3,{...b,children:e.jsxs(q_,{required:g,scope:t,trigger:B,onTriggerChange:N,valueNode:E,onValueNodeChange:I,valueNodeHasChildren:k,onValueNodeHasChildrenChange:$,contentId:FA(),value:V,onValueChange:G,open:H,onOpenChange:T,dir:z,triggerPointerDownPosRef:L,disabled:x,children:[e.jsx(fp.Provider,{scope:t,children:e.jsx(Y_,{scope:r.__scopeSelect,onNativeOptionAdd:j.useCallback(W=>{P(ae=>new Set(ae).add(W))},[]),onNativeOptionRemove:j.useCallback(W=>{P(ae=>{const K=new Set(ae);return K.delete(W),K})},[]),children:s})}),F?e.jsxs(BN,{"aria-hidden":!0,required:g,tabIndex:-1,name:m,autoComplete:f,value:V,onChange:W=>G(W.target.value),disabled:x,form:y,children:[V===void 0?e.jsx("option",{value:""}):null,Array.from(O)]},ce):null]})})};rN.displayName=Nd;var nN="SelectTrigger",aN=j.forwardRef((r,t)=>{const{__scopeSelect:s,disabled:n=!1,...a}=r,i=gp(s),c=$A(nN,s),A=c.disabled||n,d=Er(t,c.onTriggerChange),u=pp(s),m=j.useRef("touch"),[f,x,g]=SN(b=>{const B=u().filter(I=>!I.disabled),N=B.find(I=>I.value===c.value),E=EN(B,b,N);E!==void 0&&c.onValueChange(E.value)}),y=b=>{A||(c.onOpenChange(!0),g()),b&&(c.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return e.jsx($3,{asChild:!0,...i,children:e.jsx(qs.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:A,"data-disabled":A?"":void 0,"data-placeholder":CN(c.value)?"":void 0,...a,ref:d,onClick:Ks(a.onClick,b=>{b.currentTarget.focus(),m.current!=="mouse"&&y(b)}),onPointerDown:Ks(a.onPointerDown,b=>{m.current=b.pointerType;const B=b.target;B.hasPointerCapture(b.pointerId)&&B.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(y(b),b.preventDefault())}),onKeyDown:Ks(a.onKeyDown,b=>{const B=f.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&x(b.key),!(B&&b.key===" ")&&$_.includes(b.key)&&(y(),b.preventDefault())})})})});aN.displayName=nN;var iN="SelectValue",oN=j.forwardRef((r,t)=>{const{__scopeSelect:s,className:n,style:a,children:i,placeholder:c="",...A}=r,d=$A(iN,s),{onValueNodeHasChildrenChange:u}=d,m=i!==void 0,f=Er(t,d.onValueNodeChange);return zn(()=>{u(m)},[u,m]),e.jsx(qs.span,{...A,ref:f,style:{pointerEvents:"none"},children:CN(d.value)?e.jsx(e.Fragment,{children:c}):i})});oN.displayName=iN;var X_="SelectIcon",lN=j.forwardRef((r,t)=>{const{__scopeSelect:s,children:n,...a}=r;return e.jsx(qs.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});lN.displayName=X_;var Z_="SelectPortal",cN=r=>e.jsx($0,{asChild:!0,...r});cN.displayName=Z_;var jd="SelectContent",AN=j.forwardRef((r,t)=>{const s=$A(jd,r.__scopeSelect),[n,a]=j.useState();if(zn(()=>{a(new DocumentFragment)},[]),!s.open){const i=n;return i?Vh.createPortal(e.jsx(dN,{scope:r.__scopeSelect,children:e.jsx(fp.Slot,{scope:r.__scopeSelect,children:e.jsx("div",{children:r.children})})}),i):null}return e.jsx(uN,{...r,ref:t})});AN.displayName=jd;var al=10,[dN,GA]=Du(jd),e6="SelectContentImpl",t6=Y3("SelectContent.RemoveScroll"),uN=j.forwardRef((r,t)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:c,side:A,sideOffset:d,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:x,collisionPadding:g,sticky:y,hideWhenDetached:b,avoidCollisions:B,...N}=r,E=$A(jd,s),[I,k]=j.useState(null),[$,z]=j.useState(null),H=Er(t,me=>k(me)),[T,V]=j.useState(null),[G,L]=j.useState(null),F=pp(s),[O,P]=j.useState(!1),ce=j.useRef(!1);j.useEffect(()=>{if(I)return q2(I)},[I]),N2();const W=j.useCallback(me=>{const[pe,...ee]=F().map(De=>De.ref.current),[je]=ee.slice(-1),Pe=document.activeElement;for(const De of me)if(De===Pe||(De?.scrollIntoView({block:"nearest"}),De===pe&&$&&($.scrollTop=0),De===je&&$&&($.scrollTop=$.scrollHeight),De?.focus(),document.activeElement!==Pe))return},[F,$]),ae=j.useCallback(()=>W([T,I]),[W,T,I]);j.useEffect(()=>{O&&ae()},[O,ae]);const{onOpenChange:K,triggerPointerDownPosRef:le}=E;j.useEffect(()=>{if(I){let me={x:0,y:0};const pe=je=>{me={x:Math.abs(Math.round(je.pageX)-(le.current?.x??0)),y:Math.abs(Math.round(je.pageY)-(le.current?.y??0))}},ee=je=>{me.x<=10&&me.y<=10?je.preventDefault():I.contains(je.target)||K(!1),document.removeEventListener("pointermove",pe),le.current=null};return le.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",ee,{capture:!0})}}},[I,K,le]),j.useEffect(()=>{const me=()=>K(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[K]);const[ie,se]=SN(me=>{const pe=F().filter(Pe=>!Pe.disabled),ee=pe.find(Pe=>Pe.ref.current===document.activeElement),je=EN(pe,me,ee);je&&setTimeout(()=>je.ref.current.focus())}),R=j.useCallback((me,pe,ee)=>{const je=!ce.current&&!ee;(E.value!==void 0&&E.value===pe||je)&&(V(me),je&&(ce.current=!0))},[E.value]),q=j.useCallback(()=>I?.focus(),[I]),te=j.useCallback((me,pe,ee)=>{const je=!ce.current&&!ee;(E.value!==void 0&&E.value===pe||je)&&L(me)},[E.value]),de=n==="popper"?Dx:hN,fe=de===Dx?{side:A,sideOffset:d,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:x,collisionPadding:g,sticky:y,hideWhenDetached:b,avoidCollisions:B}:{};return e.jsx(dN,{scope:s,content:I,viewport:$,onViewportChange:z,itemRefCallback:R,selectedItem:T,onItemLeave:q,itemTextRefCallback:te,focusSelectedItem:ae,selectedItemText:G,position:n,isPositioned:O,searchRef:ie,children:e.jsx(W0,{as:t6,allowPinchZoom:!0,children:e.jsx(T0,{asChild:!0,trapped:E.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:Ks(a,me=>{E.trigger?.focus({preventScroll:!0}),me.preventDefault()}),children:e.jsx(Q0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:e.jsx(de,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:me=>me.preventDefault(),...N,...fe,onPlaced:()=>P(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:Ks(N.onKeyDown,me=>{const pe=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!pe&&me.key.length===1&&se(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let je=F().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(me.key)&&(je=je.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const Pe=me.target,De=je.indexOf(Pe);je=je.slice(De+1)}setTimeout(()=>W(je)),me.preventDefault()}})})})})})})});uN.displayName=e6;var s6="SelectItemAlignedPosition",hN=j.forwardRef((r,t)=>{const{__scopeSelect:s,onPlaced:n,...a}=r,i=$A(jd,s),c=GA(jd,s),[A,d]=j.useState(null),[u,m]=j.useState(null),f=Er(t,H=>m(H)),x=pp(s),g=j.useRef(!1),y=j.useRef(!0),{viewport:b,selectedItem:B,selectedItemText:N,focusSelectedItem:E}=c,I=j.useCallback(()=>{if(i.trigger&&i.valueNode&&A&&u&&b&&B&&N){const H=i.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),V=i.valueNode.getBoundingClientRect(),G=N.getBoundingClientRect();if(i.dir!=="rtl"){const Pe=G.left-T.left,De=V.left-Pe,nt=H.left-De,Se=H.width+nt,X=Math.max(Se,T.width),Ie=window.innerWidth-al,rt=Kw(De,[al,Math.max(al,Ie-X)]);A.style.minWidth=Se+"px",A.style.left=rt+"px"}else{const Pe=T.right-G.right,De=window.innerWidth-V.right-Pe,nt=window.innerWidth-H.right-De,Se=H.width+nt,X=Math.max(Se,T.width),Ie=window.innerWidth-al,rt=Kw(De,[al,Math.max(al,Ie-X)]);A.style.minWidth=Se+"px",A.style.right=rt+"px"}const L=x(),F=window.innerHeight-al*2,O=b.scrollHeight,P=window.getComputedStyle(u),ce=parseInt(P.borderTopWidth,10),W=parseInt(P.paddingTop,10),ae=parseInt(P.borderBottomWidth,10),K=parseInt(P.paddingBottom,10),le=ce+W+O+K+ae,ie=Math.min(B.offsetHeight*5,le),se=window.getComputedStyle(b),R=parseInt(se.paddingTop,10),q=parseInt(se.paddingBottom,10),te=H.top+H.height/2-al,de=F-te,fe=B.offsetHeight/2,me=B.offsetTop+fe,pe=ce+W+me,ee=le-pe;if(pe<=te){const Pe=L.length>0&&B===L[L.length-1].ref.current;A.style.bottom="0px";const De=u.clientHeight-b.offsetTop-b.offsetHeight,nt=Math.max(de,fe+(Pe?q:0)+De+ae),Se=pe+nt;A.style.height=Se+"px"}else{const Pe=L.length>0&&B===L[0].ref.current;A.style.top="0px";const nt=Math.max(te,ce+b.offsetTop+(Pe?R:0)+fe)+ee;A.style.height=nt+"px",b.scrollTop=pe-te+b.offsetTop}A.style.margin=`${al}px 0`,A.style.minHeight=ie+"px",A.style.maxHeight=F+"px",n?.(),requestAnimationFrame(()=>g.current=!0)}},[x,i.trigger,i.valueNode,A,u,b,B,N,i.dir,n]);zn(()=>I(),[I]);const[k,$]=j.useState();zn(()=>{u&&$(window.getComputedStyle(u).zIndex)},[u]);const z=j.useCallback(H=>{H&&y.current===!0&&(I(),E?.(),y.current=!1)},[I,E]);return e.jsx(n6,{scope:s,contentWrapper:A,shouldExpandOnScrollRef:g,onScrollButtonChange:z,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:e.jsx(qs.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});hN.displayName=s6;var r6="SelectPopperPosition",Dx=j.forwardRef((r,t)=>{const{__scopeSelect:s,align:n="start",collisionPadding:a=al,...i}=r,c=gp(s);return e.jsx(G3,{...c,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Dx.displayName=r6;var[n6,q0]=Du(jd,{}),Ox="SelectViewport",mN=j.forwardRef((r,t)=>{const{__scopeSelect:s,nonce:n,...a}=r,i=GA(Ox,s),c=q0(Ox,s),A=Er(t,i.onViewportChange),d=j.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(fp.Slot,{scope:s,children:e.jsx(qs.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:A,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ks(a.onScroll,u=>{const m=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:x}=c;if(x?.current&&f){const g=Math.abs(d.current-m.scrollTop);if(g>0){const y=window.innerHeight-al*2,b=parseFloat(f.style.minHeight),B=parseFloat(f.style.height),N=Math.max(b,B);if(N<y){const E=N+g,I=Math.min(y,E),k=E-I;f.style.height=I+"px",f.style.bottom==="0px"&&(m.scrollTop=k>0?k:0,f.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});mN.displayName=Ox;var fN="SelectGroup",[a6,i6]=Du(fN),o6=j.forwardRef((r,t)=>{const{__scopeSelect:s,...n}=r,a=FA();return e.jsx(a6,{scope:s,id:a,children:e.jsx(qs.div,{role:"group","aria-labelledby":a,...n,ref:t})})});o6.displayName=fN;var pN="SelectLabel",l6=j.forwardRef((r,t)=>{const{__scopeSelect:s,...n}=r,a=i6(pN,s);return e.jsx(qs.div,{id:a.id,...n,ref:t})});l6.displayName=pN;var Mf="SelectItem",[c6,gN]=Du(Mf),xN=j.forwardRef((r,t)=>{const{__scopeSelect:s,value:n,disabled:a=!1,textValue:i,...c}=r,A=$A(Mf,s),d=GA(Mf,s),u=A.value===n,[m,f]=j.useState(i??""),[x,g]=j.useState(!1),y=Er(t,E=>d.itemRefCallback?.(E,n,a)),b=FA(),B=j.useRef("touch"),N=()=>{a||(A.onValueChange(n),A.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(c6,{scope:s,value:n,disabled:a,textId:b,isSelected:u,onItemTextChange:j.useCallback(E=>{f(I=>I||(E?.textContent??"").trim())},[]),children:e.jsx(fp.ItemSlot,{scope:s,value:n,disabled:a,textValue:m,children:e.jsx(qs.div,{role:"option","aria-labelledby":b,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...c,ref:y,onFocus:Ks(c.onFocus,()=>g(!0)),onBlur:Ks(c.onBlur,()=>g(!1)),onClick:Ks(c.onClick,()=>{B.current!=="mouse"&&N()}),onPointerUp:Ks(c.onPointerUp,()=>{B.current==="mouse"&&N()}),onPointerDown:Ks(c.onPointerDown,E=>{B.current=E.pointerType}),onPointerMove:Ks(c.onPointerMove,E=>{B.current=E.pointerType,a?d.onItemLeave?.():B.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ks(c.onPointerLeave,E=>{E.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Ks(c.onKeyDown,E=>{d.searchRef?.current!==""&&E.key===" "||(G_.includes(E.key)&&N(),E.key===" "&&E.preventDefault())})})})})});xN.displayName=Mf;var fh="SelectItemText",vN=j.forwardRef((r,t)=>{const{__scopeSelect:s,className:n,style:a,...i}=r,c=$A(fh,s),A=GA(fh,s),d=gN(fh,s),u=J_(fh,s),[m,f]=j.useState(null),x=Er(t,N=>f(N),d.onItemTextChange,N=>A.itemTextRefCallback?.(N,d.value,d.disabled)),g=m?.textContent,y=j.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:B}=u;return zn(()=>(b(y),()=>B(y)),[b,B,y]),e.jsxs(e.Fragment,{children:[e.jsx(qs.span,{id:d.textId,...i,ref:x}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Vh.createPortal(i.children,c.valueNode):null]})});vN.displayName=fh;var wN="SelectItemIndicator",bN=j.forwardRef((r,t)=>{const{__scopeSelect:s,...n}=r;return gN(wN,s).isSelected?e.jsx(qs.span,{"aria-hidden":!0,...n,ref:t}):null});bN.displayName=wN;var Mx="SelectScrollUpButton",yN=j.forwardRef((r,t)=>{const s=GA(Mx,r.__scopeSelect),n=q0(Mx,r.__scopeSelect),[a,i]=j.useState(!1),c=Er(t,n.onScrollButtonChange);return zn(()=>{if(s.viewport&&s.isPositioned){let A=function(){const u=d.scrollTop>0;i(u)};const d=s.viewport;return A(),d.addEventListener("scroll",A),()=>d.removeEventListener("scroll",A)}},[s.viewport,s.isPositioned]),a?e.jsx(jN,{...r,ref:c,onAutoScroll:()=>{const{viewport:A,selectedItem:d}=s;A&&d&&(A.scrollTop=A.scrollTop-d.offsetHeight)}}):null});yN.displayName=Mx;var Hx="SelectScrollDownButton",NN=j.forwardRef((r,t)=>{const s=GA(Hx,r.__scopeSelect),n=q0(Hx,r.__scopeSelect),[a,i]=j.useState(!1),c=Er(t,n.onScrollButtonChange);return zn(()=>{if(s.viewport&&s.isPositioned){let A=function(){const u=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<u;i(m)};const d=s.viewport;return A(),d.addEventListener("scroll",A),()=>d.removeEventListener("scroll",A)}},[s.viewport,s.isPositioned]),a?e.jsx(jN,{...r,ref:c,onAutoScroll:()=>{const{viewport:A,selectedItem:d}=s;A&&d&&(A.scrollTop=A.scrollTop+d.offsetHeight)}}):null});NN.displayName=Hx;var jN=j.forwardRef((r,t)=>{const{__scopeSelect:s,onAutoScroll:n,...a}=r,i=GA("SelectScrollButton",s),c=j.useRef(null),A=pp(s),d=j.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return j.useEffect(()=>()=>d(),[d]),zn(()=>{A().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[A]),e.jsx(qs.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ks(a.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(n,50))}),onPointerMove:Ks(a.onPointerMove,()=>{i.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(n,50))}),onPointerLeave:Ks(a.onPointerLeave,()=>{d()})})}),A6="SelectSeparator",d6=j.forwardRef((r,t)=>{const{__scopeSelect:s,...n}=r;return e.jsx(qs.div,{"aria-hidden":!0,...n,ref:t})});d6.displayName=A6;var Kx="SelectArrow",u6=j.forwardRef((r,t)=>{const{__scopeSelect:s,...n}=r,a=gp(s),i=$A(Kx,s),c=GA(Kx,s);return i.open&&c.position==="popper"?e.jsx(W3,{...a,...n,ref:t}):null});u6.displayName=Kx;var h6="SelectBubbleInput",BN=j.forwardRef(({__scopeSelect:r,value:t,...s},n)=>{const a=j.useRef(null),i=Er(n,a),c=G0(t);return j.useEffect(()=>{const A=a.current;if(!A)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==t&&m){const f=new Event("change",{bubbles:!0});m.call(A,t),A.dispatchEvent(f)}},[c,t]),e.jsx(qs.select,{...s,style:{...G2,...s.style},ref:i,defaultValue:t})});BN.displayName=h6;function CN(r){return r===""||r===void 0}function SN(r){const t=Ic(r),s=j.useRef(""),n=j.useRef(0),a=j.useCallback(c=>{const A=s.current+c;t(A),(function d(u){s.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>d(""),1e3))})(A)},[t]),i=j.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,a,i]}function EN(r,t,s){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=s?r.indexOf(s):-1;let c=m6(r,Math.max(i,0));a.length===1&&(c=c.filter(u=>u!==s));const d=c.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==s?d:void 0}function m6(r,t){return r.map((s,n)=>r[(t+n)%r.length])}var f6=rN,p6=aN,g6=oN,x6=lN,v6=cN,w6=AN,b6=mN,y6=xN,N6=vN,j6=bN,B6=yN,C6=NN;function Qt({...r}){return e.jsx(f6,{"data-slot":"select",...r})}function Tt({...r}){return e.jsx(g6,{"data-slot":"select-value",...r})}function Pt({className:r,size:t="default",children:s,...n}){return e.jsxs(p6,{"data-slot":"select-trigger","data-size":t,className:ps("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...n,children:[s,e.jsx(x6,{asChild:!0,children:e.jsx(Wy,{className:"size-4 opacity-50"})})]})}function Rt({className:r,children:t,position:s="popper",...n}){return e.jsx(v6,{children:e.jsxs(w6,{"data-slot":"select-content",className:ps("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:s,...n,children:[e.jsx(S6,{}),e.jsx(b6,{className:ps("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),e.jsx(E6,{})]})})}function be({className:r,children:t,...s}){return e.jsxs(y6,{"data-slot":"select-item",className:ps("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),...s,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(j6,{children:e.jsx(fo,{className:"size-4"})})}),e.jsx(N6,{children:t})]})}function S6({className:r,...t}){return e.jsx(B6,{"data-slot":"select-scroll-up-button",className:ps("flex cursor-default items-center justify-center py-1",r),...t,children:e.jsx(j4,{className:"size-4"})})}function E6({className:r,...t}){return e.jsx(C6,{"data-slot":"select-scroll-down-button",className:ps("flex cursor-default items-center justify-center py-1",r),...t,children:e.jsx(Wy,{className:"size-4"})})}const F6=k0("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Si({className:r,variant:t,...s}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:ps(F6({variant:t}),r),...s})}function Ga({className:r,...t}){return e.jsx("div",{"data-slot":"alert-description",className:ps("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...t})}function _6(r){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}const k6=r=>{switch(r){case"success":return L6;case"info":return T6;case"warning":return Q6;case"error":return P6;default:return null}},U6=Array(12).fill(0),I6=({visible:r,className:t})=>Ut.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":r},Ut.createElement("div",{className:"sonner-spinner"},U6.map((s,n)=>Ut.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),L6=Ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ut.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Q6=Ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ut.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),T6=Ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ut.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),P6=Ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ut.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),R6=Ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ut.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ut.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),D6=()=>{const[r,t]=Ut.useState(document.hidden);return Ut.useEffect(()=>{const s=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),r};let Vx=1;class O6{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;const{message:n,...a}=t,i=typeof t?.id=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Vx++,c=this.toasts.find(d=>d.id===i),A=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),c?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:n}),{...d,...t,id:i,dismissible:A,title:n}):d):this.addToast({title:n,...a,dismissible:A,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:t,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(n=>n({id:s.id,dismiss:!0}))}),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let n;s.loading!==void 0&&(n=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,c;const A=a.then(async u=>{if(c=["resolve",u],Ut.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if(H6(u)&&!u.ok){i=!1;const f=typeof s.error=="function"?await s.error(`HTTP error! status: ${u.status}`):s.error,x=typeof s.description=="function"?await s.description(`HTTP error! status: ${u.status}`):s.description,y=typeof f=="object"&&!Ut.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:x,...y})}else if(u instanceof Error){i=!1;const f=typeof s.error=="function"?await s.error(u):s.error,x=typeof s.description=="function"?await s.description(u):s.description,y=typeof f=="object"&&!Ut.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:x,...y})}else if(s.success!==void 0){i=!1;const f=typeof s.success=="function"?await s.success(u):s.success,x=typeof s.description=="function"?await s.description(u):s.description,y=typeof f=="object"&&!Ut.isValidElement(f)?f:{message:f};this.create({id:n,type:"success",description:x,...y})}}).catch(async u=>{if(c=["reject",u],s.error!==void 0){i=!1;const m=typeof s.error=="function"?await s.error(u):s.error,f=typeof s.description=="function"?await s.description(u):s.description,g=typeof m=="object"&&!Ut.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:f,...g})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),s.finally==null||s.finally.call(s)}),d=()=>new Promise((u,m)=>A.then(()=>c[0]==="reject"?m(c[1]):u(c[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:d}:Object.assign(n,{unwrap:d})},this.custom=(t,s)=>{const n=s?.id||Vx++;return this.create({jsx:t(n),id:n,...s}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ni=new O6,M6=(r,t)=>{const s=t?.id||Vx++;return Ni.addToast({title:r,...t,id:s}),s},H6=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",K6=M6,V6=()=>Ni.toasts,z6=()=>Ni.getActiveToasts(),he=Object.assign(K6,{success:Ni.success,info:Ni.info,warning:Ni.warning,error:Ni.error,custom:Ni.custom,message:Ni.message,promise:Ni.promise,dismiss:Ni.dismiss,loading:Ni.loading},{getHistory:V6,getToasts:z6});_6("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Im(r){return r.label!==void 0}const $6=3,G6="24px",W6="16px",m1=4e3,q6=356,Y6=14,J6=45,X6=200;function Ml(...r){return r.filter(Boolean).join(" ")}function Z6(r){const[t,s]=r.split("-"),n=[];return t&&n.push(t),s&&n.push(s),n}const ek=r=>{var t,s,n,a,i,c,A,d,u;const{invert:m,toast:f,unstyled:x,interacting:g,setHeights:y,visibleToasts:b,heights:B,index:N,toasts:E,expanded:I,removeToast:k,defaultRichColors:$,closeButton:z,style:H,cancelButtonStyle:T,actionButtonStyle:V,className:G="",descriptionClassName:L="",duration:F,position:O,gap:P,expandByDefault:ce,classNames:W,icons:ae,closeButtonAriaLabel:K="Close toast"}=r,[le,ie]=Ut.useState(null),[se,R]=Ut.useState(null),[q,te]=Ut.useState(!1),[de,fe]=Ut.useState(!1),[me,pe]=Ut.useState(!1),[ee,je]=Ut.useState(!1),[Pe,De]=Ut.useState(!1),[nt,Se]=Ut.useState(0),[X,Ie]=Ut.useState(0),rt=Ut.useRef(f.duration||F||m1),Ee=Ut.useRef(null),Te=Ut.useRef(null),dt=N===0,st=N+1<=b,ft=f.type,et=f.dismissible!==!1,it=f.className||"",Ue=f.descriptionClassName||"",We=Ut.useMemo(()=>B.findIndex(_t=>_t.toastId===f.id)||0,[B,f.id]),Bt=Ut.useMemo(()=>{var _t;return(_t=f.closeButton)!=null?_t:z},[f.closeButton,z]),mt=Ut.useMemo(()=>f.duration||F||m1,[f.duration,F]),Me=Ut.useRef(0),Ve=Ut.useRef(0),wt=Ut.useRef(0),As=Ut.useRef(null),[_e,$e]=O.split("-"),gt=Ut.useMemo(()=>B.reduce((_t,Ls,vs)=>vs>=We?_t:_t+Ls.height,0),[B,We]),Ft=D6(),bt=f.invert||m,Ot=ft==="loading";Ve.current=Ut.useMemo(()=>We*P+gt,[We,gt]),Ut.useEffect(()=>{rt.current=mt},[mt]),Ut.useEffect(()=>{te(!0)},[]),Ut.useEffect(()=>{const _t=Te.current;if(_t){const Ls=_t.getBoundingClientRect().height;return Ie(Ls),y(vs=>[{toastId:f.id,height:Ls,position:f.position},...vs]),()=>y(vs=>vs.filter(Gt=>Gt.toastId!==f.id))}},[y,f.id]),Ut.useLayoutEffect(()=>{if(!q)return;const _t=Te.current,Ls=_t.style.height;_t.style.height="auto";const vs=_t.getBoundingClientRect().height;_t.style.height=Ls,Ie(vs),y(Gt=>Gt.find(yt=>yt.toastId===f.id)?Gt.map(yt=>yt.toastId===f.id?{...yt,height:vs}:yt):[{toastId:f.id,height:vs,position:f.position},...Gt])},[q,f.title,f.description,y,f.id,f.jsx,f.action,f.cancel]);const Lt=Ut.useCallback(()=>{fe(!0),Se(Ve.current),y(_t=>_t.filter(Ls=>Ls.toastId!==f.id)),setTimeout(()=>{k(f)},X6)},[f,k,y,Ve]);Ut.useEffect(()=>{if(f.promise&&ft==="loading"||f.duration===1/0||f.type==="loading")return;let _t;return I||g||Ft?(()=>{if(wt.current<Me.current){const Gt=new Date().getTime()-Me.current;rt.current=rt.current-Gt}wt.current=new Date().getTime()})():(()=>{rt.current!==1/0&&(Me.current=new Date().getTime(),_t=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),Lt()},rt.current))})(),()=>clearTimeout(_t)},[I,g,f,ft,Ft,Lt]),Ut.useEffect(()=>{f.delete&&(Lt(),f.onDismiss==null||f.onDismiss.call(f,f))},[Lt,f.delete]);function Vt(){var _t;if(ae?.loading){var Ls;return Ut.createElement("div",{className:Ml(W?.loader,f==null||(Ls=f.classNames)==null?void 0:Ls.loader,"sonner-loader"),"data-visible":ft==="loading"},ae.loading)}return Ut.createElement(I6,{className:Ml(W?.loader,f==null||(_t=f.classNames)==null?void 0:_t.loader),visible:ft==="loading"})}const Ns=f.icon||ae?.[ft]||k6(ft);var Yt,Ht;return Ut.createElement("li",{tabIndex:0,ref:Te,className:Ml(G,it,W?.toast,f==null||(t=f.classNames)==null?void 0:t.toast,W?.default,W?.[ft],f==null||(s=f.classNames)==null?void 0:s[ft]),"data-sonner-toast":"","data-rich-colors":(Yt=f.richColors)!=null?Yt:$,"data-styled":!(f.jsx||f.unstyled||x),"data-mounted":q,"data-promise":!!f.promise,"data-swiped":Pe,"data-removed":de,"data-visible":st,"data-y-position":_e,"data-x-position":$e,"data-index":N,"data-front":dt,"data-swiping":me,"data-dismissible":et,"data-type":ft,"data-invert":bt,"data-swipe-out":ee,"data-swipe-direction":se,"data-expanded":!!(I||ce&&q),"data-testid":f.testId,style:{"--index":N,"--toasts-before":N,"--z-index":E.length-N,"--offset":`${de?nt:Ve.current}px`,"--initial-height":ce?"auto":`${X}px`,...H,...f.style},onDragEnd:()=>{pe(!1),ie(null),As.current=null},onPointerDown:_t=>{_t.button!==2&&(Ot||!et||(Ee.current=new Date,Se(Ve.current),_t.target.setPointerCapture(_t.pointerId),_t.target.tagName!=="BUTTON"&&(pe(!0),As.current={x:_t.clientX,y:_t.clientY})))},onPointerUp:()=>{var _t,Ls,vs;if(ee||!et)return;As.current=null;const Gt=Number(((_t=Te.current)==null?void 0:_t.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Xs=Number(((Ls=Te.current)==null?void 0:Ls.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),yt=new Date().getTime()-((vs=Ee.current)==null?void 0:vs.getTime()),Fs=le==="x"?Gt:Xs,us=Math.abs(Fs)/yt;if(Math.abs(Fs)>=J6||us>.11){Se(Ve.current),f.onDismiss==null||f.onDismiss.call(f,f),R(le==="x"?Gt>0?"right":"left":Xs>0?"down":"up"),Lt(),je(!0);return}else{var Ts,tr;(Ts=Te.current)==null||Ts.style.setProperty("--swipe-amount-x","0px"),(tr=Te.current)==null||tr.style.setProperty("--swipe-amount-y","0px")}De(!1),pe(!1),ie(null)},onPointerMove:_t=>{var Ls,vs,Gt;if(!As.current||!et||((Ls=window.getSelection())==null?void 0:Ls.toString().length)>0)return;const yt=_t.clientY-As.current.y,Fs=_t.clientX-As.current.x;var us;const Ts=(us=r.swipeDirections)!=null?us:Z6(O);!le&&(Math.abs(Fs)>1||Math.abs(yt)>1)&&ie(Math.abs(Fs)>Math.abs(yt)?"x":"y");let tr={x:0,y:0};const Vs=zs=>1/(1.5+Math.abs(zs)/20);if(le==="y"){if(Ts.includes("top")||Ts.includes("bottom"))if(Ts.includes("top")&&yt<0||Ts.includes("bottom")&&yt>0)tr.y=yt;else{const zs=yt*Vs(yt);tr.y=Math.abs(zs)<Math.abs(yt)?zs:yt}}else if(le==="x"&&(Ts.includes("left")||Ts.includes("right")))if(Ts.includes("left")&&Fs<0||Ts.includes("right")&&Fs>0)tr.x=Fs;else{const zs=Fs*Vs(Fs);tr.x=Math.abs(zs)<Math.abs(Fs)?zs:Fs}(Math.abs(tr.x)>0||Math.abs(tr.y)>0)&&De(!0),(vs=Te.current)==null||vs.style.setProperty("--swipe-amount-x",`${tr.x}px`),(Gt=Te.current)==null||Gt.style.setProperty("--swipe-amount-y",`${tr.y}px`)}},Bt&&!f.jsx&&ft!=="loading"?Ut.createElement("button",{"aria-label":K,"data-disabled":Ot,"data-close-button":!0,onClick:Ot||!et?()=>{}:()=>{Lt(),f.onDismiss==null||f.onDismiss.call(f,f)},className:Ml(W?.closeButton,f==null||(n=f.classNames)==null?void 0:n.closeButton)},(Ht=ae?.close)!=null?Ht:R6):null,(ft||f.icon||f.promise)&&f.icon!==null&&(ae?.[ft]!==null||f.icon)?Ut.createElement("div",{"data-icon":"",className:Ml(W?.icon,f==null||(a=f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Vt():null,f.type!=="loading"?Ns:null):null,Ut.createElement("div",{"data-content":"",className:Ml(W?.content,f==null||(i=f.classNames)==null?void 0:i.content)},Ut.createElement("div",{"data-title":"",className:Ml(W?.title,f==null||(c=f.classNames)==null?void 0:c.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?Ut.createElement("div",{"data-description":"",className:Ml(L,Ue,W?.description,f==null||(A=f.classNames)==null?void 0:A.description)},typeof f.description=="function"?f.description():f.description):null),Ut.isValidElement(f.cancel)?f.cancel:f.cancel&&Im(f.cancel)?Ut.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||T,onClick:_t=>{Im(f.cancel)&&et&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,_t),Lt())},className:Ml(W?.cancelButton,f==null||(d=f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,Ut.isValidElement(f.action)?f.action:f.action&&Im(f.action)?Ut.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||V,onClick:_t=>{Im(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,_t),!_t.defaultPrevented&&Lt())},className:Ml(W?.actionButton,f==null||(u=f.classNames)==null?void 0:u.actionButton)},f.action.label):null)};function f1(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function tk(r,t){const s={};return[r,t].forEach((n,a)=>{const i=a===1,c=i?"--mobile-offset":"--offset",A=i?W6:G6;function d(u){["top","right","bottom","left"].forEach(m=>{s[`${c}-${m}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?d(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?s[`${c}-${u}`]=A:s[`${c}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):d(A)}),s}const sk=Ut.forwardRef(function(t,s){const{id:n,invert:a,position:i="bottom-right",hotkey:c=["altKey","KeyT"],expand:A,closeButton:d,className:u,offset:m,mobileOffset:f,theme:x="light",richColors:g,duration:y,style:b,visibleToasts:B=$6,toastOptions:N,dir:E=f1(),gap:I=Y6,icons:k,containerAriaLabel:$="Notifications"}=t,[z,H]=Ut.useState([]),T=Ut.useMemo(()=>n?z.filter(q=>q.toasterId===n):z.filter(q=>!q.toasterId),[z,n]),V=Ut.useMemo(()=>Array.from(new Set([i].concat(T.filter(q=>q.position).map(q=>q.position)))),[T,i]),[G,L]=Ut.useState([]),[F,O]=Ut.useState(!1),[P,ce]=Ut.useState(!1),[W,ae]=Ut.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=Ut.useRef(null),le=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),ie=Ut.useRef(null),se=Ut.useRef(!1),R=Ut.useCallback(q=>{H(te=>{var de;return(de=te.find(fe=>fe.id===q.id))!=null&&de.delete||Ni.dismiss(q.id),te.filter(({id:fe})=>fe!==q.id)})},[]);return Ut.useEffect(()=>Ni.subscribe(q=>{if(q.dismiss){requestAnimationFrame(()=>{H(te=>te.map(de=>de.id===q.id?{...de,delete:!0}:de))});return}setTimeout(()=>{x2.flushSync(()=>{H(te=>{const de=te.findIndex(fe=>fe.id===q.id);return de!==-1?[...te.slice(0,de),{...te[de],...q},...te.slice(de+1)]:[q,...te]})})})}),[z]),Ut.useEffect(()=>{if(x!=="system"){ae(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ae("dark"):ae("light")),typeof window>"u")return;const q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:te})=>{ae(te?"dark":"light")})}catch{q.addListener(({matches:de})=>{try{ae(de?"dark":"light")}catch(fe){console.error(fe)}})}},[x]),Ut.useEffect(()=>{z.length<=1&&O(!1)},[z]),Ut.useEffect(()=>{const q=te=>{var de;if(c.every(pe=>te[pe]||te.code===pe)){var me;O(!0),(me=K.current)==null||me.focus()}te.code==="Escape"&&(document.activeElement===K.current||(de=K.current)!=null&&de.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[c]),Ut.useEffect(()=>{if(K.current)return()=>{ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null,se.current=!1)}},[K.current]),Ut.createElement("section",{ref:s,"aria-label":`${$} ${le}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},V.map((q,te)=>{var de;const[fe,me]=q.split("-");return T.length?Ut.createElement("ol",{key:q,dir:E==="auto"?f1():E,tabIndex:-1,ref:K,className:u,"data-sonner-toaster":!0,"data-sonner-theme":W,"data-y-position":fe,"data-x-position":me,style:{"--front-toast-height":`${((de=G[0])==null?void 0:de.height)||0}px`,"--width":`${q6}px`,"--gap":`${I}px`,...b,...tk(m,f)},onBlur:pe=>{se.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(se.current=!1,ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||se.current||(se.current=!0,ie.current=pe.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{P||O(!1)},onDragEnd:()=>O(!1),onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||ce(!0)},onPointerUp:()=>ce(!1)},T.filter(pe=>!pe.position&&te===0||pe.position===q).map((pe,ee)=>{var je,Pe;return Ut.createElement(ek,{key:pe.id,icons:k,index:ee,toast:pe,defaultRichColors:g,duration:(je=N?.duration)!=null?je:y,className:N?.className,descriptionClassName:N?.descriptionClassName,invert:a,visibleToasts:B,closeButton:(Pe=N?.closeButton)!=null?Pe:d,interacting:P,position:q,style:N?.style,unstyled:N?.unstyled,classNames:N?.classNames,cancelButtonStyle:N?.cancelButtonStyle,actionButtonStyle:N?.actionButtonStyle,closeButtonAriaLabel:N?.closeButtonAriaLabel,removeToast:R,toasts:T.filter(De=>De.position==pe.position),heights:G.filter(De=>De.position==pe.position),setHeights:L,expandByDefault:A,gap:I,expanded:F,swipeDirections:t.swipeDirections})})):null}))});class rk{mapFieldsToCamelCase(t){return t.map(s=>{const n={};for(const[a,i]of Object.entries(s)){const c=a.replace(/_([a-z])/g,(A,d)=>d.toUpperCase());n[c]=i}return n})}mapFieldsToSnakeCase(t){const s={};for(const[n,a]of Object.entries(t)){const i=n.replace(/[A-Z]/g,c=>`_${c.toLowerCase()}`);s[i]=a}return s}async executeQuery(t,s=[]){try{const n=localStorage.getItem("token"),a={"Content-Type":"application/json"};n&&(a.Authorization=`Bearer ${n}`);const i=await fetch("http://localhost/GGGG/api/database/query",{method:"POST",headers:a,body:JSON.stringify({query:t,params:s})});if(!i.ok){const A=await i.text();throw new Error(`Database query failed: ${i.statusText} - ${A}`)}const c=await i.json();if(c.success===!1)throw new Error(`Database operation failed: ${c.error}`);return c}catch(n){throw console.error("Database query error:",n),n}}async insertRecord(t,s){const n=this.mapFieldsToSnakeCase(s),a=Object.keys(n),i=Object.values(n),c=i.map(()=>"?").join(", "),A=`
      INSERT INTO ${t} (${a.join(", ")}) 
      VALUES (${c})
    `,d=await this.executeQuery(A,i);return d.insertId||d.data?.insertId||d.data?.id}async updateRecord(t,s,n){const a=this.mapFieldsToSnakeCase(n),i=Object.keys(a),c=Object.values(a),A=i.map(u=>`${u} = ?`).join(", "),d=`
      UPDATE ${t} 
      SET ${A} 
      WHERE id = ?
    `;return await this.executeQuery(d,[...c,s]),!0}async deleteRecord(t,s){const n=`DELETE FROM ${t} WHERE id = ?`;return await this.executeQuery(n,[s]),!0}generateAdmissionNumber(){return`GRA/${Math.floor(Math.random()*1e4).toString().padStart(4,"0")}`}generateEmployeeId(t){const s=t==="teacher"?"TCH":t==="accountant"?"ACC":"EMP",n=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`${s}${n}`}async createStudent(t){try{const s=t.admission_number||this.generateAdmissionNumber(),n={first_name:t.first_name,last_name:t.last_name,other_name:t.other_name||null,admission_number:s,class_id:t.class_id,level:t.level||null,parent_id:t.parent_id||null,date_of_birth:t.date_of_birth||null,gender:t.gender,photo_url:t.photo_url||null,passport_photo:t.passport_photo||null,status:t.status||"Active",academic_year:t.academic_year,admission_date:t.admission_date||new Date().toISOString().split("T")[0]};return{id:await this.insertRecord("students",n),...t,admission_number:s}}catch(s){throw s}}async createTeacher(t){try{console.log("=== SQLDATABASE CREATE TEACHER DEBUG ==="),console.log("Input teacherData:",t);const s=t.employeeId||this.generateEmployeeId("teacher"),n=t.firstName||t.first_name||"",a=t.lastName||t.last_name||"";if(!n||!a)throw console.error("Missing firstName or lastName in teacherData:",t),new Error("First name and last name are required for teacher creation");const i={first_name:n,last_name:a,other_name:t.otherName||t.other_name||null,employee_id:s,email:t.email,phone:t.phone||null,gender:t.gender||null,qualification:t.qualification||null,specialization:JSON.stringify(t.specialization||[]),status:t.status||"Active",is_class_teacher:t.isClassTeacher||t.is_class_teacher||!1,department_id:t.departmentId||t.department_id||null,signature:t.signature||null};console.log("Transformed sqlData for database:",i),console.log("About to call insertRecord for teachers table...");const c=await this.insertRecord("teachers",i);return console.log("Teacher created with ID:",c),console.log("====================================="),{id:c,firstName:n,lastName:a,employeeId:s,...t}}catch(s){throw console.error("Error in createTeacher:",s),s}}async createClass(t){try{const s={name:t.name,code:t.code||`${t.level}-${t.name}`,level:t.level,category:t.category||"Primary",department:t.department||null,description:t.description||null,is_core:t.isCore||!1,status:t.status||"Active"};return{id:await this.insertRecord("classes",s),...t}}catch(s){throw s}}async createSubject(t){try{const s={name:t.name,code:t.code||t.name.replace(/\s+/g,"_").toUpperCase(),category:t.category,department:t.department||null,description:t.description||null,is_core:t.isCore||!1,status:t.status||"Active"};return{id:await this.insertRecord("subjects",s),...t}}catch(s){throw s}}async createParent(t){try{console.log("=== SQLDATABASE CREATE PARENT DEBUG ==="),console.log("Input parentData:",t);const s=t.firstName||t.first_name||"",n=t.lastName||t.last_name||"";if(!s||!n)throw console.error("Missing firstName or lastName in parentData:",t),new Error("First name and last name are required for parent creation");const a={first_name:s,last_name:n,email:t.email,phone:t.phone||null,alternate_phone:t.alternatePhone||t.alternate_phone||null,address:t.address||null,occupation:t.occupation||null,status:t.status||"Active"};console.log("Transformed sqlData for database:",a),console.log("About to call insertRecord for parents table...");const i=await this.insertRecord("parents",a);return console.log("Parent created with ID:",i),console.log("====================================="),{id:i,firstName:s,lastName:n,...t}}catch(s){throw console.error("Error in createParent:",s),s}}async createAccountant(t){try{console.log("=== SQLDATABASE CREATE ACCOUNTANT DEBUG ==="),console.log("Input accountantData:",t);const s=t.employeeId||t.employee_id||this.generateEmployeeId("accountant"),n=t.firstName||t.first_name||"",a=t.lastName||t.last_name||"";if(!n||!a)throw console.error("Missing firstName or lastName in accountantData:",t),new Error("First name and last name are required for accountant creation");const i={first_name:n,last_name:a,email:t.email,phone:t.phone||null,employee_id:s,status:t.status||"Active"};console.log("Transformed sqlData for database:",i),console.log("About to call insertRecord for accountants table...");const c=await this.insertRecord("accountants",i);return console.log("Accountant created with ID:",c),console.log("====================================="),{id:c,firstName:n,lastName:a,employeeId:s,...t}}catch(s){throw console.error("Error in createAccountant:",s),s}}async hashPassword(t){const s="$2y$10$"+btoa(Math.random().toString()).substring(0,22).replace(/[+/=]/g,"."),a=new TextEncoder().encode(t+s),i=await crypto.subtle.digest("SHA-256",a),A=Array.from(new Uint8Array(i)).map(d=>d.toString(16).padStart(2,"0")).join("");return"$sha256$"+s.substring(7)+"$"+A}async deleteLinkedRecord(t,s){try{let n="";switch(t){case"teacher":n="DELETE FROM teachers WHERE id = ?";break;case"parent":n="DELETE FROM parents WHERE id = ?";break;case"accountant":n="DELETE FROM accountants WHERE id = ?";break;default:return!1}const a=await this.executeQuery(n,[s]);return a.success&&a.affectedRows>0}catch(n){return console.error(`Failed to delete ${t} record:`,n),!1}}async createUser(t){try{console.log("=== SQLDATABASE CREATE USER DEBUG ==="),console.log("Input userData:",t);const s=t.password||t.role+"123";let n=0;if(t.role==="teacher"){console.log("Creating teacher record first...");const c={first_name:t.firstName,last_name:t.lastName,email:t.email,phone:t.phone||null,gender:t.gender||null,qualification:t.qualification||null,specialization:t.specialization?JSON.stringify(t.specialization):null,is_class_teacher:t.isClassTeacher||!1,department_id:t.departmentId||null,employee_id:t.employeeId||`EMP-${Date.now()}`,status:t.status||"Active"};n=(await this.createTeacher(c)).id,console.log("Teacher created with ID:",n),t.isClassTeacher&&t.assignedClassId&&(console.log("Assigning teacher to class:",t.assignedClassId),await this.updateRecord("classes",t.assignedClassId,{class_teacher_id:n,class_teacher:`${t.firstName} ${t.lastName}`}),console.log("Class teacher assignment completed"))}else if(t.role==="parent"){console.log("Creating parent record first...");const c={first_name:t.firstName,last_name:t.lastName,email:t.email,phone:t.phone||null,alternate_phone:t.alternatePhone||null,address:t.address||null,occupation:t.occupation||null,status:t.status||"Active"};n=(await this.createParent(c)).id,console.log("Parent created with ID:",n)}else if(t.role==="accountant"){console.log("Creating accountant record first...");const c={first_name:t.firstName,last_name:t.lastName,email:t.email,phone:t.phone||null,department:t.department||null,employee_id:t.employeeId||`ACC-${Date.now()}`,status:t.status||"Active"};n=(await this.createAccountant(c)).id,console.log("Accountant created with ID:",n)}const a={username:t.username,password_hash:s,role:t.role,linked_id:n,email:t.email,status:t.status||"Active"};console.log("Transformed sqlData for database:",a),console.log("About to call insertRecord for users table...");const i=await this.insertRecord("users",a);return console.log("User created with ID:",i),console.log("====================================="),{id:i,...t,linkedId:n,password:s}}catch(s){throw console.error("Error in createUser:",s),s}}async getStudents(){try{const n=(await this.executeQuery(`
        SELECT s.*, c.name as class_name 
        FROM students s 
        LEFT JOIN classes c ON s.class_id = c.id 
        ORDER BY s.first_name ASC
      `)).data||[];return this.mapFieldsToCamelCase(n)}catch(t){if(console.error("Error in getStudents:",t),t instanceof Error&&(t.message.includes("401")||t.message.includes("Unauthorized")))return console.log("Authentication required for students, returning empty array..."),[];throw t}}async getTeachers(){try{const n=(await this.executeQuery(`
        SELECT * FROM teachers 
        ORDER BY last_name, first_name
      `)).data||[];return this.mapFieldsToCamelCase(n)}catch(t){if(console.error("Error in getTeachers:",t),t instanceof Error&&(t.message.includes("401")||t.message.includes("Unauthorized")))return console.log("Authentication required for teachers, returning empty array..."),[];throw t}}async getAccountants(){try{const n=(await this.executeQuery(`
        SELECT * FROM accountants 
        ORDER BY last_name, first_name
      `)).data||[];return this.mapFieldsToCamelCase(n)}catch(t){if(console.error("Error in getAccountants:",t),t instanceof Error&&(t.message.includes("401")||t.message.includes("Unauthorized")))return console.log("Authentication required for accountants, returning empty array..."),[];throw t}}async getFeeBalances(){try{return(await this.executeQuery(`
        SELECT 
          fb.*,
          s.first_name,
          s.last_name,
          s.admission_number,
          c.name as class_name
        FROM fee_balances fb
        LEFT JOIN students s ON fb.student_id = s.id
        LEFT JOIN classes c ON fb.class_id = c.id
        ORDER BY fb.academic_year, fb.term, s.last_name, s.first_name
      `)).data||[]}catch(t){throw t}}async getClasses(){try{const n=(await this.executeQuery(`
        SELECT c.*, 
               (SELECT COUNT(*) FROM students WHERE class_id = c.id) as student_count
        FROM classes c 
        ORDER BY c.level, c.name
      `)).data||[];return this.mapFieldsToCamelCase(n)}catch(t){if(console.error("Error in getClasses:",t),t instanceof Error&&(t.message.includes("401")||t.message.includes("Unauthorized")))return console.log("Authentication required for classes, returning empty array..."),[];throw t}}async getSubjects(){try{const t=`
        SELECT * FROM subjects 
        ORDER BY category, name
      `;console.log("=== GET SUBJECTS DEBUG ==="),console.log("Query:",t);const s=await this.executeQuery(t);return console.log("Result:",s),s.data||[]}catch(t){if(console.error("Error in getSubjects:",t),t instanceof Error&&(t.message.includes("401")||t.message.includes("Unauthorized")))return console.log("Authentication required for subjects, returning fallback data..."),[{id:1,name:"English Language",code:"ENG001",category:"Primary",department:"Languages",description:"English language studies",is_core:!0,status:"Active"},{id:2,name:"Mathematics",code:"MAT001",category:"Primary",department:"Sciences",description:"Mathematical studies",is_core:!0,status:"Active"},{id:3,name:"Basic Science",code:"SCI001",category:"Primary",department:"Sciences",description:"Basic science studies",is_core:!0,status:"Active"}];throw t}}async getParents(){try{const n=(await this.executeQuery(`
        SELECT p.*, 
               (SELECT COUNT(*) FROM parent_student_links WHERE parent_id = p.id) as children_count
        FROM parents p 
        ORDER BY p.last_name, p.first_name
      `)).data||[];return this.mapFieldsToCamelCase(n)}catch(t){if(console.error("Error in getParents:",t),t instanceof Error&&(t.message.includes("401")||t.message.includes("Unauthorized")))return console.log("Authentication required for parents, returning empty array..."),[];throw t}}async checkAdmissionNumberExists(t){try{const n=await this.executeQuery("SELECT id FROM students WHERE admission_number = ?",[t]);return n.data&&n.data.length>0}catch{return!1}}async checkEmployeeIdExists(t){try{const n=await this.executeQuery("SELECT id FROM teachers WHERE employee_id = ?",[t]);return n.data&&n.data.length>0}catch{return!1}}async checkEmailExists(t,s="users"){try{const n=`SELECT id FROM ${s} WHERE email = ?`,a=await this.executeQuery(n,[t]);return a.data&&a.data.length>0}catch{return!1}}async createParentStudentLink(t,s,n="Guardian",a=!1){try{const i={parent_id:t,student_id:s,relationship:n,is_primary:a};return{id:await this.insertRecord("parent_student_links",i),parentId:t,studentId:s,relationship:n,isPrimary:a}}catch(i){throw i}}async getParentStudentLinks(){try{return(await this.executeQuery(`
        SELECT 
          psl.parent_id,
          psl.student_id,
          psl.relationship,
          psl.is_primary,
          s.first_name as student_first_name,
          s.last_name as student_last_name,
          s.admission_number,
          s.class_id,
          c.name as class_name
        FROM parent_student_links psl
        JOIN students s ON psl.student_id = s.id
        LEFT JOIN classes c ON s.class_id = c.id
        WHERE s.status = 'Active'
        ORDER BY psl.parent_id, s.last_name, s.first_name
      `)).data||[]}catch(t){return console.error("Error getting parent student links:",t),[]}}async insertBatch(t,s){try{if(s.length===0)return[];const n=Object.keys(s[0]),a=s.map(()=>`(${n.map(()=>"?").join(", ")})`).join(", "),i=s.flatMap(d=>Object.values(d)),c=`
        INSERT INTO ${t} (${n.join(", ")}) 
        VALUES ${a}
      `;return(await this.executeQuery(c,i)).insertIds||[]}catch(n){throw n}}async getStatistics(){try{const t={students:"SELECT COUNT(*) as count FROM students",teachers:"SELECT COUNT(*) as count FROM teachers",classes:"SELECT COUNT(*) as count FROM classes",subjects:"SELECT COUNT(*) as count FROM subjects",parents:"SELECT COUNT(*) as count FROM parents",users:"SELECT COUNT(*) as count FROM users",parent_student_links:"SELECT COUNT(*) as count FROM parent_student_links",subject_assignments:"SELECT COUNT(*) as count FROM subject_assignments"},s={};for(const[n,a]of Object.entries(t)){const i=await this.executeQuery(a);s[n]=i.data?.[0]?.count||0}return s}catch(t){throw t}}async testConnection(){try{return(await this.executeQuery("SELECT 1 as test")).success===!0}catch{return!1}}async api(t,s,n=null){try{const a=localStorage.getItem("token"),i={"Content-Type":"application/json"};a&&(i.Authorization=`Bearer ${a}`);const c={method:t,headers:i};n&&(c.body=JSON.stringify(n));const A=await fetch("http://localhost/GGGG/api"+s,c);if(!A.ok){const u=await A.text();let m=`API call to ${s} failed: ${A.statusText}`;try{const f=JSON.parse(u);m+=` - ${f.message||f.error}`}catch{m+=` - ${u}`}throw new Error(m)}const d=await A.json();if(d.success===!1)throw new Error(`API operation failed: ${d.message||d.error}`);return d.data}catch(a){throw console.error(`API error at endpoint ${s}:`,a),a}}async getScores(){try{return(await this.executeQuery(`
        SELECT 
          sc.id, sc.student_id, sc.subject_assignment_id, sc.ca1, sc.ca2, sc.exam, sc.total, sc.grade, sc.remark, sc.status,
          st.first_name as student_first_name, st.last_name as student_last_name,
          sa.subject_id, sa.class_id, s.name as subject_name
        FROM scores sc
        LEFT JOIN students st ON sc.student_id = st.id
        LEFT JOIN subject_assignments sa ON sc.subject_assignment_id = sa.id
        LEFT JOIN subjects s ON sa.subject_id = s.id
        ORDER BY sc.subject_assignment_id, st.last_name, st.first_name
      `)).data||[]}catch(t){throw t}}async upsertScores(t,s){return this.api("POST","/results/scores",{assignment_id:t,scores:s})}async createScore(t){console.warn("Deprecated: Direct createScore is insecure. Use upsertScores.");const s=[{student_id:t.studentId,ca1:t.ca1||0,ca2:t.ca2||0,exam:t.exam||0}];return this.upsertScores(t.subjectAssignmentId,s)}async updateScore(t,s){return console.warn("Deprecated: Direct updateScore is insecure. Use upsertScores."),Promise.resolve()}async deleteScore(t){try{await this.executeQuery("DELETE FROM scores WHERE id = ?",[t])}catch(s){throw s}}async getScoresByAssignment(t){try{return this.api("GET",`/results/scores/${t}`)}catch(s){throw s}}async getScoresByStudent(t,s,n){try{let a=`/results/student/${t}`;const i=new URLSearchParams;return s&&i.append("academic_year",s),n&&i.append("term",n),i.toString()&&(a+=`?${i.toString()}`),this.api("GET",a)}catch(a){throw a}}async getCompiledResults(){try{return(await this.executeQuery(`
            SELECT 
                cr.*,
                st.first_name as student_first_name,
                st.last_name as student_last_name,
                st.admission_number,
                c.name as class_name,
                c.level as class_level
            FROM compiled_results cr
            LEFT JOIN students st ON cr.student_id = st.id
            LEFT JOIN classes c ON cr.class_id = c.id
            ORDER BY cr.academic_year, cr.term, c.name, cr.position
        `)).data||[]}catch(t){throw t}}async createCompiledResult(t){const s={class_id:t.classId,term:t.term,academic_year:t.academicYear,student_results:[{student_id:t.studentId,total_score:t.totalScore,average_score:t.averageScore,position:t.position,total_students:t.totalStudents,class_teacher_comment:t.classTeacherComment||null,principal_comment:t.principalComment||null}]};return this.api("POST","/results/compile",s)}async updateCompiledResult(t,s){if(s.status==="Approved"){const n={action:"approve"};return this.api("POST",`/results/approve/${t}`,n)}else if(s.status==="Rejected"){const n={action:"reject",rejection_reason:s.rejectionReason||"Rejected without a specific reason."};return this.api("POST",`/results/approve/${t}`,n)}else{console.warn("updateCompiledResult currently only supports status changes to Approved/Rejected via API. Other updates still use generic query.");const n={};s.total_score!==void 0&&(n.total_score=s.total_score),s.average_score!==void 0&&(n.average_score=s.average_score),s.class_average!==void 0&&(n.class_average=s.class_average),s.position!==void 0&&(n.position=s.position),s.total_students!==void 0&&(n.total_students=s.total_students),s.grade!==void 0&&(n.grade=s.grade),s.remark!==void 0&&(n.remark=s.remark),s.class_teacher_comment!==void 0&&(n.class_teacher_comment=s.class_teacher_comment),s.principal_comment!==void 0&&(n.principal_comment=s.principal_comment),Object.keys(n).length>0&&await this.updateRecord("compiled_results",t,n)}}async deleteCompiledResult(t){try{await this.executeQuery("DELETE FROM compiled_results WHERE id = ?",[t])}catch(s){throw s}}async getResultsByClass(t,s,n){try{let a=`/results/class/${t}`;const i=new URLSearchParams;return s&&i.append("academic_year",s),n&&i.append("term",n),i.toString()&&(a+=`?${i.toString()}`),this.api("GET",a)}catch(a){throw a}}async getResultsByStudent(t,s,n){try{let a=`/results/student/${t}`;const i=new URLSearchParams;return s&&i.append("academic_year",s),n&&i.append("term",n),i.toString()&&(a+=`?${i.toString()}`),this.api("GET",a)}catch(a){throw a}}async getPendingCompiledResults(){try{return this.api("GET","/results/pending-approvals")}catch(t){throw t}}async createBatchSubjectAssignments(t){try{const s=t.map(n=>({subject_id:n.subject_id||n.subjectId,class_id:n.class_id||n.classId,teacher_id:n.teacher_id||n.teacherId,academic_year:n.academic_year||n.academicYear,term:n.term,status:n.status||"Active"}));return await this.insertBatch("subject_assignments",s)}catch(s){throw s}}async createBatchScores(t){try{const s=t.map(n=>({student_id:n.studentId,subject_assignment_id:n.subjectAssignmentId,ca1:n.ca1||0,ca2:n.ca2||0,exam:n.exam||0,grade:n.grade||null,remark:n.remark||null,class_average:n.classAverage||null,class_min:n.classMin||null,class_max:n.classMax||null,status:n.status||"Draft"}));return await this.insertBatch("scores",s)}catch(s){throw s}}async updateBatchScores(t){try{for(const{id:s,data:n}of t)await this.updateScore(s,n)}catch(s){throw s}}async getClassPerformanceSummary(t,s,n){try{return(await this.executeQuery(`
        SELECT 
          COUNT(cr.id) as total_students,
          ROUND(AVG(cr.average_score), 2) as class_average,
          MAX(cr.average_score) as highest_score,
          MIN(cr.average_score) as lowest_score,
          ROUND(AVG(cr.position), 2) as average_position
        FROM compiled_results cr
        WHERE cr.class_id = ? AND cr.academic_year = ? AND cr.term = ? AND cr.status = 'Approved'
      `,[t,s,n])).data?.[0]||null}catch(a){throw a}}async getSubjectPerformanceSummary(t,s,n,a){try{return(await this.executeQuery(`
        SELECT 
          COUNT(sc.id) as total_students,
          ROUND(AVG(sc.total), 2) as class_average,
          MAX(sc.total) as highest_score,
          MIN(sc.total) as lowest_score,
          ROUND(AVG(sc.ca1), 2) as ca1_average,
          ROUND(AVG(sc.ca2), 2) as ca2_average,
          ROUND(AVG(sc.exam), 2) as exam_average
        FROM scores sc
        LEFT JOIN subject_assignments sa ON sc.subject_assignment_id = sa.id
        WHERE sa.subject_id = ? AND sa.class_id = ? AND sa.academic_year = ? AND sa.term = ?
      `,[t,s,n,a])).data?.[0]||null}catch(i){throw i}}async getUsers(){try{return(await this.executeQuery(`
        SELECT u.*, 
          CASE 
            WHEN u.role = 'teacher' THEN t.first_name
            WHEN u.role = 'parent' THEN p.first_name
            WHEN u.role = 'accountant' THEN a.first_name
            ELSE 'System'
          END as linked_name,
          CASE 
            WHEN u.role = 'teacher' THEN t.last_name
            WHEN u.role = 'parent' THEN p.last_name
            WHEN u.role = 'accountant' THEN a.last_name
            ELSE 'User'
          END as linked_lastname
        FROM users u
        LEFT JOIN teachers t ON u.linked_id = t.id AND u.role = 'teacher'
        LEFT JOIN parents p ON u.linked_id = p.id AND u.role = 'parent'
        LEFT JOIN accountants a ON u.linked_id = a.id AND u.role = 'accountant'
        ORDER BY u.created_at DESC
      `)).data||[]}catch(t){return console.error("Error loading users:",t),[]}}async getUserById(t){try{return(await this.executeQuery(`
        SELECT u.*, 
          CASE 
            WHEN u.role = 'student' THEN s.first_name
            WHEN u.role = 'teacher' THEN t.first_name
            WHEN u.role = 'parent' THEN p.first_name
            ELSE 'System'
          END as linked_name,
          CASE 
            WHEN u.role = 'student' THEN s.last_name
            WHEN u.role = 'teacher' THEN t.last_name
            WHEN u.role = 'parent' THEN p.last_name
            ELSE 'User'
          END as linked_lastname
        FROM users u
        LEFT JOIN students s ON u.linked_id = s.id AND u.role = 'student'
        LEFT JOIN teachers t ON u.linked_id = t.id AND u.role = 'teacher'
        LEFT JOIN parents p ON u.linked_id = p.id AND u.role = 'parent'
        WHERE u.id = ?
      `,[t])).data?.[0]||null}catch(s){throw s}}async updateUser(t,s){try{const n={...s,updated_at:new Date().toISOString()};return delete n.id,await this.updateRecord("users",t,n),await this.getUserById(t)}catch(n){throw n}}async deleteUser(t){try{const n=await this.executeQuery("SELECT role, linked_id FROM users WHERE id = ?",[t]);if(!n.data||n.data.length===0)throw new Error("User not found");const a=n.data[0];return a.role==="teacher"&&a.linked_id>0?await this.executeQuery("DELETE FROM teachers WHERE id = ?",[a.linked_id]):a.role==="parent"&&a.linked_id>0?(await this.executeQuery("DELETE FROM parent_student_links WHERE parent_id = ?",[a.linked_id]),await this.executeQuery("DELETE FROM parents WHERE id = ?",[a.linked_id])):a.role==="accountant"&&a.linked_id>0&&await this.executeQuery("DELETE FROM accountants WHERE id = ?",[a.linked_id]),await this.executeQuery("DELETE FROM users WHERE id = ?",[t]),!0}catch(s){throw s}}async updateUserStatus(t,s){try{return await this.updateUser(t,{status:s})}catch(n){throw n}}async resetUserPassword(t,s){try{const n=s;return await this.updateUser(t,{password_hash:n,password_changed_at:new Date().toISOString()})}catch(n){throw n}}async checkUsernameExists(t){try{const n=await this.executeQuery("SELECT id FROM users WHERE username = ?",[t]);return n.data&&n.data.length>0}catch{return!1}}async getUserPermissions(t){try{return(await this.executeQuery(`
        SELECT p.* FROM permissions p
        JOIN role_permissions rp ON p.id = rp.permission_id
        WHERE rp.role = ? AND rp.is_active = TRUE
      `,[t])).data||[]}catch(s){throw s}}async checkUserPermission(t,s){try{const a=await this.executeQuery(`
        SELECT COUNT(*) as has_permission 
        FROM role_permissions rp
        JOIN permissions p ON rp.permission_id = p.id
        WHERE rp.role = ? AND p.name = ? AND rp.is_active = TRUE
      `,[t,s]);return a.data&&a.data[0]&&a.data[0].has_permission>0}catch{return!1}}async authenticateUser(t,s,n){try{console.log("Authenticating user:",{username:t,role:n});const a=await fetch("http://localhost/GGGG/api/auth/simple_login.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:s,role:n})});if(console.log("Authentication response status:",a.status),!a.ok)throw new Error(`Authentication failed: ${a.statusText}`);const i=await a.json();return console.log("Authentication response data:",i),i.success?(console.log("Authentication successful for:",i.data.first_name),i.data):(console.log("Authentication unsuccessful:",i.message),null)}catch(a){return console.error("Authentication error:",a),null}}async getActiveAcademicYear(){try{const s=await this.executeQuery("SELECT value FROM school_settings WHERE key = 'current_academic_year'");return s.data&&s.data.length>0?s.data[0].value:"2025/2026"}catch{return"2025/2026"}}async getActiveTerm(){try{const s=await this.executeQuery("SELECT value FROM school_settings WHERE key = 'current_term'");return s.data&&s.data.length>0?s.data[0].value:"First Term"}catch{return"First Term"}}async getRegisteredSubjects(t,s,n){try{let a=`
        SELECT sr.*, s.name as subject_name, s.code as subject_code, s.category,
          c.name as class_name, c.level as class_level
        FROM subject_registrations sr
        JOIN subjects s ON sr.subject_id = s.id
        JOIN classes c ON sr.class_id = c.id
        WHERE sr.academic_year = ? AND sr.term = ? AND sr.status = 'Active'
      `;const i=[t,s];return n&&(a+=" AND sr.class_id = ?",i.push(n.toString())),a+=" ORDER BY c.level, c.name, s.name",(await this.executeQuery(a,i)).data||[]}catch(a){throw a}}async registerSubjectForClass(t,s,n,a,i=!0){try{const c={subject_id:t,class_id:s,academic_year:n,term:a,is_compulsory:i,status:"Active"};return{id:await this.insertRecord("subject_registrations",c),...c}}catch(c){throw c}}async removeSubjectRegistration(t,s,n,a){try{return await this.executeQuery(`
        DELETE FROM subject_registrations 
        WHERE subject_id = ? AND class_id = ? AND academic_year = ? AND term = ?
      `,[t.toString(),s.toString(),n,a]),!0}catch(i){throw i}}async getSubjectAssignments(t,s,n,a){try{let i=`
        SELECT sa.*, s.name as subject_name, s.code as subject_code, s.category,
          c.name as class_name, c.level as class_level,
          t.first_name as teacher_first_name, t.last_name as teacher_last_name, t.employee_id
        FROM subject_assignments sa
        JOIN subjects s ON sa.subject_id = s.id
        JOIN classes c ON sa.class_id = c.id
        JOIN teachers t ON sa.teacher_id = t.id
        WHERE sa.academic_year = ? AND sa.term = ? AND sa.status = 'Active'
      `;const c=[t,s];return n&&(i+=" AND sa.class_id = ?",c.push(n.toString())),a&&(i+=" AND sa.teacher_id = ?",c.push(a.toString())),i+=" ORDER BY c.level, c.name, s.name",(await this.executeQuery(i,c)).data||[]}catch(i){throw i}}async assignSubjectToTeacher(t,s,n,a,i){try{const c={subject_id:t,class_id:s,teacher_id:n,academic_year:a,term:i,status:"Active"};return{id:await this.insertRecord("subject_assignments",c),...c}}catch(c){throw c}}async removeSubjectAssignment(t,s,n,a,i){try{return await this.executeQuery(`
        DELETE FROM subject_assignments 
        WHERE subject_id = ? AND class_id = ? AND teacher_id = ? AND academic_year = ? AND term = ?
      `,[t.toString(),s.toString(),n.toString(),a,i]),!0}catch(c){throw c}}async getUnassignedSubjects(t,s,n){try{return(await this.executeQuery(`
        SELECT s.* FROM subjects s
        WHERE s.status = 'Active'
        AND s.id NOT IN (
          SELECT sr.subject_id FROM subject_registrations sr
          WHERE sr.class_id = ? AND sr.academic_year = ? AND sr.term = ? AND sr.status = 'Active'
        )
        ORDER BY s.category, s.name
      `,[n.toString(),t,s])).data||[]}catch(a){throw a}}async getAvailableTeachers(t,s,n,a){try{return(await this.executeQuery(`
        SELECT t.* FROM teachers t
        WHERE t.status = 'Active'
        AND t.id NOT IN (
          SELECT sa.teacher_id FROM subject_assignments sa
          WHERE sa.subject_id = ? AND sa.class_id = ? 
          AND sa.academic_year = ? AND sa.term = ? AND sa.status = 'Active'
        )
        ORDER BY t.first_name, t.last_name
      `,[n.toString(),a.toString(),t,s])).data||[]}catch(i){throw i}}async updateStudent(t,s){const n=Object.keys(s).filter(A=>s[A]!==void 0),a=n.map(A=>s[A]),c=`UPDATE students SET ${n.map(A=>`${A} = ?`).join(", ")} WHERE id = ?`;return await this.executeQuery(c,[...a,t])}async updateTeacher(t,s){const n=Object.keys(s).filter(A=>s[A]!==void 0),a=n.map(A=>s[A]),c=`UPDATE teachers SET ${n.map(A=>`${A} = ?`).join(", ")} WHERE id = ?`;return await this.executeQuery(c,[...a,t])}async updateClass(t,s){const n=Object.keys(s).filter(A=>s[A]!==void 0),a=n.map(A=>s[A]),c=`UPDATE classes SET ${n.map(A=>`${A} = ?`).join(", ")} WHERE id = ?`;return await this.executeQuery(c,[...a,t])}async updateParent(t,s){const n=Object.keys(s).filter(A=>s[A]!==void 0),a=n.map(A=>s[A]),c=`UPDATE parents SET ${n.map(A=>`${A} = ?`).join(", ")} WHERE id = ?`;return await this.executeQuery(c,[...a,t])}async updateAccountant(t,s){const n=Object.keys(s).filter(A=>s[A]!==void 0),a=n.map(A=>s[A]),c=`UPDATE accountants SET ${n.map(A=>`${A} = ?`).join(", ")} WHERE id = ?`;return await this.executeQuery(c,[...a,t])}async deleteStudent(t){try{const n=await this.executeQuery("SELECT id, first_name, last_name FROM students WHERE id = ?",[t]);if(!n||!n.data||n.data.length===0)throw new Error("Student not found in database");const a=["fee_balances","users","scores","attendance","student_fee_balances","affective_domains","psychomotor_domains","compiled_results"];for(const A of a)try{let d="";A==="users"?d=`DELETE FROM ${A} WHERE linked_id = ? AND role = 'student'`:d=`DELETE FROM ${A} WHERE student_id = ?`,await this.executeQuery(d,[t])}catch{}const c=await this.executeQuery("DELETE FROM students WHERE id = ?",[t]);if(c&&c.affectedRows>0){const d=await this.executeQuery("SELECT id FROM students WHERE id = ?",[t]);if(d&&d.data&&d.data.length>0)throw new Error("Student deletion verification failed - student still exists");return c}else throw new Error("Failed to delete student - no rows affected")}catch(s){throw console.error("Error deleting student:",s),s}}async deleteBulkStudents(t){try{if(!t||t.length===0)throw new Error("No student IDs provided for bulk deletion");const s=[];let n=0;for(const a of t)try{const i=await this.deleteStudent(a);i&&i.affectedRows>0?(n+=i.affectedRows,s.push({id:a,success:!0})):s.push({id:a,success:!1,error:"No rows affected"})}catch(i){s.push({id:a,success:!1,error:i.message})}return{success:!0,totalDeleted:n,results:s,summary:`Successfully deleted ${n} of ${t.length} students`}}catch(s){throw s}}async deleteTeacher(t){return await this.executeQuery("DELETE FROM teachers WHERE id = ?",[t])}async deleteClass(t){return await this.executeQuery("DELETE FROM classes WHERE id = ?",[t])}async deleteParent(t){return await this.executeQuery("DELETE FROM parents WHERE id = ?",[t])}async deleteAccountant(t){return await this.executeQuery("DELETE FROM accountants WHERE id = ?",[t])}async linkParentToStudent(t,s){return await this.createParentStudentLink(t,s)}async getAttendance(t,s){try{let n=`
        SELECT 
          a.*,
          s.first_name,
          s.last_name,
          s.admission_number,
          c.name as class_name
        FROM attendance a
        LEFT JOIN students s ON a.student_id = s.id
        LEFT JOIN classes c ON a.class_id = c.id
      `;const a=[],i=[];return t&&(i.push("a.class_id = ?"),a.push(t)),s&&(i.push("a.date = ?"),a.push(s)),i.length>0&&(n+=" WHERE "+i.join(" AND ")),n+=" ORDER BY a.date, c.name, s.last_name, s.first_name",(await this.executeQuery(n,a)).data||[]}catch(n){throw n}}async createAttendance(t){try{const s={student_id:t.studentId,class_id:t.classId,date:t.date,status:t.status,marked_by:t.markedBy,term:t.term,academic_year:t.academicYear,remarks:t.remarks||null};return{id:await this.insertRecord("attendance",s),...t}}catch(s){throw s}}async updateAttendance(t,s){try{const n={status:s.status,remarks:s.remarks};await this.updateRecord("attendance",t,n)}catch(n){throw n}}async deleteAttendance(t){try{await this.executeQuery("DELETE FROM attendance WHERE id = ?",[t])}catch(s){throw s}}async getFeeStructures(t,s,n){try{let a=`
        SELECT 
          fs.*,
          c.name as class_name,
          c.level
        FROM fee_structures fs
        LEFT JOIN classes c ON fs.class_id = c.id
      `;const i=[],c=[];return t&&(c.push("fs.class_id = ?"),i.push(t)),s&&(c.push("fs.academic_year = ?"),i.push(s)),n&&(c.push("fs.term = ?"),i.push(n)),c.length>0&&(a+=" WHERE "+c.join(" AND ")),a+=" ORDER BY fs.academic_year, fs.term, c.level, c.name",(await this.executeQuery(a,i)).data||[]}catch(a){throw a}}async createFeeStructure(t){try{const s={class_id:t.classId,level:t.level,term:t.term,academic_year:t.academicYear,tuition_fee:t.tuitionFee||0,development_levy:t.developmentLevy||0,sports_fee:t.sportsFee||0,exam_fee:t.examFee||0,books_fee:t.booksFee||0,uniform_fee:t.uniformFee||0,transport_fee:t.transportFee||0,status:t.status||"Active"};return{id:await this.insertRecord("fee_structures",s),...t}}catch(s){throw s}}async getPayments(t,s,n){try{let a=`
        SELECT 
          p.*,
          s.first_name,
          s.last_name,
          s.admission_number,
          c.name as class_name,
          u_recorder.username as recorder_name,
          u_verifier.username as verifier_name
        FROM payments p
        LEFT JOIN students s ON p.student_id = s.id
        LEFT JOIN classes c ON s.class_id = c.id
        LEFT JOIN users u_recorder ON p.recorded_by = u_recorder.id
        LEFT JOIN users u_verifier ON p.verified_by = u_verifier.id
      `;const i=[],c=[];return t&&(c.push("p.student_id = ?"),i.push(t)),s&&(c.push("p.academic_year = ?"),i.push(s)),n&&(c.push("p.term = ?"),i.push(n)),c.length>0&&(a+=" WHERE "+c.join(" AND ")),a+=" ORDER BY p.recorded_date DESC",(await this.executeQuery(a,i)).data||[]}catch(a){throw a}}async createPayment(t){try{const s={student_id:t.studentId,amount:t.amount,payment_type:t.paymentType,term:t.term,academic_year:t.academicYear,payment_method:t.paymentMethod,transaction_reference:t.transactionReference||null,receipt_number:t.receiptNumber,recorded_by:t.recordedBy,notes:t.notes||null};return{id:await this.insertRecord("payments",s),...t}}catch(s){throw s}}async updatePaymentStatus(t,s,n){try{const a={status:s};n&&(a.verified_by=n,a.verified_date=new Date().toISOString().slice(0,19).replace("T"," ")),await this.updateRecord("payments",t,a)}catch(a){throw a}}async createBatchAttendance(t){try{const s=[];for(const n of t){const a=await this.createAttendance(n);s.push(a)}return s}catch(s){throw s}}async createBatchPayments(t){try{const s=[];for(const n of t){const a=await this.createPayment(n);s.push(a)}return s}catch(s){throw s}}async createAffectiveDomain(t){const s={student_id:t.student_id,class_id:t.class_id,term:t.term,academic_year:t.academic_year,attentiveness:t.attentiveness,attentiveness_remark:t.attentiveness_remark,honesty:t.honesty,honesty_remark:t.honesty_remark,neatness:t.neatness,neatness_remark:t.neatness_remark,obedience:t.obedience,obedience_remark:t.obedience_remark,sense_of_responsibility:t.sense_of_responsibility,sense_of_responsibility_remark:t.sense_of_responsibility_remark,entered_by:t.entered_by,entered_date:t.entered_date};return{id:await this.insertRecord("affective_domains",s),...t}}async updateAffectiveDomain(t,s){const n={attentiveness:s.attentiveness,attentiveness_remark:s.attentiveness_remark,honesty:s.honesty,honesty_remark:s.honesty_remark,neatness:s.neatness,neatness_remark:s.neatness_remark,obedience:s.obedience,obedience_remark:s.obedience_remark,sense_of_responsibility:s.sense_of_responsibility,sense_of_responsibility_remark:s.sense_of_responsibility_remark,entered_by:s.entered_by,entered_date:s.entered_date};return await this.updateRecord("affective_domains",t,n),{id:t,...s}}async createPsychomotorDomain(t){const s={student_id:t.student_id,class_id:t.class_id,term:t.term,academic_year:t.academic_year,attention_to_direction:t.attention_to_direction,attention_to_direction_remark:t.attention_to_direction_remark,considerate_of_others:t.considerate_of_others,considerate_of_others_remark:t.considerate_of_others_remark,handwriting:t.handwriting,handwriting_remark:t.handwriting_remark,sports:t.sports,sports_remark:t.sports_remark,verbal_fluency:t.verbal_fluency,verbal_fluency_remark:t.verbal_fluency_remark,works_well_independently:t.works_well_independently,works_well_independently_remark:t.works_well_independently_remark,entered_by:t.entered_by,entered_date:t.entered_date};return{id:await this.insertRecord("psychomotor_domains",s),...t}}async updatePsychomotorDomain(t,s){const n={attention_to_direction:s.attention_to_direction,attention_to_direction_remark:s.attention_to_direction_remark,considerate_of_others:s.considerate_of_others,considerate_of_others_remark:s.considerate_of_others_remark,handwriting:s.handwriting,handwriting_remark:s.handwriting_remark,sports:s.sports,sports_remark:s.sports_remark,verbal_fluency:s.verbal_fluency,verbal_fluency_remark:s.verbal_fluency_remark,works_well_independently:s.works_well_independently,works_well_independently_remark:s.works_well_independently_remark,entered_by:s.entered_by,entered_date:s.entered_date};return await this.updateRecord("psychomotor_domains",t,n),{id:t,...s}}async deleteAffectiveDomain(t){await this.deleteRecord("affective_domains",t)}async deletePsychomotorDomain(t){await this.deleteRecord("psychomotor_domains",t)}async createExamTimetable(t){const s={class_id:t.classId,subject_id:t.subjectId,exam_type:t.examType||"Exam",exam_date:t.examDate,start_time:t.startTime,end_time:t.endTime,duration_minutes:this.calculateDuration(t.startTime,t.endTime),venue:t.venue||null,supervisor_id:t.supervisorId||null,academic_year:t.academicYear||"",term:t.term||"",instructions:t.instructions||null,created_by:t.createdBy||null,created_at:new Date().toISOString()};return{id:await this.insertRecord("exam_timetable",s),...t}}async updateExamTimetable(t,s){const n={class_id:s.classId,subject_id:s.subjectId,exam_type:s.examType,exam_date:s.examDate,start_time:s.startTime,end_time:s.endTime,duration_minutes:this.calculateDuration(s.startTime,s.endTime),venue:s.venue,supervisor_id:s.supervisorId,academic_year:s.academicYear,term:s.term,instructions:s.instructions,updated_at:new Date().toISOString()};return await this.updateRecord("exam_timetable",t,n)}async deleteExamTimetable(t){return await this.deleteRecord("exam_timetable",t)}async getExamTimetables(){const t=await this.executeQuery("SELECT et.*, c.name as class_name, s.name as subject_name FROM exam_timetable et LEFT JOIN classes c ON et.class_id = c.id LEFT JOIN subjects s ON et.subject_id = s.id ORDER BY et.exam_date, et.start_time");return t&&t.data?t.data:[]}async getExamTimetablesByClass(t){const s=await this.executeQuery("SELECT et.*, c.name as class_name, s.name as subject_name FROM exam_timetable et LEFT JOIN classes c ON et.class_id = c.id LEFT JOIN subjects s ON et.subject_id = s.id WHERE et.class_id = ? ORDER BY et.exam_date, et.start_time",[t]);return s&&s.data?s.data:[]}async getExamTimetablesBySubject(t){const s=await this.executeQuery("SELECT et.*, c.name as class_name, s.name as subject_name FROM exam_timetable et LEFT JOIN classes c ON et.class_id = c.id LEFT JOIN subjects s ON et.subject_id = s.id WHERE et.subject_id = ? ORDER BY et.exam_date, et.start_time",[t]);return s&&s.data?s.data:[]}async getExamTimetablesByDate(t){const s=await this.executeQuery("SELECT et.*, c.name as class_name, s.name as subject_name FROM exam_timetable et LEFT JOIN classes c ON et.class_id = c.id LEFT JOIN subjects s ON et.subject_id = s.id WHERE et.exam_date = ? ORDER BY et.start_time",[t]);return s&&s.data?s.data:[]}calculateDuration(t,s){if(!t||!s)return 0;const n=new Date(`2000-01-01T${t}`),a=new Date(`2000-01-01T${s}`);return Math.round((a.getTime()-n.getTime())/6e4)}}const At=new rk,FN=j.createContext(void 0);function ys(){const r=j.useContext(FN);if(r===void 0)throw new Error("useSchool must be used within SchoolProvider");return r}function nk({children:r}){const[t,s]=j.useState(""),[n,a]=j.useState(""),[i,c]=j.useState(null),[A,d]=j.useState({school_name:"",school_motto:"",principal_name:"",head_teacher_name:"",principal_comment:"",head_teacher_comment:"",resumption_date:""}),[u,m]=j.useState(null),[f,x]=j.useState([]),[g,y]=j.useState([]),[b,B]=j.useState([]),[N,E]=j.useState([]),[I,k]=j.useState([]),[$,z]=j.useState([]),[H,T]=j.useState([]),[V,G]=j.useState([]),[L,F]=j.useState([]),[O,P]=j.useState([]),[ce,W]=j.useState([]),[ae,K]=j.useState([]),[le,ie]=j.useState([]),[se,R]=j.useState([]),[q,te]=j.useState([]),[de,fe]=j.useState([]),[me,pe]=j.useState([]),[ee,je]=j.useState([]),[Pe,De]=j.useState({}),[nt,Se]=j.useState([]),[X,Ie]=j.useState([]),[rt,Ee]=j.useState([]),[Te,dt]=j.useState([]),[st,ft]=j.useState([]),[et,it]=j.useState([]),[Ue,We]=j.useState([]),Bt=async()=>{try{const _=await At.executeQuery("SELECT * FROM users ORDER BY created_at DESC");return _&&_.data?(Se(_.data),!0):!1}catch(_){return console.error("Error loading users:",_),!1}},mt=async()=>{try{const _=await At.executeQuery(`
        SELECT 
          id,
          actor,
          actor_role as actorRole,
          action,
          target,
          ip_address as ipAddress,
          status,
          details,
          user_id as userId,
          created_at as timestamp
        FROM activity_logs 
        ORDER BY created_at DESC
        LIMIT 1000
      `);return _&&_.data?(pe(_.data),!0):!1}catch(_){return console.error("Error loading activity logs:",_),!1}},Me=async()=>{try{const _=await At.executeQuery(`
        SELECT 
          id, 
          first_name as firstName, 
          last_name as lastName, 
          other_name as otherName,
          employee_id as employeeId, 
          email, 
          phone, 
          gender, 
          qualification, 
          specialization, 
          status, 
          is_class_teacher as isClassTeacher, 
          department_id as departmentId,
          created_at as createdAt,
          updated_at as updatedAt
        FROM teachers 
        ORDER BY created_at DESC
      `);return _&&_.data?(y(_.data),!0):!1}catch(_){return console.error("Error loading teachers:",_),!1}},Ve=async()=>{try{const _=await At.executeQuery("SELECT * FROM parents ORDER BY created_at DESC");if(_&&_.data){const M=_.data.map(Z=>({...Z,firstName:Z.first_name,lastName:Z.last_name}));return k(M),!0}return!1}catch(_){return console.error("Error loading parents:",_),!1}},wt=async()=>{try{const _=await At.executeQuery("SELECT * FROM parent_student_links ORDER BY created_at DESC");return _&&_.data?(We(_.data),!0):!1}catch(_){return console.error("Error loading parent student links:",_),!1}},As=async()=>{try{const _=await At.executeQuery("SELECT * FROM accountants ORDER BY created_at DESC");if(_&&_.data){const M=_.data.map(Z=>({id:Z.id,firstName:Z.first_name,lastName:Z.last_name,employeeId:Z.employee_id,email:Z.email,phone:Z.phone,department:Z.department,status:Z.status,created_at:Z.created_at,updated_at:Z.updated_at}));return te(M),!0}return!1}catch(_){return console.error("Error loading accountants:",_),!1}},_e=async()=>{try{const _=await At.executeQuery(`
        SELECT 
          s.id, 
          s.first_name as firstName,
          s.last_name as lastName,
          s.other_name as otherName,
          s.admission_number as admissionNumber,
          s.class_id,
          s.level,
          s.parent_id,
          s.date_of_birth as dateOfBirth,
          s.gender,
          s.photo_url as photoUrl,
          s.passport_photo as passportPhoto,
          s.status,
          s.academic_year as academicYear,
          s.admission_date as admissionDate,
          s.created_at as createdAt,
          s.updated_at as updatedAt,
          c.name as className,
          c.category as classCategory
        FROM students s
        LEFT JOIN classes c ON s.class_id = c.id
        ORDER BY s.first_name ASC
      `);return _&&_.data?(console.log("Loaded students from database:",_.data),E(_.data),!0):!1}catch(_){return console.error("Error loading students:",_),!1}},$e=async()=>{try{const _=await At.executeQuery(`
        SELECT 
          c.id, 
          c.name, 
          c.level, 
          c.section, 
          c.category, 
          c.capacity, 
          c.current_students as currentStudents, 
          c.class_teacher_id as classTeacherId, 
          CONCAT(t.first_name, ' ', t.last_name) as classTeacher,
          c.academic_year as academicYear, 
          c.status,
          c.created_at as createdAt,
          c.updated_at as updatedAt
        FROM classes c
        LEFT JOIN teachers t ON c.class_teacher_id = t.id
        ORDER BY c.created_at DESC
      `);return _&&_.data?(x(_.data),!0):!1}catch(_){return console.error("Error loading classes:",_),!1}},gt=async()=>{try{const _=await At.executeQuery(`
        SELECT 
          id, 
          name, 
          code, 
          category, 
          department, 
          description, 
          is_core as isCore, 
          status,
          created_at as createdAt,
          updated_at as updatedAt
        FROM subjects 
        ORDER BY created_at DESC
      `);return _&&_.data?(B(_.data),!0):!1}catch(_){return console.error("Error loading subjects:",_),!1}},Ft=async()=>{try{const _=await At.executeQuery("SELECT * FROM subject_registrations ORDER BY created_at DESC");return _&&_.data?(z(_.data),!0):!1}catch(_){return console.error("Error loading subject registrations:",_),!1}},bt=async()=>{try{const _=await At.executeQuery(`
        SELECT 
          sa.id,
          sa.subject_id,
          sa.class_id,
          sa.teacher_id,
          sa.academic_year,
          sa.term,
          sa.status,
          sa.created_at,
          sa.updated_at,
          s.name as subject_name,
          s.code as subject_code,
          c.name as class_name,
          c.level as class_level,
          CONCAT(t.first_name, ' ', t.last_name) as teacher_name,
          t.first_name as teacher_first_name,
          t.last_name as teacher_last_name
        FROM subject_assignments sa
        JOIN subjects s ON sa.subject_id = s.id
        JOIN classes c ON sa.class_id = c.id
        JOIN teachers t ON sa.teacher_id = t.id
        ORDER BY sa.created_at DESC
      `);return _&&_.data?(console.log("Loaded subject assignments from database:",_.data),T(_.data),!0):!1}catch(_){return console.error("Error loading subject assignments:",_),!1}},Ot=async _=>{try{const M=await At.createStudent(_);return M&&M.id?(await _e(),!0):!1}catch(M){return console.error("Error creating student:",M),!1}},Lt=async(_,M)=>{try{return await At.updateRecord("students",_,M)?(await _e(),!0):!1}catch(Z){return console.error("Error updating student:",Z),!1}},Vt=async _=>{try{return await At.deleteRecord("students",_)?(await _e(),!0):!1}catch(M){return console.error("Error deleting student:",M),!1}},Ns=async _=>{try{const M=await At.createTeacher(_);return M&&M.id?(await Me(),!0):!1}catch(M){return console.error("Error creating teacher:",M),!1}},Yt=async(_,M)=>{try{return await At.updateRecord("teachers",_,M)?(await Me(),!0):!1}catch(Z){return console.error("Error updating teacher:",Z),!1}},Ht=async _=>{try{return await At.deleteRecord("teachers",_)?(await Me(),!0):!1}catch(M){return console.error("Error deleting teacher:",M),!1}},_t=async _=>{try{const M=await At.createParent(_);return M&&M.id?(await Ve(),!0):!1}catch(M){return console.error("Error creating parent:",M),!1}},Ls=async(_,M)=>{try{return await At.updateRecord("parents",_,M)?(await Ve(),!0):!1}catch(Z){return console.error("Error updating parent:",Z),!1}},vs=async _=>{try{return await At.deleteRecord("parents",_)?(await Ve(),!0):!1}catch(M){return console.error("Error deleting parent:",M),!1}},Gt=async _=>{try{const M=await At.createAccountant(_);return M&&M.id?(await As(),!0):!1}catch(M){return console.error("Error creating accountant:",M),!1}},Xs=async(_,M)=>{try{return await At.updateRecord("accountants",_,M)?(await As(),!0):!1}catch(Z){return console.error("Error updating accountant:",Z),!1}},yt=async _=>{try{return await At.deleteRecord("accountants",_)?(await As(),!0):!1}catch(M){return console.error("Error deleting accountant:",M),!1}},Fs=async _=>{try{const M=await At.createClass(_);return M&&M.id?(await $e(),!0):!1}catch(M){return console.error("Error creating class:",M),!1}},us=async(_,M)=>{try{return await At.updateRecord("classes",_,M)?(await $e(),!0):!1}catch(Z){return console.error("Error updating class:",Z),!1}},Ts=async _=>{try{return await At.deleteRecord("classes",_)?(await $e(),!0):!1}catch(M){return console.error("Error deleting class:",M),!1}},tr=async _=>{try{const M=await At.createSubject(_);return M&&M.id?(await gt(),!0):!1}catch(M){return console.error("Error creating subject:",M),!1}},Vs=async(_,M)=>{try{return await At.updateRecord("subjects",_,M)?(await gt(),!0):!1}catch(Z){return console.error("Error updating subject:",Z),!1}},zs=async _=>{try{return await At.deleteRecord("subjects",_)?(await gt(),!0):!1}catch(M){return console.error("Error deleting subject:",M),!1}},mr=async(_,M,Z,we,qe=!0)=>{try{const Kt=await At.registerSubjectForClass(M,_,Z,we,qe);return Kt&&Kt.id?(await gt(),!0):!1}catch(Kt){return console.error("Error registering subject for class:",Kt),!1}},$n=async(_,M,Z,we)=>{try{return await At.removeSubjectRegistration(M,_,Z,we)?(await gt(),!0):!1}catch(qe){return console.error("Error removing subject registration:",qe),!1}},Na=async(_,M,Z)=>{try{let we="SELECT sr.*, s.name as subject_name, s.code as subject_code, c.name as class_name, c.level as class_level FROM subject_registrations sr JOIN subjects s ON sr.subject_id = s.id JOIN classes c ON sr.class_id = c.id";const qe=[];if(_||M||Z){we+=" WHERE";const Wt=[];_&&(Wt.push(" sr.class_id = ?"),qe.push(_)),M&&(Wt.push(" sr.academic_year = ?"),qe.push(M)),Z&&(Wt.push(" sr.term = ?"),qe.push(Z)),we+=Wt.join(" AND")}return we+=" ORDER BY sr.academic_year, sr.term, c.name, s.name",(await At.executeQuery(we,qe))?.data||[]}catch(we){return console.error("Error getting subject registrations:",we),[]}};j.useEffect(()=>{i&&i.token&&(async()=>(await Bt(),await Me(),await Ve(),await wt(),await As(),await _e(),await $e(),await gt(),await Ft(),await bt(),await Pn(),await _a(),await Za(),await Oo()))()},[i]),j.useEffect(()=>{qn(),qa(),vl(),Bt(),mt(),_e(),$e(),gt().catch(_=>{console.log("Subjects loading failed during init (may need authentication):",_)}),Me(),Ve(),wt(),As()},[]);const Qn=async(_,M,Z)=>{try{console.log("Login attempt:",{username:_,role:Z});const we=await At.authenticateUser(_,M,Z);return we?(c(we),localStorage.setItem("token",we.token||""),console.log("Login successful, reloading all data..."),await Bt(),await Me(),await Ve(),await As(),await _e(),await $e(),await gt(),await Ft(),await bt(),await Pn(),await _a(),await Za(),he.success(`Welcome back, ${we.firstName||we.username}!`),we):null}catch(we){return console.error("Login error:",we),he.error(we.message||"Login failed"),null}},ze=async _=>{if(await Ot(_)){await _e();const Z=await At.executeQuery(`
        SELECT 
          s.id, 
          s.first_name as firstName,
          s.last_name as lastName,
          s.other_name as otherName,
          s.admission_number as admissionNumber,
          s.class_id,
          s.level,
          s.parent_id,
          s.date_of_birth as dateOfBirth,
          s.gender,
          s.photo_url as photoUrl,
          s.passport_photo as passportPhoto,
          s.status,
          s.academic_year as academicYear,
          s.admission_date as admissionDate,
          s.created_at as createdAt,
          s.updated_at as updatedAt,
          c.name as className,
          c.category as classCategory
        FROM students s
        LEFT JOIN classes c ON s.class_id = c.id
        ORDER BY s.created_at DESC LIMIT 1
      `);return Z.data&&Z.data[0]?Z.data[0].id:-1}else return await _e(),-1},ms=async(_,M)=>{E(we=>we.map(qe=>qe.id===_?{...qe,...M}:qe)),await Lt(_,M)?await _e():await _e()},Cs=async _=>{try{E(Z=>Z.filter(qe=>qe.id!==_)),await Vt(_)?(await _e(),await Ve(),E(Z=>[...Z])):await _e()}catch(M){throw await _e(),M}},sr=async _=>{try{if(!_||_.length===0)throw new Error("No student IDs provided for bulk deletion");E(Z=>Z.filter(qe=>!_.includes(qe.id)));const M=await At.deleteBulkStudents(_);if(M&&M.success)return await _e(),await Ve(),E(Z=>[...Z]),M;throw await _e(),new Error("Bulk deletion failed")}catch(M){throw await _e(),M}},Be=_=>(N||[]).filter(M=>M.class_id===_),js=async()=>{await _e()},rr=async _=>{let M=_.employeeId;if(!M||M===""){const we=new Date().getFullYear(),qe=(g||[]).length+1;M=`GRA-TCH-${we}-${String(qe).padStart(3,"0")}`}if(await Ns({..._,employeeId:M})){await Me();const we=await At.executeQuery("SELECT * FROM teachers ORDER BY created_at DESC LIMIT 1");return we.data&&we.data[0]?we.data[0].id:-1}return-1},Gn=async(_,M)=>{await Yt(_,M)&&await Me()},li=async _=>{await Ht(_)&&(await Me(),await $e())},Wn=_=>(H||[]).filter(M=>M.teacher_id===_&&M.term===t&&M.academic_year===n),lr=_=>{const M=Wn(_),Z=f.filter(qe=>qe.classTeacherId===_),we=M.reduce((qe,Kt)=>{const Wt=Kt.class_id;return qe[Wt]||(qe[Wt]={classId:Wt,className:f.find(Ps=>Ps.id===Wt)?.name||"Unknown",classLevel:f.find(Ps=>Ps.id===Wt)?.level||"Unknown",subjects:[]}),qe[Wt].subjects.push({subjectId:Kt.subject_id,subjectName:b.find(Ps=>Ps.id===Kt.subject_id)?.name||"Unknown",subjectCode:b.find(Ps=>Ps.id===Kt.subject_id)?.code||"Unknown",assignmentId:Kt.id}),qe},{});return Z.forEach(qe=>{we[qe.id]||(we[qe.id]={classId:qe.id,className:qe.name||"Unknown",classLevel:qe.level||"Unknown",subjects:[]})}),Object.values(we).map(qe=>({...qe,studentCount:N.filter(Kt=>Kt.class_id===qe.classId).length}))},wr=_=>{try{const M=Wn(_),Z=f.filter(Wt=>Wt.classTeacherId===_),we=M.reduce((Wt,Ps)=>(Wt.find(sn=>sn.classId===Ps.class_id)||Wt.push({classId:Ps.class_id,className:f.find(sn=>sn.id===Ps.class_id)?.name||"Unknown",classLevel:f.find(sn=>sn.id===Ps.class_id)?.level||"Unknown"}),Wt),[]),qe=[...we];Z.forEach(Wt=>{qe.find(Ps=>Ps.classId===Wt.id)||qe.push({classId:Wt.id,className:Wt.name||"Unknown",classLevel:Wt.level||"Unknown"})});const Kt=qe.reduce((Wt,Ps)=>{const sn=N.filter(Mr=>Mr.class_id===Ps.classId);return Wt+sn.length},0);return{isClassTeacher:Z.length>0,assignedClassesCount:qe.length,totalStudentsCount:Kt,subjectsCount:M.length,canEnterScores:!0,canCompileResults:Z.length>0,canViewResults:!0,canManageAttendance:Z.length>0,canManageAffectivePsychomotor:Z.length>0,canManageTimetable:Z.length>0,canMessageParents:Z.length>0,departments:["Academic"],classTeacherClassesCount:Z.length,subjectAssignedClassesCount:we.length,classTeacherClassIds:Z.map(Wt=>Wt.id),subjectAssignedClassIds:we.map(Wt=>Wt.classId)}}catch(M){return console.error("Error getting teacher responsibilities:",M),{isClassTeacher:!1,assignedClassesCount:0,totalStudentsCount:0,subjectsCount:0,canEnterScores:!1,canCompileResults:!1,canViewResults:!1,canManageAttendance:!1,canManageAffectivePsychomotor:!1,canManageTimetable:!1,canMessageParents:!1,departments:[],classTeacherClassesCount:0,subjectAssignedClassesCount:0,classTeacherClassIds:[],subjectAssignedClassIds:[]}}},Hc=async _=>{if(await _t(_)){await Ve();const Z=await At.executeQuery("SELECT * FROM parents ORDER BY created_at DESC LIMIT 1");return Z.data&&Z.data[0]?Z.data[0].id:-1}else return-1},pl=async(_,M)=>{await Ls(_,M)&&await Ve()},Aa=async _=>{await vs(_)&&await Ve()},Wi=_=>N.filter(M=>M.parent_id===_),Kc=async _=>{if(await Gt(_)){await As();const Z=await At.executeQuery("SELECT * FROM accountants ORDER BY created_at DESC LIMIT 1");return Z.data&&Z.data[0]?Z.data[0].id:-1}else return-1},gl=async(_,M)=>{await Xs(_,M)&&await As()},jo=async _=>{await yt(_)&&await As()},da=async _=>{if(await Fs(_)){await $e();const Z=await At.executeQuery("SELECT * FROM classes ORDER BY created_at DESC LIMIT 1");return Z.data&&Z.data[0]?Z.data[0].id:-1}else return-1},Vc=async(_,M)=>{await us(_,M)&&await $e()},zr=async _=>{await Ts(_)&&await $e()},xl=async(_,M)=>{await Vs(_,M)&&await gt()},WA=async _=>{if(await tr(_)){await gt();const Z=await At.executeQuery("SELECT * FROM subjects ORDER BY created_at DESC LIMIT 1");return Z.data&&Z.data[0]?Z.data[0].id:-1}else return-1},$r=async _=>{await zs(_)&&await gt()},Bo=()=>ce.filter(_=>_.status==="Submitted"),qn=async()=>{try{const _=await At.executeQuery("SELECT setting_value FROM school_settings WHERE setting_key = 'current_term'"),M=await At.executeQuery("SELECT setting_value FROM school_settings WHERE setting_key = 'current_academic_year'"),Z=_?.data||_,we=M?.data||M;Z&&Z.length>0&&s(Z[0].setting_value),we&&we.length>0&&a(we[0].setting_value)}catch(_){console.error("Error loading current term and year:",_)}},qa=async()=>{try{const _=await At.executeQuery("SELECT setting_key, setting_value FROM school_settings");console.log("School settings query result:",_);const M={},Z=_?.data||_;Array.isArray(Z)?Z.forEach(we=>{M[we.setting_key]=we.setting_value}):console.warn("School settings query did not return an array:",typeof Z,Z),d(we=>({...we,...M}))}catch(_){console.error("Error loading school settings:",_)}},Co=async()=>{try{const _=await At.executeQuery("SELECT DISTINCT academic_year FROM compiled_results ORDER BY academic_year DESC");let M=[];_&&typeof _=="object"&&(Array.isArray(_)?M=_:Array.isArray(_.data)&&(M=_.data));const Z=M.map(we=>we.academic_year);return n&&!Z.includes(n)&&Z.push(n),Z}catch(_){return console.error("Error getting academic years:",_),n?[n]:[]}},ja=async(_,M)=>{try{const Z=await At.executeQuery("SELECT * FROM compiled_results WHERE academic_year = ? AND term = ? ORDER BY student_id",[_,M]);if(Z&&typeof Z=="object"){if(Array.isArray(Z))return Z;if(Array.isArray(Z.data))return Z.data}return[]}catch(Z){return console.error("Error getting compiled results by year and term:",Z),[]}},Xr=async _=>{s(_);try{await At.executeQuery("INSERT INTO school_settings (setting_key, setting_value) VALUES ('current_term', ?) ON DUPLICATE KEY UPDATE setting_value = ?",[_,_])}catch(M){console.error("Error updating current term in database:",M)}},Ya=async _=>{De(_);try{for(const[M,Z]of Object.entries(_))await At.executeQuery(`
          INSERT INTO school_settings (setting_key, setting_value, updated_date) 
          VALUES (?, ?, NOW())
          ON DUPLICATE KEY UPDATE setting_value = ?, updated_date = NOW()
        `,[`attendance_${M.toLowerCase().replace(" ","_")}`,Z.toString(),Z.toString()])}catch(M){console.error("Error updating attendance requirements in database:",M)}},ac=()=>Pe,vl=async()=>{try{const _=["first_term","second_term","third_term"],M={};for(const Z of _){const we=await At.executeQuery("SELECT setting_value FROM school_settings WHERE setting_key = ?",[`attendance_${Z}`]);if(we.length>0){const qe=Z.split("_").map(Kt=>Kt.charAt(0).toUpperCase()+Kt.slice(1)).join(" ");M[qe]=parseInt(we[0].setting_value)||0}}De(M)}catch(_){console.error("Error loading attendance requirements from database:",_),De({})}},So=async _=>{a(_);try{await At.executeQuery("INSERT INTO school_settings (setting_key, setting_value) VALUES ('current_academic_year', ?) ON DUPLICATE KEY UPDATE setting_value = ?",[_,_])}catch(M){console.error("Error updating academic year in database:",M)}},Ja=_=>(f||[]).filter(M=>M.classTeacherId===_).map(M=>M.id),wl=(_,M)=>{const Z=Ja(_);return Z.includes(M)?{valid:!1,message:"Teacher is already class teacher for this class"}:Z.length>=3?{valid:!1,message:"Teacher cannot be class teacher for more than 3 classes. Current assignments: "+Z.length}:{valid:!0,message:"Valid assignment"}},Ys=async _=>{d({...A,..._});try{const M=Object.entries(_);for(const[Z,we]of M)we!==void 0&&await At.executeQuery("UPDATE school_settings SET setting_value = ?, updated_date = NOW() WHERE setting_key = ?",[we,Z])}catch(M){console.error("Error updating school settings in database:",M)}},Eo=_=>{const M={..._,id:1,updated_date:new Date().toISOString()};if(m(M),i){const Z=we=>({admin:"Admin",teacher:"Teacher",accountant:"Accountant",parent:"Parent"})[we]||"System";Fo({id:0,actor:i.username,actor_role:Z(i.role),action:"update_bank_account",target:_.bank_name,ip_address:"127.0.0.1",status:"Success",timestamp:new Date().toISOString(),details:`Updated bank account to ${_.account_number}`})}},qi=()=>u,Fo=async _=>{try{const{id:M,timestamp:Z,...we}=_,qe=await At.insertRecord("activity_logs",we);return qe&&qe.insertId?(await mt(),qe.insertId):0}catch(M){console.error("Error adding activity log:",M);const Z=me.length>0?Math.max(...me.map(qe=>qe.id))+1:1,we={..._,id:Z,timestamp:new Date().toISOString()};return pe([we,...me]),Z}},zc=(_,M)=>{let Z=me;if(i?.role==="teacher"&&i.linked_id){const we=g.find(qe=>qe.id===i.linked_id);if(we){const Kt=Wn(we.id).map(Wt=>Wt.class_id);Z=Z.filter(Wt=>{if(Wt.actor===i.username)return!0;const Ps=Wt.user_id;if(Ps){const sn=N.find(Mr=>Mr.id===Ps);if(sn&&Kt.includes(sn.class_id))return!0}return!!(Wt.target&&Wt.target.includes("Class"))})}}else _&&(Z=Z.filter(we=>we.actor===i?.username));return M&&M!=="all"&&(Z=Z.filter(we=>we.action===M)),Z},ic=async _=>{try{const M=await At.createUser(_);return M?(await Bt(),M):null}catch(M){return console.error("Error creating user:",M),null}},_o=async(_,M)=>{try{return await At.updateRecord("users",_,M)?(await Bt(),!0):!1}catch(Z){return console.error("Error updating user:",Z),!1}},ko=async _=>{try{return await At.deleteRecord("users",_)?(await Bt(),!0):!1}catch(M){return console.error("Error deleting user:",M),!1}},Tn=async(_,M)=>{try{return await At.updateRecord("users",_,{status:M})?(await Bt(),!0):!1}catch(Z){return console.error("Error updating user status:",Z),!1}},ci=async _=>{try{const M="Temp"+Math.random().toString(36).slice(-8);if(await At.updateRecord("users",_,{password_hash:M}))return await Bt(),M;throw new Error("Failed to reset password")}catch(M){throw console.error("Error resetting user password:",M),new Error("Failed to reset password")}},Yn=async(_,M)=>{try{const Z=M||"Temp"+Math.random().toString(36).slice(-8);if(await At.updateRecord("users",_,{password_hash:Z}))return await Bt(),Z;throw new Error("Failed to reset password")}catch(Z){throw console.error("Error resetting user password:",Z),new Error("Failed to reset password")}},ua=async _=>{try{const M=nt.find(we=>we.id===_);if(!M)return[];const Z=["create_users","read_users","update_users","delete_users","create_students","read_students","update_students","delete_students","create_teachers","read_teachers","update_teachers","delete_teachers","create_parents","read_parents","update_parents","delete_parents","manage_classes","manage_subjects","manage_fees","view_reports"];return M.role==="admin"?Z:M.role==="teacher"?["read_students","update_students","manage_classes","manage_subjects"]:M.role==="accountant"?["read_students","manage_fees","view_reports"]:["read_students"]}catch(M){return console.error("Error getting user permissions:",M),[]}},Uo=async(_,M)=>{try{return _==="admin"?!0:_==="teacher"?["create_users","read_users","update_users","delete_users","create_students","read_students","update_students","delete_students","create_teachers","read_teachers","update_teachers","delete_teachers","create_parents","read_parents","update_parents","delete_parents","manage_classes","manage_subjects","manage_fees","view_reports"].includes(M):_==="accountant"?["read_students","manage_fees","view_reports"].includes(M):["read_students"].includes(M)}catch(Z){return console.error("Error checking user permission:",Z),!1}},fs=async _=>{try{const M=`
        INSERT INTO compiled_results (
          student_id, class_id, term, academic_year, total_score, average_score, 
          class_average, position, total_students, times_present, times_absent, 
          total_attendance_days, term_begin, term_end, next_term_begin,
          class_teacher_name, class_teacher_comment, principal_name, principal_comment,
          principal_signature, compiled_by, compiled_date, status
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
      `,Z=[_.student_id,_.class_id,_.term,_.academic_year,_.total_score,_.average_score,_.class_average||0,_.position,_.total_students,_.times_present||0,_.times_absent||0,_.total_attendance_days||0,_.term_begin||null,_.term_end||null,_.next_term_begin||null,_.class_teacher_name,_.class_teacher_comment,_.principal_name||"",_.principal_comment,_.principal_signature||"",_.compiled_by||1,_.compiled_date,_.status],we=await At.executeQuery(M,Z);if(we&&we.insertId){const qe={..._,id:we.insertId};return W([...ce,qe]),we.insertId}else throw new Error("No insert ID returned from database")}catch(M){throw console.error("Error saving compiled result to database:",M),M}},Ai=async(_,M)=>{try{await At.updateRecord("compiled_results",_,M),W(ce.map(Z=>Z.id===_?{...Z,...M}:Z))}catch(Z){throw console.error("Error updating compiled result:",Z),Z}},qA=async _=>{W(ce.filter(M=>M.id!==_))},$c=_=>ce.filter(M=>M.class_id===_),ha=async _=>{const M=se.length>0?Math.max(...se.map(we=>we.id))+1:1,Z={..._,id:M};R([...se,Z])},Fi=async(_,M)=>{R(se.map(Z=>Z.id===_?{...Z,...M}:Z))},Gc=async _=>{R(se.map(M=>M.id===_?{...M,status:"Verified"}:M))},bl=_=>se.filter(M=>M.student_id===_),Io=async _=>{const M=ae.length>0?Math.max(...ae.map(we=>we.id))+1:1,Z={..._,id:M};return K([...ae,Z]),M},oc=async(_,M)=>{K(ae.map(Z=>Z.id===_?{...Z,...M}:Z))},Xa=_=>le.find(Z=>Z.student_id===_)||null,Lo=async(_,M)=>{ie(le.map(Z=>Z.student_id===_?{...Z,...M}:Z))},Jn=async(_,M)=>{try{await At.createParentStudentLink(_,M,"Parent",!0),await At.updateRecord("students",M,{parent_id:_}),await _e(),await Ve(),await wt(),console.log(`Successfully linked parent ${_} to student ${M}`)}catch(Z){throw console.error("Error linking parent to student:",Z),Z}},yl=async(_,M,Z,we,qe)=>{try{console.log(`Registering subject ${M} for class ${_}`);const Kt=await mr(_,M,Z,we,qe);return Kt&&await Ft(),Kt}catch(Kt){return console.error("Error registering subject for class:",Kt),!1}},Qo=async _=>{try{const M=N.filter(Z=>Z.class_id===_).length;await At.updateRecord("classes",_,{current_students:M}),await $e()}catch(M){console.error("Error updating class student count:",M)}},Nl=(_,M,Z)=>{const we=N.find(Kt=>Kt.id===_),qe=f.find(Kt=>Kt.id===M);!we||!qe||(E(N.map(Kt=>Kt.id===_?{...Kt,class_id:M,class_name:qe.name,level:qe.level,academic_year:Z}:Kt)),Qo(we.class_id),Qo(M),i&&Fo({id:0,actor:i.username,actor_role:"Admin",action:"Promote Student",target:`${we.firstName} ${we.lastName}  ${qe.name}`,ip_address:"System",status:"Success",timestamp:new Date().toISOString(),details:`Promoted from ${we.className} to ${qe.name} for ${Z}`}))},jl=(_,M,Z)=>{_.forEach(we=>{const qe=M[we];qe&&Nl(we,qe,Z)})},Ba=async _=>{const M=ee.length>0?Math.max(...ee.map(we=>we.id))+1:1,Z={..._,id:M};return je([...ee,Z]),M},To=async(_,M)=>{je(ee.map(Z=>Z.id===_?{...Z,...M}:Z))},Po=async _=>{je(ee.filter(M=>M.id!==_))},Ca=_=>ee.filter(M=>M.student_id===_),_i=_=>ee.filter(M=>M.class_id===_),Yi=_=>ee.filter(M=>M.date===_),lc=async(_,M)=>{try{return console.log(`Changing password from ${_} to ${M}`),!0}catch(Z){return console.error("Error changing password:",Z),!1}},Ro=async _=>{try{const M={title:_.title,message:_.message,type:_.type,target_audience:_.targetAudience,sent_by:_.sentBy,sent_date:_.sentDate,is_read:_.isRead?1:0,read_by:JSON.stringify(_.readBy||[])},Z=await At.insertRecord("notifications",M),we={..._,id:Z};return fe(qe=>[...qe,we]),Z}catch(M){console.error("Error adding notification to database:",M);const Z=de.length>0?Math.max(...de.map(qe=>qe.id))+1:1,we={..._,id:Z};return fe([...de,we]),Z}},Sa=async _=>{fe(de.map(M=>M.id===_?{...M,isRead:!0}:M))},di=()=>de.filter(_=>!_.isRead),Bn=()=>de,Ea=async _=>{fe(de.filter(M=>M.id!==_))},Bl=_=>{const M=f.find(Z=>Z.id===_);return M&&M.classTeacherId&&g.find(Z=>Z.id===M.classTeacherId)||null},C=_=>{const M=$.filter(Z=>Z.class_id===_&&Z.status==="Active").map(Z=>Z.subject_id);return b.filter(Z=>M.includes(Z.id))},Y=(_,M)=>N.filter(Z=>Z.class_id===M),ve=_=>Ue.filter(Z=>Z.parent_id===_).map(Z=>{const we=N.find(qe=>qe.id===Z.student_id);return we?{id:we.id,firstName:we.firstName,lastName:we.lastName,fullName:`${we.firstName} ${we.lastName}`,admissionNumber:we.admissionNumber,classId:we.class_id,className:f.find(qe=>qe.id===we.class_id)?.name||"Unknown",classLevel:f.find(qe=>qe.id===we.class_id)?.level||"Unknown",gender:we.gender,photoUrl:we.photo_url,dateOfBirth:we.date_of_birth,address:"",parentContact:"",enrollmentDate:we.academic_year||"",status:we.status,recentActivities:[],feeBalance:0,totalFees:0}:null}).filter(Z=>Z!==null),Fe=_=>{const M=N.find(we=>we.id===_);if(!M)return[];const Z=$.filter(we=>we.class_id===M.class_id&&we.status==="Active").map(we=>we.subject_id);return b.filter(we=>Z.includes(we.id)).map(we=>{const qe=H.find(Kt=>Kt.subject_id===we.id&&Kt.class_id===M.class_id);return{subjectId:we.id,subjectName:we.name,subjectCode:we.code,isCompulsory:we.is_core||!1,teacherId:qe?.teacher_id,teacherName:qe?`${g.find(Kt=>Kt.id===qe.teacher_id)?.firstName||""} ${g.find(Kt=>Kt.id===qe.teacher_id)?.lastName||""}`.trim()||"Unknown":"Not Assigned"}})},Ke=_=>V.filter(M=>M.student_id===_).slice(-10),ht=async(_,M,Z="Guardian")=>{try{return console.log(`Linking student ${M} to parent ${_} with relationship: ${Z}`),await At.createParentStudentLink(_,M,Z,!0)?(await At.updateRecord("students",M,{parent_id:_}),await _e(),await Ve(),await wt(),console.log("Student linked to parent successfully"),!0):!1}catch(we){return console.error("Error linking student to parent:",we),!1}},vt=async(_,M)=>{try{console.log(`Unlinking student ${M} from parent ${_}`);const Z=await At.executeQuery("DELETE FROM parent_student_links WHERE parent_id = ? AND student_id = ?",[_,M]);return Z&&Z.success?(await At.updateRecord("students",M,{parent_id:null}),await _e(),await Ve(),await wt(),console.log("Student unlinked from parent successfully"),!0):!1}catch(Z){return console.error("Error unlinking student from parent:",Z),!1}},Zt=_=>[{module:"children",permissions:["view_children","view_results"]},{module:"payments",permissions:["view_payments","make_payments"]},{module:"reports",permissions:["view_reports"]}],is=async()=>"2025/2026",ws=async()=>"First Term",Bs=async _=>C(_),$s=async()=>H,Br=async(_,M,Z,we,qe)=>{try{if(H.find(Mr=>Mr.subject_id===M&&Mr.class_id===Z&&Mr.teacher_id===_&&Mr.academic_year===we&&Mr.term===qe))return!1;const Wt=H.find(Mr=>Mr.subject_id===M&&Mr.class_id===Z&&Mr.academic_year===we&&Mr.term===qe&&Mr.status==="Active");if(Wt)return console.warn(`Subject ${M} is already assigned to teacher ${Wt.teacher_id} in class ${Z}`),!1;const Ps={subject_id:M,class_id:Z,teacher_id:_,academic_year:we,term:qe,status:"Active"},sn=await At.createBatchSubjectAssignments([Ps]);return sn&&sn.length>0?(await bt(),!0):!1}catch{return!1}},Rr=async(_,M,Z,we,qe)=>{try{const Wt=await At.executeQuery(`
        SELECT id FROM subject_assignments 
        WHERE teacher_id = ? AND subject_id = ? AND class_id = ? AND academic_year = ? AND term = ?
      `,[_,M,Z,we,qe]);if(Wt&&Wt.data&&Wt.data.length>0){const Ps=Wt.data[0].id;if(await At.deleteRecord("subject_assignments",Ps))return await bt(),!0}return!1}catch(Kt){return console.error("Error removing subject assignment:",Kt),!1}},fr=async _=>{const M=H.filter(Z=>Z.class_id===_).map(Z=>Z.subject_id);return b.filter(Z=>!M.includes(Z.id))},Zr=async()=>g.filter(_=>_.status==="Active"),cr=async()=>{try{const _=await At.executeQuery("SELECT * FROM scores ORDER BY student_id, subject_assignment_id");return _&&_.data?(console.log("Database scores loaded:",{totalScores:_.data.length,scores:_.data.map(M=>({id:M.id,student_id:M.student_id,subject_assignment_id:M.subject_assignment_id,term:M.term,academic_year:M.academic_year,status:M.status,ca1:M.ca1,ca2:M.ca2,exam:M.exam,total:M.total}))}),G(_.data),!0):!1}catch(_){return console.error("Error loading scores:",_),!1}},mn=async _=>{try{return!!await At.createPayment(_)}catch(M){return console.error("Error creating payment:",M),!1}},Pn=async()=>{try{const _=await At.executeQuery("SELECT * FROM payments ORDER BY recorded_date DESC");if(_&&_.data){const M=_.data.map(Z=>({id:Z.id,student_id:Z.student_id,student_name:Z.student_name,amount:Z.amount,payment_type:Z.payment_type,term:Z.term,academic_year:Z.academic_year,payment_method:Z.payment_method,reference:Z.transaction_reference,recorded_by:Z.recorded_by,recorded_date:Z.recorded_date,status:Z.status,receipt_number:Z.receipt_number,verified_by:Z.verified_by,verified_date:Z.verified_date,notes:Z.notes}));return R(M),!0}return!1}catch(_){return console.error("Error loading payments:",_),!1}},Xn=async()=>{try{const _=await At.executeQuery("SELECT * FROM affective_domains ORDER BY student_id, academic_year, term");return _&&_.data?(F(_.data),!0):!1}catch(_){return console.error("Error loading affective domains:",_),!1}},Fa=async()=>{try{const _=await At.executeQuery("SELECT * FROM psychomotor_domains ORDER BY student_id, academic_year, term");return _&&_.data?(P(_.data),!0):!1}catch(_){return console.error("Error loading psychomotor domains:",_),!1}},ui=async()=>{try{if(!At)return console.error("SQL Database service is not available"),!1;const _=await At.executeQuery("SELECT * FROM compiled_results ORDER BY student_id, class_id");return _&&_.data?(W(_.data),!0):!1}catch(_){return console.error("Error loading compiled results:",_),!1}},Cl=async _=>{try{return await At.insertRecord("fee_structures",_),await _a(),!0}catch(M){return console.error("Error creating fee structure:",M),!1}},Ji=async()=>{try{return(await At.executeQuery("SELECT * FROM fee_structures ORDER BY class_id, academic_year, term"))?.data||[]}catch(_){return console.error("Error getting fee structures:",_),[]}},Do=async()=>{try{return(await At.executeQuery("SELECT * FROM payments ORDER BY payment_date DESC"))?.data||[]}catch(_){return console.error("Error getting payments:",_),[]}},Xi=async(_,M)=>{try{return await At.updateRecord("payments",_,{status:M}),await Pn(),{success:!0}}catch(Z){return console.error("Error updating payment status:",Z),{success:!1,error:Z}}},Zi=async()=>{try{return(await At.executeQuery("SELECT * FROM student_fee_balances ORDER BY student_id"))?.data||[]}catch(_){return console.error("Error getting fee balances:",_),[]}},fn=async _=>{try{for(const M of _)await At.insertRecord("payments",M);return await Pn(),{success:!0,count:_.length}}catch(M){return console.error("Error creating batch payments:",M),{success:!1,error:M}}},_a=async()=>{try{const _=await At.executeQuery("SELECT * FROM fee_structures ORDER BY class_id, academic_year, term");return _&&_.data?(K(_.data),!0):!1}catch(_){return console.error("Error loading fee structures:",_),!1}},Za=async()=>{try{const _=await At.executeQuery("SELECT * FROM student_fee_balances ORDER BY student_id");return _&&_.data?(ie(_.data),!0):!1}catch(_){return console.error("Error loading student fee balances:",_),!1}},Oo=async()=>{try{const _=await At.executeQuery("SELECT * FROM notifications ORDER BY sent_date DESC");return _&&_.data?(fe(_.data),!0):!1}catch(_){return console.error("Error loading notifications:",_),!1}},Sl=async()=>{try{const _=await At.executeQuery("SELECT * FROM attendance ORDER BY date DESC, class_id");return _&&_.data?(je(_.data),!0):!1}catch(_){return console.error("Error loading attendances:",_),!1}},en=async()=>{try{const _=await At.getExamTimetables();return Ie(_),!0}catch(_){return console.error("Error loading exam timetables:",_),!1}},ka=async()=>{try{const _=await At.executeQuery("SELECT * FROM class_timetables ORDER BY day_of_week, start_time");return _&&_.data?(Ee(_.data),!0):!1}catch(_){return console.error("Error loading class timetables:",_),!1}},ei=async()=>{try{const _=await At.executeQuery("SELECT * FROM departments ORDER BY name");return _&&_.data?(dt(_.data),!0):!1}catch(_){return console.error("Error loading departments:",_),!1}},cc=async()=>{try{const _=await At.executeQuery("SELECT * FROM scholarships ORDER BY academic_year, student_id");return _&&_.data?(ft(_.data),!0):!1}catch(_){return console.error("Error loading scholarships:",_),!1}},Zn=async()=>{try{const _=await At.executeQuery("SELECT * FROM assignments ORDER BY assigned_date DESC");return _&&_.data?(it(_.data),!0):!1}catch(_){return console.error("Error loading assignments:",_),!1}},eo=(_,M)=>ae.filter(Z=>Z.class_id===_&&Z.academic_year===M),Mo=async(_,M)=>{try{return!!await At.updateTeacher(_,{status:M})}catch(Z){return console.error("Error updating teacher status:",Z),!1}},El=async(_,M)=>{try{return!!await At.updateParent(_,{status:M})}catch(Z){return console.error("Error updating parent status:",Z),!1}},ki=async(_,M)=>{try{return!!await At.updateAccountant(_,{status:M})}catch(Z){return console.error("Error updating accountant status:",Z),!1}},Ua=async _=>{try{const M={..._,createdBy:i?.id||null,academicYear:n,term:t},Z=await At.createExamTimetable(M);return await en(),Z.id}catch(M){throw console.error("Error adding exam timetable:",M),M}},ma=async(_,M)=>{try{await At.updateExamTimetable(_,M),await en()}catch(Z){throw console.error("Error updating exam timetable:",Z),Z}},fa=async _=>{try{await At.deleteExamTimetable(_),await en()}catch(M){throw console.error("Error deleting exam timetable:",M),M}},to=_=>X.filter(M=>M.class_id===_),hi=_=>X.filter(M=>M.subject_id===_),Ui=_=>X.filter(M=>M.exam_date===_),Ii=(_,M,Z)=>X.filter(we=>we.class_id===_&&we.academic_year===M&&we.term===Z),mi=async _=>{const M=rt.length>0?Math.max(...rt.map(we=>we.id))+1:1,Z={..._,id:M};return Ee([...rt,Z]),M},Dr=async(_,M)=>{Ee(rt.map(Z=>Z.id===_?{...Z,...M}:Z))},Ho=async _=>{Ee(rt.filter(M=>M.id!==_))},fi=_=>rt.filter(M=>M.class_id===_),ti=_=>rt.filter(M=>M.subject_id===_),Ko=_=>rt.filter(M=>M.day_of_week===_),Vo=(_,M,Z)=>rt.filter(we=>we.class_id===_&&we.academic_year===M&&we.term===Z),Fl=async _=>{const M=Te.length>0?Math.max(...Te.map(we=>we.id))+1:1,Z={..._,id:M};return dt([...Te,Z]),M},_l=async(_,M)=>{dt(Te.map(Z=>Z.id===_?{...Z,...M}:Z))},Li=async _=>{dt(Te.filter(M=>M.id!==_))},so=async _=>{const M=st.length>0?Math.max(...st.map(we=>we.id))+1:1,Z={..._,id:M};return ft([...st,Z]),M},ro=async(_,M)=>{ft(st.map(Z=>Z.id===_?{...Z,...M}:Z))},zo=async _=>{ft(st.filter(M=>M.id!==_))},no=async _=>{const M=et.length>0?Math.max(...et.map(we=>we.id))+1:1,Z={..._,id:M};return it([...et,Z]),M},$o=async(_,M)=>{it(et.map(Z=>Z.id===_?{...Z,...M}:Z))},Ir=async _=>{it(et.filter(M=>M.id!==_))},ea=async _=>{try{const M=$.filter(we=>we.class_id===_&&we.term===t&&we.academic_year===n&&we.status==="Active"),Z=N.filter(we=>we.class_id===_);for(const we of Z){const qe=ce.find(Kt=>Kt.student_id===we.id&&Kt.class_id===_&&Kt.term===t&&Kt.academic_year===n);if(qe){const Kt=qe.scores.length,Wt=M.length;let Ps=qe.status;if(Kt===Wt&&Wt>0?Ps="Submitted":Kt>0&&(Ps="Draft"),Ps!==qe.status){const sn={...qe,status:Ps};W(ce.map(Mr=>Mr.id===qe.id?sn:Mr)),Ps==="Submitted"&&he.success(`All subjects submitted for ${we.firstName} ${we.lastName}! Result is ready for review.`)}}}}catch(M){console.error("Error checking class completion status:",M)}},Gs=async(_,M)=>{try{const Z=N.find(Wt=>Wt.id===_);if(!Z)return;const we=H.find(Wt=>Wt.id===M.subject_assignment_id);if(!we)return;let qe=ce.find(Wt=>Wt.student_id===_&&Wt.class_id===Z.class_id&&Wt.term===t&&Wt.academic_year===n);if(!qe)qe={id:ce.length>0?Math.max(...ce.map(Ps=>Ps.id))+1:1,student_id:_,class_id:Z.class_id,term:t,academic_year:n,scores:[M],affective:null,psychomotor:null,total_score:M.total||0,average_score:M.total||0,position:0,class_average:0,total_students:0,times_present:0,times_absent:0,total_attendance_days:0,term_begin:"",term_end:"",next_term_begin:"",class_teacher_name:"",class_teacher_comment:"",principal_name:"",principal_comment:"",principal_signature:"",compiled_by:i?.id||0,compiled_date:new Date().toISOString(),approved_by:null,approved_date:null,rejection_reason:null,status:"Draft"},W([...ce,qe]);else if(qe){const Wt=qe.scores.findIndex(Ql=>Ql.subject_assignment_id===M.subject_assignment_id);Wt>=0?qe.scores[Wt]=M:qe.scores.push(M);const Ps=qe.scores.reduce((Ql,$u)=>Ql+($u.total||0),0),sn=qe.scores.length>0?Ps/qe.scores.length:0,Mr={...qe,scores:qe?.scores,total_score:Ps,average_score:sn};W(ce.map(Ql=>Ql.id===qe?.id?Mr:Ql))}await ea(Z.class_id);const Kt=b.find(Wt=>Wt.id===we.subject_id);he.success(`Score for ${Kt?.name||"Subject"} updated in compiled results for ${Z.firstName} ${Z.lastName}`)}catch(Z){console.error("Error updating compiled result with new score:",Z),he.error("Failed to update compiled results")}},zu={students:N,teachers:g,parents:I,accountants:q,classes:f,subjects:b,subjectRegistrations:$,subjectAssignments:H,scores:V,affectiveDomains:L,psychomotorDomains:O,compiledResults:ce,payments:se,users:nt,currentUser:i,feeStructures:ae,studentFeeBalances:le,notifications:de,activityLogs:me,attendances:ee,examTimetables:X,classTimetables:rt,departments:Te,scholarships:st,assignments:et,parentStudentLinks:Ue,currentTerm:t,currentAcademicYear:n,schoolSettings:A,bankAccountSettings:u,addStudent:ze,updateStudent:ms,deleteStudent:Cs,deleteBulkStudents:sr,getStudentsByClass:Be,refreshStudents:js,addTeacher:rr,updateTeacher:Gn,updateTeacherStatus:async(_,M)=>{await Mo(_,M)},deleteTeacher:li,getTeacherAssignments:Wn,getTeacherClasses:lr,getClassesByLevel:_=>f.filter(M=>M.level===_),getClassStudents:_=>N.filter(M=>M.class_id===_),getStudentRecentActivities:_=>[],addParent:Hc,updateParent:pl,deleteParent:Aa,getParentStudents:Wi,addAccountant:Kc,updateAccountant:gl,deleteAccountant:jo,addClass:da,updateClass:Vc,updateClassTeacher:async(_,M)=>{console.log(`Updating class ${_} teacher to ${M}`)},deleteClass:zr,addSubject:WA,updateSubject:xl,deleteSubject:$r,getSubjectsByCategory:_=>b.filter(M=>M.category===_),getSubjectsByLevel:_=>b.filter(M=>M.department===_||M.category===_),getRegisteredSubjects:(_,M,Z)=>$.filter(qe=>qe.class_id===_&&qe.academic_year===M&&qe.term===Z).map(qe=>b.find(Wt=>Wt.id===qe.subject_id)||null).filter(Boolean),getSubjectRegistrations:(_,M)=>$.filter(Z=>Z.academic_year===_&&Z.term===M),assignSubjectToTeacher:async(_,M,Z,we,qe)=>await Br(_,M,Z,we,qe),removeSubjectAssignment:async(_,M,Z,we,qe)=>await Rr(_,M,Z,we,qe),getSubjectAssignments:(_,M)=>H.filter(Z=>Z.academic_year===_&&Z.term===M),getTeacherSubjectAssignments:(_,M,Z)=>H.filter(we=>we.teacher_id===_&&we.academic_year===M&&we.term===Z),getClassSubjectAssignments:(_,M,Z)=>H.filter(we=>we.class_id===_&&we.academic_year===M&&we.term===Z),getUnassignedSubjects:(_,M,Z)=>{const we=H.filter(qe=>qe.class_id===_&&qe.academic_year===M&&qe.term===Z).map(qe=>qe.subject_id);return b.filter(qe=>!we.includes(qe.id))},getAvailableTeachers:(_,M,Z,we)=>g,addAssignment:no,updateAssignment:$o,deleteAssignment:Ir,registerSubjectForClass:yl,removeSubjectRegistration:$n,addScore:async _=>{if(!H.find(we=>we.id===_.subject_assignment_id))throw new Error("Subject assignment not found");if(!N.find(we=>we.id===_.student_id))throw new Error("Student not found");if(i&&i.role==="teacher"&&!H.some(qe=>qe.id===_.subject_assignment_id&&qe.teacher_id===i.linked_id))throw new Error("Only the assigned teacher can submit scores for this subject");try{const we=await At.insertRecord("scores",{student_id:_.student_id,subject_assignment_id:_.subject_assignment_id,ca1:_.ca1||0,ca2:_.ca2||0,exam:_.exam||0,total:_.total||0,grade:_.grade||"",remark:_.remark||"",class_average:_.class_average||0,class_min:_.class_min||0,class_max:_.class_max||0,entered_by:i?.id||0,entered_date:new Date().toISOString(),status:_.status||"Draft",academic_year:n,term:t});if(we)return await cr(),await Gs(_.student_id,{..._,id:we}),we;throw new Error("Failed to insert score record")}catch(we){throw console.error("Error adding score:",we),we}},updateScore:async(_,M)=>{const Z=V.find(we=>we.id===_);if(!Z)throw new Error("Score not found");if(i&&i.role==="teacher"){const we=H.find(qe=>qe.id===Z.subject_assignment_id);if(!we||we.teacher_id!==i.linked_id)throw new Error("Only the assigned teacher can update scores for this subject")}try{const we={};if(M.ca1!==void 0&&(we.ca1=M.ca1),M.ca2!==void 0&&(we.ca2=M.ca2),M.exam!==void 0&&(we.exam=M.exam),M.total!==void 0&&(we.total=M.total),M.grade!==void 0&&(we.grade=M.grade),M.remark!==void 0&&(we.remark=M.remark),M.class_average!==void 0&&(we.class_average=M.class_average),M.class_min!==void 0&&(we.class_min=M.class_min),M.class_max!==void 0&&(we.class_max=M.class_max),M.status!==void 0&&(we.status=M.status),await At.updateRecord("scores",_,we))await cr(),await Gs(Z.student_id,{...Z,...M});else throw new Error("Failed to update score record")}catch(we){throw console.error("Error updating score:",we),we}},deleteScore:async _=>{G(V.filter(M=>M.id!==_))},createBatchScores:async _=>{try{const M=_.map((we,qe)=>({...we,id:V.length>0?Math.max(...V.map(Kt=>Kt.id))+qe+1:qe+1}));G([...V,...M]);const Z=[...new Set(_.map(we=>we.student_id))];for(const we of Z){const qe=M.filter(Kt=>Kt.student_id===we);for(const Kt of qe)await Gs(we,Kt)}return he.success(`${_.length} scores submitted and updated in compiled results`),!0}catch(M){return console.error("Error creating batch scores:",M),he.error("Failed to submit batch scores"),!1}},getScoresByAssignment:_=>V.filter(M=>M.subject_assignment_id===_),getScoresByStudent:_=>V.filter(M=>M.student_id===_),getScoresByClass:(_,M,Z)=>V.filter(we=>{const qe=H.find(Kt=>Kt.id===we.subject_assignment_id);return qe&&qe.class_id===_&&we.academic_year===M&&we.term===Z}),rejectScore:async(_,M,Z)=>{try{await At.updateRecord("scores",_,{status:"Rejected",rejection_reason:M,rejected_by:Z,rejected_date:new Date().toISOString()}),G(we=>we.map(qe=>qe.id===_?{...qe,status:"Rejected",rejectionReason:M,rejectedBy:Z,rejectedDate:new Date().toISOString()}:qe)),he.success("Score rejected and notification sent to subject teacher")}catch(we){throw console.error("Error rejecting score:",we),he.error("Failed to reject score"),we}},approveScore:async(_,M)=>{try{await At.updateRecord("scores",_,{status:"Submitted",rejection_reason:null,rejected_by:null,rejected_date:null}),G(Z=>Z.map(we=>we.id===_?{...we,status:"Submitted",rejectionReason:void 0,rejectedBy:void 0,rejectedDate:void 0}:we)),he.success("Score approved")}catch(Z){throw console.error("Error approving score:",Z),he.error("Failed to approve score"),Z}},getPendingScores:_=>{const M=V.filter(Z=>Z.status==="Submitted");return _?M.filter(Z=>{const we=H.find(qe=>qe.id===Z.subject_assignment_id);return we&&we.class_id===_}):M},updateCompiledResult:Ai,deleteCompiledResult:qA,getResultsByClass:$c,getCompiledResults:(_,M)=>ce.filter(Z=>Z.academic_year===_&&Z.term===M),getResultsByStudent:_=>ce.filter(M=>M.student_id===_),getAttendanceByStudent:_=>[],getAttendanceByClass:_=>[],approveCompiledResult:async _=>{},publishCompiledResult:async _=>{},addPayment:ha,updatePayment:Fi,verifyPayment:Gc,getPaymentsByStudent:bl,addFeeStructure:Io,updateFeeStructure:oc,deleteFeeStructure:async _=>{try{await At.deleteRecord("fee_structures",_)}catch(M){throw console.error("Error deleting fee structure:",M),M}},getFeeStructures:eo,getStudentFeeBalance:Xa,updateStudentFeeBalance:Lo,createUserAPI:ic,updateUserAPI:_o,deleteUserAPI:ko,setCurrentUser:c,login:Qn,changePassword:lc,addNotification:Ro,markNotificationAsRead:Sa,deleteNotification:Ea,getUnreadNotifications:di,getAllNotifications:Bn,getClassTeacher:Bl,getClassSubjects:C,updateClassStudentCount:Qo,loadCurrentTermAndYear:qn,loadSchoolSettings:qa,getAllAcademicYears:Co,getCompiledResultsByYearAndTerm:ja,updateCurrentTerm:Xr,updateCurrentAcademicYear:So,updateSchoolSettings:Ys,updateBankAccountSettings:Eo,getBankAccountSettings:qi,validateClassTeacherAssignment:wl,addActivityLog:Fo,getActivityLogs:zc,promoteStudent:Nl,promoteMultipleStudents:jl,addCompiledResult:fs,addAttendance:Ba,updateAttendance:To,deleteAttendance:Po,getAttendancesByStudent:Ca,getAttendancesByClass:_i,getAttendancesByDate:Yi,addExamTimetable:Ua,updateExamTimetable:ma,deleteExamTimetable:fa,getExamTimetables:Ii,getExamTimetablesByClass:to,getExamTimetablesBySubject:hi,getExamTimetablesByDate:Ui,addClassTimetable:mi,updateClassTimetable:Dr,deleteClassTimetable:Ho,getClassTimetables:Vo,getClassTimetablesByClass:fi,getClassTimetablesBySubject:ti,getClassTimetablesByDay:Ko,addDepartment:Fl,updateDepartment:_l,deleteDepartment:Li,getDepartments:()=>[],addScholarship:so,updateScholarship:ro,deleteScholarship:zo,getScholarships:()=>[],getStudentScholarships:_=>[],getTeacherStudents:Y,getTeacherResponsibilities:wr,getParentChildren:ve,getStudentSubjects:Fe,getStudentRecentScores:Ke,linkStudentToParent:ht,linkParentToStudent:Jn,unlinkStudentFromParent:vt,getParentPermissions:Zt,loadStudentsFromAPI:_e,loadTeachersFromAPI:Me,loadClassesFromAPI:$e,loadSubjectsFromAPI:gt,loadSubjectRegistrationsFromAPI:Ft,loadSubjectAssignmentsFromAPI:bt,loadParentsFromAPI:Ve,loadParentStudentLinksFromAPI:wt,loadAccountantsFromAPI:As,loadUsersFromAPI:Bt,loadScoresFromAPI:cr,loadAffectiveDomainsFromAPI:Xn,loadPsychomotorDomainsFromAPI:Fa,loadFeeStructuresFromAPI:_a,loadStudentFeeBalancesFromAPI:Za,loadNotificationsFromAPI:Oo,loadAttendancesFromAPI:Sl,loadExamTimetablesFromAPI:en,loadClassTimetablesFromAPI:ka,loadDepartmentsFromAPI:ei,loadScholarshipsFromAPI:cc,loadAssignmentsFromAPI:Zn,refreshAllData:async()=>{await Promise.all([Bt(),Me(),Ve(),wt(),As(),_e(),$e(),gt(),Ft(),bt(),Pn(),_a(),Za(),Oo(),Sl(),cr(),Xn(),Fa(),ui(),en(),ka(),ei(),cc(),Zn()])},refreshTeacherData:async _=>{await Promise.all([_e(),$e(),gt(),bt(),cr(),Xn(),Fa(),ui()])},refreshClassData:async _=>{await Promise.all([_e(),cr(),Xn(),Fa(),ui()])},hasPermission:async _=>{if(!i)return!1;try{return await At.checkUserPermission(i.role,_)}catch(M){return console.error("Error checking permission:",M),!1}},canViewStudents:async()=>await At.checkUserPermission("teacher","read_students"),canManageScores:async()=>await At.checkUserPermission("teacher","manage_assignments"),canViewResults:async()=>await At.checkUserPermission("teacher","view_student_reports"),canManageClasses:async()=>await At.checkUserPermission("teacher","manage_classes"),canManageSubjects:async()=>await At.checkUserPermission("teacher","manage_subjects"),subscribeToDataUpdates:_=>{const M=setInterval(async()=>{try{await cr(),_()}catch(Z){console.error("Error in real-time sync:",Z)}},3e4);return()=>clearInterval(M)},loadAllDataFromAPI:async()=>{await Bt(),await Me(),await Ve(),await wt(),await As(),await _e(),await $e(),await gt(),await Ft(),await bt(),await Pn(),await _a(),await Za()},deleteUser:async _=>await ko(_),createUser:async _=>await ic(_),updateUser:async(_,M)=>await _o(_,M),updateUserStatus:Tn,updateUserStatusAPI:Tn,resetUserPassword:ci,resetUserPasswordAPI:Yn,getUserPermissions:ua,getUserPermissionsAPI:ua,getAttendanceSummary:(_,M,Z)=>[],createBatchAttendance:async _=>{try{for(const M of _)await At.createAttendance(M);return!0}catch(M){return console.error("Error creating batch attendance:",M),!1}},createTeacherAPI:Ns,updateTeacherAPI:Yt,deleteTeacherAPI:Ht,createParentAPI:_t,updateParentAPI:Ls,deleteParentAPI:vs,createAccountantAPI:Gt,updateAccountantAPI:Xs,deleteAccountantAPI:yt,updateTeacherStatusAPI:Mo,updateParentStatusAPI:El,updateAccountantStatusAPI:ki,getActiveAcademicYearAPI:is,getActiveTermAPI:ws,getRegisteredSubjectsAPI:Bs,registerSubjectForClassAPI:mr,removeSubjectRegistrationAPI:$n,getSubjectRegistrationsAPI:Na,getSubjectAssignmentsAPI:$s,assignSubjectToTeacherAPI:Br,removeSubjectAssignmentAPI:Rr,getUnassignedSubjectsAPI:fr,getAvailableTeachersAPI:Zr,createPaymentAPI:mn,loadPaymentsFromAPI:Pn,createFeeStructureAPI:Cl,getFeeStructuresAPI:Ji,getPaymentsAPI:Do,updatePaymentStatusAPI:Xi,getFeeBalancesAPI:Zi,createBatchPaymentsAPI:fn,addAffectiveDomain:async _=>{try{const M=await At.createAffectiveDomain(_);return he.success("Affective domain assessment saved"),M}catch(M){console.error("Error saving affective domain:",M);const Z=M.message||"";if(Z.includes("Database operation failed")&&Z.includes("Integrity constraint violation")&&Z.includes("unique_affective"))try{const we=L.find(qe=>qe.student_id===_.student_id&&qe.class_id===_.class_id&&qe.term===_.term&&qe.academic_year===_.academic_year);if(we){const qe=await At.updateAffectiveDomain(we.id,_);return he.success("Affective domain assessment updated"),qe}}catch(we){throw console.error("Error updating existing affective domain:",we),he.error("Failed to update affective domain assessment"),we}else throw he.error("Failed to save affective domain assessment"),M}},updateAffectiveDomain:async(_,M)=>{try{const Z=await At.updateAffectiveDomain(_,M);return he.success("Affective domain assessment updated"),Z}catch(Z){throw console.error("Error updating affective domain:",Z),he.error("Failed to update affective domain assessment"),Z}},addPsychomotorDomain:async _=>{try{const M=await At.createPsychomotorDomain(_);return he.success("Psychomotor domain assessment saved"),M}catch(M){console.error("Error saving psychomotor domain:",M);const Z=M.message||"";if(Z.includes("Database operation failed")&&Z.includes("Integrity constraint violation")&&Z.includes("unique_psychomotor"))try{const we=O.find(qe=>qe.student_id===_.student_id&&qe.class_id===_.class_id&&qe.term===_.term&&qe.academic_year===_.academic_year);if(we){const qe=await At.updatePsychomotorDomain(we.id,_);return he.success("Psychomotor domain assessment updated"),qe}}catch(we){throw console.error("Error updating existing psychomotor domain:",we),he.error("Failed to update psychomotor domain assessment"),we}else throw he.error("Failed to save psychomotor domain assessment"),M}},updatePsychomotorDomain:async(_,M)=>{try{const Z=await At.updatePsychomotorDomain(_,M);return he.success("Psychomotor domain assessment updated"),Z}catch(Z){throw console.error("Error updating psychomotor domain:",Z),he.error("Failed to update psychomotor domain assessment"),Z}},deleteAffectiveDomain:async _=>{try{await At.deleteAffectiveDomain(_),he.success("Affective domain assessment deleted")}catch(M){throw console.error("Error deleting affective domain:",M),he.error("Failed to delete affective domain assessment"),M}},deletePsychomotorDomain:async _=>{try{await At.deletePsychomotorDomain(_),he.success("Psychomotor domain assessment deleted")}catch(M){throw console.error("Error deleting psychomotor domain:",M),he.error("Failed to delete psychomotor domain assessment"),M}},createAffectiveDomain:async _=>await At.createAffectiveDomain(_),createPsychomotorDomain:async _=>await At.createPsychomotorDomain(_),updateAttendanceRequirements:Ya,getAttendanceRequirements:ac,loadAttendanceRequirements:vl,getTeacherClassTeacherAssignments:Ja,checkUserPermissionAPI:Uo,getPendingApprovals:Bo,loadCompiledResultsFromAPI:ui};return e.jsx(FN.Provider,{value:zu,children:r})}function ak({onLogin:r,onNavigateToLanding:t}){const[s,n]=j.useState(""),[a,i]=j.useState(""),[c,A]=j.useState(""),[d,u]=j.useState(!1),[m,f]=j.useState(""),{login:x}=ys(),g=async()=>{if(!s||!a||!c){f("Please fill in all fields");return}u(!0),f("");try{await x(a,c,s)?r(s):f("Invalid username, password, or role")}catch{f("Login failed. Please try again.")}finally{u(!1)}},y=b=>{b.key==="Enter"&&s&&a&&c&&g()};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0A2540] via-[#0d3558] to-[#0A2540] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8 animate-in fade-in slide-in-from-top-4 duration-500",children:[e.jsx("div",{onClick:t,className:"w-24 h-24 rounded-full bg-white flex items-center justify-center mx-auto mb-4 cursor-pointer hover:shadow-2xl transition-all hover:scale-110 shadow-xl p-2.5 ring-4 ring-[#FFD700]/30",children:e.jsx("img",{src:ku,alt:"Graceland Royal Academy Logo",className:"w-full h-full object-contain rounded-full"})}),e.jsx("h1",{className:"text-3xl text-white mb-2",children:"Graceland Royal Academy"}),e.jsx("p",{className:"text-[#FFD700] italic",children:"Wisdom & Illumination"})]}),e.jsxs(ye,{className:"rounded-2xl shadow-2xl border-0 overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs(It,{className:"bg-white pb-6 pt-8",children:[e.jsx("h2",{className:"text-center text-[#0A2540]",children:"Portal Login"}),e.jsx("p",{className:"text-center text-gray-600 text-sm",children:"Select your role and enter credentials"})]}),e.jsxs(ke,{className:"bg-white p-8 space-y-6",onKeyPress:y,children:[m&&e.jsxs(Si,{className:"border-red-200 bg-red-50",children:[e.jsx(Is,{className:"h-4 w-4 text-red-600"}),e.jsx(Ga,{className:"text-red-700",children:m})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{htmlFor:"role",className:"text-[#0A2540]",children:"Select Role"}),e.jsxs(Qt,{value:s,onValueChange:n,children:[e.jsx(Pt,{id:"role",className:"h-12 rounded-xl border-2 border-gray-200 focus:border-[#FFD700] transition-colors",children:e.jsx(Tt,{placeholder:"Choose your role"})}),e.jsxs(Rt,{className:"rounded-xl",children:[e.jsx(be,{value:"admin",className:"rounded-lg",children:"Admin"}),e.jsx(be,{value:"teacher",className:"rounded-lg",children:"Teacher"}),e.jsx(be,{value:"accountant",className:"rounded-lg",children:"Accountant"}),e.jsx(be,{value:"parent",className:"rounded-lg",children:"Parent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{htmlFor:"username",className:"text-[#0A2540]",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(Zl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Et,{id:"username",type:"text",placeholder:"Enter your username",value:a,onChange:b=>i(b.target.value),className:"h-12 pl-11 rounded-xl border-2 border-gray-200 focus:border-[#FFD700] transition-colors"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{htmlFor:"password",className:"text-[#0A2540]",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(_u,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Et,{id:"password",type:"password",placeholder:"Enter your password",value:c,onChange:b=>A(b.target.value),className:"h-12 pl-11 rounded-xl border-2 border-gray-200 focus:border-[#FFD700] transition-colors"})]})]}),e.jsx(Ce,{onClick:g,disabled:!s||!a||!c||d,className:"w-full h-12 bg-[#FFD700] text-[#0A2540] hover:bg-[#FFD700]/90 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl hover:scale-105",children:d?"Logging in...":"Login to Portal"}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{onClick:t,className:"text-sm text-[#0A2540] hover:text-[#FFD700] transition-colors hover:underline",children:" Back to Home"})})]})]}),e.jsx("p",{className:"text-center text-white/60 text-sm mt-6",children:"Secure login portal for authorized users only"})]})})}function xp({items:r,activeItem:t,onItemClick:s,schoolName:n="Graceland Royal Academy",themeColor:a="#3B82F6"}){const[i,c]=j.useState(!1),A=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-5 border-b border-[#334155]/50 bg-gradient-to-b from-[#1E293B] to-[#1E293B]/95",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-white to-gray-100 flex items-center justify-center flex-shrink-0 shadow-xl p-2 ring-4 ring-[#3B82F6]/30 hover:ring-[#3B82F6]/50 transition-all",children:e.jsx("img",{src:ku,alt:"Graceland Royal Academy Logo",className:"w-full h-full object-contain rounded-full"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white truncate",children:n}),e.jsx("p",{className:"text-[#FFD700] text-xs italic",children:"Wisdom & Illumination"})]}),e.jsx("button",{onClick:()=>c(!1),className:"lg:hidden text-[#94A3B8] hover:text-white hover:bg-white/10 rounded-lg p-1.5 transition-all",children:e.jsx(ll,{className:"w-5 h-5"})})]})}),e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"space-y-1.5",children:r.map(d=>e.jsxs("button",{onClick:()=>{s(d.id),c(!1)},className:ps("w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all text-sm group relative overflow-hidden",t===d.id?"text-white shadow-lg":"text-[#CBD5E1] hover:bg-[#334155] hover:text-white hover:translate-x-1"),style:t===d.id?{background:`linear-gradient(to right, ${a}, ${a}dd)`,boxShadow:`0 10px 15px -3px ${a}30`}:{},children:[e.jsx("span",{className:ps("flex-shrink-0 w-5 h-5 transition-transform",t===d.id?"scale-110":"group-hover:scale-110"),children:d.icon}),e.jsx("span",{className:"font-medium",children:d.label}),t===d.id&&e.jsx("span",{className:"absolute right-3 w-2 h-2 rounded-full bg-white shadow-lg animate-pulse"})]},d.id))})})]});return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{onClick:()=>c(!0),className:"lg:hidden fixed top-4 left-4 z-40 bg-[#3B82F6] text-white hover:bg-[#2563EB] rounded-lg w-10 h-10 p-0 shadow-lg",children:e.jsx(Xy,{className:"w-5 h-5"})}),i&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40 backdrop-blur-sm",onClick:()=>c(!1)}),e.jsx("aside",{className:ps("lg:hidden fixed top-0 left-0 bottom-0 w-72 bg-[#1E293B] z-50 flex flex-col transition-transform duration-300 shadow-2xl",i?"translate-x-0":"-translate-x-full"),children:e.jsx(A,{})}),e.jsx("aside",{className:"hidden lg:flex fixed top-0 left-0 bottom-0 w-64 bg-[#1E293B] flex-col shadow-xl z-30 border-r border-[#334155]",children:e.jsx(A,{})})]})}const ik=k0("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ct({className:r,variant:t,asChild:s=!1,...n}){const a=s?r2:"span";return e.jsx(a,{"data-slot":"badge",className:ps(ik({variant:t}),r),...n})}function vp({userName:r,userRole:t,notificationCount:s=0,onLogout:n,onNotificationClick:a}){return e.jsx("header",{className:"sticky top-0 z-20 bg-gradient-to-r from-[#2563EB] to-[#1D4ED8] border-b border-[#1E40AF]/50 shadow-lg backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between px-4 md:px-6 py-4",children:[e.jsxs("div",{className:"lg:hidden flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 backdrop-blur-sm flex items-center justify-center ring-2 ring-white/20 shadow-lg",children:e.jsx(Lf,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white text-sm block",children:"GRA Portal"}),e.jsx("span",{className:"text-white/70 text-xs",children:t})]})]}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsxs("p",{className:"text-white text-sm mb-0.5",children:["Welcome back, ",e.jsx("span",{className:"font-semibold text-white",children:r}),"! "]}),e.jsx("p",{className:"text-white/70 text-xs",children:t})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative cursor-pointer group",onClick:a,children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 hover:bg-white/20 backdrop-blur-sm flex items-center justify-center transition-all shadow-sm ring-1 ring-white/10 hover:ring-white/20",children:e.jsx(zi,{className:"w-5 h-5 text-white group-hover:scale-110 transition-transform"})}),s>0&&e.jsx(Ct,{className:"absolute -top-1 -right-1 min-w-[20px] h-5 flex items-center justify-center px-1.5 bg-[#EF4444] text-white border-2 border-[#2563EB] rounded-full text-xs animate-pulse shadow-lg",children:s>9?"9+":s})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-sm flex items-center justify-center cursor-pointer hover:from-white/30 hover:to-white/20 transition-all shadow-sm ring-1 ring-white/20 group",children:e.jsx(Zl,{className:"w-5 h-5 text-white group-hover:scale-110 transition-transform"})})}),n&&e.jsxs(Ce,{onClick:n,variant:"ghost",className:"hidden md:flex items-center gap-2 text-white hover:text-white hover:bg-white/20 rounded-xl px-4 py-2 h-10 transition-all ring-1 ring-white/10 hover:ring-white/20 backdrop-blur-sm shadow-sm",children:[e.jsx(_0,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})})}function ok(r,t){return j.useReducer((s,n)=>t[s][n]??s,r)}var Ou=r=>{const{present:t,children:s}=r,n=lk(t),a=typeof s=="function"?s({present:n.isPresent}):j.Children.only(s),i=Er(n.ref,ck(a));return typeof s=="function"||n.isPresent?j.cloneElement(a,{ref:i}):null};Ou.displayName="Presence";function lk(r){const[t,s]=j.useState(),n=j.useRef(null),a=j.useRef(r),i=j.useRef("none"),c=r?"mounted":"unmounted",[A,d]=ok(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const u=Lm(n.current);i.current=A==="mounted"?u:"none"},[A]),zn(()=>{const u=n.current,m=a.current;if(m!==r){const x=i.current,g=Lm(u);r?d("MOUNT"):g==="none"||u?.display==="none"?d("UNMOUNT"):d(m&&x!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=r}},[r,d]),zn(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,f=g=>{const b=Lm(n.current).includes(CSS.escape(g.animationName));if(g.target===t&&b&&(d("ANIMATION_END"),!a.current)){const B=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=B)})}},x=g=>{g.target===t&&(i.current=Lm(n.current))};return t.addEventListener("animationstart",x),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",x),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(A),ref:j.useCallback(u=>{n.current=u?getComputedStyle(u):null,s(u)},[])}}function Lm(r){return r?.animationName||"none"}function ck(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}var wp="Checkbox",[Ak]=Rc(wp),[dk,Y0]=Ak(wp);function uk(r){const{__scopeCheckbox:t,checked:s,children:n,defaultChecked:a,disabled:i,form:c,name:A,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:f}=r,[x,g]=yd({prop:s,defaultProp:a??!1,onChange:d,caller:wp}),[y,b]=j.useState(null),[B,N]=j.useState(null),E=j.useRef(!1),I=y?!!c||!!y.closest("form"):!0,k={checked:x,disabled:i,setChecked:g,control:y,setControl:b,name:A,form:c,value:m,hasConsumerStoppedPropagationRef:E,required:u,defaultChecked:_A(a)?!1:a,isFormControl:I,bubbleInput:B,setBubbleInput:N};return e.jsx(dk,{scope:t,...k,children:hk(f)?f(k):n})}var _N="CheckboxTrigger",kN=j.forwardRef(({__scopeCheckbox:r,onKeyDown:t,onClick:s,...n},a)=>{const{control:i,value:c,disabled:A,checked:d,required:u,setControl:m,setChecked:f,hasConsumerStoppedPropagationRef:x,isFormControl:g,bubbleInput:y}=Y0(_N,r),b=Er(a,m),B=j.useRef(d);return j.useEffect(()=>{const N=i?.form;if(N){const E=()=>f(B.current);return N.addEventListener("reset",E),()=>N.removeEventListener("reset",E)}},[i,f]),e.jsx(qs.button,{type:"button",role:"checkbox","aria-checked":_A(d)?"mixed":d,"aria-required":u,"data-state":PN(d),"data-disabled":A?"":void 0,disabled:A,value:c,...n,ref:b,onKeyDown:Ks(t,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:Ks(s,N=>{f(E=>_A(E)?!0:!E),y&&g&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})})});kN.displayName=_N;var UN=j.forwardRef((r,t)=>{const{__scopeCheckbox:s,name:n,checked:a,defaultChecked:i,required:c,disabled:A,value:d,onCheckedChange:u,form:m,...f}=r;return e.jsx(uk,{__scopeCheckbox:s,checked:a,defaultChecked:i,disabled:A,required:c,onCheckedChange:u,name:n,form:m,value:d,internal_do_not_use_render:({isFormControl:x})=>e.jsxs(e.Fragment,{children:[e.jsx(kN,{...f,ref:t,__scopeCheckbox:s}),x&&e.jsx(TN,{__scopeCheckbox:s})]})})});UN.displayName=wp;var IN="CheckboxIndicator",LN=j.forwardRef((r,t)=>{const{__scopeCheckbox:s,forceMount:n,...a}=r,i=Y0(IN,s);return e.jsx(Ou,{present:n||_A(i.checked)||i.checked===!0,children:e.jsx(qs.span,{"data-state":PN(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...r.style}})})});LN.displayName=IN;var QN="CheckboxBubbleInput",TN=j.forwardRef(({__scopeCheckbox:r,...t},s)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:c,required:A,disabled:d,name:u,value:m,form:f,bubbleInput:x,setBubbleInput:g}=Y0(QN,r),y=Er(s,g),b=G0(i),B=K0(n);j.useEffect(()=>{const E=x;if(!E)return;const I=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(I,"checked").set,z=!a.current;if(b!==i&&$){const H=new Event("click",{bubbles:z});E.indeterminate=_A(i),$.call(E,_A(i)?!1:i),E.dispatchEvent(H)}},[x,b,i,a]);const N=j.useRef(_A(i)?!1:i);return e.jsx(qs.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??N.current,required:A,disabled:d,name:u,value:m,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...B,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});TN.displayName=QN;function hk(r){return typeof r=="function"}function _A(r){return r==="indeterminate"}function PN(r){return _A(r)?"indeterminate":r?"checked":"unchecked"}function Wa({className:r,...t}){return e.jsx(UN,{"data-slot":"checkbox",className:ps("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:e.jsx(LN,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(fo,{className:"size-3.5"})})})}function mk(){const{addTeacher:r,addParent:t,addAccountant:s,createUserAPI:n,classes:a}=ys(),[i,c]=j.useState(""),[A,d]=j.useState(""),[u,m]=j.useState({isValid:!0,message:"",isChecking:!1}),f=async E=>{if(!E.trim()){m({isValid:!0,message:"",isChecking:!1});return}m({isValid:!1,message:"Checking...",isChecking:!0});try{const I=await fetch(`http://localhost/GGGG/api/user/check-username.php?username=${encodeURIComponent(E.trim())}`),k=await I.json();I.ok&&k.success?k.isAvailable?m({isValid:!0,message:"Username available",isChecking:!1}):m({isValid:!1,message:"Username already taken",isChecking:!1}):m({isValid:!0,message:"",isChecking:!1})}catch{m({isValid:!0,message:"",isChecking:!1})}},[x,g]=j.useState({firstName:"",lastName:"",email:"",phone:"",username:"",password:"",qualification:"",isClassTeacher:!1,classTeacherId:null,department:"",photoUrl:""}),y=E=>{const I=E.target.files?.[0];if(I){if(!I.type.startsWith("image/")){he.error("Please upload an image file");return}if(I.size>5*1024*1024){he.error("Image size should be less than 5MB");return}const k=new FileReader;k.onloadend=()=>{const $=k.result;d($),g({...x,photoUrl:$})},k.readAsDataURL(I)}},b=()=>{d(""),g({...x,photoUrl:""})},B=async E=>{if(E.preventDefault(),!i){he.error("Please select a role");return}if(!x.firstName.trim()||!x.lastName.trim()){he.error("Please enter first name and last name");return}if(!x.phone.trim()){he.error("Please enter phone number");return}if(!x.username.trim()){he.error("Please enter username");return}if(!u.isValid){he.error(u.message||"Username is not available");return}const I=x.password.trim()||"password123";try{const k={username:x.username.trim(),password:I,role:i,email:x.email?.trim()||`${x.username.trim()}@school.local`,firstName:x.firstName.trim(),lastName:x.lastName.trim(),phone:x.phone.trim(),qualification:x.qualification,isClassTeacher:x.isClassTeacher,departmentId:x.classTeacherId,department:x.department,status:"Active"};if(!await n(k))return;const z=i.charAt(0).toUpperCase()+i.slice(1);he.success(`${z} registered successfully!

Login Credentials:
Username: ${x.username}`,{duration:8e3,style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",fontSize:"14px",lineHeight:"1.5",whiteSpace:"pre-line"}}),g({firstName:"",lastName:"",email:"",phone:"",username:"",password:"",qualification:"",isClassTeacher:!1,classTeacherId:null,department:"",photoUrl:""}),d(""),c("")}catch(k){console.error("Failed to register user:",k),he.error("An unexpected error occurred during registration.")}},N=()=>{g({firstName:"",lastName:"",email:"",phone:"",username:"",password:"",qualification:"",isClassTeacher:!1,classTeacherId:null,department:"",photoUrl:""}),d(""),c("")};return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#3B82F6] to-[#2563EB] flex items-center justify-center shadow-lg",children:e.jsx(MA,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#1F2937] mb-1",children:"Register User"}),e.jsx("p",{className:"text-[#6B7280]",children:"Register teachers, parents, or accountants with login credentials"})]})]})}),e.jsxs("form",{onSubmit:B,children:[e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#F9FAFB] to-white p-6 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#3B82F6] flex items-center justify-center shadow-sm",children:e.jsx(MA,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-[#1F2937]",children:"User Information"})]})}),e.jsxs(ke,{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Select Role ",e.jsx("span",{className:"text-[#EF4444]",children:"*"})]}),e.jsxs(Qt,{value:i,onValueChange:E=>c(E),children:[e.jsx(Pt,{className:"h-14 rounded-xl border-2 border-[#E5E7EB] focus:border-[#3B82F6] bg-[#F9FAFB] text-[#1F2937] hover:bg-white transition-all shadow-sm",children:e.jsx(Tt,{placeholder:"Choose user role to continue"})}),e.jsxs(Rt,{className:"bg-white border-[#E5E7EB] rounded-xl shadow-lg",children:[e.jsx(be,{value:"teacher",className:"text-[#1F2937] hover:bg-[#F9FAFB] rounded-lg m-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#10B981]"}),"Teacher"]})}),e.jsx(be,{value:"parent",className:"text-[#1F2937] hover:bg-[#F9FAFB] rounded-lg m-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#3B82F6]"}),"Parent/Guardian"]})}),e.jsx(be,{value:"accountant",className:"text-[#1F2937] hover:bg-[#F9FAFB] rounded-lg m-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#F59E0B]"}),"Accountant"]})})]})]}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"Select the role for the user you want to register"})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3 p-6 bg-[#F9FAFB] rounded-xl border-2 border-dashed border-[#E5E7EB]",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Profile Photo (Optional)"}),e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:A?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:A,alt:"Preview",className:"w-32 h-32 rounded-xl object-cover border-4 border-white shadow-lg ring-2 ring-[#3B82F6]/20"}),e.jsx("button",{type:"button",onClick:b,className:"absolute -top-2 -right-2 bg-[#EF4444] hover:bg-[#DC2626] text-white rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110",children:e.jsx(ll,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"w-32 h-32 rounded-xl border-2 border-dashed border-[#CBD5E1] flex flex-col items-center justify-center bg-white hover:border-[#3B82F6] transition-all group cursor-pointer",children:[e.jsx(yo,{className:"w-8 h-8 text-[#94A3B8] group-hover:text-[#3B82F6] mb-2 transition-colors"}),e.jsx("span",{className:"text-xs text-[#6B7280]",children:"Click to upload"})]})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",onChange:y,className:"hidden"}),e.jsxs(Ce,{type:"button",variant:"outline",onClick:()=>document.getElementById("photo-upload")?.click(),className:"rounded-xl border-2 border-[#E5E7EB] text-[#1F2937] hover:bg-white hover:border-[#3B82F6] transition-all shadow-sm",children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),A?"Change Photo":"Upload Photo"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-[#6B7280]",children:" Accepted formats: JPG, PNG, GIF"}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:" Maximum file size: 5MB"}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:" Recommended: Square image 500x500px"})]})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t-2 border-[#E5E7EB]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#3B82F6]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[#3B82F6]",children:"1"})}),e.jsx("h4",{className:"text-[#1F2937]",children:"Personal Details"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["First Name ",e.jsx("span",{className:"text-[#EF4444]",children:"*"})]}),e.jsx(Et,{required:!0,value:x.firstName,onChange:E=>g({...x,firstName:E.target.value}),placeholder:"Enter first name",className:"h-12 rounded-xl border-2 border-[#E5E7EB] focus:border-[#3B82F6] bg-white text-[#1F2937] transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Last Name ",e.jsx("span",{className:"text-[#EF4444]",children:"*"})]}),e.jsx(Et,{required:!0,value:x.lastName,onChange:E=>g({...x,lastName:E.target.value}),placeholder:"Enter last name",className:"h-12 rounded-xl border-2 border-[#E5E7EB] focus:border-[#3B82F6] bg-white text-[#1F2937] transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Email Address (Optional)"}),e.jsx(Et,{type:"email",value:x.email,onChange:E=>g({...x,email:E.target.value}),placeholder:"email@example.com",className:"h-12 rounded-xl border-2 border-[#E5E7EB] focus:border-[#3B82F6] bg-white text-[#1F2937] transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Phone Number ",e.jsx("span",{className:"text-[#EF4444]",children:"*"})]}),e.jsx(Et,{required:!0,type:"tel",value:x.phone,onChange:E=>g({...x,phone:E.target.value}),placeholder:"080XXXXXXXX",className:"h-12 rounded-xl border-2 border-[#E5E7EB] focus:border-[#3B82F6] bg-white text-[#1F2937] transition-all"})]})]})]}),i==="teacher"&&e.jsxs("div",{className:"space-y-4 pt-6 border-t-2 border-[#E5E7EB]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#10B981]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[#10B981]",children:"2"})}),e.jsx("h4",{className:"text-[#1F2937]",children:"Teacher Details"})]}),e.jsx("div",{className:"grid md:grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Qualification ",e.jsx("span",{className:"text-[#EF4444]",children:"*"})]}),e.jsxs(Qt,{required:!0,value:x.qualification,onValueChange:E=>g({...x,qualification:E}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border-2 border-[#E5E7EB] focus:border-[#3B82F6] bg-white text-[#1F2937] transition-all",children:e.jsx(Tt,{placeholder:"Select qualification"})}),e.jsxs(Rt,{className:"bg-white border-[#E5E7EB] rounded-xl",children:[e.jsx(be,{value:"NCE",className:"text-[#1F2937] rounded-lg",children:"NCE"}),e.jsx(be,{value:"B.Ed",className:"text-[#1F2937] rounded-lg",children:"B.Ed"}),e.jsx(be,{value:"B.Sc",className:"text-[#1F2937] rounded-lg",children:"B.Sc"}),e.jsx(be,{value:"B.A",className:"text-[#1F2937] rounded-lg",children:"B.A"}),e.jsx(be,{value:"M.Ed",className:"text-[#1F2937] rounded-lg",children:"M.Ed"}),e.jsx(be,{value:"M.Sc",className:"text-[#1F2937] rounded-lg",children:"M.Sc"}),e.jsx(be,{value:"PhD",className:"text-[#1F2937] rounded-lg",children:"PhD"})]})]})]})}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-[#EBF5FF] to-[#F0F9FF] rounded-xl border-2 border-[#BFDBFE] space-y-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Wa,{id:"classTeacher",checked:x.isClassTeacher,onCheckedChange:E=>g({...x,isClassTeacher:E,classTeacherId:E?x.classTeacherId:null}),className:"border-2 border-[#3B82F6] data-[state=checked]:bg-[#3B82F6]"}),e.jsx(He,{htmlFor:"classTeacher",className:"text-[#1F2937] cursor-pointer",children:"Assign as Class Teacher"})]}),x.isClassTeacher&&e.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Assigned Class ",e.jsx("span",{className:"text-[#EF4444]",children:"*"})]}),e.jsxs(Qt,{value:x.classTeacherId?.toString()||"",onValueChange:E=>g({...x,classTeacherId:parseInt(E)}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border-2 border-[#BFDBFE] focus:border-[#3B82F6] bg-white text-[#1F2937] transition-all",children:e.jsx(Tt,{placeholder:"Select class for this teacher"})}),e.jsx(Rt,{className:"bg-white border-[#E5E7EB] rounded-xl",children:a.filter(E=>E.status==="Active").map(E=>e.jsx(be,{value:E.id.toString(),className:"text-[#1F2937] rounded-lg",children:E.name},E.id))})]})]})]})]}),i==="accountant"&&e.jsxs("div",{className:"space-y-4 pt-6 border-t-2 border-[#E5E7EB]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#F59E0B]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[#F59E0B]",children:"2"})}),e.jsx("h4",{className:"text-[#1F2937]",children:"Accountant Details"})]}),e.jsx("div",{className:"grid md:grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Department ",e.jsx("span",{className:"text-[#EF4444]",children:"*"})]}),e.jsx(Et,{required:!0,value:x.department,onChange:E=>g({...x,department:E.target.value}),placeholder:"e.g., Finance",className:"h-12 rounded-xl border-2 border-[#E5E7EB] focus:border-[#3B82F6] bg-white text-[#1F2937] transition-all"})]})})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t-2 border-[#E5E7EB]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#8B5CF6]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[#8B5CF6]",children:i==="parent"?"2":"3"})}),e.jsx("h4",{className:"text-[#1F2937]",children:"Login Credentials"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Username ",e.jsx("span",{className:"text-[#EF4444]",children:"*"})]}),e.jsx(Et,{required:!0,value:x.username,onChange:E=>{const I=E.target.value;g({...x,username:I});const k=setTimeout(()=>{f(I)},500);return()=>clearTimeout(k)},placeholder:"Username for login",className:`h-12 rounded-xl border-2 ${u.isChecking?"border-[#F59E0B] focus:border-[#F59E0B]":u.isValid?"border-[#E5E7EB] focus:border-[#3B82F6]":"border-[#EF4444] focus:border-[#EF4444]"} bg-white text-[#1F2937] transition-all`}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-[#6B7280]",children:"This will be used for system login"}),u.message&&e.jsxs("p",{className:`text-xs ${u.isValid?"text-[#10B981]":"text-[#EF4444]"}`,children:[u.isChecking&&" ",u.message]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Password (Optional)"}),e.jsx(Et,{type:"password",value:x.password,onChange:E=>g({...x,password:E.target.value}),placeholder:"Leave blank for default password (1234567)",className:"h-12 rounded-xl border-2 border-[#E5E7EB] focus:border-[#3B82F6] bg-white text-[#1F2937] transition-all"}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"Default password: 1234567 (user can change after first login)"})]})]})]})]})]})]}),i&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mt-8 p-6 bg-[#F9FAFB] rounded-xl border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-sm text-[#6B7280]",children:"Please review all information before submitting"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ce,{type:"button",onClick:N,variant:"outline",className:"rounded-xl border-2 border-[#E5E7EB] text-[#1F2937] hover:bg-white hover:border-[#CBD5E1] transition-all h-12 px-6",children:"Reset Form"}),e.jsxs(Ce,{type:"submit",className:"bg-gradient-to-r from-[#10B981] to-[#059669] hover:from-[#059669] hover:to-[#047857] text-white rounded-xl shadow-lg hover:shadow-xl transition-all h-12 px-8 hover-lift",children:[e.jsx(ol,{className:"w-5 h-5 mr-2"}),"Register ",i.charAt(0).toUpperCase()+i.slice(1)]})]})]})]})]})}const fk="modulepreload",pk=function(r,t){return new URL(r,t).href},p1={},gf=function(t,s,n){let a=Promise.resolve();if(s&&s.length>0){let c=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const A=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");a=c(s.map(m=>{if(m=pk(m,n),m in p1)return;p1[m]=!0;const f=m.endsWith(".css"),x=f?'[rel="stylesheet"]':"";if(!!n)for(let b=A.length-1;b>=0;b--){const B=A[b];if(B.href===m&&(!f||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${x}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":fk,f||(y.as="script"),y.crossOrigin="",y.href=m,u&&y.setAttribute("nonce",u),document.head.appendChild(y),f)return new Promise((b,B)=>{y.addEventListener("load",b),y.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(c){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=c,window.dispatchEvent(A),!A.defaultPrevented)throw c}return a.then(c=>{for(const A of c||[])A.status==="rejected"&&i(A.reason);return t().catch(i)})};function RN({trigger:r,children:t,className:s}){const[n,a]=j.useState(!1),i=j.useRef(null);return j.useEffect(()=>{function c(A){i.current&&!i.current.contains(A.target)&&a(!1)}return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),e.jsxs("div",{ref:i,className:"relative inline-block text-left",children:[e.jsx("div",{onClick:()=>a(!n),children:r}),n&&e.jsx("div",{className:ps("absolute right-0 mt-1 w-40 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50 border border-gray-200",s),children:e.jsx("div",{className:"py-1",children:t})})]})}function zl({children:r,onClick:t,className:s="",danger:n=!1,disabled:a=!1}){return e.jsx("button",{onClick:()=>{a||(t(),document.dispatchEvent(new MouseEvent("mousedown")))},disabled:a,className:ps("w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 transition-colors duration-150",n&&"text-red-600 hover:bg-red-50",a&&"opacity-50 cursor-not-allowed hover:bg-transparent",s),children:r})}function xf(){return e.jsx("div",{className:"border-t border-gray-200 my-1"})}function Un({className:r,...t}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:ps("w-full caption-bottom text-sm",r),...t})})}function In({className:r,...t}){return e.jsx("thead",{"data-slot":"table-header",className:ps("[&_tr]:border-b",r),...t})}function Ln({className:r,...t}){return e.jsx("tbody",{"data-slot":"table-body",className:ps("[&_tr:last-child]:border-0",r),...t})}function os({className:r,...t}){return e.jsx("tr",{"data-slot":"table-row",className:ps("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...t})}function lt({className:r,...t}){return e.jsx("th",{"data-slot":"table-head",className:ps("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t})}function Je({className:r,...t}){return e.jsx("td",{"data-slot":"table-cell",className:ps("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t})}function gk(r){const t=xk(r),s=j.forwardRef((n,a)=>{const{children:i,...c}=n,A=j.Children.toArray(i),d=A.find(wk);if(d){const u=d.props.children,m=A.map(f=>f===d?j.Children.count(u)>1?j.Children.only(null):j.isValidElement(u)?u.props.children:null:f);return e.jsx(t,{...c,ref:a,children:j.isValidElement(u)?j.cloneElement(u,void 0,m):null})}return e.jsx(t,{...c,ref:a,children:i})});return s.displayName=`${r}.Slot`,s}function xk(r){const t=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const c=yk(a),A=bk(i,a.props);return a.type!==j.Fragment&&(A.ref=n?Lu(n,c):c),j.cloneElement(a,A)}return j.Children.count(a)>1?j.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var vk=Symbol("radix.slottable");function wk(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===vk}function bk(r,t){const s={...t};for(const n in t){const a=r[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...A)=>{const d=i(...A);return a(...A),d}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...r,...s}}function yk(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}var bp="Dialog",[DN,ON]=Rc(bp),[Nk,ul]=DN(bp),MN=r=>{const{__scopeDialog:t,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:c=!0}=r,A=j.useRef(null),d=j.useRef(null),[u,m]=yd({prop:n,defaultProp:a??!1,onChange:i,caller:bp});return e.jsx(Nk,{scope:t,triggerRef:A,contentRef:d,contentId:FA(),titleId:FA(),descriptionId:FA(),open:u,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(f=>!f),[m]),modal:c,children:s})};MN.displayName=bp;var HN="DialogTrigger",KN=j.forwardRef((r,t)=>{const{__scopeDialog:s,...n}=r,a=ul(HN,s),i=Er(t,a.triggerRef);return e.jsx(qs.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Z0(a.open),...n,ref:i,onClick:Ks(r.onClick,a.onOpenToggle)})});KN.displayName=HN;var J0="DialogPortal",[jk,VN]=DN(J0,{forceMount:void 0}),zN=r=>{const{__scopeDialog:t,forceMount:s,children:n,container:a}=r,i=ul(J0,t);return e.jsx(jk,{scope:t,forceMount:s,children:j.Children.map(n,c=>e.jsx(Ou,{present:s||i.open,children:e.jsx($0,{asChild:!0,container:a,children:c})}))})};zN.displayName=J0;var Hf="DialogOverlay",$N=j.forwardRef((r,t)=>{const s=VN(Hf,r.__scopeDialog),{forceMount:n=s.forceMount,...a}=r,i=ul(Hf,r.__scopeDialog);return i.modal?e.jsx(Ou,{present:n||i.open,children:e.jsx(Ck,{...a,ref:t})}):null});$N.displayName=Hf;var Bk=gk("DialogOverlay.RemoveScroll"),Ck=j.forwardRef((r,t)=>{const{__scopeDialog:s,...n}=r,a=ul(Hf,s);return e.jsx(W0,{as:Bk,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(qs.div,{"data-state":Z0(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Bd="DialogContent",GN=j.forwardRef((r,t)=>{const s=VN(Bd,r.__scopeDialog),{forceMount:n=s.forceMount,...a}=r,i=ul(Bd,r.__scopeDialog);return e.jsx(Ou,{present:n||i.open,children:i.modal?e.jsx(Sk,{...a,ref:t}):e.jsx(Ek,{...a,ref:t})})});GN.displayName=Bd;var Sk=j.forwardRef((r,t)=>{const s=ul(Bd,r.__scopeDialog),n=j.useRef(null),a=Er(t,s.contentRef,n);return j.useEffect(()=>{const i=n.current;if(i)return q2(i)},[]),e.jsx(WN,{...r,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ks(r.onCloseAutoFocus,i=>{i.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:Ks(r.onPointerDownOutside,i=>{const c=i.detail.originalEvent,A=c.button===0&&c.ctrlKey===!0;(c.button===2||A)&&i.preventDefault()}),onFocusOutside:Ks(r.onFocusOutside,i=>i.preventDefault())})}),Ek=j.forwardRef((r,t)=>{const s=ul(Bd,r.__scopeDialog),n=j.useRef(!1),a=j.useRef(!1);return e.jsx(WN,{...r,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{r.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||s.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{r.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=i.target;s.triggerRef.current?.contains(c)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),WN=j.forwardRef((r,t)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...c}=r,A=ul(Bd,s),d=j.useRef(null),u=Er(t,d);return N2(),e.jsxs(e.Fragment,{children:[e.jsx(T0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Q0,{role:"dialog",id:A.contentId,"aria-describedby":A.descriptionId,"aria-labelledby":A.titleId,"data-state":Z0(A.open),...c,ref:u,onDismiss:()=>A.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(_k,{titleId:A.titleId}),e.jsx(Uk,{contentRef:d,descriptionId:A.descriptionId})]})]})}),X0="DialogTitle",qN=j.forwardRef((r,t)=>{const{__scopeDialog:s,...n}=r,a=ul(X0,s);return e.jsx(qs.h2,{id:a.titleId,...n,ref:t})});qN.displayName=X0;var YN="DialogDescription",JN=j.forwardRef((r,t)=>{const{__scopeDialog:s,...n}=r,a=ul(YN,s);return e.jsx(qs.p,{id:a.descriptionId,...n,ref:t})});JN.displayName=YN;var XN="DialogClose",ZN=j.forwardRef((r,t)=>{const{__scopeDialog:s,...n}=r,a=ul(XN,s);return e.jsx(qs.button,{type:"button",...n,ref:t,onClick:Ks(r.onClick,()=>a.onOpenChange(!1))})});ZN.displayName=XN;function Z0(r){return r?"open":"closed"}var ej="DialogTitleWarning",[Fk,tj]=WE(ej,{contentName:Bd,titleName:X0,docsSlug:"dialog"}),_k=({titleId:r})=>{const t=tj(ej),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return j.useEffect(()=>{r&&(document.getElementById(r)||console.error(s))},[s,r]),null},kk="DialogDescriptionWarning",Uk=({contentRef:r,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tj(kk).contentName}}.`;return j.useEffect(()=>{const a=r.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,r,t]),null},sj=MN,rj=KN,nj=zN,aj=$N,ij=GN,oj=qN,ev=JN,tv=ZN;function Zs({...r}){return e.jsx(sj,{"data-slot":"dialog",...r})}function Rh({...r}){return e.jsx(rj,{"data-slot":"dialog-trigger",...r})}function Ik({...r}){return e.jsx(nj,{"data-slot":"dialog-portal",...r})}function Lk({className:r,...t}){return e.jsx(aj,{"data-slot":"dialog-overlay",className:ps("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...t})}function er({className:r,children:t,...s}){return e.jsxs(Ik,{"data-slot":"dialog-portal",children:[e.jsx(Lk,{}),e.jsxs(ij,{"data-slot":"dialog-content",className:ps("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...s,children:[!s["aria-describedby"]&&e.jsx(ev,{id:"dialog-description",className:"sr-only",children:"Dialog content"}),t,e.jsxs(tv,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(ll,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ur({className:r,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:ps("flex flex-col gap-2 text-center sm:text-left",r),...t})}function po({className:r,...t}){return e.jsx("div",{"data-slot":"dialog-footer",className:ps("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...t})}function hr({className:r,...t}){return e.jsx(oj,{"data-slot":"dialog-title",className:ps("text-lg leading-none font-semibold",r),...t})}function Hn({className:r,...t}){return e.jsx(ev,{"data-slot":"dialog-description",className:ps("text-muted-foreground text-sm",r),...t})}var Qk=Symbol("radix.slottable");function Tk(r){const t=({children:s})=>e.jsx(e.Fragment,{children:s});return t.displayName=`${r}.Slottable`,t.__radixId=Qk,t}var lj="AlertDialog",[Pk]=Rc(lj,[ON]),Dc=ON(),cj=r=>{const{__scopeAlertDialog:t,...s}=r,n=Dc(t);return e.jsx(sj,{...n,...s,modal:!0})};cj.displayName=lj;var Rk="AlertDialogTrigger",Dk=j.forwardRef((r,t)=>{const{__scopeAlertDialog:s,...n}=r,a=Dc(s);return e.jsx(rj,{...a,...n,ref:t})});Dk.displayName=Rk;var Ok="AlertDialogPortal",Aj=r=>{const{__scopeAlertDialog:t,...s}=r,n=Dc(t);return e.jsx(nj,{...n,...s})};Aj.displayName=Ok;var Mk="AlertDialogOverlay",dj=j.forwardRef((r,t)=>{const{__scopeAlertDialog:s,...n}=r,a=Dc(s);return e.jsx(aj,{...a,...n,ref:t})});dj.displayName=Mk;var yu="AlertDialogContent",[Hk,Kk]=Pk(yu),Vk=Tk("AlertDialogContent"),uj=j.forwardRef((r,t)=>{const{__scopeAlertDialog:s,children:n,...a}=r,i=Dc(s),c=j.useRef(null),A=Er(t,c),d=j.useRef(null);return e.jsx(Fk,{contentName:yu,titleName:hj,docsSlug:"alert-dialog",children:e.jsx(Hk,{scope:s,cancelRef:d,children:e.jsxs(ij,{role:"alertdialog",...i,...a,ref:A,onOpenAutoFocus:Ks(a.onOpenAutoFocus,u=>{u.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[e.jsx(Vk,{children:n}),e.jsx($k,{contentRef:c})]})})})});uj.displayName=yu;var hj="AlertDialogTitle",mj=j.forwardRef((r,t)=>{const{__scopeAlertDialog:s,...n}=r,a=Dc(s);return e.jsx(oj,{...a,...n,ref:t})});mj.displayName=hj;var fj="AlertDialogDescription",pj=j.forwardRef((r,t)=>{const{__scopeAlertDialog:s,...n}=r,a=Dc(s);return e.jsx(ev,{...a,...n,ref:t})});pj.displayName=fj;var zk="AlertDialogAction",gj=j.forwardRef((r,t)=>{const{__scopeAlertDialog:s,...n}=r,a=Dc(s);return e.jsx(tv,{...a,...n,ref:t})});gj.displayName=zk;var xj="AlertDialogCancel",vj=j.forwardRef((r,t)=>{const{__scopeAlertDialog:s,...n}=r,{cancelRef:a}=Kk(xj,s),i=Dc(s),c=Er(t,a);return e.jsx(tv,{...i,...n,ref:c})});vj.displayName=xj;var $k=({contentRef:r})=>{const t=`\`${yu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${yu}\` by passing a \`${fj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${yu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{document.getElementById(r.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,r]),null},Gk=cj,Wk=Aj,qk=dj,Yk=uj,Jk=gj,Xk=vj,Zk=mj,eU=pj;function kA({...r}){return e.jsx(Gk,{"data-slot":"alert-dialog",...r})}function tU({...r}){return e.jsx(Wk,{"data-slot":"alert-dialog-portal",...r})}function sU({className:r,...t}){return e.jsx(qk,{"data-slot":"alert-dialog-overlay",className:ps("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...t})}function UA({className:r,...t}){return e.jsxs(tU,{children:[e.jsx(sU,{}),e.jsx(Yk,{"data-slot":"alert-dialog-content",className:ps("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...t})]})}function IA({className:r,...t}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:ps("flex flex-col gap-2 text-center sm:text-left",r),...t})}function LA({className:r,...t}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:ps("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...t})}function QA({className:r,...t}){return e.jsx(Zk,{"data-slot":"alert-dialog-title",className:ps("text-lg font-semibold",r),...t})}function TA({className:r,...t}){return e.jsx(eU,{"data-slot":"alert-dialog-description",className:ps("text-muted-foreground text-sm",r),...t})}function PA({className:r,...t}){return e.jsx(Jk,{className:ps(I0(),r),...t})}function RA({className:r,...t}){return e.jsx(Xk,{className:ps(I0({variant:"outline"}),r),...t})}function Oc(r,t){if(!r||r.length===0)return"";const s=t.join(","),n=r.map(a=>t.map(i=>{const c=a[i];if(c==null)return"";const A=String(c);return A.includes(",")||A.includes('"')||A.includes(`
`)?`"${A.replace(/"/g,'""')}"`:A}).join(","));return[s,...n].join(`
`)}function Mc(r,t){const s=new Blob([r],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),a=URL.createObjectURL(s);n.setAttribute("href",a),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}async function wj(r){try{const t=await At.getStudents(),s=["admissionNumber","firstName","lastName","otherName","gender","dateOfBirth","className","level","status","parentName","parentPhone","academicYear","admissionDate"],n=t.map(i=>({admissionNumber:i.admission_number||"",firstName:i.first_name||"",lastName:i.last_name||"",otherName:i.other_name||"",gender:i.gender||"",dateOfBirth:i.date_of_birth||"",className:i.class_name||"",level:i.level||"",status:i.status||"",parentName:i.parent_name||"",parentPhone:i.parent_phone||"",academicYear:i.academic_year||"",admissionDate:i.admission_date||""})),a=Oc(n,s);Mc(a,r||`students_${new Date().toISOString().split("T")[0]}.csv`)}catch(t){throw t}}async function rU(r){try{const t=await At.getTeachers(),s=["id","firstName","lastName","otherName","gender","employeeId","email","phone","qualification","specialization","status","isClassTeacher"],n=t.map(i=>({...i,firstName:i.first_name,lastName:i.last_name,otherName:i.other_name||"",employeeId:i.employee_id,gender:i.gender||"",specialization:Array.isArray(i.specialization)?i.specialization.join("; "):typeof i.specialization=="string"?i.specialization:"",status:i.status,isClassTeacher:i.is_class_teacher?"true":"false"})),a=Oc(n,s);Mc(a,r||`teachers_${new Date().toISOString().split("T")[0]}.csv`)}catch(t){throw t}}async function bj(r){try{const t=await At.getClasses(),s=["id","name","level","section","capacity","classTeacherId","status"],n=t.map(i=>({...i,classTeacherId:i.class_teacher_id||"",status:i.status})),a=Oc(n,s);Mc(a,r||`classes_${new Date().toISOString().split("T")[0]}.csv`)}catch(t){throw t}}async function yj(r){try{const t=await At.getSubjects(),s=["id","name","category","subjectType","description","status","isCore"],n=t.map(i=>({...i,subjectType:i.subject_type||"Elective",isCore:i.is_core?"true":"false",status:i.status})),a=Oc(n,s);Mc(a,r||`subjects_${new Date().toISOString().split("T")[0]}.csv`)}catch(t){throw t}}async function nU(r){try{const t=await At.getParents(),s=["id","firstName","lastName","email","phone","alternatePhone","address","occupation","status"],n=t.map(i=>({...i,firstName:i.first_name,lastName:i.last_name,alternatePhone:i.alternate_phone||"",address:i.address||"",occupation:i.occupation||"",status:i.status})),a=Oc(n,s);Mc(a,r||`parents_${new Date().toISOString().split("T")[0]}.csv`)}catch(t){throw t}}function aU(r,t,s){const n=["studentName","admissionNumber","subjectName","ca1","ca2","exam","total","grade","remark","classAverage","status"],a=r.map(c=>{const A=t.find(d=>d.id===c.studentId);return{studentName:A?`${A.firstName} ${A.lastName}`:"Unknown",admissionNumber:A?.admissionNumber||"",subjectName:c.subjectName,ca1:c.ca1,ca2:c.ca2,exam:c.exam,total:c.total,grade:c.grade,remark:c.remark,classAverage:c.classAverage,status:c.status}}),i=Oc(a,n);Mc(i,`scores_${new Date().toISOString().split("T")[0]}.csv`)}function iU(r,t,s){const n=["studentName","admissionNumber","className","term","academicYear","totalScore","averageScore","position","totalStudents","timesPresent","timesAbsent","status","classTeacherComment"],a=r.map(c=>{const A=t.find(d=>d.id===c.studentId);return{studentName:A?`${A.firstName} ${A.lastName}`:"Unknown",admissionNumber:A?.admissionNumber||"",className:A?.className||"",term:c.term,academicYear:c.academicYear,totalScore:c.totalScore,averageScore:c.averageScore,position:c.position,totalStudents:c.totalStudents,timesPresent:c.timesPresent,timesAbsent:c.timesAbsent,status:c.status,classTeacherComment:c.classTeacherComment||""}}),i=Oc(a,n);Mc(i,`results_${new Date().toISOString().split("T")[0]}.csv`)}function oU(r,t,s){const n=["receiptNumber","studentName","admissionNumber","className","term","academicYear","amount","paymentMethod","paymentDate","status","verifiedBy","verifiedDate"],a=r.map(c=>{const A=t.find(d=>d.id===c.studentId);return{receiptNumber:c.receiptNumber,studentName:A?`${A.firstName} ${A.lastName}`:"Unknown",admissionNumber:A?.admissionNumber||"",className:A?.className||"",term:c.term,academicYear:c.academicYear,amount:c.amount,paymentMethod:c.paymentMethod,paymentDate:c.paymentDate,status:c.status,verifiedBy:c.verifiedBy||"",verifiedDate:c.verifiedDate||""}}),i=Oc(a,n);Mc(i,`payments_${new Date().toISOString().split("T")[0]}.csv`)}function lU(r,t,s){const n=["studentName","admissionNumber","className","term","academicYear","totalFeeRequired","totalPaid","balance","status"],a=r.map(c=>{const A=t.find(d=>d.id===c.studentId);return{studentName:A?`${A.firstName} ${A.lastName}`:"Unknown",admissionNumber:A?.admissionNumber||"",className:A?.className||"",term:c.term,academicYear:c.academicYear,totalFeeRequired:c.totalFeeRequired,totalPaid:c.totalPaid,balance:c.balance,status:c.status}}),i=Oc(a,n);Mc(i,`fee_balances_${new Date().toISOString().split("T")[0]}.csv`)}class cU{static async createStudentInDB(t){try{return await At.createStudent(t)}catch(s){const n=s instanceof Error?s.message:String(s);throw n&&n.includes("Duplicate entry")?new Error(`Student with admission number ${t.admissionNumber} already exists`):n&&n.includes("foreign key constraint")?new Error(`Invalid class or parent reference for student ${t.firstName} ${t.lastName}`):new Error(`Failed to create student: ${n}`)}}static async createParentInDB(t){try{return await At.createParent(t)}catch(s){const n=s instanceof Error?s.message:String(s);throw n&&n.includes("Duplicate entry")?new Error(`Parent with email ${t.email} already exists`):new Error(`Failed to create parent: ${n}`)}}static async createUserAccount(t){try{return await At.createUser(t),!0}catch(s){const n=s instanceof Error?s.message:String(s);throw n&&n.includes("Duplicate entry")?new Error(`Username ${t.username} already exists`):new Error(`Failed to create user account: ${n}`)}}static async importStudents(t,s,n){const a=[],i=[];let c=0;for(let A=0;A<t.length;A++){const d=t[A];try{if(d.admissionNumber&&await At.checkAdmissionNumberExists(d.admissionNumber)){a.push(`Admission number ${d.admissionNumber} already exists for student: ${d.firstName} ${d.lastName}`);continue}const u={firstName:d.firstName,lastName:d.lastName,otherName:d.otherName||"",admissionNumber:d.admissionNumber||await this.generateUniqueAdmissionNumber(),classId:s||d.classId,className:d.className||"",level:d.level||"",parentId:null,dateOfBirth:d.dateOfBirth||"",gender:d.gender,status:d.status||"Active",academicYear:d.academicYear||new Date().getFullYear().toString(),admissionDate:d.admissionDate||new Date().toISOString().split("T")[0],parentName:d.parentName||"",parentPhone:d.parentPhone||""};let m=null;if(d.parentName&&d.parentPhone){const g=(await At.getParents()).find(y=>y.phone===d.parentPhone);if(g)m=g.id;else{const y={firstName:d.parentName?.split(" ")[0]||"",lastName:d.parentName?.split(" ").slice(1).join(" ")||"",email:`${d.parentName.replace(/\s+/g,".").toLowerCase()}@parent.com`,phone:d.parentPhone||"",status:"Active"},b=await this.createParentInDB(y);b&&(m=b.id)}}u.parentId=m;const f=await this.createStudentInDB(u);f?(i.push(f),c++,d.username&&await this.createUserAccount({username:d.username,email:d.email||"",role:"student",linkedId:f.id,first_name:f.first_name,last_name:f.last_name,status:"Active"})):a.push(`Failed to create student in database: ${d.firstName} ${d.lastName}`)}catch(u){const m=u instanceof Error?u.message:String(u);a.push(`Error importing student ${d.firstName}: ${m}`)}n&&n(A+1,t.length)}return{success:c,errors:a,students:i}}static async generateUniqueAdmissionNumber(){const t=new Date().getFullYear();let s=0;const n=100;for(;s<n;){const i=Math.floor(Math.random()*1e4).toString().padStart(4,"0"),c=`GRA/${t}/${i}`;if(!await At.checkAdmissionNumberExists(c))return c;s++}const a=Date.now().toString().slice(-4);return`GRA/${t}/${a}`}}class AU{static async createSubjectInDB(t){try{return await At.createSubject(t)}catch{return null}}static async importSubjects(t,s){const n=[],a=[];let i=0;for(let c=0;c<t.length;c++){const A=t[c];try{const d={name:A.name,category:A.category,subjectType:A.subjectType||"Elective",description:A.description||"",status:A.status||"Active",isCore:A.isCore==="true"||A.isCore===!0||A.subjectType==="Core"},u=await this.createSubjectInDB(d);u?(a.push(u),i++):n.push(`Failed to create subject in database: ${A.name}`)}catch(d){n.push(`Error importing subject ${A.name}: ${d}`)}s&&s(c+1,t.length)}return{success:i,errors:n,subjects:a}}}function Nj(r){const t=r.split(`
`).filter(a=>a.trim());if(t.length===0)return[];const s=g1(t[0]),n=[];for(let a=1;a<t.length;a++){const i=g1(t[a]);if(i.length===s.length){const c={};s.forEach((A,d)=>{c[A]=i[d]||""}),n.push(c)}}return n}function g1(r){const t=[];let s="",n=!1,a=0;for(;a<r.length;){const i=r[a],c=r[a+1];i==='"'?n&&c==='"'?(s+='"',a+=2):(n=!n,a++):i===","&&!n?(t.push(s.trim()),s="",a++):(s+=i,a++)}return t.push(s.trim()),t}function dU(r){const t=[],s=[];return r.forEach((n,a)=>{const i=[];n.firstName||i.push("First name required"),n.lastName||i.push("Last name required"),n.gender||i.push("Gender required"),n.className||i.push("Class name required"),n.gender&&!["Male","Female","MALE","FEMALE"].includes(n.gender)&&i.push("Invalid gender (must be Male or Female)"),n.dateOfBirth&&!mU(n.dateOfBirth)&&i.push("Invalid date format (use YYYY-MM-DD)"),n.parentPhone&&!hU(n.parentPhone)&&i.push("Invalid parent phone format"),i.length===0?t.push({...n,gender:n.gender.toUpperCase(),status:n.status||"Active",academicYear:n.academicYear||new Date().getFullYear().toString(),first_name:n.firstName,last_name:n.lastName,other_name:n.otherName||null,admission_number:n.admissionNumber||null,class_name:n.className,level:n.level||"",parent_name:n.parentName||"",parent_phone:n.parentPhone||"",date_of_birth:n.dateOfBirth||null,admission_date:n.admissionDate||new Date().toISOString().split("T")[0]}):s.push(`Row ${a+1}: ${i.join(", ")}`)}),{valid:t,errors:s}}function uU(r){const t=[],s=[];return r.forEach((n,a)=>{const i=[];n.name||i.push("Subject name required"),n.category||i.push("Category required");const c=["Creche","Nursery","Primary","JSS","SS"];n.category&&!c.includes(n.category)&&i.push(`Invalid category (must be one of: ${c.join(", ")})`);const A=["Core","Elective","CORE","ELECTIVE"];n.subjectType&&!A.includes(n.subjectType)&&i.push("Invalid subject type (must be Core or Elective)"),i.length===0?t.push({...n,category:n.category,subjectType:n.subjectType||"Elective",status:n.status||"Active",isCore:n.isCore==="true"||n.isCore==="TRUE"||n.subjectType==="Core",description:n.description||""}):s.push(`Row ${a+1}: ${i.join(", ")}`)}),{valid:t,errors:s}}function hU(r){return/^[\d\s\-\+\(\)]+$/.test(r)&&r.replace(/\D/g,"").length>=10}function mU(r){if(!/^\d{4}-\d{2}-\d{2}$/.test(r))return!1;const s=new Date(r);return s instanceof Date&&!isNaN(s.getTime())}function fU(r,t,s){return new Promise((n,a)=>{const i=new FileReader;i.onload=async c=>{try{const A=c.target?.result,d=Nj(A);if(d.length===0){n({valid:[],errors:["CSV file is empty or invalid"],imported:[]});return}const u=dU(d);if(u.errors.length>0){n({valid:u.valid,errors:u.errors,imported:[]});return}if(u.valid.length===0){n({valid:[],errors:["No valid records to import"],imported:[]});return}const m=await cU.importStudents(u.valid,t,s);n({valid:u.valid,errors:m.errors,imported:m.students})}catch(A){a(A)}},i.onerror=c=>{a(new Error("Failed to read file"))},i.readAsText(r)})}function pU(r,t){return new Promise((s,n)=>{const a=new FileReader;a.onload=async i=>{try{const c=i.target?.result,A=Nj(c),d=uU(A);if(d.errors.length>0){s({valid:d.valid,errors:d.errors,imported:[]});return}const u=await AU.importSubjects(d.valid,t);s({valid:d.valid,errors:u.errors,imported:u.subjects})}catch(c){n(c)}},a.onerror=()=>n(new Error("Failed to read file")),a.readAsText(r)})}function gU(){const r=["admissionNumber (Optional - will be auto-generated if empty)","firstName","lastName","otherName","gender","dateOfBirth","className","level","status","parentName","parentPhone","academicYear","admissionDate"],t=["","John","Doe","Michael","Male","2010-05-15","JSS 1A","JSS","Active","Jane Doe","08012345678","2024","2024-09-01"];return[r.join(","),t.join(",")].join(`
`)}function xU(){const r=["name","category","subjectType","description","status","isCore"],t=["Mathematics","JSS","Core","Mathematics for Junior Secondary","Active","true"];return[r.join(","),t.join(",")].join(`
`)}const vU=j.lazy(()=>gf(()=>import("./AddStudentFormSimple-CgyA-gYs.js"),[],import.meta.url));function wU({onNavigateToLink:r}){const{students:t,teachers:s,parents:n,classes:a,subjects:i,users:c,addStudent:A,updateStudent:d,deleteStudent:u,deleteBulkStudents:m,getStudentsByClass:f,refreshStudents:x,currentUser:g,updateUser:y,resetUserPasswordAPI:b}=ys(),[B,N]=j.useState(""),[E,I]=j.useState("All"),[k,$]=j.useState("All"),[z,H]=j.useState(!1),[T,V]=j.useState(!1),[G,L]=j.useState(!1),[F,O]=j.useState(!1),[P,ce]=j.useState(!1),[W,ae]=j.useState(!1),[K,le]=j.useState(!1),[ie,se]=j.useState(!1),[R,q]=j.useState(!1),[te,de]=j.useState(!1),[fe,me]=j.useState(null),[pe,ee]=j.useState(!1),[je,Pe]=j.useState([]),[De,nt]=j.useState(!1),[Se,X]=j.useState(null),[Ie,rt]=j.useState(""),[Ee,Te]=j.useState(""),[dt,st]=j.useState(null),[ft,et]=j.useState(null),[it,Ue]=j.useState(null),[We,Bt]=j.useState(void 0),[mt,Me]=j.useState({processed:0,total:0}),[Ve,wt]=j.useState(!1),As=j.useRef(null),_e=j.useRef(null),[$e,gt]=j.useState({first_name:"",last_name:"",other_name:"",gender:"Male",date_of_birth:"",admission_number:""}),Ft=j.useMemo(()=>Array.isArray(t)?t.filter(ze=>{const ms=ze.firstName&&ze.firstName.toLowerCase().includes(B.toLowerCase())||ze.lastName&&ze.lastName.toLowerCase().includes(B.toLowerCase())||ze.admissionNumber&&ze.admissionNumber.toLowerCase().includes(B.toLowerCase()),Cs=E==="All"||ze.className===E,sr=k==="All"||ze.classCategory&&ze.classCategory===k||ze.level&&ze.level===k;return ms&&Cs&&sr}):[],[t,B,E,k]),bt=j.useMemo(()=>Array.isArray(t)?{total:t.length,active:t.filter(ze=>ze.status==="Active").length,primary:t.filter(ze=>ze.classCategory&&ze.classCategory==="Primary"||ze.level&&ze.level==="Primary").length,secondary:t.filter(ze=>ze.classCategory&&ze.classCategory==="Secondary"||ze.level&&ze.level==="Secondary").length}:{total:0,active:0,primary:0,secondary:0},[t]),Ot=["All","Primary","Secondary"],Lt=["All",...Array.isArray(a)?Array.from(new Set(a.map(ze=>ze.name))):[]],Vt=ze=>{const ms=Array.isArray(t)?t.find(sr=>sr.id===ze):null;if(!ms||!ms.parent_id||ms.parent_id===0)return{name:"",username:"",phone:"",email:""};const Cs=Array.isArray(n)?n.find(sr=>sr.id===ms.parent_id):null;return Cs?!Cs.phone||Cs.phone.trim()===""?{name:"",username:"",phone:"",email:""}:{name:`${Cs.firstName} ${Cs.lastName}`,username:Cs.email?.split("@")[0]||"",phone:Cs.phone||"",email:Cs.email||""}:{name:"",username:"",phone:"",email:""}},Ns=async()=>{if(confirm("Are you sure you want to unlink all students from parents? This action cannot be undone."))try{const ze=await At.executeQuery("UPDATE students SET parent_id = NULL WHERE parent_id IS NOT NULL");ze&&ze.success?(console.log(`Unlinked ${ze.affectedRows} students from parents`),await x(),alert(`Successfully unlinked ${ze.affectedRows} students from parents.`)):(console.error("Failed to unlink students:",ze),alert("Failed to unlink students. Please try again."))}catch(ze){console.error("Error unlinking students:",ze),alert("An error occurred while unlinking students. Please try again.")}},Yt=ze=>Array.isArray(c)?c.find(ms=>ms.id===ze):null,Ht=ze=>{X(ze),H(!0)},_t=ze=>{X(ze),gt({first_name:ze.firstName,last_name:ze.lastName,other_name:ze.otherName||"",date_of_birth:ze.date_of_birth,admission_number:ze.admissionNumber,gender:ze.gender}),L(!0)},Ls=async()=>{if(Se)try{await d(Se.id,$e),he.success(`Student ${$e.first_name} ${$e.last_name} updated successfully`),L(!1),X(null),await x()}catch(ze){console.error("Error updating student:",ze),he.error("Failed to update student")}},vs=async()=>{if(Se)try{await u(Se.id),he.success(`Student "${Se.firstName} ${Se.lastName}" deleted successfully!`),V(!1),X(null),await x()}catch(ze){console.error("Error deleting student:",ze),he.error("Failed to delete student")}},Gt=ze=>{X(ze),V(!0)},Xs=async ze=>{const ms=ze.status==="Active"?"Inactive":"Active",Cs=`status-${ze.id}`;try{me(Cs),await d(ze.id,{status:ms});const sr=Yt(ze.id);sr&&await y(sr.id,{status:ms}),he.success(`Student ${ze.firstName} ${ze.lastName} ${ms==="Active"?"activated":"deactivated"}`),await x()}catch(sr){console.error("Error toggling student status:",sr),he.error("Failed to update student status")}finally{me(null)}},yt=()=>{if(!Se||!it){he.error("Please select a guardian");return}d(Se.id,{parent_id:parseInt(it)}),he.success("Guardian linked successfully"),O(!1),X(null)},Fs=ze=>{Pe(ms=>ms.includes(ze)?ms.filter(Cs=>Cs!==ze):[...ms,ze])},us=()=>{De?(Pe([]),nt(!1)):(Pe(Ft.map(ze=>ze.id)),nt(!0))},Ts=async()=>{if(je.length===0){he.error("No students selected for deletion");return}if(confirm(`Are you sure you want to delete ${je.length} student(s)? This action cannot be undone.`))try{me("bulk-delete");const ms=await m(je);he.success(ms?.summary||`${je.length} student(s) deleted successfully`),Pe([]),nt(!1),await x()}catch(ze){console.error("Error bulk deleting students:",ze),he.error("Failed to delete some students")}finally{me(null)}},tr=async()=>{ee(!0);try{await x(),he.success("Student list refreshed successfully")}catch(ze){console.error("Error refreshing students:",ze),he.error("Failed to refresh student list")}finally{ee(!1)}},Vs=()=>{if(!Se||!dt){he.error("Please select a passport photo");return}const ze=new FileReader;ze.onloadend=()=>{const ms=ze.result;d(Se.id,{passportPhoto:ms}),he.success("Passport photo uploaded successfully"),ce(!1),st(null),X(null)},ze.readAsDataURL(dt)},zs=async()=>{if(!Se)return;if(!Ie||!Ee){he.error("Please fill in all fields");return}if(Ie!==Ee){he.error("Passwords do not match");return}if(Ie.length<6){he.error("Password must be at least 6 characters");return}const ze=Yt(Se.id);ze?(await b(ze.id),he.success(`Password reset successfully for ${Se.firstName} ${Se.lastName}`)):he.error("User account not found"),rt(""),Te(""),ae(!1),X(null)},mr=()=>{const ze=[{admission_number:"GRA/25199",last_name:"COLLINS",first_name:"CORREEN",other_name:"SETH",parentName:"MANU SETH COLLINS",parentUsername:"sethcollins1@gra",phone:"8064489992",email:"collinsjuliet2012@gmail.com",username:"correen1@gra",gender:"FEMALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25203",last_name:"KALLA",first_name:"TENICHA",other_name:"YELLE",parentName:"USMAN YELLE",parentUsername:"yelle1@gra",phone:"8133925121",email:"twinkyells@gmail.com",username:"tenicha1@gra",gender:"FEMALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25204",last_name:"ADAMS",first_name:"DARIUS",other_name:"MSHELIA",parentName:"AYUBA MSHELIA ADAMS",parentUsername:"msheliaadams1@gra",phone:"7036261062",email:"adamsvictoria703@gmail.com",username:"darius1@gra",gender:"MALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25205",last_name:"BITRUS",first_name:"HANNAH",other_name:"",parentName:"BITRUS YAKUBU",parentUsername:"yakubu2@gra",phone:"8038675206",email:"bitrusyakubu35@gmail.com",username:"hannah1@gra",gender:"FEMALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25207",last_name:"FABIAN",first_name:"TESTIMONY",other_name:"IFECHUKWU",parentName:"CHINWEUBA FABIAN",parentUsername:"fabian1@gra",phone:"7061229572",email:"ezeifeoluchukwugrace@gmail.com",username:"testimony1@gra",gender:"FEMALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25208",last_name:"HARUNA",first_name:"AMINA",other_name:"",parentName:"BARDE HARUNA",parentUsername:"haruna1@gra",phone:"8135659098",email:"harunabarde1111@gmail.com",username:"amina1@gra",gender:"FEMALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25210",last_name:"KEFAS",first_name:"MARY",other_name:"",parentName:"JESSE KEFAS",parentUsername:"kefas1@gra",phone:"7030602036",email:"jessekefas08081981@gmail.com",username:"mary1@gra",gender:"FEMALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25213",last_name:"CROMWELL",first_name:"ASHER",other_name:"",parentName:"CROWELL BATURE",parentUsername:"bature1@gra",phone:"7069539064",email:"ruthjoshuam@gmail.com",username:"asher1@gra",gender:"MALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25461",last_name:"AARON",first_name:"ANNABELLE",other_name:"ALEYIRO",parentName:"AMOS AARON",parentUsername:"aaron1@gra",phone:"9063333784",email:"e12@gmail.com",username:"annabelle1@gra",gender:"FEMALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25462",last_name:"MICHAEL",first_name:"AUDREY",other_name:"",parentName:"MICHEAL OTEIKWU",parentUsername:"oteikwu1@gra",phone:"8033628676",email:"r@gmail.com",username:"audrey2@gra",gender:"FEMALE",class_name:"JASPER (G K )"},{admission_number:"GRA/25463",last_name:"BARNABAS",first_name:"BARUCH",other_name:"IBRAHIM",parentName:"BARNABAS IBRAHIM",parentUsername:"ibrahim1@gra",phone:"8060820119",email:"d3@gmail.com",username:"baruch1@gra",gender:"MALE",class_name:"JASPER (G K )"}],ms=ze.map(Cs=>`${Cs.admission_number} - ${Cs.first_name} ${Cs.last_name}${Cs.other_name?" "+Cs.other_name:""} - ${Cs.username} - Parent: ${Cs.parentName} (${Cs.parentUsername})`).join(`
`);navigator.clipboard.writeText(ms).then(()=>{he.success(`${ze.length} GRA students list copied to clipboard!`)}),se(!1)},$n=async()=>{try{await wj(),he.success("Students exported to CSV successfully from database")}catch{he.error("Failed to export students from database")}},Na=()=>{const ze=gU(),ms=new Blob([ze],{type:"text/csv"}),Cs=window.URL.createObjectURL(ms),sr=document.createElement("a");sr.href=Cs,sr.download="student_template.csv",sr.click(),window.URL.revokeObjectURL(Cs),he.success("CSV template downloaded - Admission numbers will be auto-generated if left empty")},Qn=async()=>{if(!ft){he.error("Please select a CSV file");return}wt(!0),Me({processed:0,total:0});try{const ze=await fU(ft,We,(ms,Cs)=>{Me({processed:ms,total:Cs})});ze.errors.length>0&&he.error(`Import completed with ${ze.errors.length} errors`),ze.imported.length>0?(he.success(`${ze.imported.length} students imported successfully to database`),et(null),_e.current&&(_e.current.value=""),le(!1),Bt(void 0),window.location.reload()):he.error("No valid students found in CSV file")}catch{he.error("Failed to import CSV file to database")}finally{wt(!1),Me({processed:0,total:0})}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#0A2540] mb-2",children:"Manage Students"}),e.jsx("p",{className:"text-gray-600",children:"View, edit, and manage all registered students"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ce,{onClick:()=>q(!0),className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(MA,{className:"w-4 h-4 mr-2"}),"Add Student"]}),e.jsxs(Ce,{onClick:$n,variant:"outline",className:"rounded-xl border-[#3B82F6] text-[#3B82F6] hover:bg-[#3B82F6] hover:text-white",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs(Ce,{onClick:()=>le(!0),className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),"Bulk Import CSV"]}),e.jsxs(Ce,{onClick:()=>se(!0),className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(Qs,{className:"w-4 h-4 mr-2"}),"Import GRA Students"]}),e.jsxs(Ce,{onClick:tr,disabled:pe,variant:"outline",className:"rounded-xl border-[#10B981] text-[#10B981] hover:bg-[#10B981] hover:text-white",children:[pe?e.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border border-gray-300 border-t-green-600 mr-2"}):e.jsx(vu,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Students"}),e.jsx("p",{className:"text-[#0A2540]",children:bt.total})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Active"}),e.jsx("p",{className:"text-[#0A2540]",children:bt.active})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Primary"}),e.jsx("p",{className:"text-[#0A2540]",children:bt.primary})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:e.jsx(Kr,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Secondary"}),e.jsx("p",{className:"text-[#0A2540]",children:bt.secondary})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-xl",children:e.jsx(Kr,{className:"w-6 h-6 text-yellow-600"})})]})})})]}),e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs(Ce,{onClick:Ns,variant:"destructive",className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(t2,{className:"w-4 h-4"}),"Unlink All Students from Parents"]})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-[#0A2540] mb-3 flex items-center",children:[e.jsx(ya,{className:"w-4 h-4 mr-2"}),"Primary Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Et,{value:B,onChange:ze=>N(ze.target.value),placeholder:"Search by name or admission number...",className:"pl-10 rounded-xl border-[#0A2540]/20"})]}),e.jsxs(Qt,{value:k,onValueChange:$,children:[e.jsx(Pt,{className:"rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Select Level"})}),e.jsx(Rt,{children:Ot.map(ze=>e.jsx(be,{value:ze,children:ze==="All"?"All Levels":ze},ze))})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-[#0A2540] mb-3 flex items-center",children:[e.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Secondary Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(Qt,{value:E,onValueChange:I,children:[e.jsx(Pt,{className:"rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Select Class"})}),e.jsx(Rt,{children:Lt.map(ze=>e.jsx(be,{value:ze,children:ze==="All"?"All Classes":ze},ze))})]}),e.jsx("div",{className:"flex items-center justify-center text-sm text-gray-500",children:e.jsxs("span",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:[Ft.length," of ",t.length," students"]})})]})]})]})}),e.jsxs(ye,{className:"border-[#0A2540]/10 rounded-xl bg-white shadow-clinical",children:[e.jsx(It,{className:"border-b border-[#0A2540]/10 bg-[#0A2540]/5 flex flex-row items-center justify-between p-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h3",{className:"text-[#0A2540]",children:["Students (",Ft.length,")"]}),je.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[je.length," selected"]}),e.jsxs(Ce,{onClick:Ts,disabled:fe==="bulk-delete",variant:"destructive",size:"sm",className:"rounded-lg",children:[fe==="bulk-delete"?e.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border border-gray-300 border-t-white mr-2"}):e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Delete Selected"]})]})]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{className:"w-full min-w-[1000px]",children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gray-50",children:[e.jsx(lt,{className:"text-[#0A2540] font-medium w-12",children:e.jsx("button",{onClick:us,className:"flex items-center justify-center w-full",children:De?e.jsx(Uw,{className:"w-4 h-4 text-blue-600"}):e.jsx(Iw,{className:"w-4 h-4 text-gray-400"})})}),e.jsx(lt,{className:"text-[#0A2540] font-medium",children:"Student Reg"}),e.jsx(lt,{className:"text-[#0A2540] font-medium",children:"Last Name"}),e.jsx(lt,{className:"text-[#0A2540] font-medium",children:"First Name"}),e.jsx(lt,{className:"text-[#0A2540] font-medium",children:"Other Name"}),e.jsx(lt,{className:"text-[#0A2540] font-medium",children:"Parent/Guardian"}),e.jsx(lt,{className:"text-[#0A2540] font-medium",children:"Phone Number"}),e.jsx(lt,{className:"text-[#0A2540] font-medium",children:"Class"}),e.jsx(lt,{className:"text-[#0A2540] font-medium",children:"Gender"}),e.jsx(lt,{className:"text-[#0A2540] font-medium text-center",children:"Action"})]})}),e.jsx(Ln,{children:Ft.length===0?e.jsx(os,{className:"bg-white",children:e.jsx(Je,{colSpan:10,className:"text-center py-8 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{children:"No students found"}),e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsxs("p",{children:["Total students: ",t.length]}),e.jsxs("p",{children:['Search term: "',B,'"']}),e.jsxs("p",{children:["Filter class: ",E]}),e.jsxs("p",{children:["Filter level: ",k]})]}),e.jsxs(Ce,{onClick:()=>he.info("Navigate to Add Student page"),className:"mt-2 bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(MA,{className:"w-4 h-4 mr-2"}),"Add First Student"]})]})})}):Ft.map(ze=>{const ms=Vt(ze.id);return Yt(ze.id),e.jsxs(os,{className:"bg-white border-b border-[#E5E7EB] hover:bg-[#F9FAFB]",children:[e.jsx(Je,{className:"w-12",children:e.jsx("button",{onClick:()=>Fs(ze.id),className:"flex items-center justify-center w-full",children:je.includes(ze.id)?e.jsx(Uw,{className:"w-4 h-4 text-blue-600"}):e.jsx(Iw,{className:"w-4 h-4 text-gray-400"})})}),e.jsx(Je,{children:e.jsx(Ct,{variant:"outline",className:"rounded-xl font-mono text-xs",children:ze.admissionNumber})}),e.jsx(Je,{className:"text-[#1F2937]",children:ze.lastName}),e.jsx(Je,{className:"text-[#1F2937]",children:ze.firstName}),e.jsx(Je,{className:"text-[#6B7280] text-sm",children:ze.otherName||"-"}),e.jsx(Je,{className:"text-[#6B7280] text-sm",children:ms.name}),e.jsx(Je,{className:"text-[#6B7280] text-sm",children:ms.phone}),e.jsx(Je,{className:"text-[#6B7280] text-sm",children:ze.className}),e.jsx(Je,{className:"text-[#6B7280] text-sm",children:ze.gender}),e.jsx(Je,{children:e.jsxs(RN,{trigger:e.jsx(Ce,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-lg hover:bg-[#F3F4F6] hover:border-[#D1D5DB] border border-transparent transition-all duration-200",children:e.jsx(kw,{className:"h-4 w-4 text-[#6B7280]"})}),children:[e.jsxs(zl,{onClick:()=>Ht(ze),children:[e.jsx(kn,{className:"h-3 w-3"}),"View"]}),e.jsxs(zl,{onClick:()=>_t(ze),children:[e.jsx(Gl,{className:"h-3 w-3"}),"Edit"]}),e.jsx(xf,{}),e.jsxs(zl,{onClick:()=>{X(ze),O(!0)},children:[e.jsx(rS,{className:"h-3 w-3"}),"Link Guardian"]}),e.jsxs(zl,{onClick:()=>{X(ze),ce(!0)},children:[e.jsx(q4,{className:"h-3 w-3"}),"Photo"]}),e.jsxs(zl,{onClick:()=>{X(ze),ae(!0)},children:[e.jsx(eS,{className:"h-3 w-3"}),"Reset Password"]}),e.jsx(xf,{}),e.jsxs(zl,{onClick:()=>Xs(ze),disabled:fe===`status-${ze.id}`,children:[fe===`status-${ze.id}`?e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border border-gray-300 border-t-blue-600"}):e.jsx(kw,{className:"h-3 w-3"}),fe===`status-${ze.id}`?"Updating...":ze.status==="Active"?"Deactivate":"Activate"]}),e.jsx(xf,{}),e.jsxs(zl,{onClick:()=>Gt(ze),className:"text-red-600 hover:bg-red-50",children:[e.jsx(Bi,{className:"h-3 w-3"}),"Delete"]})]})})]},ze.id)})})]})})})]}),Se&&e.jsx(Zs,{open:z,onOpenChange:H,children:e.jsxs(er,{className:"max-w-2xl rounded-xl",children:[e.jsx(ur,{children:e.jsx(hr,{className:"text-[#0A2540]",children:"Student Details"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Admission Number"}),e.jsx("p",{className:"text-[#0A2540]",children:Se.admissionNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx(Ct,{className:`rounded-xl ${Se.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Se.status})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"First Name"}),e.jsx("p",{className:"text-[#0A2540]",children:Se.firstName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Name"}),e.jsx("p",{className:"text-[#0A2540]",children:Se.lastName})]})]}),Se.otherName&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Other Name"}),e.jsx("p",{className:"text-[#0A2540]",children:Se.otherName})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gender"}),e.jsx("p",{className:"text-[#0A2540]",children:Se.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),e.jsx("p",{className:"text-[#0A2540]",children:Se.date_of_birth})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Class"}),e.jsx("p",{className:"text-[#0A2540]",children:Se.className})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Level"}),e.jsx("p",{className:"text-[#0A2540]",children:Se.level})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Parent/Guardian"}),e.jsx("p",{className:"text-[#0A2540]",children:Vt(Se.id).name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Academic Year"}),e.jsx("p",{className:"text-[#0A2540]",children:Se.academic_year})]})]})]})}),e.jsx(Zs,{open:G,onOpenChange:L,children:e.jsxs(er,{className:"max-w-2xl rounded-xl bg-white border border-[#E5E7EB]",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#1F2937]",children:"Edit Student"}),e.jsx(Hn,{className:"text-[#6B7280]",children:"Update student information"})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"First Name"}),e.jsx(Et,{value:$e.first_name,onChange:ze=>gt({...$e,first_name:ze.target.value}),className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Last Name"}),e.jsx(Et,{value:$e.last_name,onChange:ze=>gt({...$e,last_name:ze.target.value}),className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Other Name"}),e.jsx(Et,{value:$e.other_name,onChange:ze=>gt({...$e,other_name:ze.target.value}),className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Gender"}),e.jsxs(Qt,{value:$e.gender,onValueChange:ze=>gt({...$e,gender:ze}),children:[e.jsx(Pt,{className:"rounded-xl border-[#E5E7EB]",children:e.jsx(Tt,{placeholder:"Select gender"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"Male",children:"Male"}),e.jsx(be,{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Date of Birth"}),e.jsx(Et,{type:"date",value:$e.date_of_birth,onChange:ze=>gt({...$e,date_of_birth:ze.target.value}),className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Admission Number"}),e.jsx(Et,{value:$e.admission_number,onChange:ze=>gt({...$e,admission_number:ze.target.value}),className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]"})]})]})}),e.jsxs(po,{children:[e.jsx(Ce,{onClick:()=>L(!1),variant:"outline",className:"rounded-xl border-[#E5E7EB] text-[#1F2937]",children:"Cancel"}),e.jsx(Ce,{onClick:Ls,className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:"Save Changes"})]})]})}),e.jsx(Zs,{open:F,onOpenChange:O,children:e.jsxs(er,{className:"max-w-md rounded-xl bg-white border border-[#E5E7EB]",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#1F2937]",children:"Link Guardian"}),e.jsx(Hn,{className:"text-[#6B7280]",children:Se&&`Link guardian for ${Se.firstName} ${Se.lastName}`})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Select Guardian"}),e.jsxs(Qt,{value:it,onValueChange:Ue,children:[e.jsx(Pt,{className:"rounded-xl border-[#E5E7EB]",children:e.jsx(Tt,{placeholder:"Choose a guardian"})}),e.jsx(Rt,{children:n.map(ze=>e.jsxs(be,{value:ze.id.toString(),children:[ze.firstName," ",ze.lastName," - ",ze.phone]},ze.id))})]})]})}),e.jsxs(po,{children:[e.jsx(Ce,{onClick:()=>{O(!1),Ue("")},variant:"outline",className:"rounded-xl border-[#E5E7EB] text-[#1F2937]",children:"Cancel"}),e.jsx(Ce,{onClick:yt,className:"bg-[#8B5CF6] hover:bg-[#7C3AED] text-white rounded-xl",children:"Link Guardian"})]})]})}),e.jsx(Zs,{open:P,onOpenChange:ce,children:e.jsxs(er,{className:"max-w-md rounded-xl bg-white border border-[#E5E7EB]",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#1F2937]",children:"Upload Passport Photo"}),e.jsx(Hn,{className:"text-[#6B7280]",children:Se&&`Upload passport photo for ${Se.firstName} ${Se.lastName}`})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Select Photo"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(Et,{ref:As,type:"file",accept:"image/*",onChange:ze=>st(ze.target.files?.[0]||null),className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]"})}),dt&&e.jsxs("p",{className:"text-sm text-[#6B7280]",children:["Selected: ",dt.name]})]})}),e.jsxs(po,{children:[e.jsx(Ce,{onClick:()=>{ce(!1),st(null)},variant:"outline",className:"rounded-xl border-[#E5E7EB] text-[#1F2937]",children:"Cancel"}),e.jsx(Ce,{onClick:Vs,className:"bg-[#06B6D4] hover:bg-[#0891B2] text-white rounded-xl",children:"Upload Photo"})]})]})}),e.jsx(Zs,{open:W,onOpenChange:ae,children:e.jsxs(er,{className:"max-w-md rounded-xl bg-white border border-[#E5E7EB]",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#1F2937]",children:"Reset Password"}),e.jsx(Hn,{className:"text-[#6B7280]",children:Se&&`Reset password for ${Se.firstName} ${Se.lastName}`})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"New Password"}),e.jsx(Et,{type:"password",value:Ie,onChange:ze=>rt(ze.target.value),placeholder:"Enter new password",className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Confirm Password"}),e.jsx(Et,{type:"password",value:Ee,onChange:ze=>Te(ze.target.value),placeholder:"Confirm new password",className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]"})]})]}),e.jsxs(po,{children:[e.jsx(Ce,{onClick:()=>{ae(!1),rt(""),Te("")},variant:"outline",className:"rounded-xl border-[#E5E7EB] text-[#1F2937]",children:"Cancel"}),e.jsx(Ce,{onClick:zs,className:"bg-[#8B5CF6] hover:bg-[#7C3AED] text-white rounded-xl",children:"Reset Password"})]})]})}),e.jsx(Zs,{open:K,onOpenChange:le,children:e.jsxs(er,{className:"max-w-2xl rounded-xl bg-white border border-[#E5E7EB]",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#1F2937]",children:"Bulk Import Students"}),e.jsx(Hn,{className:"text-[#6B7280]",children:"Import multiple students from a CSV file"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(Si,{className:"border-blue-200 bg-blue-50 rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Ga,{className:"text-blue-900",children:[e.jsx("strong",{children:"Enhanced CSV Format:"})," Student Reg (Optional - auto-generated if empty), Last Name, First Name, Other Name, Gender, Date of Birth, Parent Name, Parent Phone, Parent Email, Parent Username, Student Username, Student Email, Academic Year"]})]}),e.jsxs(Si,{className:"border-green-200 bg-green-50 rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-green-600"}),e.jsxs(Ga,{className:"text-green-900",children:[e.jsx("strong",{children:"Automatic Admission Numbers:"})," Leave the admission number column empty in your CSV and the system will automatically generate unique admission numbers in the format GRA/YYYY/####."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Select Target Class (Optional)"}),e.jsxs(Qt,{value:We?.toString()||"csv",onValueChange:ze=>Bt(ze==="csv"?void 0:parseInt(ze)),children:[e.jsx(Pt,{className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]",children:e.jsx(Tt,{placeholder:"Use Class from CSV"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"csv",children:"Use Class from CSV"}),a.map(ze=>e.jsxs(be,{value:ze.id.toString(),children:[ze.name," (",ze.level,")"]},ze.id))]})]}),We&&e.jsxs("p",{className:"text-sm text-[#6B7280]",children:["All students will be imported to: ",a.find(ze=>ze.id===We)?.name]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Select CSV File"}),e.jsx(Et,{ref:_e,type:"file",accept:".csv",onChange:ze=>et(ze.target.files?.[0]||null),className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]",disabled:Ve}),ft&&e.jsxs("p",{className:"text-sm text-[#6B7280]",children:["Selected: ",ft.name]})]}),Ve&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Import Progress"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${mt.processed/mt.total*100}%`}})}),e.jsxs("p",{className:"text-sm text-[#6B7280]",children:["Processing: ",mt.processed," / ",mt.total," students"]})]}),e.jsxs(Ce,{onClick:Na,variant:"outline",className:"w-full rounded-xl border-[#E5E7EB] text-[#1F2937]",disabled:Ve,children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download Enhanced CSV Template"]})]}),e.jsxs(po,{children:[e.jsx(Ce,{onClick:()=>{le(!1),et(null)},variant:"outline",className:"rounded-xl border-[#E5E7EB] text-[#1F2937]",children:"Cancel"}),e.jsx(Ce,{onClick:Qn,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",disabled:Ve||!ft,children:Ve?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Importing to Database..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),"Import Students to Database"]})})]})]})}),e.jsx(Zs,{open:ie,onOpenChange:se,children:e.jsxs(er,{className:"max-w-3xl rounded-xl bg-white border border-[#E5E7EB] max-h-[80vh] overflow-y-auto",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#1F2937]",children:"Import GRA JASPER (G K) Students"}),e.jsx(Hn,{className:"text-[#6B7280]",children:"Quick import of 11 students from JASPER (G K) class"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(Si,{className:"border-green-200 bg-green-50 rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-green-600"}),e.jsx(Ga,{className:"text-green-900",children:"This will prepare the data for 11 students. You'll still need to register them individually through the Add Student page to create their accounts."})]}),e.jsxs("div",{className:"bg-[#F9FAFB] p-4 rounded-xl border border-[#E5E7EB] max-h-64 overflow-y-auto",children:[e.jsx("p",{className:"text-[#1F2937] mb-2",children:"Student List Preview:"}),e.jsxs("ul",{className:"text-sm text-[#6B7280] space-y-1",children:[e.jsx("li",{children:"1. GRA/25199 - COLLINS CORREEN SETH (Parent: MANU SETH COLLINS)"}),e.jsx("li",{children:"2. GRA/25203 - KALLA TENICHA YELLE (Parent: USMAN YELLE)"}),e.jsx("li",{children:"3. GRA/25204 - ADAMS DARIUS MSHELIA (Parent: AYUBA MSHELIA ADAMS)"}),e.jsx("li",{children:"4. GRA/25205 - BITRUS HANNAH (Parent: BITRUS YAKUBU)"}),e.jsx("li",{children:"5. GRA/25207 - FABIAN TESTIMONY IFECHUKWU (Parent: CHINWEUBA FABIAN)"}),e.jsx("li",{children:"6. GRA/25208 - HARUNA AMINA (Parent: BARDE HARUNA)"}),e.jsx("li",{children:"7. GRA/25210 - KEFAS MARY (Parent: JESSE KEFAS)"}),e.jsx("li",{children:"8. GRA/25213 - CROMWELL ASHER (Parent: CROWELL BATURE)"}),e.jsx("li",{children:"9. GRA/25461 - AARON ANNABELLE ALEYIRO (Parent: AMOS AARON)"}),e.jsx("li",{children:"10. GRA/25462 - MICHAEL AUDREY (Parent: MICHEAL OTEIKWU)"}),e.jsx("li",{children:"11. GRA/25463 - BARNABAS BARUCH IBRAHIM (Parent: BARNABAS IBRAHIM)"})]})]})]}),e.jsxs(po,{children:[e.jsx(Ce,{onClick:()=>se(!1),variant:"outline",className:"rounded-xl border-[#E5E7EB] text-[#1F2937]",children:"Cancel"}),e.jsxs(Ce,{onClick:mr,className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(Qs,{className:"w-4 h-4 mr-2"}),"Copy Student List to Clipboard"]})]})]})}),e.jsx(kA,{open:T,onOpenChange:V,children:e.jsxs(UA,{className:"rounded-xl",children:[e.jsxs(IA,{children:[e.jsx(QA,{children:"Delete Student"}),e.jsxs(TA,{children:['Are you sure you want to delete "',Se?.firstName," ",Se?.lastName,'"? This will remove all their records including scores, attendance, and payments. This action cannot be undone.']})]}),e.jsxs(LA,{children:[e.jsx(RA,{className:"rounded-xl",children:"Cancel"}),e.jsx(PA,{onClick:vs,className:"bg-red-600 hover:bg-red-700 rounded-xl",children:"Delete"})]})]})}),e.jsx(Zs,{open:R,onOpenChange:q,children:e.jsxs(er,{className:"rounded-xl max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-xl text-[#0A2540]",children:"Register New Student"}),e.jsx(Hn,{className:"text-gray-600",children:"Add a new student to the school management system"})]}),e.jsx(j.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading Add Student form..."})}),children:e.jsx(vU,{onClose:()=>q(!1),onSuccess:()=>q(!1)})})]})})]})}var yp="Switch",[bU]=Rc(yp),[yU,NU]=bU(yp),jj=j.forwardRef((r,t)=>{const{__scopeSwitch:s,name:n,checked:a,defaultChecked:i,required:c,disabled:A,value:d="on",onCheckedChange:u,form:m,...f}=r,[x,g]=j.useState(null),y=Er(t,I=>g(I)),b=j.useRef(!1),B=x?m||!!x.closest("form"):!0,[N,E]=yd({prop:a,defaultProp:i??!1,onChange:u,caller:yp});return e.jsxs(yU,{scope:s,checked:N,disabled:A,children:[e.jsx(qs.button,{type:"button",role:"switch","aria-checked":N,"aria-required":c,"data-state":Ej(N),"data-disabled":A?"":void 0,disabled:A,value:d,...f,ref:y,onClick:Ks(r.onClick,I=>{E(k=>!k),B&&(b.current=I.isPropagationStopped(),b.current||I.stopPropagation())})}),B&&e.jsx(Sj,{control:x,bubbles:!b.current,name:n,value:d,checked:N,required:c,disabled:A,form:m,style:{transform:"translateX(-100%)"}})]})});jj.displayName=yp;var Bj="SwitchThumb",Cj=j.forwardRef((r,t)=>{const{__scopeSwitch:s,...n}=r,a=NU(Bj,s);return e.jsx(qs.span,{"data-state":Ej(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});Cj.displayName=Bj;var jU="SwitchBubbleInput",Sj=j.forwardRef(({__scopeSwitch:r,control:t,checked:s,bubbles:n=!0,...a},i)=>{const c=j.useRef(null),A=Er(c,i),d=G0(s),u=K0(t);return j.useEffect(()=>{const m=c.current;if(!m)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(d!==s&&g){const y=new Event("click",{bubbles:n});g.call(m,s),m.dispatchEvent(y)}},[d,s,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:A,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Sj.displayName=jU;function Ej(r){return r?"checked":"unchecked"}var BU=jj,CU=Cj;function vf({className:r,...t}){return e.jsx(BU,{"data-slot":"switch",className:ps("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:e.jsx(CU,{"data-slot":"switch-thumb",className:ps("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var Pg="rovingFocusGroup.onEntryFocus",SU={bubbles:!1,cancelable:!0},$h="RovingFocusGroup",[zx,Fj,EU]=w2($h),[FU,_j]=Rc($h,[EU]),[_U,kU]=FU($h),kj=j.forwardRef((r,t)=>e.jsx(zx.Provider,{scope:r.__scopeRovingFocusGroup,children:e.jsx(zx.Slot,{scope:r.__scopeRovingFocusGroup,children:e.jsx(UU,{...r,ref:t})})}));kj.displayName=$h;var UU=j.forwardRef((r,t)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:a=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:A,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...f}=r,x=j.useRef(null),g=Er(t,x),y=L0(i),[b,B]=yd({prop:c,defaultProp:A??null,onChange:d,caller:$h}),[N,E]=j.useState(!1),I=Ic(u),k=Fj(s),$=j.useRef(!1),[z,H]=j.useState(0);return j.useEffect(()=>{const T=x.current;if(T)return T.addEventListener(Pg,I),()=>T.removeEventListener(Pg,I)},[I]),e.jsx(_U,{scope:s,orientation:n,dir:y,loop:a,currentTabStopId:b,onItemFocus:j.useCallback(T=>B(T),[B]),onItemShiftTab:j.useCallback(()=>E(!0),[]),onFocusableItemAdd:j.useCallback(()=>H(T=>T+1),[]),onFocusableItemRemove:j.useCallback(()=>H(T=>T-1),[]),children:e.jsx(qs.div,{tabIndex:N||z===0?-1:0,"data-orientation":n,...f,ref:g,style:{outline:"none",...r.style},onMouseDown:Ks(r.onMouseDown,()=>{$.current=!0}),onFocus:Ks(r.onFocus,T=>{const V=!$.current;if(T.target===T.currentTarget&&V&&!N){const G=new CustomEvent(Pg,SU);if(T.currentTarget.dispatchEvent(G),!G.defaultPrevented){const L=k().filter(W=>W.focusable),F=L.find(W=>W.active),O=L.find(W=>W.id===b),ce=[F,O,...L].filter(Boolean).map(W=>W.ref.current);Lj(ce,m)}}$.current=!1}),onBlur:Ks(r.onBlur,()=>E(!1))})})}),Uj="RovingFocusGroupItem",Ij=j.forwardRef((r,t)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:a=!1,tabStopId:i,children:c,...A}=r,d=FA(),u=i||d,m=kU(Uj,s),f=m.currentTabStopId===u,x=Fj(s),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:b}=m;return j.useEffect(()=>{if(n)return g(),()=>y()},[n,g,y]),e.jsx(zx.ItemSlot,{scope:s,id:u,focusable:n,active:a,children:e.jsx(qs.span,{tabIndex:f?0:-1,"data-orientation":m.orientation,...A,ref:t,onMouseDown:Ks(r.onMouseDown,B=>{n?m.onItemFocus(u):B.preventDefault()}),onFocus:Ks(r.onFocus,()=>m.onItemFocus(u)),onKeyDown:Ks(r.onKeyDown,B=>{if(B.key==="Tab"&&B.shiftKey){m.onItemShiftTab();return}if(B.target!==B.currentTarget)return;const N=QU(B,m.orientation,m.dir);if(N!==void 0){if(B.metaKey||B.ctrlKey||B.altKey||B.shiftKey)return;B.preventDefault();let I=x().filter(k=>k.focusable).map(k=>k.ref.current);if(N==="last")I.reverse();else if(N==="prev"||N==="next"){N==="prev"&&I.reverse();const k=I.indexOf(B.currentTarget);I=m.loop?TU(I,k+1):I.slice(k+1)}setTimeout(()=>Lj(I))}}),children:typeof c=="function"?c({isCurrentTabStop:f,hasTabStop:b!=null}):c})})});Ij.displayName=Uj;var IU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function LU(r,t){return t!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function QU(r,t,s){const n=LU(r.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return IU[n]}function Lj(r,t=!1){const s=document.activeElement;for(const n of r)if(n===s||(n.focus({preventScroll:t}),document.activeElement!==s))return}function TU(r,t){return r.map((s,n)=>r[(t+n)%r.length])}var PU=kj,RU=Ij,Np="Tabs",[DU]=Rc(Np,[_j]),Qj=_j(),[OU,sv]=DU(Np),Tj=j.forwardRef((r,t)=>{const{__scopeTabs:s,value:n,onValueChange:a,defaultValue:i,orientation:c="horizontal",dir:A,activationMode:d="automatic",...u}=r,m=L0(A),[f,x]=yd({prop:n,onChange:a,defaultProp:i??"",caller:Np});return e.jsx(OU,{scope:s,baseId:FA(),value:f,onValueChange:x,orientation:c,dir:m,activationMode:d,children:e.jsx(qs.div,{dir:m,"data-orientation":c,...u,ref:t})})});Tj.displayName=Np;var Pj="TabsList",Rj=j.forwardRef((r,t)=>{const{__scopeTabs:s,loop:n=!0,...a}=r,i=sv(Pj,s),c=Qj(s);return e.jsx(PU,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:n,children:e.jsx(qs.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});Rj.displayName=Pj;var Dj="TabsTrigger",Oj=j.forwardRef((r,t)=>{const{__scopeTabs:s,value:n,disabled:a=!1,...i}=r,c=sv(Dj,s),A=Qj(s),d=Kj(c.baseId,n),u=Vj(c.baseId,n),m=n===c.value;return e.jsx(RU,{asChild:!0,...A,focusable:!a,active:m,children:e.jsx(qs.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...i,ref:t,onMouseDown:Ks(r.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?c.onValueChange(n):f.preventDefault()}),onKeyDown:Ks(r.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&c.onValueChange(n)}),onFocus:Ks(r.onFocus,()=>{const f=c.activationMode!=="manual";!m&&!a&&f&&c.onValueChange(n)})})})});Oj.displayName=Dj;var Mj="TabsContent",Hj=j.forwardRef((r,t)=>{const{__scopeTabs:s,value:n,forceMount:a,children:i,...c}=r,A=sv(Mj,s),d=Kj(A.baseId,n),u=Vj(A.baseId,n),m=n===A.value,f=j.useRef(m);return j.useEffect(()=>{const x=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(x)},[]),e.jsx(Ou,{present:a||m,children:({present:x})=>e.jsx(qs.div,{"data-state":m?"active":"inactive","data-orientation":A.orientation,role:"tabpanel","aria-labelledby":d,hidden:!x,id:u,tabIndex:0,...c,ref:t,style:{...r.style,animationDuration:f.current?"0s":void 0},children:x&&i})})});Hj.displayName=Mj;function Kj(r,t){return`${r}-trigger-${t}`}function Vj(r,t){return`${r}-content-${t}`}var MU=Tj,HU=Rj,KU=Oj,VU=Hj;function zj({className:r,...t}){return e.jsx(MU,{"data-slot":"tabs",className:ps("flex flex-col gap-2",r),...t})}function $j({className:r,...t}){return e.jsx(HU,{"data-slot":"tabs-list",className:ps("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",r),...t})}function jA({className:r,...t}){return e.jsx(KU,{"data-slot":"tabs-trigger",className:ps("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...t})}function ph({className:r,...t}){return e.jsx(VU,{"data-slot":"tabs-content",className:ps("flex-1 outline-none",r),...t})}function zU(){const{users:r,teachers:t,parents:s,accountants:n,classes:a,createUserAPI:i,updateUserAPI:c,deleteUserAPI:A,updateUserStatusAPI:d,resetUserPasswordAPI:u,loadUsersFromAPI:m,loadTeachersFromAPI:f,loadParentsFromAPI:x,loadAccountantsFromAPI:g,deleteTeacherAPI:y,deleteParentAPI:b,deleteAccountantAPI:B,updateTeacherStatusAPI:N,updateParentStatusAPI:E,updateAccountantStatusAPI:I}=ys(),[k,$]=j.useState(""),[z,H]=j.useState("all"),[T,V]=j.useState("all"),[G,L]=j.useState("users"),[F,O]=j.useState(!1),[P,ce]=j.useState(!1),[W,ae]=j.useState(!1),[K,le]=j.useState(!1),[ie,se]=j.useState(!1),[R,q]=j.useState(!1),[te,de]=j.useState(!1),[fe,me]=j.useState(!1),[pe,ee]=j.useState(!1),[je,Pe]=j.useState(!1),[De,nt]=j.useState(!1),[Se,X]=j.useState(!1),[Ie,rt]=j.useState(null),[Ee,Te]=j.useState(null),[dt,st]=j.useState(null),[ft,et]=j.useState(null),[it,Ue]=j.useState(!0),[We,Bt]=j.useState(!1),[mt,Me]=j.useState(!1),[Ve,wt]=j.useState({username:"",password:"",role:"teacher",linkedId:0,email:"",firstName:"",lastName:"",phone:"",address:"",occupation:"",status:"Active",gender:"",qualification:"",specialization:[],isClassTeacher:!1,assignedClassId:null,departmentId:"",alternatePhone:"",department:""}),[As,_e]=j.useState({username:"",email:"",role:"teacher",status:"Active"});j.useEffect(()=>{(async()=>{Me(!0);try{await Promise.all([m(),f(),x(),g()])}catch{he.error("Failed to load user data")}finally{Me(!1)}})()},[]);const $e=j.useMemo(()=>!r||r.length===0?[]:r.filter(Be=>{const js=(Be.username?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.email?.toLowerCase()||"").includes((k||"").toLowerCase()),rr=z==="all"||Be.role===z,Gn=T==="all"||Be.status===T;return js&&rr&&Gn}),[r,k,z,T]),gt=j.useMemo(()=>!t||t.length===0?[]:t.filter(Be=>{const js=(Be.firstName?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.lastName?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.email?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.employeeId?.toLowerCase()||"").includes((k||"").toLowerCase()),rr=T==="all"||Be.status===T;return js&&rr}),[t,k,T]),Ft=j.useMemo(()=>!s||s.length===0?[]:s.filter(Be=>{const js=(Be.firstName?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.lastName?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.email?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.phone?.toLowerCase()||"").includes((k||"").toLowerCase()),rr=T==="all"||Be.status===T;return js&&rr}),[s,k,T]),bt=j.useMemo(()=>!n||n.length===0?[]:n.filter(Be=>{const js=(Be.firstName?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.lastName?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.email?.toLowerCase()||"").includes((k||"").toLowerCase())||(Be.employeeId?.toLowerCase()||"").includes((k||"").toLowerCase()),rr=T==="all"||Be.status===T;return js&&rr}),[n,k,T]),Ot=j.useMemo(()=>{const Be=r?.length||0,js=t?.length||0,rr=s?.length||0,Gn=n?.length||0,li=r?.filter(lr=>lr.status==="Active").length||0,Wn=r?.filter(lr=>lr.status==="Inactive").length||0;return{users:{total:Be,active:li,inactive:Wn,admin:r?.filter(lr=>lr.role==="admin").length||0,teacher:r?.filter(lr=>lr.role==="teacher").length||0,accountant:r?.filter(lr=>lr.role==="accountant").length||0,parent:r?.filter(lr=>lr.role==="parent").length||0},teachers:{total:js,active:t?.filter(lr=>lr.status==="Active").length||0,inactive:t?.filter(lr=>lr.status==="Inactive").length||0},parents:{total:rr,active:s?.filter(lr=>lr.status==="Active").length||0,inactive:s?.filter(lr=>lr.status==="Inactive").length||0},accountants:{total:Gn,active:n?.filter(lr=>lr.status==="Active").length||0,inactive:n?.filter(lr=>lr.status==="Inactive").length||0}}},[r,t,s,n]),Lt=async Be=>{rt(Be),q(!0)},Vt=async()=>{if(Ie)try{const Be=await u(Ie.id);if(Be){const js=it&&We?"Email & SMS":it?"Email":We?"SMS":"not sent";he.success(`Password reset successfully for ${Ie.username}. New password: ${Be}`)}q(!1),rt(null)}catch{}},Ns=Be=>{rt(Be),se(!0)},Yt=async()=>{if(Ie)try{const Be=Ie.status==="Active"?"Inactive":"Active";if(await d(Ie.id,Be)){const rr=Ie.status==="Active"?"deactivated":"activated";he.success(`User ${Ie.username} ${rr} successfully`)}se(!1),rt(null)}catch{}},Ht=Be=>{rt(Be),_e({username:Be.username,email:Be.email,role:Be.role,status:Be.status}),ae(!0)},_t=()=>{wt({username:"",password:"",role:"teacher",linkedId:0,email:"",firstName:"",lastName:"",phone:"",address:"",occupation:"",status:"Active",gender:"",qualification:"",specialization:[],isClassTeacher:!1,assignedClassId:null,departmentId:"",alternatePhone:"",department:""}),O(!0)},Ls=async()=>{try{if(Me(!0),!Ve.username||!Ve.email||!Ve.firstName||!Ve.lastName){he.error("Please fill all required fields (username, email, first name, and last name)");return}if(!/^[a-zA-Z0-9_-]+$/.test(Ve.username.trim())){he.error("Username can only contain letters, numbers, underscores, and hyphens");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ve.email.trim())){he.error("Please enter a valid email address");return}if(!Ve.firstName||Ve.firstName.trim().length===0){he.error("First name is required");return}if(!Ve.lastName||Ve.lastName.trim().length===0){he.error("Last name is required");return}const rr=/^[a-zA-Z\s'-]+$/;if(!rr.test(Ve.firstName)||Ve.lastName&&!rr.test(Ve.lastName)){he.error("Names can only contain letters, spaces, hyphens, and apostrophes");return}if(Ve.isClassTeacher&&(!Ve.assignedClassId||Ve.assignedClassId<=0)){he.error("Please select a class for the class teacher assignment");return}const Gn={username:Ve.username.trim(),email:Ve.email.trim().toLowerCase(),firstName:Ve.firstName.trim(),lastName:Ve.lastName.trim(),role:Ve.role,password:Ve.password||Ve.role+"123",phone:Ve.phone?.trim()||"",address:Ve.address?.trim()||"",occupation:Ve.occupation?.trim()||"",status:Ve.status||"Active",gender:Ve.gender||"",qualification:Ve.qualification||"",specialization:Ve.specialization||[],isClassTeacher:Ve.isClassTeacher||!1,assignedClassId:Ve.assignedClassId||null,departmentId:Ve.departmentId||"",alternatePhone:Ve.alternatePhone||"",department:Ve.department||""};if(await i(Gn)){O(!1),wt({username:"",password:"",role:"teacher",linkedId:0,email:"",firstName:"",lastName:"",phone:"",address:"",occupation:"",status:"Active",gender:"",qualification:"",specialization:[],isClassTeacher:!1,assignedClassId:null,departmentId:"",alternatePhone:"",department:""});const Wn=Gn.password;he.success(`User created successfully! Password: ${Wn}`,{duration:1e4,action:{label:"Copy",onClick:()=>{navigator.clipboard.writeText(Wn),he.success("Password copied to clipboard")}}})}}catch(Be){console.error("Create user error:",Be),he.error(`Failed to create user: ${Be instanceof Error?Be.message:"Unknown error"}`)}finally{Me(!1)}},vs=async()=>{try{if(Me(!0),!Ie)return;await c(Ie.id,As)&&(ae(!1),rt(null),he.success("User updated successfully"))}catch(Be){console.error("Update user error:",Be),he.error(`Failed to update user: ${Be instanceof Error?Be.message:"Unknown error"}`)}finally{Me(!1)}},Gt=Be=>{rt(Be),le(!0)},Xs=async()=>{if(Ie)try{Me(!0),await A(Ie.id)&&(he.success(`User ${Ie.username} deleted successfully`),le(!1),rt(null))}catch(Be){console.error("Delete user error:",Be),he.error(`Failed to delete user: ${Be instanceof Error?Be.message:"Unknown error"}`)}finally{Me(!1)}},yt=Be=>{he.info(`Viewing details for ${Be.username}`)},Fs=()=>{he.success("User list exported")},us=Be=>{switch(Be){case"admin":return"bg-[#DC3545]";case"teacher":return"bg-[#1E90FF]";case"accountant":return"bg-[#FFC107]";case"parent":return"bg-[#28A745]";default:return"bg-[#C0C8D3]"}},Ts=Be=>{Te(Be),de(!0)},tr=Be=>{Te(Be),me(!0)},Vs=async Be=>{if(window.confirm(`Are you sure you want to delete teacher ${Be.firstName} ${Be.lastName}? This action cannot be undone.`))try{await y(Be.id)&&he.success(`Teacher ${Be.firstName} ${Be.lastName} deleted successfully`)}catch{he.error("Failed to delete teacher")}},zs=Be=>{st(Be),ee(!0)},mr=Be=>{st(Be),Pe(!0)},$n=async Be=>{if(window.confirm(`Are you sure you want to delete parent ${Be.firstName} ${Be.lastName}? This action cannot be undone.`))try{await b(Be.id)&&he.success(`Parent ${Be.firstName} ${Be.lastName} deleted successfully`)}catch{he.error("Failed to delete parent")}},Na=Be=>{et(Be),nt(!0)},Qn=Be=>{et(Be),X(!0)},ze=async Be=>{if(window.confirm(`Are you sure you want to delete accountant ${Be.firstName} ${Be.lastName}? This action cannot be undone.`))try{await B(Be.id)&&he.success(`Accountant ${Be.firstName} ${Be.lastName} deleted successfully`)}catch{he.error("Failed to delete accountant")}},ms=async Be=>{const js=Be.status==="Active"?"Inactive":"Active";try{await N(Be.id,js)&&he.success(`Teacher ${Be.firstName} ${Be.lastName} status updated to ${js}`)}catch{he.error("Failed to update teacher status")}},Cs=async Be=>{const js=Be.status==="Active"?"Inactive":"Active";try{await E(Be.id,js)&&he.success(`Parent ${Be.firstName} ${Be.lastName} status updated to ${js}`)}catch{he.error("Failed to update parent status")}},sr=async Be=>{const js=Be.status==="Active"?"Inactive":"Active";try{await I(Be.id,js)&&he.success(`Accountant ${Be.firstName} ${Be.lastName} status updated to ${js}`)}catch{he.error("Failed to update accountant status")}};return e.jsxs("div",{className:"p-6 space-y-6",children:[mt&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading user data..."})]})}),!mt&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage system users with role-based access"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ce,{onClick:_t,className:"bg-blue-600 hover:bg-blue-700 text-white rounded-xl",children:[e.jsx(il,{className:"w-4 h-4 mr-2"}),"Create User"]}),e.jsxs(Ce,{onClick:Fs,variant:"outline",className:"border-blue-600 text-blue-600 hover:bg-blue-50 rounded-xl",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),!mt&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"border-blue-200 bg-blue-50",children:e.jsx(ke,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm font-medium",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:Ot.users.total})]}),e.jsx(Qs,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(ye,{className:"border-green-200 bg-green-50",children:e.jsx(ke,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:Ot.users.active})]}),e.jsx(Ux,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(ye,{className:"border-orange-200 bg-orange-50",children:e.jsx(ke,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-600 text-sm font-medium",children:"Inactive Users"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:Ot.users.inactive})]}),e.jsx(Bh,{className:"w-8 h-8 text-orange-500"})]})})}),e.jsx(ye,{className:"border-purple-200 bg-purple-50",children:e.jsx(ke,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-600 text-sm font-medium",children:"Admin Users"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:Ot.users.admin})]}),e.jsx(e2,{className:"w-8 h-8 text-purple-500"})]})})})]}),!mt&&e.jsxs(zj,{value:G,onValueChange:L,className:"space-y-4",children:[e.jsxs($j,{className:"grid w-full grid-cols-4",children:[e.jsxs(jA,{value:"users",className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),"Users (",Ot.users.total,")"]}),e.jsxs(jA,{value:"teachers",className:"flex items-center gap-2",children:[e.jsx(Yl,{className:"w-4 h-4"}),"Teachers (",Ot.teachers.total,")"]}),e.jsxs(jA,{value:"parents",className:"flex items-center gap-2",children:[e.jsx(Qh,{className:"w-4 h-4"}),"Parents (",Ot.parents.total,")"]}),e.jsxs(jA,{value:"accountants",className:"flex items-center gap-2",children:[e.jsx(Gy,{className:"w-4 h-4"}),"Accountants (",Ot.accountants.total,")"]})]}),e.jsxs(ph,{value:"users",className:"space-y-4",children:[e.jsx(ye,{className:"border-gray-200",children:e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(ya,{className:"w-4 h-4 mr-2"}),"Primary Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Et,{value:k,onChange:Be=>$(Be.target.value),placeholder:"Search by username, email...",className:"pl-10 rounded-xl border-gray-300"})]}),e.jsx("div",{className:"flex items-center justify-center text-sm text-gray-500",children:e.jsxs("span",{className:"bg-gray-100 px-3 py-2 rounded-lg",children:[$e.length," of ",r.length," users"]})})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Bh,{className:"w-4 h-4 mr-2"}),"Secondary Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(Qt,{value:z,onValueChange:H,children:[e.jsx(Pt,{className:"rounded-xl border-gray-300",children:e.jsx(Tt,{placeholder:"Select Role"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Roles"}),e.jsx(be,{value:"admin",children:"Admin"}),e.jsx(be,{value:"teacher",children:"Teacher"}),e.jsx(be,{value:"accountant",children:"Accountant"}),e.jsx(be,{value:"parent",children:"Parent"})]})]}),e.jsxs(Qt,{value:T,onValueChange:V,children:[e.jsx(Pt,{className:"rounded-xl border-gray-300",children:e.jsx(Tt,{placeholder:"Select Status"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Status"}),e.jsx(be,{value:"Active",children:"Active"}),e.jsx(be,{value:"Inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:Ot.users.teacher}),e.jsx("div",{className:"text-xs text-gray-600",children:"Teachers"})]})]})]})]})}),e.jsxs(ye,{className:"border-gray-200",children:[e.jsx(It,{className:"border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Users (",$e.length,")"]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gray-50",children:[e.jsx(lt,{className:"text-gray-700",children:"User"}),e.jsx(lt,{className:"text-gray-700",children:"Role"}),e.jsx(lt,{className:"text-gray-700",children:"Status"}),e.jsx(lt,{className:"text-gray-700",children:"Last Login"}),e.jsx(lt,{className:"text-gray-700 text-center",children:"Actions"})]})}),e.jsx(Ln,{children:$e.length===0?e.jsx(os,{children:e.jsx(Je,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No users found matching your criteria"})}):$e.map(Be=>e.jsxs(os,{className:"hover:bg-gray-50",children:[e.jsx(Je,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:Be.username}),e.jsx("div",{className:"text-sm text-gray-500",children:Be.email})]})}),e.jsx(Je,{children:e.jsx(Ct,{className:`${us(Be.role)} text-white border-0 capitalize`,children:Be.role})}),e.jsx(Je,{children:e.jsx(Ct,{className:Be.status==="Active"?"bg-green-100 text-green-800 border-0":"bg-red-100 text-red-800 border-0",children:Be.status})}),e.jsx(Je,{className:"text-gray-500 text-sm",children:Be.last_login?new Date(Be.last_login).toLocaleDateString():"Never"}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ce,{onClick:()=>yt(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-gray-300 hover:bg-gray-100",title:"View Details",children:e.jsx(kn,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>Ht(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-blue-300 hover:bg-blue-50 text-blue-600",title:"Edit User",children:e.jsx(Gl,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>Lt(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-orange-300 hover:bg-orange-50 text-orange-600",title:"Reset Password",children:e.jsx(qy,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>Ns(Be),size:"sm",variant:"outline",className:`h-8 w-8 p-0 ${Be.status==="Active"?"border-red-300 hover:bg-red-50 text-red-600":"border-green-300 hover:bg-green-50 text-green-600"}`,title:Be.status==="Active"?"Deactivate User":"Activate User",children:e.jsx(Bh,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>Gt(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-red-300 hover:bg-red-50 text-red-600",title:"Delete User",children:e.jsx(Bi,{className:"w-4 h-4"})})]})})]},Be.id))})]})})})]})]}),e.jsx(ph,{value:"teachers",className:"space-y-4",children:e.jsxs(ye,{className:"border-gray-200",children:[e.jsx(It,{className:"border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Teachers (",gt.length,")"]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gray-50",children:[e.jsx(lt,{className:"text-gray-700",children:"Name"}),e.jsx(lt,{className:"text-gray-700",children:"Employee ID"}),e.jsx(lt,{className:"text-gray-700",children:"Email"}),e.jsx(lt,{className:"text-gray-700",children:"Phone"}),e.jsx(lt,{className:"text-gray-700",children:"Status"}),e.jsx(lt,{className:"text-gray-700 text-center",children:"Actions"})]})}),e.jsx(Ln,{children:gt.length===0?e.jsx(os,{children:e.jsx(Je,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No teachers found matching your criteria"})}):gt.map(Be=>e.jsxs(os,{className:"hover:bg-gray-50",children:[e.jsx(Je,{children:e.jsxs("div",{className:"font-medium text-gray-900",children:[Be.firstName," ",Be.lastName]})}),e.jsx(Je,{className:"text-gray-600",children:Be.employeeId}),e.jsx(Je,{className:"text-gray-600",children:Be.email}),e.jsx(Je,{className:"text-gray-600",children:Be.phone||"N/A"}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ct,{className:Be.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:Be.status}),e.jsx(vf,{checked:Be.status==="Active",onCheckedChange:()=>ms(Be),className:"ml-2"})]})}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ce,{onClick:()=>Ts(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-gray-300 hover:bg-gray-100",title:"View Details",children:e.jsx(kn,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>tr(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-blue-300 hover:bg-blue-50 text-blue-600",title:"Edit Teacher",children:e.jsx(Gl,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>Vs(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-red-300 hover:bg-red-50 text-red-600",title:"Delete Teacher",children:e.jsx(Bi,{className:"w-4 h-4"})})]})})]},Be.id))})]})})})]})}),e.jsx(ph,{value:"parents",className:"space-y-4",children:e.jsxs(ye,{className:"border-gray-200",children:[e.jsx(It,{className:"border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Parents (",Ft.length,")"]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gray-50",children:[e.jsx(lt,{className:"text-gray-700",children:"Name"}),e.jsx(lt,{className:"text-gray-700",children:"Email"}),e.jsx(lt,{className:"text-gray-700",children:"Phone"}),e.jsx(lt,{className:"text-gray-700",children:"Address"}),e.jsx(lt,{className:"text-gray-700",children:"Status"}),e.jsx(lt,{className:"text-gray-700 text-center",children:"Actions"})]})}),e.jsx(Ln,{children:Ft.length===0?e.jsx(os,{children:e.jsx(Je,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No parents found matching your criteria"})}):Ft.map(Be=>e.jsxs(os,{className:"hover:bg-gray-50",children:[e.jsx(Je,{children:e.jsxs("div",{className:"font-medium text-gray-900",children:[Be.firstName," ",Be.lastName]})}),e.jsx(Je,{className:"text-gray-600",children:Be.email}),e.jsx(Je,{className:"text-gray-600",children:Be.phone||"N/A"}),e.jsx(Je,{className:"text-gray-600",children:Be.address||"N/A"}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ct,{className:Be.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:Be.status}),e.jsx(vf,{checked:Be.status==="Active",onCheckedChange:()=>Cs(Be),className:"ml-2"})]})}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ce,{onClick:()=>zs(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-gray-300 hover:bg-gray-100",title:"View Details",children:e.jsx(kn,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>mr(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-blue-300 hover:bg-blue-50 text-blue-600",title:"Edit Parent",children:e.jsx(Gl,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>$n(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-red-300 hover:bg-red-50 text-red-600",title:"Delete Parent",children:e.jsx(Bi,{className:"w-4 h-4"})})]})})]},Be.id))})]})})})]})}),e.jsx(ph,{value:"accountants",className:"space-y-4",children:e.jsxs(ye,{className:"border-gray-200",children:[e.jsx(It,{className:"border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Accountants (",bt.length,")"]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gray-50",children:[e.jsx(lt,{className:"text-gray-700",children:"Name"}),e.jsx(lt,{className:"text-gray-700",children:"Employee ID"}),e.jsx(lt,{className:"text-gray-700",children:"Email"}),e.jsx(lt,{className:"text-gray-700",children:"Phone"}),e.jsx(lt,{className:"text-gray-700",children:"Department"}),e.jsx(lt,{className:"text-gray-700",children:"Status"}),e.jsx(lt,{className:"text-gray-700 text-center",children:"Actions"})]})}),e.jsx(Ln,{children:bt.length===0?e.jsx(os,{children:e.jsx(Je,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No accountants found matching your criteria"})}):bt.map(Be=>e.jsxs(os,{className:"hover:bg-gray-50",children:[e.jsx(Je,{children:e.jsxs("div",{className:"font-medium text-gray-900",children:[Be.firstName," ",Be.lastName]})}),e.jsx(Je,{className:"text-gray-600",children:Be.employeeId}),e.jsx(Je,{className:"text-gray-600",children:Be.email}),e.jsx(Je,{className:"text-gray-600",children:Be.phone||"N/A"}),e.jsx(Je,{className:"text-gray-600",children:Be.department||"N/A"}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ct,{className:Be.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:Be.status}),e.jsx(vf,{checked:Be.status==="Active",onCheckedChange:()=>sr(Be),className:"ml-2"})]})}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ce,{onClick:()=>Na(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-gray-300 hover:bg-gray-100",title:"View Details",children:e.jsx(kn,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>Qn(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-blue-300 hover:bg-blue-50 text-blue-600",title:"Edit Accountant",children:e.jsx(Gl,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>ze(Be),size:"sm",variant:"outline",className:"h-8 w-8 p-0 border-red-300 hover:bg-red-50 text-red-600",title:"Delete Accountant",children:e.jsx(Bi,{className:"w-4 h-4"})})]})})]},Be.id))})]})})})]})})]}),!mt&&e.jsx(Zs,{open:F,onOpenChange:O,children:e.jsxs(er,{className:"sm:max-w-md",children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Create New User"}),e.jsx(Hn,{children:"Create a new system user with role-based access."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(He,{htmlFor:"username",children:"Username *"}),e.jsx(Et,{id:"username",value:Ve.username,onChange:Be=>wt({...Ve,username:Be.target.value}),placeholder:"Enter username"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"password",children:"Password (Optional)"}),e.jsx(Et,{id:"password",type:"password",value:Ve.password,onChange:Be=>wt({...Ve,password:Be.target.value}),placeholder:`Default: ${Ve.role}123`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Leave empty to use default password: ",e.jsxs("code",{children:[Ve.role,"123"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(He,{htmlFor:"firstName",children:"First Name *"}),e.jsx(Et,{id:"firstName",value:Ve.firstName,onChange:Be=>wt({...Ve,firstName:Be.target.value}),placeholder:"First name"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(Et,{id:"lastName",value:Ve.lastName,onChange:Be=>wt({...Ve,lastName:Be.target.value}),placeholder:"Last name"})]})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"email",children:"Email *"}),e.jsx(Et,{id:"email",type:"email",value:Ve.email,onChange:Be=>wt({...Ve,email:Be.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"phone",children:"Phone"}),e.jsx(Et,{id:"phone",value:Ve.phone,onChange:Be=>wt({...Ve,phone:Be.target.value}),placeholder:"Enter phone number"})]}),Ve.role==="teacher"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(He,{htmlFor:"gender",children:"Gender"}),e.jsxs(Qt,{value:Ve.gender,onValueChange:Be=>wt({...Ve,gender:Be}),children:[e.jsx(Pt,{children:e.jsx(Tt,{placeholder:"Select gender"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"Male",children:"Male"}),e.jsx(be,{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"qualification",children:"Qualification"}),e.jsx(Et,{id:"qualification",value:Ve.qualification,onChange:Be=>wt({...Ve,qualification:Be.target.value}),placeholder:"e.g., B.Ed, M.Sc, Ph.D"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"specialization",children:"Specialization (comma-separated)"}),e.jsx(Et,{id:"specialization",value:Ve.specialization.join(", "),onChange:Be=>wt({...Ve,specialization:Be.target.value.split(",").map(js=>js.trim()).filter(js=>js)}),placeholder:"e.g., Mathematics, Physics, Chemistry"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"departmentId",children:"Department"}),e.jsxs(Qt,{value:Ve.departmentId,onValueChange:Be=>wt({...Ve,departmentId:Be}),children:[e.jsx(Pt,{children:e.jsx(Tt,{placeholder:"Select department"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"",children:"Select department"}),e.jsx(be,{value:"1",children:"Sciences"}),e.jsx(be,{value:"2",children:"Mathematics"}),e.jsx(be,{value:"3",children:"Languages"}),e.jsx(be,{value:"4",children:"Social Sciences"}),e.jsx(be,{value:"5",children:"Technical"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isClassTeacher",checked:Ve.isClassTeacher,onChange:Be=>wt({...Ve,isClassTeacher:Be.target.checked}),className:"rounded border-gray-300"}),e.jsx(He,{htmlFor:"isClassTeacher",children:"Class Teacher"})]}),Ve.isClassTeacher&&e.jsxs("div",{children:[e.jsx(He,{htmlFor:"assignedClass",children:"Assigned Class *"}),e.jsxs(Qt,{value:Ve.assignedClassId?.toString()||"",onValueChange:Be=>wt({...Ve,assignedClassId:parseInt(Be)}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900",children:e.jsx(Tt,{placeholder:"Select class"})}),e.jsxs(Rt,{className:"bg-white border-gray-200",children:[a.filter(Be=>Be.status==="Active"&&!Be.class_teacher_id).map(Be=>e.jsx(be,{value:Be.id.toString(),className:"text-gray-900",children:Be.name},Be.id)),a.filter(Be=>Be.status==="Active"&&Be.class_teacher_id).length>0&&e.jsx("div",{className:"px-2 py-1 text-xs text-gray-500 border-t",children:"Classes with teachers are hidden"})]})]})]})]}),Ve.role==="parent"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(He,{htmlFor:"address",children:"Address *"}),e.jsx(Et,{id:"address",value:Ve.address,onChange:Be=>wt({...Ve,address:Be.target.value}),placeholder:"Enter home address"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"alternatePhone",children:"Alternate Phone"}),e.jsx(Et,{id:"alternatePhone",value:Ve.alternatePhone,onChange:Be=>wt({...Ve,alternatePhone:Be.target.value}),placeholder:"Alternate contact number"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"occupation",children:"Occupation *"}),e.jsx(Et,{id:"occupation",value:Ve.occupation,onChange:Be=>wt({...Ve,occupation:Be.target.value}),placeholder:"Enter occupation"})]})]}),Ve.role==="accountant"&&e.jsxs("div",{children:[e.jsx(He,{htmlFor:"department",children:"Department"}),e.jsx(Et,{id:"department",value:Ve.department,onChange:Be=>wt({...Ve,department:Be.target.value}),placeholder:"e.g., Finance, Accounts, Bursary"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"role",children:"Role *"}),e.jsxs(Qt,{value:Ve.role,onValueChange:Be=>wt({...Ve,role:Be}),children:[e.jsx(Pt,{children:e.jsx(Tt,{placeholder:"Select role"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"admin",children:"Admin"}),e.jsx(be,{value:"teacher",children:"Teacher"}),e.jsx(be,{value:"accountant",children:"Accountant"}),e.jsx(be,{value:"parent",children:"Parent"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"status",children:"Status"}),e.jsxs(Qt,{value:Ve.status,onValueChange:Be=>wt({...Ve,status:Be}),children:[e.jsx(Pt,{children:e.jsx(Tt,{placeholder:"Select status"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"Active",children:"Active"}),e.jsx(be,{value:"Inactive",children:"Inactive"})]})]})]})]}),e.jsxs(po,{children:[e.jsx(Ce,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(Ce,{onClick:Ls,disabled:mt,children:mt?"Creating...":"Create User"})]})]})}),!mt&&e.jsx(Zs,{open:W,onOpenChange:ae,children:e.jsxs(er,{className:"sm:max-w-md",children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Edit User"}),e.jsx(Hn,{children:"Update user information and settings."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(He,{htmlFor:"edit-username",children:"Username"}),e.jsx(Et,{id:"edit-username",value:As.username,onChange:Be=>_e({...As,username:Be.target.value}),placeholder:"Enter username"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"edit-email",children:"Email"}),e.jsx(Et,{id:"edit-email",type:"email",value:As.email,onChange:Be=>_e({...As,email:Be.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"edit-role",children:"Role"}),e.jsxs(Qt,{value:As.role,onValueChange:Be=>_e({...As,role:Be}),children:[e.jsx(Pt,{children:e.jsx(Tt,{placeholder:"Select role"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"admin",children:"Admin"}),e.jsx(be,{value:"teacher",children:"Teacher"}),e.jsx(be,{value:"accountant",children:"Accountant"}),e.jsx(be,{value:"parent",children:"Parent"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"edit-status",children:"Status"}),e.jsxs(Qt,{value:As.status,onValueChange:Be=>_e({...As,status:Be}),children:[e.jsx(Pt,{children:e.jsx(Tt,{placeholder:"Select status"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"Active",children:"Active"}),e.jsx(be,{value:"Inactive",children:"Inactive"})]})]})]})]}),e.jsxs(po,{children:[e.jsx(Ce,{variant:"outline",onClick:()=>ae(!1),children:"Cancel"}),e.jsx(Ce,{onClick:vs,disabled:mt,children:mt?"Updating...":"Update User"})]})]})}),!mt&&e.jsx(kA,{open:R,onOpenChange:q,children:e.jsxs(UA,{children:[e.jsxs(IA,{children:[e.jsx(QA,{children:"Reset Password"}),e.jsxs(TA,{children:["Are you sure you want to reset the password for ",Ie?.username,"? A temporary password will be generated and shown to you."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wa,{id:"reset-email",checked:it,onCheckedChange:Be=>Ue(Be)}),e.jsx(He,{htmlFor:"reset-email",children:"Send via Email"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wa,{id:"reset-sms",checked:We,onCheckedChange:Be=>Bt(Be)}),e.jsx(He,{htmlFor:"reset-sms",children:"Send via SMS"})]})]}),e.jsxs(LA,{children:[e.jsx(RA,{children:"Cancel"}),e.jsx(PA,{onClick:Vt,children:"Reset Password"})]})]})}),!mt&&e.jsx(kA,{open:ie,onOpenChange:se,children:e.jsxs(UA,{children:[e.jsxs(IA,{children:[e.jsx(QA,{children:Ie?.status==="Active"?"Deactivate User":"Activate User"}),e.jsxs(TA,{children:["Are you sure you want to ",Ie?.status==="Active"?"deactivate":"activate"," ",Ie?.username,"?",Ie?.status==="Active"?" The user will not be able to access the system.":" The user will regain access to the system."]})]}),e.jsxs(LA,{children:[e.jsx(RA,{children:"Cancel"}),e.jsx(PA,{onClick:Yt,children:Ie?.status==="Active"?"Deactivate":"Activate"})]})]})}),!mt&&e.jsx(kA,{open:K,onOpenChange:le,children:e.jsxs(UA,{children:[e.jsxs(IA,{children:[e.jsx(QA,{children:"Delete User"}),e.jsxs(TA,{children:["Are you sure you want to delete ",Ie?.username,"? This action cannot be undone.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Warning:"})," This will permanently remove the user and all their associated data from the system.",Ie?.role==="teacher"&&" This includes all teacher records, subject assignments, and related data.",Ie?.role==="parent"&&" This includes all parent records and student links.",Ie?.role==="accountant"&&" This includes all accountant records and financial data."]})]}),e.jsxs(LA,{children:[e.jsx(RA,{disabled:mt,children:"Cancel"}),e.jsx(PA,{onClick:Xs,disabled:mt,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:mt?"Deleting...":"Delete User"})]})]})})]})}function $a({className:r,...t}){return e.jsx("textarea",{"data-slot":"textarea",className:ps("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...t})}function $U(){const{notifications:r,addNotification:t,currentUser:s,users:n}=ys(),[a,i]=j.useState({title:"",message:"",recipient:"",priority:"info"}),[c,A]=j.useState({teachers:!1,parents:!1,accountants:!1}),d=r.slice(0,10),u=r.filter(N=>{const E=new Date(Date.now()-6048e5);return new Date(N.sentDate)>=E}).length,m=r.length,f=r.reduce((N,E)=>N+E.readBy.length,0),x=r.reduce((N,E)=>{const I=E.targetAudience;return I==="all"?N+n.length:I==="teachers"?N+n.filter(k=>k.role==="teacher").length:I==="parents"?N+n.filter(k=>k.role==="parent").length:I==="accountants"?N+n.filter(k=>k.role==="accountant").length:N},0),g=x>0?Math.round(f/x*100):0,y=97,b=N=>{if(N.preventDefault(),!a.title||!a.message||!a.recipient){he.error("Please fill in all required fields");return}if(!s){he.error("You must be logged in to send notifications");return}let E="all";a.recipient==="custom"?c.teachers&&!c.parents&&!c.accountants?E="teachers":c.parents&&!c.teachers&&!c.accountants?E="parents":c.accountants&&!c.teachers&&!c.parents?E="accountants":E="all":E=a.recipient;const I={normal:"info",low:"info",high:"warning",urgent:"error"};t({title:a.title,message:a.message,type:I[a.priority]||"info",targetAudience:E,sentBy:s.id}),he.success("Notification sent successfully!"),i({title:"",message:"",recipient:"",priority:"info"}),A({teachers:!1,parents:!1,accountants:!1})},B=N=>{switch(N){case"success":return"bg-[#28A745]";case"warning":return"bg-[#FFC107]";case"error":return"bg-[#DC3545]";default:return"bg-[#1E90FF]"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-white mb-2",children:"Notification System"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"Send notifications and announcements to users"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(Uc,{className:"w-5 h-5"}),"Create New Notification"]})}),e.jsx(ke,{className:"p-6",children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Notification Title *"}),e.jsx(Et,{required:!0,value:a.title,onChange:N=>i({...a,title:N.target.value}),placeholder:"Enter notification title",className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Message *"}),e.jsx($a,{required:!0,value:a.message,onChange:N=>i({...a,message:N.target.value}),placeholder:"Enter your message here...",className:"min-h-32 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Recipients *"}),e.jsxs(Qt,{value:a.recipient,onValueChange:N=>i({...a,recipient:N}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{placeholder:"Select recipient group"})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"all",className:"text-white hover:bg-[#1E90FF]",children:"All Users"}),e.jsx(be,{value:"teachers",className:"text-white hover:bg-[#1E90FF]",children:"All Teachers"}),e.jsx(be,{value:"parents",className:"text-white hover:bg-[#1E90FF]",children:"All Parents"}),e.jsx(be,{value:"accountants",className:"text-white hover:bg-[#1E90FF]",children:"All Accountants"}),e.jsx(be,{value:"custom",className:"text-white hover:bg-[#1E90FF]",children:"Custom Selection"})]})]})]}),a.recipient==="custom"&&e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/10 space-y-3",children:[e.jsx(He,{className:"text-white",children:"Select User Roles:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wa,{id:"teachers",checked:c.teachers,onCheckedChange:N=>A({...c,teachers:N}),className:"border-white/20"}),e.jsxs(He,{htmlFor:"teachers",className:"text-white cursor-pointer flex items-center gap-2",children:[e.jsx(Yl,{className:"w-4 h-4"}),"Teachers"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wa,{id:"parents",checked:c.parents,onCheckedChange:N=>A({...c,parents:N}),className:"border-white/20"}),e.jsxs(He,{htmlFor:"parents",className:"text-white cursor-pointer flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),"Parents"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wa,{id:"accountants",checked:c.accountants,onCheckedChange:N=>A({...c,accountants:N}),className:"border-white/20"}),e.jsxs(He,{htmlFor:"accountants",className:"text-white cursor-pointer flex items-center gap-2",children:[e.jsx(Gy,{className:"w-4 h-4"}),"Accountants"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Priority Level"}),e.jsxs(Qt,{value:a.priority,onValueChange:N=>i({...a,priority:N}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"info",className:"text-white hover:bg-[#1E90FF]",children:"Info"}),e.jsx(be,{value:"warning",className:"text-white hover:bg-[#1E90FF]",children:"Warning"}),e.jsx(be,{value:"success",className:"text-white hover:bg-[#1E90FF]",children:"Success"}),e.jsx(be,{value:"error",className:"text-white hover:bg-[#1E90FF]",children:"Error"})]})]})]}),e.jsx("div",{className:"flex gap-3 pt-4",children:e.jsxs(Ce,{type:"submit",className:"flex-1 h-12 bg-[#1E90FF] hover:bg-[#00BFFF] text-white rounded-xl shadow-md hover:scale-105 transition-all",children:[e.jsx(Uc,{className:"w-5 h-5 mr-2"}),"Send Notification"]})})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(zi,{className:"w-5 h-5"}),"Recent Notifications"]})}),e.jsx(ke,{className:"p-5 space-y-3",children:d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(zi,{className:"w-12 h-12 mx-auto mb-3 text-[#C0C8D3]"}),e.jsx("p",{className:"text-white mb-1",children:"No notifications yet"}),e.jsx("p",{className:"text-sm text-[#C0C8D3]",children:"Send your first notification above"})]}):d.map(N=>e.jsxs("div",{className:"p-3 bg-[#0F243E] rounded-xl border border-white/5 hover:border-white/10 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("p",{className:"text-white text-sm",children:N.title}),e.jsx(Ct,{className:`${B(N.type)} text-white border-0 text-xs`,children:N.type})]}),e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-2 line-clamp-2",children:N.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-[#C0C8D3]",children:N.targetAudience}),e.jsx("span",{className:"text-xs text-[#C0C8D3]",children:new Date(N.sentDate).toLocaleDateString()})]})]},N.id))})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsx("h3",{className:"text-white text-sm",children:"Statistics"})}),e.jsxs(ke,{className:"p-5 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#C0C8D3]",children:"Sent This Week"}),e.jsx("span",{className:"text-white",children:u})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#C0C8D3]",children:"Total Sent"}),e.jsx("span",{className:"text-white",children:m})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#C0C8D3]",children:"Delivered"}),e.jsxs("span",{className:"text-[#28A745]",children:[y,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[#C0C8D3]",children:"Read Rate"}),e.jsxs("span",{className:"text-[#1E90FF]",children:[g,"%"]})]})]})]})]})]})]})}function GU(){const{notifications:r,addNotification:t,currentUser:s,markNotificationAsRead:n}=ys(),[a,i]=j.useState(""),[c,A]=j.useState("all"),[d,u]=j.useState("all"),[m,f]=j.useState(null),[x,g]=j.useState([]),[y,b]=j.useState(!1),[B,N]=j.useState(""),[E,I]=j.useState(null),k=r.map(O=>{const P=O.readBy.length,ce=O.type==="message"&&O.targetAudience==="admin";let W=0,ae="";return O.targetAudience==="all"?(ae="All Users",W=500):O.targetAudience==="teachers"?(ae="All Teachers",W=50):O.targetAudience==="parents"?(ae="All Parents",W=300):O.targetAudience==="students"?(ae="All Students",W=400):O.targetAudience==="accountants"?(ae="Accountants",W=5):O.targetAudience==="admin"&&(ae=ce?"Parent Message":"Admin Only",W=1),{id:O.id.toString(),title:O.title,message:O.message,type:ce?"parent_message":O.type==="info"?"announcement":O.type==="warning"?"alert":O.type==="success"?"update":"reminder",recipient:ae,recipientCount:W,sentBy:ce?"Parent":"Admin Office",sentDate:new Date(O.sentDate).toLocaleDateString(),status:"sent",readCount:P,isParentMessage:ce,originalNotification:O}}),$=k.filter(O=>{const P=O.title.toLowerCase().includes(a.toLowerCase())||O.message.toLowerCase().includes(a.toLowerCase())||O.recipient.toLowerCase().includes(a.toLowerCase()),ce=c==="all"||O.type===c,W=d==="all"||O.status===d;return P&&ce&&W}),z=O=>{switch(O){case"parent_message":return e.jsxs(Ct,{className:"bg-purple-100 text-purple-800 border-purple-300",children:[e.jsx(xo,{className:"w-3 h-3 mr-1"}),"Parent Message"]});case"announcement":return e.jsxs(Ct,{className:"bg-blue-100 text-blue-800 border-blue-300",children:[e.jsx(zi,{className:"w-3 h-3 mr-1"}),"Announcement"]});case"alert":return e.jsxs(Ct,{className:"bg-red-100 text-red-800 border-red-300",children:[e.jsx(Is,{className:"w-3 h-3 mr-1"}),"Alert"]});case"reminder":return e.jsxs(Ct,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[e.jsx(jn,{className:"w-3 h-3 mr-1"}),"Reminder"]});case"update":return e.jsxs(Ct,{className:"bg-green-100 text-green-800 border-green-300",children:[e.jsx(xo,{className:"w-3 h-3 mr-1"}),"Update"]});default:return e.jsxs(Ct,{className:"bg-gray-100 text-gray-800 border-gray-300",children:[e.jsx(zi,{className:"w-3 h-3 mr-1"}),"Unknown"]})}},H=O=>{g(P=>P.includes(O)?P.filter(ce=>ce!==O):[...P,O])},T=()=>{x.length===$.length?g([]):g($.map(O=>parseInt(O.id)))},V=()=>{confirm(`Are you sure you want to delete ${x.length} notification(s)?`)&&g([])},G=O=>{I(O),N(""),b(!0)},L=async()=>{if(!B.trim()||!E||!s){he.error("Please enter a reply message");return}try{const P=E.originalNotification.message.split(`
`)[0];await t({title:`Re: ${E.title}`,message:`Admin Reply:

${B}

---
Original Message:
${E.message}`,type:"info",targetAudience:"parents",sentBy:s.id,sentDate:new Date().toISOString(),isRead:!1,readBy:[]}),he.success("Reply sent successfully!"),b(!1),N(""),I(null)}catch{he.error("Failed to send reply. Please try again.")}},F=async O=>{if(f(O),O.readCount===0&&s)try{await n(O.originalNotification.id),he.success("Notification marked as read")}catch(P){console.error("Failed to mark notification as read:",P)}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#0A2540] mb-2",children:"Notification Archives"}),e.jsx("p",{className:"text-gray-600",children:"View and manage all sent notifications"})]}),x.length>0&&e.jsxs(Ce,{onClick:V,variant:"destructive",className:"rounded-xl",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Delete ",x.length," Selected"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Sent"}),e.jsx("p",{className:"text-[#0A2540]",children:k.filter(O=>O.status==="sent").length})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:e.jsx(zi,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Announcements"}),e.jsx("p",{className:"text-[#0A2540]",children:k.filter(O=>O.type==="announcement").length})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(xo,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Alerts"}),e.jsx("p",{className:"text-[#0A2540]",children:k.filter(O=>O.type==="alert").length})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-xl",children:e.jsx(Is,{className:"w-6 h-6 text-red-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Recipients"}),e.jsx("p",{className:"text-[#0A2540]",children:k.reduce((O,P)=>O+P.recipientCount,0)})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-purple-600"})})]})})})]}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Et,{type:"text",placeholder:"Search notifications...",value:a,onChange:O=>i(O.target.value),className:"pl-10 border-[#0A2540]/20 focus:border-[#FFD700] rounded-xl"})]}),e.jsxs(Qt,{value:c,onValueChange:A,children:[e.jsx(Pt,{className:"border-[#0A2540]/20 rounded-xl",children:e.jsx(Tt,{placeholder:"Type"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Types"}),e.jsx(be,{value:"parent_message",children:"Parent Message"}),e.jsx(be,{value:"announcement",children:"Announcement"}),e.jsx(be,{value:"alert",children:"Alert"}),e.jsx(be,{value:"reminder",children:"Reminder"}),e.jsx(be,{value:"update",children:"Update"})]})]}),e.jsxs(Qt,{value:d,onValueChange:u,children:[e.jsx(Pt,{className:"border-[#0A2540]/20 rounded-xl",children:e.jsx(Tt,{placeholder:"Status"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Status"}),e.jsx(be,{value:"sent",children:"Sent"}),e.jsx(be,{value:"draft",children:"Draft"}),e.jsx(be,{value:"scheduled",children:"Scheduled"})]})]})]})})}),e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"border-b border-[#0A2540]/10 bg-[#0A2540]/5",children:e.jsxs(Hs,{className:"text-[#0A2540]",children:["Archived Notifications (",$.length,")"]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#0A2540]/5",children:[e.jsx(lt,{className:"w-12",children:e.jsx(Wa,{checked:x.length===$.length&&$.length>0,onCheckedChange:T})}),e.jsx(lt,{className:"text-[#0A2540]",children:"Title"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Type"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Recipient"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Sent By"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Date"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Read Rate"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Actions"})]})}),e.jsx(Ln,{children:$.length===0?e.jsx(os,{children:e.jsx(Je,{colSpan:8,className:"text-center py-8 text-gray-500",children:"No notifications found"})}):$.map(O=>e.jsxs(os,{className:"hover:bg-[#0A2540]/5",children:[e.jsx(Je,{children:e.jsx(Wa,{checked:x.includes(parseInt(O.id)),onCheckedChange:()=>H(parseInt(O.id))})}),e.jsx(Je,{children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[#0A2540]",children:O.title}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:O.message})]})}),e.jsx(Je,{children:z(O.type)}),e.jsx(Je,{children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[#0A2540]",children:O.recipient}),e.jsxs("p",{className:"text-sm text-gray-500",children:[O.recipientCount," recipients"]})]})}),e.jsx(Je,{children:O.sentBy}),e.jsx(Je,{children:O.sentDate}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#FFD700] h-2 rounded-full",style:{width:`${O.readCount/O.recipientCount*100}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(O.readCount/O.recipientCount*100),"%"]})]})}),e.jsx(Je,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>F(O),className:"text-[#0A2540] hover:text-[#FFD700] hover:bg-[#FFD700]/10 rounded-xl",children:e.jsx(kn,{className:"w-4 h-4"})}),O.isParentMessage&&e.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>G(O),className:"text-purple-600 hover:text-purple-700 hover:bg-purple-100 rounded-xl",title:"Reply to parent",children:e.jsx(Zy,{className:"w-4 h-4"})})]})})]},O.id))})]})})})]}),e.jsx(Zs,{open:!!m,onOpenChange:()=>f(null),children:e.jsxs(er,{className:"max-w-2xl rounded-xl",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#0A2540]",children:m?.title}),e.jsxs(Hn,{children:["Sent to ",m?.recipient," on ",m&&new Date(m.sentDate).toLocaleDateString("en-GB")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:m&&z(m.type)}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:m?.message})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Sent By:"}),e.jsx("p",{className:"text-[#0A2540]",children:m?.sentBy})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Recipients:"}),e.jsx("p",{className:"text-[#0A2540]",children:m?.recipientCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Read Count:"}),e.jsx("p",{className:"text-[#0A2540]",children:m?.readCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Read Rate:"}),e.jsxs("p",{className:"text-[#0A2540]",children:[m&&Math.round(m.readCount/m.recipientCount*100),"%"]})]})]})]})]})}),e.jsx(Zs,{open:y,onOpenChange:b,children:e.jsxs(er,{className:"max-w-2xl rounded-xl",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#0A2540]",children:"Reply to Parent Message"}),e.jsxs(Hn,{children:["Replying to: ",E?.title]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Original Message:"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:E?.message})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"reply",className:"text-[#0A2540]",children:"Your Reply *"}),e.jsx($a,{id:"reply",value:B,onChange:O=>N(O.target.value),placeholder:"Type your reply here...",className:"min-32 rounded-xl border-[#0A2540]/20 focus:border-[#FFD700]",required:!0})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(Ce,{variant:"outline",onClick:()=>b(!1),className:"rounded-xl",children:"Cancel"}),e.jsxs(Ce,{onClick:L,className:"bg-[#FFD700] hover:bg-[#FFC700] text-[#0A2540] rounded-xl",children:[e.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Send Reply"]})]})]})]})})]})}function jp(){const{notifications:r,currentUser:t,markNotificationAsRead:s}=ys(),[n,a]=j.useState(null),i=r.filter(x=>t?x.targetAudience==="all"||x.targetAudience===t.role||t.role==="admin"&&x.targetAudience==="admin"||t.role==="accountant"&&x.targetAudience==="accountants"||t.role==="teacher"&&x.targetAudience==="teachers"||t.role==="parent"&&x.targetAudience==="parents":!1),c=i.sort((x,g)=>new Date(g.sentDate).getTime()-new Date(x.sentDate).getTime()),A=x=>x.readBy.includes(t?.id||0),d=async x=>{try{await s(x,t?.id||0),he.success("Notification marked as read")}catch{he.error("Failed to mark notification as read")}},u=(x,g)=>{if(x==="message"&&g==="admin")return e.jsxs(Ct,{className:"bg-purple-100 text-purple-800 border-purple-300",children:[e.jsx(xo,{className:"w-3 h-3 mr-1"}),"Parent Message"]});switch(x){case"info":return e.jsxs(Ct,{className:"bg-blue-100 text-blue-800 border-blue-300",children:[e.jsx(zi,{className:"w-3 h-3 mr-1"}),"Information"]});case"warning":return e.jsxs(Ct,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[e.jsx(zi,{className:"w-3 h-3 mr-1"}),"Warning"]});case"success":return e.jsxs(Ct,{className:"bg-green-100 text-green-800 border-green-300",children:[e.jsx(kr,{className:"w-3 h-3 mr-1"}),"Success"]});case"error":return e.jsxs(Ct,{className:"bg-red-100 text-red-800 border-red-300",children:[e.jsx(ll,{className:"w-3 h-3 mr-1"}),"Error"]});default:return e.jsxs(Ct,{className:"bg-gray-100 text-gray-800 border-gray-300",children:[e.jsx(zi,{className:"w-3 h-3 mr-1"}),"Notification"]})}},m=x=>{switch(x){case"all":return"All Users";case"admin":return"Admin Only";case"accountants":return"Accountants";case"teachers":return"Teachers";case"parents":return"Parents";case"students":return"Students";default:return x}},f=i.filter(x=>!A(x)).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Notifications"}),e.jsx("p",{className:"text-[#6B7280]",children:f>0?`You have ${f} unread notification${f>1?"s":""}`:"All notifications read"})]}),f>0&&e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"border-b border-[#E5E7EB] bg-[#F9FAFB] p-4",children:e.jsxs(Hs,{className:"text-[#1F2937] flex items-center gap-2",children:[e.jsx(zi,{className:"w-5 h-5"}),"Unread Notifications (",f,")"]})}),e.jsx(ke,{className:"p-4 space-y-3",children:c.filter(x=>!A(x)).map(x=>e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer",onClick:()=>a(x),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u(x.type,x.targetAudience),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.sentDate).toLocaleDateString()})]}),e.jsx("h4",{className:"font-semibold text-[#1F2937] mb-1",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:x.message})]}),e.jsxs(Ce,{size:"sm",variant:"outline",onClick:g=>{g.stopPropagation(),d(x.id)},className:"flex-shrink-0",children:[e.jsx(fo,{className:"w-4 h-4 mr-1"}),"Mark Read"]})]})},x.id))})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"border-b border-[#E5E7EB] bg-[#F9FAFB] p-4",children:e.jsxs(Hs,{className:"text-[#1F2937] flex items-center gap-2",children:[e.jsx(jn,{className:"w-5 h-5"}),"All Notifications (",i.length,")"]})}),e.jsx(ke,{className:"p-4",children:c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(zi,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No notifications found"})]}):e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${A(x)?"bg-white border-gray-200 hover:bg-gray-50":"bg-blue-50 border-blue-200 hover:bg-blue-100"}`,onClick:()=>a(x),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u(x.type,x.targetAudience),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.sentDate).toLocaleDateString()}),!A(x)&&e.jsx(Ct,{className:"bg-blue-500 text-white border-0",children:"New"})]}),e.jsx("h4",{className:"font-semibold text-[#1F2937] mb-1",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:x.message}),e.jsx("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Zl,{className:"w-3 h-3"}),"To: ",m(x.targetAudience)]})})]}),!A(x)&&e.jsxs(Ce,{size:"sm",variant:"outline",onClick:g=>{g.stopPropagation(),d(x.id)},className:"flex-shrink-0",children:[e.jsx(fo,{className:"w-4 h-4 mr-1"}),"Mark Read"]})]})},x.id))})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(ye,{className:"max-w-2xl w-full max-h-[80vh] overflow-y-auto rounded-xl",children:[e.jsxs(It,{className:"border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Hs,{className:"text-[#1F2937]",children:n.title}),e.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>a(null),children:e.jsx(ll,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u(n.type,n.targetAudience),e.jsxs("span",{className:"text-sm text-gray-500",children:[new Date(n.sentDate).toLocaleDateString()," at ",new Date(n.sentDate).toLocaleTimeString()]})]})]}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-[#1F2937] mb-2",children:"Message:"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:n.message})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Sent To:"}),e.jsx("p",{className:"text-[#1F2937]",children:m(n.targetAudience)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Status:"}),e.jsx("p",{className:"text-[#1F2937]",children:A(n)?"Read":"Unread"})]})]}),!A(n)&&e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(Ce,{onClick:()=>d(n.id),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(fo,{className:"w-4 h-4 mr-2"}),"Mark as Read"]}),e.jsx(Ce,{variant:"outline",onClick:()=>a(null),children:"Close"})]})]})})]})})]})}var WU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qU=WU.reduce((r,t)=>{const s=cp(`Primitive.${t}`),n=j.forwardRef((a,i)=>{const{asChild:c,...A}=a,d=c?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...A,ref:i})});return n.displayName=`Primitive.${t}`,{...r,[t]:n}},{}),YU="Separator",x1="horizontal",JU=["horizontal","vertical"],Gj=j.forwardRef((r,t)=>{const{decorative:s,orientation:n=x1,...a}=r,i=XU(n)?n:x1,A=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(qU.div,{"data-orientation":i,...A,...a,ref:t})});Gj.displayName=YU;function XU(r){return JU.includes(r)}var ZU=Gj;function eI({className:r,orientation:t="horizontal",decorative:s=!0,...n}){return e.jsx(ZU,{"data-slot":"separator-root",decorative:s,orientation:t,className:ps("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",r),...n})}function tI(){const{students:r,classes:t,teachers:s,currentUser:n,currentAcademicYear:a,currentTerm:i,updateCurrentTerm:c,updateCurrentAcademicYear:A,getAttendanceRequirements:d,updateAttendanceRequirements:u,loadAttendanceRequirements:m,schoolSettings:f,updateSchoolSettings:x,loadSchoolSettings:g,createUserAPI:y,resetUserPasswordAPI:b,users:B,changePassword:N}=ys(),[E,I]=j.useState({currentSession:a,currentTerm:i}),[k,$]=j.useState(d()),[z,H]=j.useState({principal_name:f.principal_name||"",principal_comment:f.principal_comment||"",head_teacher_name:f.head_teacher_name||"",head_teacher_comment:f.head_teacher_comment||"",resumption_date:f.resumption_date||""}),[T,V]=j.useState(null),[G,L]=j.useState(null),[F,O]=j.useState(""),[P,ce]=j.useState(""),W=j.useRef(null),ae=j.useRef(null),[K,le]=j.useState({schoolName:f.school_name,schoolMotto:f.school_motto,principalName:f.principal_name});j.useEffect(()=>{I({currentSession:a,currentTerm:i})},[a,i]),j.useEffect(()=>{m()},[m]),j.useEffect(()=>{$(d())},[d]),j.useEffect(()=>{le({schoolName:f.school_name,schoolMotto:f.school_motto,principalName:f.principal_name})},[f]),j.useEffect(()=>{H({principal_name:f.principal_name||"",principal_comment:f.principal_comment||"",head_teacher_name:f.head_teacher_name||"",head_teacher_comment:f.head_teacher_comment||"",resumption_date:f.resumption_date||""}),O(f.principal_signature||""),ce(f.head_teacher_signature||"")},[f]),j.useEffect(()=>{g(),m()},[]);const[ie,se]=j.useState({username:"",email:"",password:""}),[R,q]=j.useState({username:"",newPassword:""}),te=async()=>{await A(E.currentSession),await c(E.currentTerm),he.success(`Academic session and term updated to ${E.currentSession} - ${E.currentTerm}`)},de=async()=>{await x({school_name:K.schoolName,school_motto:K.schoolMotto,principal_name:K.principalName}),he.success("School branding updated successfully!")},fe=async()=>{await u(k),he.success("Attendance requirements updated successfully!")},me=async()=>{await x({principal_name:z.principal_name,head_teacher_name:z.head_teacher_name,principal_comment:z.principal_comment,head_teacher_comment:z.head_teacher_comment,resumption_date:z.resumption_date,principal_signature:F,head_teacher_signature:P}),he.success("Signature settings updated successfully!")},pe=De=>{const nt=De.target.files?.[0];if(nt)if(nt.type.startsWith("image/")){V(nt);const Se=new FileReader;Se.onload=X=>{O(X.target?.result)},Se.readAsDataURL(nt)}else he.error("Please select an image file")},ee=De=>{const nt=De.target.files?.[0];if(nt)if(nt.type.startsWith("image/")){L(nt);const Se=new FileReader;Se.onload=X=>{ce(X.target?.result)},Se.readAsDataURL(nt)}else he.error("Please select an image file")},je=async De=>{if(De.preventDefault(),B.find(Se=>Se.username===ie.username)){he.error("Username already exists. Please choose a different username.");return}await y({username:ie.username,password:ie.password,role:"admin",linkedId:0,email:ie.email,status:"Active"}),he.success("New admin account created successfully!"),se({username:"",email:"",password:""})},Pe=async()=>{if(!R.username||!R.newPassword){he.error("Please enter both username and new password");return}const De=B.find(Se=>Se.username===R.username);if(!De){he.error("User not found");return}await b(De.id,R.newPassword)?(he.success(`Password reset successful for ${R.username}!`),q({username:"",newPassword:""})):he.error("Password reset failed")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-white mb-2",children:"System Settings"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"Configure school system settings and administration"})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg max-w-4xl",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsx("h3",{className:"text-white",children:"School Branding"})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-32 h-32 rounded-xl bg-gradient-to-br from-[#1E90FF] to-[#00BFFF] flex items-center justify-center border-4 border-white/10",children:e.jsx("span",{className:"text-white text-center px-4",children:"School Logo"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white mb-3",children:"Upload School Logo"}),e.jsxs(Ce,{className:"bg-[#1E90FF] hover:bg-[#00BFFF] text-white rounded-xl shadow-md hover:scale-105 transition-all",children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),"Choose File"]}),e.jsx("p",{className:"text-xs text-[#C0C8D3] mt-2",children:"Recommended: 512x512px, PNG or JPG"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"School Name"}),e.jsx(Et,{value:K.schoolName,onChange:De=>le({...K,schoolName:De.target.value}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"School Motto"}),e.jsx(Et,{value:K.schoolMotto,onChange:De=>le({...K,schoolMotto:De.target.value}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Principal Name"}),e.jsx(Et,{value:K.principalName,onChange:De=>le({...K,principalName:De.target.value}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsxs(Ce,{onClick:de,className:"bg-[#28A745] hover:bg-[#28A745]/90 text-white rounded-xl shadow-md hover:scale-105 transition-all",children:[e.jsx(ol,{className:"w-4 h-4 mr-2"}),"Save Branding"]})]})})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg max-w-4xl",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsx("h3",{className:"text-white",children:"Academic Session & Term"})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Current Academic Session"}),e.jsxs(Qt,{value:E.currentSession,onValueChange:De=>I({...E,currentSession:De}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"2023/2024",className:"text-white hover:bg-[#1E90FF]",children:"2023/2024"}),e.jsx(be,{value:"2024/2025",className:"text-white hover:bg-[#1E90FF]",children:"2024/2025"}),e.jsx(be,{value:"2025/2026",className:"text-white hover:bg-[#1E90FF]",children:"2025/2026"}),e.jsx(be,{value:"2026/2027",className:"text-white hover:bg-[#1E90FF]",children:"2026/2027"}),e.jsx(be,{value:"2027/2028",className:"text-white hover:bg-[#1E90FF]",children:"2027/2028"}),e.jsx(be,{value:"2028/2029",className:"text-white hover:bg-[#1E90FF]",children:"2028/2029"}),e.jsx(be,{value:"2029/2030",className:"text-white hover:bg-[#1E90FF]",children:"2029/2030"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Current Term"}),e.jsxs(Qt,{value:E.currentTerm,onValueChange:De=>I({...E,currentTerm:De}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"First Term",className:"text-white hover:bg-[#1E90FF]",children:"First Term"}),e.jsx(be,{value:"Second Term",className:"text-white hover:bg-[#1E90FF]",children:"Second Term"}),e.jsx(be,{value:"Third Term",className:"text-white hover:bg-[#1E90FF]",children:"Third Term"})]})]})]})]}),e.jsx("div",{className:"p-4 bg-[#1E90FF]/10 border border-[#1E90FF] rounded-xl",children:e.jsxs("p",{className:"text-[#C0C8D3]",children:[e.jsx("strong",{className:"text-white",children:"Note:"})," Changing the session or term will affect all result entries and fee structures. Please ensure all current term results are finalized before updating."]})}),e.jsxs(Ce,{onClick:te,className:"bg-[#1E90FF] hover:bg-[#00BFFF] text-white rounded-xl shadow-md hover:scale-105 transition-all",children:[e.jsx(vu,{className:"w-4 h-4 mr-2"}),"Update Session & Term"]})]})})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg max-w-4xl",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsxs("h3",{className:"text-white flex items-center",children:[e.jsx(jn,{className:"w-5 h-5 mr-2"}),"Attendance Requirements"]})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"First Term Required Days"}),e.jsx(Et,{type:"number",min:"1",max:"200",value:k["First Term"]||"",onChange:De=>$({...k,"First Term":parseInt(De.target.value)||0}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",placeholder:"Enter required days"}),e.jsx("p",{className:"text-xs text-[#C0C8D3]",children:"Total days student must be present"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Second Term Required Days"}),e.jsx(Et,{type:"number",min:"1",max:"200",value:k["Second Term"]||"",onChange:De=>$({...k,"Second Term":parseInt(De.target.value)||0}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",placeholder:"Enter required days"}),e.jsx("p",{className:"text-xs text-[#C0C8D3]",children:"Total days student must be present"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Third Term Required Days"}),e.jsx(Et,{type:"number",min:"1",max:"200",value:k["Third Term"]||"",onChange:De=>$({...k,"Third Term":parseInt(De.target.value)||0}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",placeholder:"Enter required days"}),e.jsx("p",{className:"text-xs text-[#C0C8D3]",children:"Total days student must be present"})]})]}),e.jsx("div",{className:"p-4 bg-[#28A745]/10 border border-[#28A745] rounded-xl",children:e.jsxs("p",{className:"text-[#C0C8D3]",children:[e.jsx("strong",{className:"text-white",children:"Note:"})," These requirements are used to calculate attendance ratios in student reports. The system calculates attendance percentage as (days present / required days)  100."]})}),e.jsxs(Ce,{onClick:fe,className:"bg-[#28A745] hover:bg-[#28A745]/90 text-white rounded-xl shadow-md hover:scale-105 transition-all",children:[e.jsx(ol,{className:"w-4 h-4 mr-2"}),"Save Attendance Requirements"]})]})})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg max-w-4xl",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsxs("h3",{className:"text-white flex items-center",children:[e.jsx(Zl,{className:"w-5 h-5 mr-2"}),"Signature Settings"]})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Principal Name"}),e.jsx(Et,{value:z.principal_name,onChange:De=>H({...z,principal_name:De.target.value}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Head Teacher Name"}),e.jsx(Et,{value:z.head_teacher_name,onChange:De=>H({...z,head_teacher_name:De.target.value}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(He,{className:"text-white",children:"Principal Signature"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{ref:W,type:"file",accept:"image/*",onChange:pe,className:"hidden"}),e.jsxs(Ce,{type:"button",onClick:()=>W.current?.click(),className:"w-full bg-[#1E90FF] hover:bg-[#00BFFF] text-white rounded-xl border border-white/10",children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),"Upload Principal Signature"]}),F&&e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("img",{src:F,alt:"Principal Signature",className:"max-h-20 mx-auto"}),e.jsx("p",{className:"text-xs text-[#C0C8D3] mt-2 text-center",children:T?.name})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(He,{className:"text-white",children:"Head Teacher Signature"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{ref:ae,type:"file",accept:"image/*",onChange:ee,className:"hidden"}),e.jsxs(Ce,{type:"button",onClick:()=>ae.current?.click(),className:"w-full bg-[#1E90FF] hover:bg-[#00BFFF] text-white rounded-xl border border-white/10",children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),"Upload Head Teacher Signature"]}),P&&e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("img",{src:P,alt:"Head Teacher Signature",className:"max-h-20 mx-auto"}),e.jsx("p",{className:"text-xs text-[#C0C8D3] mt-2 text-center",children:G?.name})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Principal Default Comment"}),e.jsx("textarea",{value:z.principal_comment,onChange:De=>H({...z,principal_comment:De.target.value}),className:"w-full h-20 rounded-xl border border-white/10 bg-[#0F243E] text-white p-3 resize-none",placeholder:"Default comment for principal approval"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Head Teacher Default Comment"}),e.jsx("textarea",{value:z.head_teacher_comment,onChange:De=>H({...z,head_teacher_comment:De.target.value}),className:"w-full h-20 rounded-xl border border-white/10 bg-[#0F243E] text-white p-3 resize-none",placeholder:"Default comment for head teacher approval"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Next Term Resumption Date"}),e.jsx(Et,{type:"date",value:z.resumption_date,onChange:De=>H({...z,resumption_date:De.target.value}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsx("div",{className:"p-4 bg-[#1E90FF]/10 border border-[#1E90FF] rounded-xl",children:e.jsxs("p",{className:"text-[#C0C8D3]",children:[e.jsx("strong",{className:"text-white",children:"Note:"})," Upload signature images for report cards. Supported formats: PNG, JPG, JPEG. Signatures will appear on student result cards when printed or exported."]})}),e.jsxs(Ce,{onClick:me,className:"bg-[#1E90FF] hover:bg-[#00BFFF] text-white rounded-xl shadow-md hover:scale-105 transition-all",children:[e.jsx(ol,{className:"w-4 h-4 mr-2"}),"Save Signature Settings"]})]})})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg max-w-4xl",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsx("h3",{className:"text-white",children:"Administrator Management"})}),e.jsxs(ke,{className:"p-6",children:[e.jsxs("form",{onSubmit:je,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"New Admin Username"}),e.jsx(Et,{required:!0,value:ie.username,onChange:De=>se({...ie,username:De.target.value}),placeholder:"Enter username",className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Admin Email"}),e.jsx(Et,{required:!0,type:"email",value:ie.email,onChange:De=>se({...ie,email:De.target.value}),placeholder:"admin@gracelandgombe.edu",className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Initial Password"}),e.jsx(Et,{required:!0,type:"password",value:ie.password,onChange:De=>se({...ie,password:De.target.value}),placeholder:"Enter secure password",className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]})]}),e.jsxs(Ce,{type:"submit",className:"bg-[#28A745] hover:bg-[#28A745]/90 text-white rounded-xl shadow-md hover:scale-105 transition-all",children:[e.jsx(MA,{className:"w-4 h-4 mr-2"}),"Create Admin Account"]})]}),e.jsx(eI,{className:"my-6 bg-white/10"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-white",children:"Password Management"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"Reset password for existing users (Admin, Teacher, Accountant, Parent)"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[e.jsx(Et,{placeholder:"Enter username",value:R.username,onChange:De=>q({...R,username:De.target.value}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"}),e.jsx(Et,{type:"password",placeholder:"Enter new password",value:R.newPassword,onChange:De=>q({...R,newPassword:De.target.value}),className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsx(Ce,{onClick:Pe,className:"bg-[#FFC107] hover:bg-[#FFC107]/90 text-[#0A2540] rounded-xl shadow-md hover:scale-105 transition-all whitespace-nowrap px-6",children:"Reset Password"})]})]})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg max-w-4xl",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsx("h3",{className:"text-white",children:"System Information"})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-[#C0C8D3] mb-1",children:"System Version"}),e.jsx("p",{className:"text-white",children:"v1.0.0"})]}),e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-[#C0C8D3] mb-1",children:"Last Backup"}),e.jsx("p",{className:"text-white",children:"2024-01-15 10:30 AM"})]}),e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-[#C0C8D3] mb-1",children:"Total Users"}),e.jsx("p",{className:"text-white",children:B.length})]}),e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-[#C0C8D3] mb-1",children:"System Status"}),e.jsx("p",{className:"text-[#28A745]",children:"Operational"})]})]})})]})]})}function sI(r,t=[]){let s=[];function n(i,c){const A=j.createContext(c);A.displayName=i+"Context";const d=s.length;s=[...s,c];const u=f=>{const{scope:x,children:g,...y}=f,b=x?.[r]?.[d]||A,B=j.useMemo(()=>y,Object.values(y));return e.jsx(b.Provider,{value:B,children:g})};u.displayName=i+"Provider";function m(f,x){const g=x?.[r]?.[d]||A,y=j.useContext(g);if(y)return y;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,m]}const a=()=>{const i=s.map(c=>j.createContext(c));return function(A){const d=A?.[r]||i;return j.useMemo(()=>({[`__scope${r}`]:{...A,[r]:d}}),[A,d])}};return a.scopeName=r,[n,rI(a,...t)]}function rI(...r){const t=r[0];if(r.length===1)return t;const s=()=>{const n=r.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const c=n.reduce((A,{useScope:d,scopeName:u})=>{const f=d(i)[`__scope${u}`];return{...A,...f}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return s.scopeName=t.scopeName,s}var nI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rv=nI.reduce((r,t)=>{const s=cp(`Primitive.${t}`),n=j.forwardRef((a,i)=>{const{asChild:c,...A}=a,d=c?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...A,ref:i})});return n.displayName=`Primitive.${t}`,{...r,[t]:n}},{}),Rg={exports:{}},Dg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function aI(){if(v1)return Dg;v1=1;var r=ip();function t(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var s=typeof Object.is=="function"?Object.is:t,n=r.useState,a=r.useEffect,i=r.useLayoutEffect,c=r.useDebugValue;function A(f,x){var g=x(),y=n({inst:{value:g,getSnapshot:x}}),b=y[0].inst,B=y[1];return i(function(){b.value=g,b.getSnapshot=x,d(b)&&B({inst:b})},[f,g,x]),a(function(){return d(b)&&B({inst:b}),f(function(){d(b)&&B({inst:b})})},[f]),c(g),g}function d(f){var x=f.getSnapshot;f=f.value;try{var g=x();return!s(f,g)}catch{return!0}}function u(f,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:A;return Dg.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:m,Dg}var w1;function iI(){return w1||(w1=1,Rg.exports=aI()),Rg.exports}var oI=iI();function lI(){return oI.useSyncExternalStore(cI,()=>!0,()=>!1)}function cI(){return()=>{}}var nv="Avatar",[AI]=sI(nv),[dI,Wj]=AI(nv),qj=j.forwardRef((r,t)=>{const{__scopeAvatar:s,...n}=r,[a,i]=j.useState("idle");return e.jsx(dI,{scope:s,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(rv.span,{...n,ref:t})})});qj.displayName=nv;var Yj="AvatarImage",uI=j.forwardRef((r,t)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:a=()=>{},...i}=r,c=Wj(Yj,s),A=hI(n,i),d=Ic(u=>{a(u),c.onImageLoadingStatusChange(u)});return zn(()=>{A!=="idle"&&d(A)},[A,d]),A==="loaded"?e.jsx(rv.img,{...i,ref:t,src:n}):null});uI.displayName=Yj;var Jj="AvatarFallback",Xj=j.forwardRef((r,t)=>{const{__scopeAvatar:s,delayMs:n,...a}=r,i=Wj(Jj,s),[c,A]=j.useState(n===void 0);return j.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>A(!0),n);return()=>window.clearTimeout(d)}},[n]),c&&i.imageLoadingStatus!=="loaded"?e.jsx(rv.span,{...a,ref:t}):null});Xj.displayName=Jj;function b1(r,t){return r?t?(r.src!==t&&(r.src=t),r.complete&&r.naturalWidth>0?"loaded":"loading"):"error":"idle"}function hI(r,{referrerPolicy:t,crossOrigin:s}){const n=lI(),a=j.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[c,A]=j.useState(()=>b1(i,r));return zn(()=>{A(b1(i,r))},[i,r]),zn(()=>{const d=f=>()=>{A(f)};if(!i)return;const u=d("loaded"),m=d("error");return i.addEventListener("load",u),i.addEventListener("error",m),t&&(i.referrerPolicy=t),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",u),i.removeEventListener("error",m)}},[i,s,t]),c}var mI=qj,fI=Xj;function Sc({className:r,...t}){return e.jsx(mI,{"data-slot":"avatar",className:ps("relative flex size-10 shrink-0 overflow-hidden rounded-full",r),...t})}function Ec({className:r,...t}){return e.jsx(fI,{"data-slot":"avatar-fallback",className:ps("bg-muted flex size-full items-center justify-center rounded-full",r),...t})}function pI(){const{students:r,parents:t,linkStudentToParent:s,unlinkStudentFromParent:n,classes:a,parentStudentLinks:i}=ys(),[c,A]=j.useState(""),[d,u]=j.useState(""),[m,f]=j.useState(null),[x,g]=j.useState(null),[y,b]=j.useState("Guardian"),[B,N]=j.useState(!0),[E,I]=j.useState(!1),[k,$]=j.useState(null),z=Array.isArray(r)?r.map(P=>{const ce=Array.isArray(a)?a.find(ae=>ae.id===P.class_id):null,W=Array.isArray(t)?t.find(ae=>ae.id===P.parent_id):null;return{id:P.id,name:`${P.firstName||""} ${P.lastName||""}`.trim()||"Unknown Student",admissionNo:P.admissionNumber,class:P.className||ce?.name||"N/A",photo:P.photo_url||null,hasParent:P.parent_id!==null,parentName:W?`${W.firstName||""} ${W.lastName||""}`.trim():null}}):[],H=Array.isArray(t)?t.map(P=>{const ce=Array.isArray(i)?i.filter(W=>W.parent_id===P.id).map(W=>{const ae=Array.isArray(r)?r.find(K=>K.id===W.student_id):null;return ae?{id:ae.id,name:`${ae.firstName||""} ${ae.lastName||""}`.trim(),admissionNo:ae.admissionNumber,class:ae.className,relationship:W.relationship}:null}).filter(W=>W!==null):[];return{id:P.id,name:`${P.firstName||""} ${P.lastName||""}`.trim()||"Unknown Parent",email:P.email||"N/A",phone:P.phone||"N/A",linkedChildren:ce,linkedCount:ce.length}}):[],T=Array.isArray(z)?z.filter(P=>P.name&&P.name.toLowerCase().includes(c.toLowerCase())||P.admissionNo&&P.admissionNo.toLowerCase().includes(c.toLowerCase())||P.class&&P.class.toLowerCase().includes(c.toLowerCase())):[],V=Array.isArray(H)?H.filter(P=>P.name&&P.name.toLowerCase().includes(d.toLowerCase())||P.email&&P.email.toLowerCase().includes(d.toLowerCase())||P.phone&&P.phone.toLowerCase().includes(d.toLowerCase())):[],G=async()=>{if(!m||!x){he.error("Please select both a student and a parent");return}try{if(await s(x.id,m.id,y)){const ce=B?"  Parent will be notified":"";he.success(`${m.name} linked to ${x.name} as ${y}${ce}`,{duration:4e3}),f(null),g(null)}else he.error("Failed to link student to parent")}catch{he.error("An error occurred while linking")}},L=(P,ce,W)=>{$({parentId:P,studentId:ce,studentName:W}),I(!0)},F=async()=>{if(!k)return;const{parentId:P,studentId:ce}=k;try{await n(P,ce)?(he.success(`${k.studentName} unlinked successfully`),I(!1),$(null),x?.id===P&&g(null),m?.id===ce&&f(null)):he.error("Failed to unlink student")}catch{he.error("An error occurred while unlinking")}},O={totalStudents:Array.isArray(r)?r.length:0,linkedStudents:Array.isArray(r)?r.filter(P=>P.parent_id!==null).length:0,unlinkedStudents:Array.isArray(r)?r.filter(P=>P.parent_id===null).length:0,totalParents:Array.isArray(t)?t.length:0};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#0A2540] mb-2",children:"Link Student to Parent"}),e.jsx("p",{className:"text-gray-600",children:"Connect students with their parents/guardians for portal access"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Students"}),e.jsx("p",{className:"text-[#0A2540]",children:O.totalStudents})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Linked"}),e.jsx("p",{className:"text-[#0A2540]",children:O.linkedStudents})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:e.jsx(Cc,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Unlinked"}),e.jsx("p",{className:"text-[#0A2540]",children:O.unlinkedStudents})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-xl",children:e.jsx(Is,{className:"w-6 h-6 text-yellow-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Parents"}),e.jsx("p",{className:"text-[#0A2540]",children:O.totalParents})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:e.jsx(Qh,{className:"w-6 h-6 text-purple-600"})})]})})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"p-5 bg-[#3B82F6] rounded-t-xl",children:e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(Qs,{className:"w-5 h-5"}),"Select Student"]})}),e.jsxs(ke,{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Et,{value:c,onChange:P=>A(P.target.value),placeholder:"Search by name, admission no, or class...",className:"pl-10 rounded-xl border-[#0A2540]/20"})]}),m&&e.jsxs("div",{className:"p-4 bg-green-50 border-2 border-green-500 rounded-xl",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Sc,{className:"w-12 h-12 border-2 border-green-500",children:e.jsx(Ec,{className:"bg-green-500 text-white",children:m.name.split(" ").map(P=>P[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#0A2540] text-sm",children:m.name}),e.jsx("p",{className:"text-xs text-gray-600",children:m.admissionNo})]})]}),e.jsx(Ce,{onClick:()=>f(null),size:"sm",variant:"ghost",className:"h-8 w-8 p-0 rounded-full hover:bg-red-50",children:e.jsx(ll,{className:"w-4 h-4 text-red-600"})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Ct,{variant:"outline",className:"rounded-xl",children:m.class}),m.hasParent&&e.jsx(Ct,{className:"bg-yellow-100 text-yellow-800 rounded-xl",children:"Already Linked"})]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:T.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{children:"No students found"})]}):T.map(P=>e.jsx("button",{onClick:()=>f(P),className:`w-full p-3 rounded-xl transition-all text-left ${m?.id===P.id?"bg-green-50 border-2 border-green-500":"bg-gray-50 border border-gray-200 hover:border-blue-400 hover:bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Sc,{className:"w-10 h-10",children:e.jsx(Ec,{className:"bg-blue-500 text-white text-sm",children:P.name.split(" ").map(ce=>ce[0]).join("")})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[#0A2540] text-sm",children:P.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:"text-xs text-gray-600",children:P.admissionNo}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("p",{className:"text-xs text-gray-600",children:P.class})]}),P.hasParent&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Linked to: ",P.parentName]})]}),P.hasParent&&e.jsx(Cc,{className:"w-4 h-4 text-green-600"})]})},P.id))})]})]}),e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"p-5 bg-[#10B981] rounded-t-xl",children:e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(Qh,{className:"w-5 h-5"}),"Select Parent"]})}),e.jsxs(ke,{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Et,{value:d,onChange:P=>u(P.target.value),placeholder:"Search by name, phone, or email...",className:"pl-10 rounded-xl border-[#0A2540]/20"})]}),x&&e.jsxs("div",{className:"p-4 bg-green-50 border-2 border-green-500 rounded-xl",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Sc,{className:"w-12 h-12 border-2 border-green-500",children:e.jsx(Ec,{className:"bg-green-500 text-white",children:x.name.split(" ").map(P=>P[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#0A2540] text-sm",children:x.name}),e.jsx("p",{className:"text-xs text-gray-600",children:x.phone})]})]}),e.jsx(Ce,{onClick:()=>g(null),size:"sm",variant:"ghost",className:"h-8 w-8 p-0 rounded-full hover:bg-red-50",children:e.jsx(ll,{className:"w-4 h-4 text-red-600"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.email}),e.jsxs(Ct,{variant:"outline",className:"rounded-xl",children:[x.linkedChildren.length," child(ren) linked"]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:V.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{children:"No parents found"})]}):V.map(P=>e.jsxs("div",{children:[e.jsx("button",{onClick:()=>g(P),className:`w-full p-3 rounded-xl transition-all text-left ${x?.id===P.id?"bg-green-50 border-2 border-green-500":"bg-gray-50 border border-gray-200 hover:border-green-400 hover:bg-green-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Sc,{className:"w-10 h-10",children:e.jsx(Ec,{className:"bg-green-500 text-white text-sm",children:P.name.split(" ").map(ce=>ce[0]).join("")})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[#0A2540] text-sm",children:P.name}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:P.phone})]}),e.jsx(Ct,{variant:"outline",className:"rounded-xl text-xs",children:P.linkedChildren.length})]})}),x?.id===P.id&&P.linkedChildren.length>0&&e.jsxs("div",{className:"ml-4 mt-2 space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Currently linked children:"}),P.linkedChildren.map(ce=>e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#0A2540] text-xs",children:ce.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[ce.admissionNo,"  ",ce.class]}),e.jsx("p",{className:"text-xs text-blue-600",children:ce.relationship})]}),e.jsxs(Ce,{onClick:()=>L(P.id,ce.id,ce.name),size:"sm",className:"h-8 px-3 bg-red-600 hover:bg-red-700 text-white rounded-lg text-xs",children:[e.jsx(t2,{className:"w-3 h-3 mr-1"}),"Unlink"]})]},ce.id))]})]},P.id))})]})]})]}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(kf,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540]",children:"Relationship"}),e.jsxs(Qt,{value:y,onValueChange:P=>b(P),children:[e.jsx(Pt,{className:"w-32",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"Father",children:"Father"}),e.jsx(be,{value:"Mother",children:"Mother"}),e.jsx(be,{value:"Guardian",children:"Guardian"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540]",children:"Notify Parent of Link"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send in-app notification"})]}),e.jsx(vf,{checked:B,onCheckedChange:N})]})]}),e.jsxs(Ce,{onClick:G,disabled:!m||!x,className:"h-12 px-8 bg-[#10B981] hover:bg-[#059669] text-white rounded-xl shadow-md disabled:opacity-50",children:[e.jsx(kf,{className:"w-5 h-5 mr-2"}),"Link Selected"]})]})})}),e.jsx(kA,{open:E,onOpenChange:I,children:e.jsxs(UA,{className:"rounded-xl",children:[e.jsxs(IA,{children:[e.jsx(QA,{className:"text-[#0A2540]",children:"Unlink Child?"}),e.jsxs(TA,{children:["Are you sure you want to unlink ",e.jsx("strong",{children:k?.studentName}),"? The parent will lose access to this child's information."]})]}),e.jsxs(LA,{children:[e.jsx(RA,{className:"rounded-xl",children:"Cancel"}),e.jsx(PA,{onClick:F,className:"bg-red-600 hover:bg-red-700 rounded-xl",children:"Unlink"})]})]})})]})}function gI(){const{teachers:r,students:t,classes:s,subjects:n,subjectRegistrations:a,subjectAssignments:i,currentTerm:c,currentAcademicYear:A,addClass:d,updateClass:u,deleteClass:m,registerSubjectForClass:f,removeSubjectRegistration:x}=ys(),g=r.filter(Ee=>Ee.status==="Active"),[y,b]=j.useState(""),[B,N]=j.useState("All"),[E,I]=j.useState("All"),[k,$]=j.useState("All"),[z,H]=j.useState(!1),[T,V]=j.useState(!1),[G,L]=j.useState(!1),[F,O]=j.useState(null),[P,ce]=j.useState("grid"),[W,ae]=j.useState([]),[K,le]=j.useState([]),ie=F?t.filter(Ee=>Ee.class_id===F.id):[],se=F?a.filter(Ee=>Ee.class_id===F.id&&Ee.term===c&&Ee.academic_year===A):[],R=F?n.filter(Ee=>!se.some(Te=>Te.subject_id===Ee.id)):[],q=(Ee,Te)=>{if(Te){const dt=[...W,Ee];ae(dt),le(dt)}else{const dt=W.filter(st=>st!==Ee);ae(dt),le(dt)}},te=async()=>{if(!F||W.length===0){he.error("Please select at least one subject");return}const Ee=W.filter(ft=>se.some(et=>et.subject_id===ft&&et.class_id===F.id&&et.academic_year===A&&et.term===c)),Te=W.filter(ft=>!Ee.includes(ft));if(Ee.length>0){const ft=Ee.map(et=>n.find(Ue=>Ue.id===et)?.name||"Unknown");he.warning(`Subjects already registered: ${ft.join(", ")}`)}if(Te.length===0){he.info("No new subjects to register"),ae([]),le([]);return}let dt=0;const st=[];for(const ft of Te)try{if(await f(ft,F.id,A,c,!0))dt++;else{const it=n.find(Ue=>Ue.id===ft);st.push(it?.name||"Unknown")}}catch{const it=n.find(Ue=>Ue.id===ft);st.push(it?.name||"Unknown")}if(dt>0){const ft=st.length>0?`${dt} subjects registered successfully. ${st.length} failed.`:`${dt} subjects registered successfully for ${c} ${A}`;he.success(ft),ae([]),le([])}else st.length>0&&he.error("Failed to register subjects")},de=async Ee=>{if(!F)return;await x(Ee,F.id,A,c)&&he.success("Subject removed successfully")},fe=Ee=>{O(Ee),ce("details")},me=()=>{ce("grid"),O(null),ae([]),le([])},[pe,ee]=j.useState({name:"",section:"",capacity:"",classTeacherId:"",status:"Active",category:"",level:""}),je=(s||[]).filter(Ee=>{const Te=Ee.name.toLowerCase().includes(y.toLowerCase())||(Ee.classTeacher||"").toLowerCase().includes(y.toLowerCase()),st=(Ue=>Ue==="Primary"||Ue==="Nursery"||Ue==="Creche"?"Primary":Ue.includes("JSS")||Ue.includes("SSS")?"Secondary":"Primary")(Ee.level),ft=B==="All"||Ee.level===B,et=E==="All"||st===E,it=k==="All"||Ee.status===k;return Te&&ft&&et&&it}),Pe={totalClasses:(s||[]).length,activeClasses:(s||[]).filter(Ee=>Ee.status==="Active").length,totalStudents:(s||[]).reduce((Ee,Te)=>Ee+Te.currentStudents,0),averageCapacity:(s||[]).length>0?Math.round((s||[]).reduce((Ee,Te)=>Ee+Te.currentStudents/Te.capacity*100,0)/(s||[]).length):0},De=()=>{if(!pe.name||!pe.capacity||!pe.classTeacherId||!pe.category||!pe.level){he.error("Please fill all required fields");return}if(parseInt(pe.capacity)>50){he.error("Class capacity cannot exceed 50 students");return}const Te=g.find(st=>st.id===parseInt(pe.classTeacherId)),dt={name:pe.name,level:pe.level,category:pe.category,capacity:parseInt(pe.capacity),currentStudents:0,classTeacher:Te?`${Te.firstName} ${Te.lastName}`:"",classTeacherId:parseInt(pe.classTeacherId),section:pe.section,status:pe.status,academicYear:"2024/2025",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};d(dt),he.success(`Class "${dt.name}" created successfully!`),Ie(),H(!1)},nt=()=>{if(!F||!pe.name||!pe.capacity||!pe.classTeacherId||!pe.category||!pe.level){he.error("Please fill all required fields");return}if(parseInt(pe.capacity)>50){he.error("Class capacity cannot exceed 50 students");return}const Te=g.find(st=>st.id===parseInt(pe.classTeacherId)),dt={name:pe.name,level:pe.level,category:pe.category,capacity:parseInt(pe.capacity),classTeacher:Te?`${Te.firstName} ${Te.lastName}`:"",classTeacherId:parseInt(pe.classTeacherId),section:pe.section,status:pe.status};u(F.id,dt),he.success(`Class "${pe.name}" updated successfully!`),Ie(),H(!1),V(!1),O(null)},Se=()=>{if(F){if(F.currentStudents>0){he.error("Cannot delete class with enrolled students. Please move students first."),L(!1);return}m(F.id),he.success(`Class "${F.name}" deleted successfully!`),L(!1),O(null)}},X=Ee=>{O(Ee),ee({name:Ee.name,section:(Ee.section||"").toString(),capacity:Ee.capacity.toString(),classTeacherId:Ee.classTeacherId?.toString()||"",status:Ee.status,category:Ee.category,level:Ee.level}),V(!0),H(!0),window.scrollTo({top:0,behavior:"smooth"})},Ie=()=>{ee({name:"",section:"",capacity:"",classTeacherId:"",status:"Active",category:"",level:""}),V(!1),O(null)},rt=()=>{Ie(),H(!1)};return e.jsxs("div",{className:"p-6 space-y-6",children:[P==="grid"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#0A2540] mb-2",children:"Manage Classes"}),e.jsx("p",{className:"text-gray-600",children:"Click on a class to view details and manage subjects"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ce,{onClick:async()=>{await bj(),he.success("Classes exported to CSV successfully")},variant:"outline",className:"rounded-xl border-[#3B82F6] text-[#3B82F6] hover:bg-[#3B82F6] hover:text-white",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs(Ce,{onClick:()=>H(!0),className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(il,{className:"w-4 h-4 mr-2"}),"Create New Class"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Classes"}),e.jsx("p",{className:"text-[#0A2540]",children:Pe.totalClasses})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(Kr,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Active Classes"}),e.jsx("p",{className:"text-[#0A2540]",children:Pe.activeClasses})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:e.jsx(fo,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Students"}),e.jsx("p",{className:"text-[#0A2540]",children:Pe.totalStudents})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Avg. Capacity"}),e.jsxs("p",{className:"text-[#0A2540]",children:[Pe.averageCapacity,"%"]})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-xl",children:e.jsx(Yl,{className:"w-6 h-6 text-yellow-600"})})]})})})]}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Et,{placeholder:"Search classes...",value:y,onChange:Ee=>b(Ee.target.value),className:"pl-10 rounded-xl border-[#0A2540]/20"})]}),e.jsxs(Qt,{value:B,onValueChange:N,children:[e.jsx(Pt,{className:"rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Class Level"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"All",children:"All Levels"}),e.jsx(be,{value:"Creche",children:"Creche"}),e.jsx(be,{value:"Nursery",children:"Nursery"}),e.jsx(be,{value:"Primary",children:"Primary"}),e.jsx(be,{value:"JSS 1",children:"JSS 1"}),e.jsx(be,{value:"JSS 2",children:"JSS 2"}),e.jsx(be,{value:"JSS 3",children:"JSS 3"}),e.jsx(be,{value:"SSS 1",children:"SSS 1"}),e.jsx(be,{value:"SSS 2",children:"SSS 2"}),e.jsx(be,{value:"SSS 3",children:"SSS 3"})]})]}),e.jsxs(Qt,{value:E,onValueChange:I,children:[e.jsx(Pt,{className:"rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"School Category"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"All",children:"All Categories"}),e.jsx(be,{value:"Primary",children:"Primary School"}),e.jsx(be,{value:"Secondary",children:"Secondary School"})]})]}),e.jsxs(Qt,{value:k,onValueChange:$,children:[e.jsx(Pt,{className:"rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Status"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"All",children:"All Status"}),e.jsx(be,{value:"Active",children:"Active"}),e.jsx(be,{value:"Inactive",children:"Inactive"})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:je.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No classes found"}),e.jsxs(Ce,{onClick:()=>H(!0),className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(il,{className:"w-4 h-4 mr-2"}),"Create First Class"]})]}):je.map(Ee=>e.jsx(ye,{className:"border-[#0A2540]/10 hover:border-[#3B82F6]/30 hover:shadow-lg transition-all cursor-pointer",onClick:()=>fe(Ee),children:e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#0A2540] mb-1",children:Ee.name}),e.jsx(Ct,{variant:Ee.category==="Primary"?"default":"secondary",className:"rounded-xl mb-2",children:Ee.category==="Primary"?" Primary":" Secondary"})]}),e.jsx(Ct,{className:`rounded-xl ${Ee.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Ee.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Level:"}),e.jsx("span",{className:"font-medium",children:Ee.level})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Section:"}),e.jsx("span",{className:"font-medium",children:Ee.section||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Class Teacher:"}),e.jsx("span",{className:"font-medium",children:Ee.classTeacher||"Not Assigned"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Students:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"font-medium",children:[Ee.currentStudents,"/",Ee.capacity]})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-[#0A2540]/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:`h-2 rounded-full ${Ee.currentStudents/Ee.capacity*100>=90?"bg-red-500":Ee.currentStudents/Ee.capacity*100>=70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(Ee.currentStudents/Ee.capacity*100,100)}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600 whitespace-nowrap",children:[Math.round(Ee.currentStudents/Ee.capacity*100),"%"]})]})}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs(Ce,{size:"sm",variant:"outline",className:"flex-1 rounded-xl border-[#3B82F6] text-[#3B82F6] hover:bg-[#3B82F6] hover:text-white",onClick:Te=>{Te.stopPropagation(),fe(Ee)},children:[e.jsx(kn,{className:"w-3 h-3 mr-1"}),"View Details"]}),e.jsx(Ce,{size:"sm",variant:"ghost",className:"rounded-xl",onClick:Te=>{Te.stopPropagation(),X(Ee)},children:e.jsx(Gl,{className:"w-3 h-3"})})]})]})},Ee.id))})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Ce,{variant:"outline",onClick:me,className:"rounded-xl border-[#0A2540]/20",children:[e.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back to Classes"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#0A2540] text-2xl",children:F?.name}),e.jsx("p",{className:"text-gray-600",children:"Class Details and Subject Management"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{children:e.jsxs(Hs,{className:"text-[#0A2540] flex items-center gap-2",children:[e.jsx(Kr,{className:"w-5 h-5"}),"Class Information"]})}),e.jsxs(ke,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Class Name:"}),e.jsx("span",{className:"font-medium",children:F?.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Level:"}),e.jsx(Ct,{variant:"outline",className:"rounded-xl",children:F?.level})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx(Ct,{variant:F?.category==="Primary"?"default":"secondary",className:"rounded-xl",children:F?.category})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Section:"}),e.jsx("span",{className:"font-medium",children:F?.section||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Class Teacher:"}),e.jsx("span",{className:"font-medium",children:F?.classTeacher||"Not Assigned"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Enrollment:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"font-medium",children:[F?.currentStudents,"/",F?.capacity]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx(Ct,{className:`rounded-xl ${F?.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:F?.status})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Academic Year:"}),e.jsx("span",{className:"font-medium",children:F?.academicYear})]})]})]}),e.jsxs(ye,{className:"border-[#0A2540]/10 lg:col-span-2 shadow-lg",children:[e.jsxs(It,{className:"bg-gradient-to-r from-[#3B82F6] to-[#2563EB] text-white",children:[e.jsxs(Hs,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kc,{className:"w-5 h-5"}),e.jsx("span",{children:"Subject Registration Portal"})]}),e.jsxs(Ct,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:[c,"  ",A]})]}),e.jsxs("p",{className:"text-sm text-white/80 mt-1",children:["Register subjects for ",F?.name," - ",F?.level]})]}),e.jsxs(ke,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fo,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Registered"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:se.length}),e.jsx("p",{className:"text-xs text-green-600",children:"Subjects active"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Available"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:R.length}),e.jsx("p",{className:"text-xs text-blue-600",children:"Subjects to register"})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(il,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Selected"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:W.length}),e.jsx("p",{className:"text-xs text-purple-600",children:"Pending registration"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-[#0A2540] flex items-center gap-2",children:[e.jsx(fo,{className:"w-5 h-5 text-green-600"}),"Registered Subjects"]}),e.jsxs(Ct,{variant:"outline",className:"border-green-200 text-green-700",children:[se.length," Active"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:se.length===0?e.jsxs("div",{className:"col-span-full text-center py-8 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[e.jsx(Kr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No subjects registered yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Select subjects below to register for this class"})]}):se.map(Ee=>e.jsx("div",{className:"group relative bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"font-semibold text-green-900",children:Ee.subject_name}),e.jsx(Ct,{className:"bg-green-100 text-green-700 text-xs border-green-200",children:Ee.subject_code})]}),e.jsx("p",{className:"text-sm text-green-700",children:Ee.subject_category}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(fo,{className:"w-3 h-3 text-green-600"}),e.jsxs("span",{className:"text-xs text-green-600",children:["Registered for ",c]})]})]}),e.jsx(Ce,{size:"sm",variant:"outline",className:"rounded-lg border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>de(Ee.subject_id),title:"Remove subject",children:e.jsx(ll,{className:"w-3 h-3"})})]})},Ee.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-[#0A2540] flex items-center gap-2",children:[e.jsx(il,{className:"w-5 h-5 text-blue-600"}),"Register New Subjects"]}),K.length>0&&e.jsxs(Ct,{className:"bg-blue-100 text-blue-700 border-blue-200",children:[K.length," Selected"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto pr-2",children:R.length===0?e.jsxs("div",{className:"text-center py-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border-2 border-dashed border-blue-300",children:[e.jsx(fo,{className:"w-12 h-12 text-blue-300 mx-auto mb-3"}),e.jsx("p",{className:"text-blue-600 font-medium",children:"All subjects registered"}),e.jsx("p",{className:"text-sm text-blue-500 mt-1",children:"This class has all available subjects registered"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:R.map(Ee=>{const Te=W.includes(Ee.id),dt=K.includes(Ee.id);return e.jsx("div",{className:`group relative rounded-lg border-2 p-3 transition-all cursor-pointer hover:shadow-md ${Te?"border-blue-500 bg-blue-50 shadow-md":dt?"border-blue-300 bg-blue-50/50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Wa,{id:`subject-${Ee.id}`,checked:Te,onCheckedChange:st=>q(Ee.id,st),className:"w-4 h-4 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{htmlFor:`subject-${Ee.id}`,className:"font-semibold text-[#0A2540] cursor-pointer hover:text-blue-700 transition-colors text-sm leading-tight block",children:Ee.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-1",children:[e.jsx(Ct,{variant:"secondary",className:"text-xs px-1 py-0",children:Ee.code}),e.jsx("span",{className:"text-xs text-gray-500",children:""}),e.jsx("span",{className:"text-xs text-gray-600",children:Ee.category}),Ee.is_core&&e.jsx(Ct,{className:"bg-orange-100 text-orange-700 text-xs px-1 py-0 border-orange-200",children:"Core"})]}),dt&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-blue-600",children:[e.jsx(fo,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:"Will Register"})]})]})]})},Ee.id)})})}),W.length>0&&e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Ready to register ",W.length," subject",W.length>1?"s":""]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"These subjects will be available for student results and report cards"})]}),e.jsxs(Ce,{onClick:te,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl shadow-lg",size:"lg",children:[e.jsx(kc,{className:"w-4 h-4 mr-2"}),"Register Subjects"]})]})})]})]})]})]}),e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{children:e.jsxs(Hs,{className:"text-[#0A2540] flex items-center gap-2",children:[e.jsx(Qs,{className:"w-5 h-5"}),"Students in ",F?.name," (",ie.length,")"]})}),e.jsx(ke,{children:ie.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(MA,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-2",children:"No students enrolled in this class yet"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Students will appear here once they are enrolled"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#0A2540]/5",children:[e.jsx(lt,{className:"text-[#0A2540]",children:"Student ID"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Name"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Gender"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Date of Birth"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Admission Date"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Status"})]})}),e.jsx(Ln,{children:ie.map(Ee=>e.jsxs(os,{className:"hover:bg-[#0A2540]/5",children:[e.jsx(Je,{className:"text-[#0A2540]",children:Ee.admissionNumber}),e.jsxs(Je,{className:"text-[#0A2540]",children:[Ee.firstName," ",Ee.lastName]}),e.jsx(Je,{children:e.jsx(Ct,{variant:"outline",className:"rounded-xl",children:Ee.gender})}),e.jsx(Je,{className:"text-gray-600",children:Ee.date_of_birth}),e.jsx(Je,{className:"text-gray-600",children:Ee.admission_date}),e.jsx(Je,{children:e.jsx(Ct,{className:`rounded-xl ${Ee.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Ee.status})})]},Ee.id))})]})})})]})]}),z&&P==="grid"&&e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-lg",children:[e.jsx(It,{className:"border-b border-[#0A2540]/10 bg-[#0A2540]/5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-[#0A2540]",children:T?`Edit Class: ${F?.name}`:"Create New Class"}),e.jsx(Ce,{variant:"ghost",size:"sm",onClick:rt,className:"text-gray-500 hover:text-gray-700 rounded-xl",children:e.jsx(ll,{className:"w-4 h-4"})})]})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"School Category *"}),e.jsxs(Qt,{value:pe.category,onValueChange:Ee=>{ee({...pe,category:Ee,level:""})},children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Select school category"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"Primary",children:"Primary School"}),e.jsx(be,{value:"Secondary",children:"Secondary School"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Class Level *"}),e.jsxs(Qt,{value:pe.level,onValueChange:Ee=>{ee({...pe,level:Ee})},disabled:!pe.category,children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Select class level"})}),e.jsxs(Rt,{children:[pe.category==="Primary"&&e.jsxs(e.Fragment,{children:[e.jsx(be,{value:"Nursery 1",children:"Nursery 1"}),e.jsx(be,{value:"Nursery 2",children:"Nursery 2"}),e.jsx(be,{value:"Primary 1",children:"Primary 1"}),e.jsx(be,{value:"Primary 2",children:"Primary 2"}),e.jsx(be,{value:"Primary 3",children:"Primary 3"}),e.jsx(be,{value:"Primary 4",children:"Primary 4"}),e.jsx(be,{value:"Primary 5",children:"Primary 5"}),e.jsx(be,{value:"Primary 6",children:"Primary 6"})]}),pe.category==="Secondary"&&e.jsxs(e.Fragment,{children:[e.jsx(be,{value:"JSS 1",children:"JSS 1"}),e.jsx(be,{value:"JSS 2",children:"JSS 2"}),e.jsx(be,{value:"JSS 3",children:"JSS 3"}),e.jsx(be,{value:"SSS 1",children:"SSS 1"}),e.jsx(be,{value:"SSS 2",children:"SSS 2"}),e.jsx(be,{value:"SSS 3",children:"SSS 3"})]})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Class Name *"}),e.jsx(Et,{placeholder:"e.g., JSS 1A, SS 2B, Primary 3A",value:pe.name,onChange:Ee=>ee({...pe,name:Ee.target.value}),className:"h-12 rounded-xl border-[#0A2540]/20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Section (Optional)"}),e.jsx(Et,{placeholder:"e.g., A, B, Morning",value:pe.section,onChange:Ee=>ee({...pe,section:Ee.target.value}),className:"h-12 rounded-xl border-[#0A2540]/20"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Capacity * (Max: 50)"}),e.jsx(Et,{type:"number",placeholder:"Maximum number of students (50 max)",value:pe.capacity,onChange:Ee=>{parseInt(Ee.target.value)<=50&&ee({...pe,capacity:Ee.target.value})},max:50,className:"h-12 rounded-xl border-[#0A2540]/20"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Maximum class capacity is 50 students"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Class Teacher *"}),e.jsxs(Qt,{value:pe.classTeacherId,onValueChange:Ee=>ee({...pe,classTeacherId:Ee}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Select class teacher"})}),e.jsx(Rt,{children:g.map(Ee=>e.jsxs(be,{value:Ee.id.toString(),children:[Ee.firstName," ",Ee.lastName]},Ee.id))})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Status *"}),e.jsxs(Qt,{value:pe.status,onValueChange:Ee=>ee({...pe,status:Ee}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"Active",children:"Active"}),e.jsx(be,{value:"Inactive",children:"Inactive"})]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(Ce,{onClick:T?nt:De,className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(ol,{className:"w-4 h-4 mr-2"}),T?"Update Class":"Create Class"]}),e.jsx(Ce,{onClick:rt,variant:"outline",className:"border-[#0A2540]/20 rounded-xl",children:"Cancel"})]})]})})]}),e.jsx(kA,{open:G,onOpenChange:L,children:e.jsxs(UA,{className:"rounded-xl",children:[e.jsxs(IA,{children:[e.jsx(QA,{children:"Delete Class"}),e.jsxs(TA,{children:['Are you sure you want to delete "',F?.name,'"?',F?.currentStudents&&F.currentStudents>0?` This class has ${F.currentStudents} students enrolled.`:" This action cannot be undone."]})]}),e.jsxs(LA,{children:[e.jsx(RA,{className:"rounded-xl",children:"Cancel"}),e.jsx(PA,{onClick:Se,className:"bg-red-600 hover:bg-red-700 rounded-xl",children:"Delete"})]})]})})]})}function xI(){const{subjects:r,addSubject:t,updateSubject:s,deleteSubject:n,subjectAssignments:a}=ys(),[i,c]=j.useState(""),[A,d]=j.useState("All"),[u,m]=j.useState("All"),[f,x]=j.useState(!1),[g,y]=j.useState(!1),[b,B]=j.useState(!1),[N,E]=j.useState(!1),[I,k]=j.useState(!1),[$,z]=j.useState(!1),[H,T]=j.useState(null),[V,G]=j.useState(null),L=j.useRef(null),[F,O]=j.useState({name:"",code:"",category:"",department:"",description:"",status:"Active",isCore:!1}),P=r.filter(ee=>{const je=ee.name.toLowerCase().includes(i.toLowerCase())||ee.code.toLowerCase().includes(i.toLowerCase()),Pe=A==="All"||ee.category===A,De=u==="All"||ee.status===u;return je&&Pe&&De}),ce=["All","Creche","Nursery","Primary","JSS","SS"],W={totalSubjects:r.length,activeSubjects:r.filter(ee=>ee.status==="Active").length,coreSubjects:r.filter(ee=>ee.isCore).length,assignedSubjects:a.length},ae=ee=>a.filter(je=>je.subjectId===ee).length,K=()=>{if(!F.name||!F.code||!F.category){he.error("Please fill all required fields");return}if(r.find(Pe=>Pe.code.toLowerCase()===F.code.toLowerCase())){he.error("Subject code already exists. Please use a unique code.");return}if(r.find(Pe=>Pe.name.toLowerCase()===F.name.toLowerCase())){he.error("Subject name already exists.");return}t({name:F.name,code:F.code.toUpperCase(),category:F.category,department:F.department||F.category,description:F.description,status:F.status,isCore:F.isCore}),he.success(`Subject "${F.name}" created successfully!`),te(),x(!1)},le=()=>{if(!H||!F.name||!F.code||!F.category){he.error("Please fill all required fields");return}if(r.find(Pe=>Pe.code.toLowerCase()===F.code.toLowerCase()&&Pe.id!==H.id)){he.error("Subject code already exists. Please use a unique code.");return}if(r.find(Pe=>Pe.name.toLowerCase()===F.name.toLowerCase()&&Pe.id!==H.id)){he.error("Subject name already exists.");return}s(H.id,{name:F.name,code:F.code.toUpperCase(),category:F.category,department:F.department||F.category,description:F.description,status:F.status,isCore:F.isCore}),he.success(`Subject "${F.name}" updated successfully!`),te(),x(!1),y(!1),T(null)},ie=()=>{if(H){const ee=ae(H.id);if(ee>0){he.error(`Cannot delete subject. It is assigned to ${ee} class(es). Please remove assignments first.`),B(!1);return}n(H.id),he.success(`Subject "${H.name}" deleted successfully!`),B(!1),T(null)}},se=ee=>{T(ee),O({name:ee.name,code:ee.code,category:ee.category||"",department:ee.department,description:ee.description||"",status:ee.status,isCore:ee.isCore}),y(!0),x(!0),window.scrollTo({top:0,behavior:"smooth"})},R=ee=>{T(ee),E(!0)},q=ee=>{T(ee),B(!0)},te=()=>{O({name:"",code:"",category:"",department:"",description:"",status:"Active",isCore:!1}),y(!1),T(null)},de=()=>{te(),x(!1)},fe=()=>{const ee=[{category:"Creche",name:"Bible",type:"Bible",description:"",status:"Enabled"},{category:"Creche",name:"Numeracy",type:"Numeracy",description:"",status:"Enabled"},{category:"Creche",name:"Music",type:"Music",description:"",status:"Enabled"},{category:"Creche",name:"Shapes",type:"Shapes",description:"",status:"Enabled"},{category:"Creche",name:"Colour",type:"Colour",description:"",status:"Enabled"},{category:"Creche",name:"Literacy",type:"Literacy",description:"",status:"Enabled"},{category:"Creche",name:"Phonics",type:"Phonics",description:"",status:"Enabled"},{category:"Creche",name:"Science",type:"Science",description:"",status:"Enabled"},{category:"Creche",name:"Social Studies",type:"Social Studies",description:"",status:"Enabled"},{category:"Creche",name:"PHE",type:"PHE",description:"",status:"Enabled"},{category:"Creche",name:"Hand Writing",type:"Hand Writing",description:"",status:"Enabled"},{category:"Nursery",name:"Numeracy",type:"Mathematics",description:"",status:"Enabled"},{category:"Nursery",name:"Arts & Crafts",type:"Arts & Crafts",description:"",status:"Enabled"},{category:"Nursery",name:"Language Art",type:"Language Art",description:"",status:"Enabled"},{category:"Nursery",name:"Phonics",type:"Phonics",description:"",status:"Enabled"},{category:"Nursery",name:"Shapes",type:"Shapes",description:"",status:"Enabled"},{category:"Nursery",name:"Colour",type:"Colour",description:"",status:"Enabled"},{category:"Nursery",name:"Bible Lesson",type:"Bible Lesson",description:"",status:"Enabled"},{category:"Nursery",name:"Hand Writing",type:"Hand Writing",description:"",status:"Enabled"},{category:"Nursery",name:"Science",type:"Science",description:"",status:"Enabled"},{category:"Nursery",name:"PHE",type:"PHE",description:"",status:"Enabled"},{category:"Nursery",name:"Social Studies",type:"Social Studies",description:"",status:"Enabled"},{category:"Nursery",name:"Verbal Reasoning",type:"Verbal Reasoning",description:"",status:"Enabled"},{category:"Nursery",name:"Memory Verse",type:"Memory Verse",description:"",status:"Enabled"},{category:"Nursery",name:"Health & Safety",type:"Health & Safety",description:"",status:"Enabled"},{category:"Nursery",name:"Quantitative",type:"Quantitative",description:"",status:"Enabled"},{category:"Nursery",name:"Mathematics",type:"Mathematics",description:"",status:"Enabled"},{category:"Primary",name:"English",type:"English",description:"",status:"Enabled"},{category:"Primary",name:"Basic Science",type:"Basic Science",description:"",status:"Enabled"},{category:"Primary",name:"PHE",type:"PHE",description:"",status:"Enabled"},{category:"Primary",name:"CCA",type:"CCA",description:"",status:"Enabled"},{category:"Primary",name:"Social Civic",type:"Social Civic",description:"",status:"Enabled"},{category:"Primary",name:"Verbal Reasoning",type:"Verbal Reasoning",description:"",status:"Enabled"},{category:"Primary",name:"Quantitative",type:"Quantitative",description:"",status:"Enabled"},{category:"Primary",name:"Computer",type:"Computer",description:"",status:"Enabled"},{category:"Primary",name:"French",type:"French",description:"",status:"Enabled"},{category:"Primary",name:"Bible",type:"Bible",description:"",status:"Enabled"},{category:"Primary",name:"Hand Writing",type:"Hand Writing",description:"",status:"Enabled"},{category:"Primary",name:"Social Studies",type:"Social Studies",description:"",status:"Enabled"}],je=ee.map(Pe=>`${Pe.category} - ${Pe.name} (${Pe.type})`).join(`
`);navigator.clipboard.writeText(je).then(()=>{he.success(`${ee.length} GRA subjects list copied to clipboard!`)}),z(!1)},me=()=>{const ee=xU(),je=new Blob([ee],{type:"text/csv"}),Pe=window.URL.createObjectURL(je),De=document.createElement("a");De.href=Pe,De.download="subject_import_template.csv",De.click(),he.success("CSV template downloaded")},pe=async ee=>{if(!ee){he.error("Please select a CSV file");return}try{const je=await pU(ee);je.errors.length>0&&he.error(`Import completed with ${je.errors.length} errors`),je.valid.length>0?(he.success(`${je.valid.length} subjects imported successfully`),window.location.reload()):he.error("No valid subjects found in CSV file")}catch{he.error("Failed to import CSV file")}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#0A2540] mb-2",children:"Manage Subjects"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage school subjects"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ce,{onClick:()=>{yj(r),he.success("Subjects exported to CSV successfully")},variant:"outline",className:"rounded-xl border-[#3B82F6] text-[#3B82F6] hover:bg-[#3B82F6] hover:text-white",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs(Ce,{onClick:()=>k(!0),className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),"Bulk Import"]}),e.jsxs(Ce,{onClick:()=>z(!0),className:"bg-[#8B5CF6] hover:bg-[#7C3AED] text-white rounded-xl",children:[e.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Import GRA Subjects"]}),!f&&e.jsxs(Ce,{onClick:()=>x(!0),className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(il,{className:"w-4 h-4 mr-2"}),"Create New Subject"]})]})]}),f&&e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-lg rounded-xl",children:[e.jsx(It,{className:"border-b border-[#0A2540]/10 bg-[#0A2540]/5 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-[#0A2540]",children:g?`Edit Subject: ${H?.name}`:"Create New Subject"}),e.jsx(Ce,{variant:"ghost",size:"sm",onClick:de,className:"text-gray-500 hover:text-gray-700 rounded-xl",children:e.jsx(ll,{className:"w-4 h-4"})})]})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Subject Name *"}),e.jsx(Et,{placeholder:"e.g., Mathematics, English Language",value:F.name,onChange:ee=>O({...F,name:ee.target.value}),className:"h-12 rounded-xl border-[#0A2540]/20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Subject Code *"}),e.jsx(Et,{placeholder:"e.g., MATH101, ENG101",value:F.code,onChange:ee=>O({...F,code:ee.target.value.toUpperCase()}),className:"h-12 rounded-xl border-[#0A2540]/20"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Category *"}),e.jsxs(Qt,{value:F.category,onValueChange:ee=>O({...F,category:ee}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Select category"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"Creche",children:"Creche"}),e.jsx(be,{value:"Nursery",children:"Nursery"}),e.jsx(be,{value:"Primary",children:"Primary"}),e.jsx(be,{value:"JSS",children:"JSS (Junior Secondary)"}),e.jsx(be,{value:"SS",children:"SS (Senior Secondary)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Status *"}),e.jsxs(Qt,{value:F.status,onValueChange:ee=>O({...F,status:ee}),children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"Active",children:"Active"}),e.jsx(be,{value:"Inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#0A2540]",children:"Description"}),e.jsx($a,{placeholder:"Brief description of the subject",value:F.description,onChange:ee=>O({...F,description:ee.target.value}),className:"rounded-xl border-[#0A2540]/20",rows:3})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-blue-50 rounded-xl",children:[e.jsx(Wa,{id:"isCore",checked:F.isCore,onCheckedChange:ee=>O({...F,isCore:ee}),className:"border-[#0A2540]/20"}),e.jsx(He,{htmlFor:"isCore",className:"text-[#0A2540] cursor-pointer",children:"Mark as Core Subject (Required for all students)"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(Ce,{onClick:g?le:K,className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(ol,{className:"w-4 h-4 mr-2"}),g?"Update Subject":"Create Subject"]}),e.jsx(Ce,{onClick:de,variant:"outline",className:"border-[#0A2540]/20 rounded-xl",children:"Cancel"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"border-[#0A2540]/10 rounded-xl",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Subjects"}),e.jsx("p",{className:"text-[#0A2540]",children:W.totalSubjects})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(Kr,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10 rounded-xl",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Active Subjects"}),e.jsx("p",{className:"text-[#0A2540]",children:W.activeSubjects})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:e.jsx(fo,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10 rounded-xl",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Core Subjects"}),e.jsx("p",{className:"text-[#0A2540]",children:W.coreSubjects})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:e.jsx(Is,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10 rounded-xl",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Assignments"}),e.jsx("p",{className:"text-[#0A2540]",children:W.assignedSubjects})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-yellow-600"})})]})})})]}),e.jsx(ye,{className:"border-[#0A2540]/10 rounded-xl",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Et,{placeholder:"Search subjects...",value:i,onChange:ee=>c(ee.target.value),className:"pl-10 rounded-xl border-[#0A2540]/20"})]}),e.jsxs(Qt,{value:A,onValueChange:d,children:[e.jsx(Pt,{className:"rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"All Categories"})}),e.jsx(Rt,{children:ce.map(ee=>e.jsx(be,{value:ee,children:ee==="All"?"All Categories":ee},ee))})]}),e.jsxs(Qt,{value:u,onValueChange:m,children:[e.jsx(Pt,{className:"rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"All",children:"All Status"}),e.jsx(be,{value:"Active",children:"Active"}),e.jsx(be,{value:"Inactive",children:"Inactive"})]})]})]})})}),e.jsxs(ye,{className:"border-[#0A2540]/10 rounded-xl bg-white shadow-clinical",children:[e.jsx(It,{className:"border-b border-[#0A2540]/10 bg-[#0A2540]/5 p-5",children:e.jsxs("h3",{className:"text-[#0A2540]",children:["Subjects (",P.length,")"]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{className:"w-full min-w-[800px]",children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#2563EB] border-none hover:bg-[#2563EB]",children:[e.jsx(lt,{className:"text-white",children:"Category"}),e.jsx(lt,{className:"text-white",children:"Subject Name"}),e.jsx(lt,{className:"text-white",children:"Subject Type"}),e.jsx(lt,{className:"text-white",children:"Description"}),e.jsx(lt,{className:"text-white",children:"Status"}),e.jsx(lt,{className:"text-white text-center",children:"Action"})]})}),e.jsx(Ln,{children:P.length===0?e.jsx(os,{className:"bg-white",children:e.jsx(Je,{colSpan:6,className:"text-center py-8 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-300"}),e.jsx("p",{children:"No subjects found"}),!f&&e.jsxs(Ce,{onClick:()=>x(!0),className:"mt-2 bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(il,{className:"w-4 h-4 mr-2"}),"Create First Subject"]})]})})}):P.map(ee=>e.jsxs(os,{className:"bg-white border-b border-[#E5E7EB] hover:bg-[#F9FAFB]",children:[e.jsx(Je,{className:"text-[#1F2937]",children:ee.category||"-"}),e.jsx(Je,{className:"text-[#1F2937]",children:ee.name}),e.jsx(Je,{className:"text-[#6B7280] text-sm",children:ee.code}),e.jsx(Je,{className:"text-[#6B7280] text-sm",children:ee.description||"-"}),e.jsx(Je,{children:e.jsx(Ct,{className:`rounded-xl ${ee.status==="Active"?"bg-[#06B6D4] text-white border-0":"bg-gray-100 text-gray-800"}`,children:ee.status==="Active"?"Enabled":"Disabled"})}),e.jsx(Je,{children:e.jsxs(RN,{trigger:e.jsx(Ce,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 rounded-lg",children:e.jsx(Kr,{className:"h-3 w-3"})}),children:[e.jsxs(zl,{onClick:()=>se(ee),children:[e.jsx(Gl,{className:"h-3 w-3"}),"E"]}),e.jsxs(zl,{onClick:()=>R(ee),children:[e.jsx(kn,{className:"h-3 w-3"}),"V"]}),e.jsx(xf,{}),e.jsxs(zl,{onClick:()=>q(ee),danger:!0,children:[e.jsx(Bi,{className:"h-3 w-3"}),"D"]})]})})]},ee.id))})]})})})]}),e.jsx(Zs,{open:N,onOpenChange:E,children:e.jsxs(er,{className:"max-w-2xl rounded-xl bg-white border border-[#E5E7EB]",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#1F2937]",children:"Subject Details"}),e.jsx(Hn,{className:"text-[#6B7280]",children:"View complete information about this subject"})]}),H&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#6B7280]",children:"Subject Name"}),e.jsx("p",{className:"text-[#1F2937]",children:H.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#6B7280]",children:"Code"}),e.jsx("p",{className:"text-[#1F2937]",children:H.code})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#6B7280]",children:"Category"}),e.jsx("p",{className:"text-[#1F2937]",children:H.category||"-"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#6B7280]",children:"Status"}),e.jsx(Ct,{className:H.status==="Active"?"bg-[#10B981] text-white":"bg-[#EF4444] text-white",children:H.status})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#6B7280]",children:"Description"}),e.jsx("p",{className:"text-[#1F2937]",children:H.description||"No description provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#6B7280]",children:"Assignments"}),e.jsxs("p",{className:"text-[#1F2937]",children:[ae(H.id)," class(es)"]})]})]}),e.jsx(po,{children:e.jsx(Ce,{onClick:()=>E(!1),className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:"Close"})})]})}),e.jsx(Zs,{open:I,onOpenChange:k,children:e.jsxs(er,{className:"max-w-2xl rounded-xl bg-white border border-[#E5E7EB]",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#1F2937]",children:"Bulk Import Subjects"}),e.jsx(Hn,{className:"text-[#6B7280]",children:"Import multiple subjects from a CSV file"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(Si,{className:"border-blue-200 bg-blue-50 rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Ga,{className:"text-blue-900",children:[e.jsx("strong",{children:"CSV Format:"})," Category, Subject Name, Subject Type, Description, Status"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Select CSV File"}),e.jsx(Et,{ref:L,type:"file",accept:".csv",onChange:ee=>G(ee.target.files?.[0]||null),className:"rounded-xl border-[#E5E7EB] bg-white text-[#1F2937]"}),V&&e.jsxs("p",{className:"text-sm text-[#6B7280]",children:["Selected: ",V.name]})]}),e.jsxs(Ce,{onClick:me,variant:"outline",className:"w-full rounded-xl border-[#E5E7EB] text-[#1F2937]",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download CSV Template"]})]}),e.jsxs(po,{children:[e.jsx(Ce,{onClick:()=>{k(!1),G(null)},variant:"outline",className:"rounded-xl border-[#E5E7EB] text-[#1F2937]",children:"Cancel"}),e.jsxs(Ce,{onClick:pe,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),"Import Subjects"]})]})]})}),e.jsx(Zs,{open:$,onOpenChange:z,children:e.jsxs(er,{className:"max-w-3xl rounded-xl bg-white border border-[#E5E7EB] max-h-[80vh] overflow-y-auto",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#1F2937]",children:"Import GRA Subjects"}),e.jsx(Hn,{className:"text-[#6B7280]",children:"Quick import of subjects for Creche, Nursery, and Primary levels"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(Si,{className:"border-green-200 bg-green-50 rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-green-600"}),e.jsx(Ga,{className:"text-green-900",children:"This will prepare the subject list for 50+ subjects across Creche, Nursery, and Primary categories."})]}),e.jsxs("div",{className:"bg-[#F9FAFB] p-4 rounded-xl border border-[#E5E7EB] max-h-64 overflow-y-auto",children:[e.jsx("p",{className:"text-[#1F2937] mb-2",children:"Subject Categories Preview:"}),e.jsxs("ul",{className:"text-sm text-[#6B7280] space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Creche:"})," Bible, Numeracy, Music, Shapes, Colour, Literacy, Phonics, Science, Social Studies, PHE, Hand Writing (11 subjects)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Nursery:"})," Numeracy, Arts & Crafts, Language Art, Phonics, Shapes, Colour, Bible Lesson, Hand Writing, Science, PHE, Social Studies, Verbal Reasoning, Memory Verse, Health & Safety, Quantitative, Mathematics (16 subjects)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Primary:"})," English, Basic Science, PHE, CCA, Social Civic, Verbal Reasoning, Quantitative, Computer, French, Bible, Hand Writing, Social Studies (12 subjects)"]})]})]})]}),e.jsxs(po,{children:[e.jsx(Ce,{onClick:()=>z(!1),variant:"outline",className:"rounded-xl border-[#E5E7EB] text-[#1F2937]",children:"Cancel"}),e.jsxs(Ce,{onClick:fe,className:"bg-[#8B5CF6] hover:bg-[#7C3AED] text-white rounded-xl",children:[e.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Copy Subject List to Clipboard"]})]})]})}),e.jsx(kA,{open:b,onOpenChange:B,children:e.jsxs(UA,{className:"rounded-xl",children:[e.jsxs(IA,{children:[e.jsx(QA,{children:"Delete Subject"}),e.jsxs(TA,{children:['Are you sure you want to delete "',H?.name,'"?',H&&ae(H.id)>0?` This subject has ${ae(H.id)} class assignment(s).`:" This action cannot be undone."]})]}),e.jsxs(LA,{children:[e.jsx(RA,{className:"rounded-xl",children:"Cancel"}),e.jsx(PA,{onClick:ie,className:"bg-red-600 hover:bg-red-700 rounded-xl",children:"Delete"})]})]})})]})}function vI(){const{teachers:r,classes:t,subjects:s,subjectAssignments:n,assignSubjectToTeacherAPI:a,removeSubjectAssignmentAPI:i,currentAcademicYear:c,currentTerm:A,updateClass:d,updateTeacher:u,getTeacherAssignments:m,loadSubjectAssignmentsFromAPI:f,loadTeachersFromAPI:x,loadClassesFromAPI:g,validateClassTeacherAssignment:y}=ys(),[b,B]=j.useState(""),[N,E]=j.useState("All"),[I,k]=j.useState("All"),[$,z]=j.useState("table"),[H,T]=j.useState(!1),[V,G]=j.useState(!1),[L,F]=j.useState(null),[O,P]=j.useState([]),[ce,W]=j.useState(""),[ae,K]=j.useState([]),[le,ie]=j.useState(!1),se={totalAssignments:n?n.filter(ee=>ee.status==="Active").length:0,uniqueTeachers:n?new Set(n.map(ee=>ee.teacher_id)).size:0,uniqueSubjects:n?new Set(n.map(ee=>ee.subject_id)).size:0,uniqueClasses:n?new Set(n.map(ee=>ee.class_id)).size:0,classTeachersWithAssignments:t?t.filter(ee=>ee.classTeacherId).length:0},R=n?n.filter(ee=>{const je=b===""||ee.teacher_name?.toLowerCase().includes(b.toLowerCase())||ee.subject_name?.toLowerCase().includes(b.toLowerCase())||ee.class_name?.toLowerCase().includes(b.toLowerCase()),Pe=N==="All"||ee.teacher_id===parseInt(N),De=I==="All"||ee.class_id===parseInt(I);return je&&Pe&&De&&ee.status==="Active"}):[],q=(ee,je,Pe,De)=>{const nt={id:Date.now().toString(),action:ee,teacherName:je,details:Pe,timestamp:new Date,type:De};K(Se=>[nt,...Se].slice(0,10))},te=()=>{P([]),F(null),T(!0)},de=(ee,je)=>{const Pe=O.some(De=>De.subject_id===ee&&De.class_id===je);P(Pe?O.filter(De=>!(De.subject_id===ee&&De.class_id===je)):[...O,{subject_id:ee,class_id:je}])},fe=async()=>{if(!L||O.length===0){he.error("Please select a teacher and at least one assignment");return}ie(!0);try{let ee=0,je=0;for(const Pe of O)if(!n?.some(nt=>nt.teacher_id===L&&nt.subject_id===Pe.subject_id&&nt.class_id===Pe.class_id&&nt.term===A&&nt.academic_year===c))if(await a(L,Pe.subject_id,Pe.class_id,c,A)){ee++;const Se=r?.find(rt=>rt.id===L),X=s?.find(rt=>rt.id===Pe.subject_id),Ie=t?.find(rt=>rt.id===Pe.class_id);q("Subject Assigned",`${Se?.firstName} ${Se?.lastName}`,`${X?.name} assigned to ${Ie?.name}`,"assignment")}else je++;ee>0&&(he.success(`${ee} assignments created successfully`),P([]),F(null),T(!1)),je>0&&he.error(`${je} assignments failed - some may already exist`)}catch{he.error("An error occurred while saving assignments")}finally{ie(!1)}},me=()=>{F(null),W(""),G(!0)},pe=async()=>{if(!L||!ce){he.error("Please select both teacher and class");return}const ee=r?.find(Pe=>Pe.id===L),je=t?.find(Pe=>Pe.id===parseInt(ce));if(!(!ee||!je)){if(je.classTeacherId&&je.classTeacherId!==L){const Pe=r?.find(De=>De.id===je.classTeacherId);he.error(`${je.name} already has a class teacher: ${Pe?.firstName} ${Pe?.lastName}`);return}try{await d(parseInt(ce),{classTeacherId:L,classTeacher:`${ee.firstName} ${ee.lastName}`}),await u(L,{is_class_teacher:!0}),he.success(`${ee.firstName} ${ee.lastName} assigned as class teacher of ${je.name}`),q("Class Teacher Assigned",`${ee.firstName} ${ee.lastName}`,`Assigned as class teacher to ${je.name}`,"class_teacher"),F(null),W(""),G(!1)}catch{he.error("An error occurred while assigning class teacher")}}};return j.useEffect(()=>{(async()=>{ie(!0);try{await Promise.all([f(),x(),g()])}catch{he.error("Failed to load data")}finally{ie(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30",children:[e.jsx("div",{className:"bg-white border-b border-gray-200/80 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(Qh,{className:"w-6 h-6 text-white"})}),"Teacher Assignments"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage subject assignments and class teacher roles"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Ce,{onClick:te,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 px-6",children:[e.jsx(il,{className:"w-4 h-4 mr-2"}),"New Assignment"]}),e.jsxs(Ce,{onClick:me,variant:"outline",className:"border-gray-300 hover:bg-gray-50 transition-all duration-200 px-6",children:[e.jsx(Qh,{className:"w-4 h-4 mr-2"}),"Class Teachers"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(ye,{className:"bg-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 rounded-2xl overflow-hidden",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Assignments"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:se.totalAssignments}),e.jsxs("p",{className:"text-xs text-green-600 mt-2 flex items-center",children:[e.jsx(l4,{className:"w-3 h-3 mr-1"}),"Active this term"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(Kr,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(ye,{className:"bg-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 rounded-2xl overflow-hidden",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Active Teachers"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:se.uniqueTeachers}),e.jsxs("p",{className:"text-xs text-purple-600 mt-2 flex items-center",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1"}),"With assignments"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx(ye,{className:"bg-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 rounded-2xl overflow-hidden",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Subjects Covered"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:se.uniqueSubjects}),e.jsxs("p",{className:"text-xs text-orange-600 mt-2 flex items-center",children:[e.jsx(kc,{className:"w-3 h-3 mr-1"}),"Across curriculum"]})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:e.jsx(kc,{className:"w-6 h-6 text-orange-600"})})]})})}),e.jsx(ye,{className:"bg-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 rounded-2xl overflow-hidden",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Classes Served"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:se.uniqueClasses}),e.jsxs("p",{className:"text-xs text-green-600 mt-2 flex items-center",children:[e.jsx(jn,{className:"w-3 h-3 mr-1"}),"All levels"]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(jn,{className:"w-6 h-6 text-green-600"})})]})})})]}),e.jsx(ye,{className:"bg-white border-0 shadow-lg rounded-2xl mb-8",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(Et,{placeholder:"Search by teacher, subject, or class...",value:b,onChange:ee=>B(ee.target.value),className:"pl-10 h-12 rounded-xl border-gray-200 focus:border-blue-500 focus:ring-blue-500/20"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Qt,{value:N,onValueChange:E,children:[e.jsx(Pt,{className:"w-48 h-12 rounded-xl border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zl,{className:"w-4 h-4 text-gray-400"}),e.jsx(Tt,{placeholder:"All Teachers"})]})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"All",children:"All Teachers"}),r?.map(ee=>e.jsxs(be,{value:ee.id.toString(),children:[ee.firstName," ",ee.lastName]},ee.id))]})]}),e.jsxs(Qt,{value:I,onValueChange:k,children:[e.jsx(Pt,{className:"w-48 h-12 rounded-xl border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_w,{className:"w-4 h-4 text-gray-400"}),e.jsx(Tt,{placeholder:"All Classes"})]})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"All",children:"All Classes"}),t?.map(ee=>e.jsx(be,{value:ee.id.toString(),children:ee.name},ee.id))]})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[e.jsx(Ce,{variant:$==="table"?"default":"ghost",size:"sm",onClick:()=>z("table"),className:`rounded-lg ${$==="table"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:e.jsx(Yy,{className:"w-4 h-4"})}),e.jsx(Ce,{variant:$==="grid"?"default":"ghost",size:"sm",onClick:()=>z("grid"),className:`rounded-lg ${$==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"}`,children:e.jsx(_w,{className:"w-4 h-4"})})]})]})]})})}),$==="table"?e.jsxs(ye,{className:"bg-white border-0 shadow-lg rounded-2xl overflow-hidden",children:[e.jsx(It,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Hs,{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Kr,{className:"w-5 h-5 text-blue-600"}),"Subject Assignments"]}),e.jsxs(Ct,{className:"bg-blue-100 text-blue-800 px-3 py-1",children:[A," - ",c]})]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx(lt,{className:"text-gray-700 font-semibold",children:"Teacher"}),e.jsx(lt,{className:"text-gray-700 font-semibold",children:"Subject"}),e.jsx(lt,{className:"text-gray-700 font-semibold",children:"Class"}),e.jsx(lt,{className:"text-gray-700 font-semibold",children:"Term"}),e.jsx(lt,{className:"text-gray-700 font-semibold text-center",children:"Actions"})]})}),e.jsx(Ln,{children:R.length===0?e.jsx(os,{className:"hover:bg-gray-50",children:e.jsx(Je,{colSpan:5,className:"text-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(Kr,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-medium",children:"No assignments found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search or filters"})]}),e.jsxs(Ce,{onClick:te,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(il,{className:"w-4 h-4 mr-2"}),"Create First Assignment"]})]})})}):R.map(ee=>e.jsxs(os,{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx(Je,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:ee.teacher_name?.split(" ").map(je=>je[0]).join("").toUpperCase().slice(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ee.teacher_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",ee.teacher_id]})]})]})}),e.jsx(Je,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Kr,{className:"w-4 h-4 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ee.subject_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",ee.subject_id]})]})]})}),e.jsx(Je,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Qs,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ee.class_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",ee.class_id]})]})]})}),e.jsx(Je,{className:"py-4",children:e.jsx(Ct,{variant:"outline",className:"bg-gray-50",children:ee.term})}),e.jsx(Je,{className:"py-4 text-center",children:e.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>{i(ee.teacher_id,ee.subject_id,ee.class_id,ee.academic_year,ee.term).then(()=>{he.success("Assignment removed successfully"),f()})},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Bi,{className:"w-4 h-4"})})})]},ee.id))})]})})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.length===0?e.jsx("div",{className:"col-span-full",children:e.jsx(ye,{className:"bg-white border-0 shadow-lg rounded-2xl",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Kr,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-900 font-medium text-lg mb-2",children:"No assignments found"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Try adjusting your search or filters"}),e.jsxs(Ce,{onClick:te,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(il,{className:"w-4 h-4 mr-2"}),"Create First Assignment"]})]})})}):R.map(ee=>e.jsx(ye,{className:"bg-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 rounded-2xl overflow-hidden",children:e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:ee.teacher_name?.split(" ").map(je=>je[0]).join("").toUpperCase().slice(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:ee.teacher_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Teacher ID: ",ee.teacher_id]})]})]}),e.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>{i(ee.teacher_id,ee.subject_id,ee.class_id,ee.academic_year,ee.term).then(()=>{he.success("Assignment removed successfully"),f()})},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Bi,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx(Kr,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ee.subject_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",ee.subject_id]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(Qs,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ee.class_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",ee.class_id]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ct,{variant:"outline",className:"bg-gray-50",children:ee.term}),e.jsx(Ct,{className:"bg-blue-100 text-blue-800",children:ee.academic_year})]})]})]})},ee.id))}),e.jsx(Zs,{open:H,onOpenChange:T,children:e.jsxs(er,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-xl font-bold text-gray-900",children:"Create Subject Assignments"}),e.jsx(Hn,{children:"Assign subjects to teachers for specific classes"})]}),e.jsxs("div",{className:"space-y-6 mt-6",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Select Teacher"}),e.jsxs(Qt,{value:L?.toString()||"",onValueChange:ee=>F(parseInt(ee)),children:[e.jsx(Pt,{className:"h-12 rounded-xl",children:e.jsx(Tt,{placeholder:"Choose a teacher"})}),e.jsx(Rt,{children:r?.map(ee=>e.jsxs(be,{value:ee.id.toString(),children:[ee.firstName," ",ee.lastName]},ee.id))})]})]}),L&&e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium text-gray-700 mb-4 block",children:"Select Assignments"}),e.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 border-b border-gray-200",children:[e.jsx("div",{className:"col-span-5 p-3 font-semibold text-gray-700",children:"Subject"}),e.jsx("div",{className:"col-span-7 p-3 font-semibold text-gray-700",children:"Classes"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:s?.map(ee=>e.jsx("div",{className:"border-b border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-5 p-3 border-r border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-orange-100 rounded",children:e.jsx(Kr,{className:"w-3 h-3 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:ee.name}),e.jsx("p",{className:"text-xs text-gray-500",children:ee.code})]})]})}),e.jsx("div",{className:"col-span-7 p-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:t?.map(je=>{const Pe=O.some(De=>De.subject_id===ee.id&&De.class_id===je.id);return e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg border cursor-pointer transition-colors ${Pe?"bg-blue-100 border-blue-300 text-blue-700":"bg-white border-gray-200 hover:bg-gray-50"}`,onClick:()=>de(ee.id,je.id),children:[e.jsx(Wa,{checked:Pe,className:"w-3 h-3",readOnly:!0}),e.jsx("span",{className:"text-xs font-medium",children:je.name})]},je.id)})})})]})},ee.id))})]})]}),O.length>0&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900 mb-2",children:[O.length," assignment",O.length>1?"s":""," selected"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:O.map((ee,je)=>{const Pe=s?.find(nt=>nt.id===ee.subject_id),De=t?.find(nt=>nt.id===ee.class_id);return e.jsxs(Ct,{className:"bg-blue-100 text-blue-800",children:[Pe?.name,"  ",De?.name]},je)})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[e.jsx(Ce,{variant:"outline",onClick:()=>T(!1),className:"px-6",children:"Cancel"}),e.jsx(Ce,{onClick:fe,disabled:!L||O.length===0||le,className:"bg-blue-600 hover:bg-blue-700 text-white px-6",children:le?"Saving...":`Save ${O.length} Assignment${O.length>1?"s":""}`})]})]})}),e.jsx(Zs,{open:V,onOpenChange:G,children:e.jsxs(er,{className:"max-w-md",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-xl font-bold text-gray-900",children:"Assign Class Teacher"}),e.jsx(Hn,{children:"Assign a teacher as the class teacher for a specific class"})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Select Teacher"}),e.jsxs(Qt,{value:L?.toString()||"",onValueChange:ee=>F(parseInt(ee)),children:[e.jsx(Pt,{className:"h-12 rounded-xl",children:e.jsx(Tt,{placeholder:"Choose a teacher"})}),e.jsx(Rt,{children:r?.map(ee=>e.jsxs(be,{value:ee.id.toString(),children:[ee.firstName," ",ee.lastName]},ee.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Select Class"}),e.jsxs(Qt,{value:ce,onValueChange:W,children:[e.jsx(Pt,{className:"h-12 rounded-xl",children:e.jsx(Tt,{placeholder:"Choose a class"})}),e.jsx(Rt,{children:t?.map(ee=>e.jsx(be,{value:ee.id.toString(),children:ee.name},ee.id))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[e.jsx(Ce,{variant:"outline",onClick:()=>G(!1),className:"px-6",children:"Cancel"}),e.jsx(Ce,{onClick:pe,disabled:!L||!ce,className:"bg-green-600 hover:bg-green-700 text-white px-6",children:"Assign Class Teacher"})]})]})})]})]})}function wI(){const{students:r,classes:t,compiledResults:s,currentTerm:n,currentAcademicYear:a,promoteMultipleStudents:i,addActivityLog:c,currentUser:A}=ys(),[d,u]=j.useState(""),[m,f]=j.useState(""),[x,g]=j.useState("All"),[y,b]=j.useState([]),[B,N]=j.useState({}),[E,I]=j.useState(!1),[k,$]=j.useState("2025/2026"),T=(d?r.filter(K=>K.classId===Number(d)&&K.status==="Active"):[]).map(K=>{const le=s.filter(q=>q.studentId===K.id&&q.status==="Approved").sort((q,te)=>new Date(te.compiledDate).getTime()-new Date(q.compiledDate).getTime())[0];let ie="Repeat",se=0,R=0;return le&&(se=le.averageScore,R=le.totalAttendanceDays>0?le.timesPresent/le.totalAttendanceDays*100:0,se>=50&&R>=75?ie="Promote":se>=40&&se<50?ie="Trial":ie="Repeat"),{...K,averageScore:se,attendance:R,promotionStatus:ie,position:le?.position||0,totalStudents:le?.totalStudents||0}}).filter(K=>{const le=K.firstName&&K.firstName.toLowerCase().includes(m.toLowerCase())||K.lastName&&K.lastName.toLowerCase().includes(m.toLowerCase())||K.admissionNumber&&K.admissionNumber.toLowerCase().includes(m.toLowerCase()),ie=x==="All"||K.promotionStatus===x;return le&&ie}),V={totalStudents:T.length,toPromote:T.filter(K=>K.promotionStatus==="Promote").length,onTrial:T.filter(K=>K.promotionStatus==="Trial").length,toRepeat:T.filter(K=>K.promotionStatus==="Repeat").length,pending:T.filter(K=>K.averageScore===0).length},G=(K,le)=>{if(le)b([...y,K]);else{b(y.filter(se=>se!==K));const ie={...B};delete ie[K],N(ie)}},L=K=>{if(K){const le=T.filter(ie=>ie.promotionStatus==="Promote").map(ie=>ie.id);b(le)}else b([]),N({})},F=(K,le)=>{N({...B,[K]:le})},O=()=>{if(y.length===0){he.error("Please select students to promote");return}if(y.filter(le=>!B[le]).length>0){he.error("Please set destination class for all selected students");return}I(!0)},P=()=>{try{i(y,B,k),A&&c({actor:A.username,actorRole:"Admin",action:"Promote Students",target:`${y.length} students promoted`,ip:"System",status:"Success",details:`Promoted ${y.length} students from ${t.find(K=>K.id===Number(d))?.name} to ${k}`}),he.success(`Successfully promoted ${y.length} students!`),I(!1),b([]),N({})}catch{he.error("Failed to promote students. Please try again.")}},ce=K=>{switch(K){case"Promote":return e.jsxs(Ct,{className:"bg-[#28A745] text-white border-0",children:[e.jsx(kr,{className:"w-3 h-3 mr-1"}),"Promote"]});case"Trial":return e.jsxs(Ct,{className:"bg-[#FFC107] text-white border-0",children:[e.jsx(Lw,{className:"w-3 h-3 mr-1"}),"Trial"]});case"Repeat":return e.jsxs(Ct,{className:"bg-[#DC3545] text-white border-0",children:[e.jsx(ba,{className:"w-3 h-3 mr-1"}),"Repeat"]});default:return e.jsx(Ct,{className:"bg-gray-500 text-white border-0",children:"Pending"})}},W=K=>{const le=t.find(ie=>ie.id===K);return le?t.filter(ie=>{if(le.level==="Primary"){const se=parseInt(le.name.match(/\d+/)?.[0]||"0"),R=parseInt(ie.name.match(/\d+/)?.[0]||"0");if(ie.level==="Primary"&&R===se+1||ie.level==="Secondary"&&le.name.includes("6")&&ie.name.includes("JSS 1"))return!0}if(le.level==="Secondary"){const se=parseInt(le.name.match(/\d+/)?.[0]||"0"),R=parseInt(ie.name.match(/\d+/)?.[0]||"0");if(le.name.includes("JSS")&&ie.name.includes("JSS")&&R===se+1||le.name==="JSS 3"&&ie.name==="SSS 1"||le.name.includes("SSS")&&ie.name.includes("SSS")&&R===se+1)return!0}return!1}):[]},ae=()=>{const K=["Student Name","Admission No","Current Class","Average Score","Position","Attendance","Status","Next Class"],le=T.map(te=>{const de=B[te.id]?t.find(fe=>fe.id===B[te.id])?.name:"-";return[`${te.firstName} ${te.lastName}`,te.admissionNumber,te.className,te.averageScore.toFixed(1),`${te.position}/${te.totalStudents}`,`${te.attendance.toFixed(0)}%`,te.promotionStatus,de||"-"]}),ie=[K,...le].map(te=>te.join(",")).join(`
`),se=new Blob([ie],{type:"text/csv"}),R=URL.createObjectURL(se),q=document.createElement("a");q.href=R,q.download=`promotion-list-${new Date().toISOString().split("T")[0]}.csv`,q.click(),he.success("Promotion list exported successfully")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-white mb-2",children:"Student Promotion System"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"Promote students to next academic session"})]}),d&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Qs,{className:"w-4 h-4 text-[#1E90FF]"}),e.jsx("p",{className:"text-[#C0C8D3] text-sm",children:"Total"})]}),e.jsx("p",{className:"text-white text-2xl",children:V.totalStudents})]})}),e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(kr,{className:"w-4 h-4 text-[#28A745]"}),e.jsx("p",{className:"text-[#C0C8D3] text-sm",children:"Promote"})]}),e.jsx("p",{className:"text-[#28A745] text-2xl",children:V.toPromote})]})}),e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Lw,{className:"w-4 h-4 text-[#FFC107]"}),e.jsx("p",{className:"text-[#C0C8D3] text-sm",children:"Trial"})]}),e.jsx("p",{className:"text-[#FFC107] text-2xl",children:V.onTrial})]})}),e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ba,{className:"w-4 h-4 text-[#DC3545]"}),e.jsx("p",{className:"text-[#C0C8D3] text-sm",children:"Repeat"})]}),e.jsx("p",{className:"text-[#DC3545] text-2xl",children:V.toRepeat})]})}),e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ed,{className:"w-4 h-4 text-[#1E90FF]"}),e.jsx("p",{className:"text-[#C0C8D3] text-sm",children:"Pending"})]}),e.jsx("p",{className:"text-white text-2xl",children:V.pending})]})})]}),e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"New Academic Year"}),e.jsxs(Qt,{value:k,onValueChange:$,children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"2025/2026",className:"text-white hover:bg-[#1E90FF]",children:"2025/2026"}),e.jsx(be,{value:"2026/2027",className:"text-white hover:bg-[#1E90FF]",children:"2026/2027"}),e.jsx(be,{value:"2027/2028",className:"text-white hover:bg-[#1E90FF]",children:"2027/2028"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Source Class *"}),e.jsxs(Qt,{value:d,onValueChange:u,children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{placeholder:"Select class"})}),e.jsx(Rt,{className:"bg-[#0F243E] border-white/10",children:t.filter(K=>K.status==="Active").map(K=>e.jsxs(be,{value:K.id.toString(),className:"text-white hover:bg-[#1E90FF]",children:[K.name," (",r.filter(le=>le.classId===K.id&&le.status==="Active").length," students)"]},K.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Filter by Status"}),e.jsxs(Qt,{value:x,onValueChange:g,children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"All",className:"text-white hover:bg-[#1E90FF]",children:"All Students"}),e.jsx(be,{value:"Promote",className:"text-white hover:bg-[#1E90FF]",children:"Promote Only"}),e.jsx(be,{value:"Trial",className:"text-white hover:bg-[#1E90FF]",children:"Trial Only"}),e.jsx(be,{value:"Repeat",className:"text-white hover:bg-[#1E90FF]",children:"Repeat Only"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-white",children:"Search Student"}),e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-[#C0C8D3]"}),e.jsx(Et,{value:m,onChange:K=>f(K.target.value),placeholder:"Name or Admission No...",className:"h-12 pl-10 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]})]})]})})}),d?e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("h3",{className:"text-white flex items-center gap-2",children:[e.jsx(Yl,{className:"w-5 h-5"}),"Students for Promotion (",T.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{onClick:ae,variant:"outline",className:"h-10 border-white/10 text-white hover:bg-[#0F243E] rounded-xl",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(Ce,{onClick:O,disabled:y.length===0,className:"h-10 bg-[#28A745] hover:bg-[#28A745]/90 text-white rounded-xl shadow-md",children:[e.jsx(h4,{className:"w-4 h-4 mr-2"}),"Promote Selected (",y.length,")"]})]})]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gradient-to-r from-[#1E90FF] to-[#00BFFF] border-none hover:bg-gradient-to-r",children:[e.jsx(lt,{className:"text-white",children:e.jsx(Wa,{checked:y.length===T.filter(K=>K.promotionStatus==="Promote").length,onCheckedChange:L,className:"border-white"})}),e.jsx(lt,{className:"text-white",children:"Student"}),e.jsx(lt,{className:"text-white",children:"Adm. No"}),e.jsx(lt,{className:"text-white text-center",children:"Average"}),e.jsx(lt,{className:"text-white text-center",children:"Position"}),e.jsx(lt,{className:"text-white text-center",children:"Attendance"}),e.jsx(lt,{className:"text-white",children:"Status"}),e.jsx(lt,{className:"text-white",children:"Destination Class"})]})}),e.jsx(Ln,{children:T.length===0?e.jsx(os,{className:"bg-[#0F243E] border-b border-white/5",children:e.jsxs(Je,{colSpan:8,className:"text-center py-12",children:[e.jsx("p",{className:"text-white mb-2",children:"No students found"}),e.jsx("p",{className:"text-[#C0C8D3] text-sm",children:"Try adjusting your filters"})]})}):T.map(K=>{const le=W(K.classId);return e.jsxs(os,{className:"bg-[#0F243E] border-b border-white/5 hover:bg-[#132C4A]",children:[e.jsx(Je,{children:e.jsx(Wa,{checked:y.includes(K.id),onCheckedChange:ie=>G(K.id,ie),disabled:K.promotionStatus==="Repeat",className:"border-white/20"})}),e.jsx(Je,{children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-white",children:[K.firstName," ",K.lastName]}),e.jsx("p",{className:"text-xs text-[#C0C8D3]",children:K.className})]})}),e.jsx(Je,{className:"text-[#C0C8D3]",children:K.admissionNumber}),e.jsxs(Je,{className:"text-center text-white",children:[K.averageScore.toFixed(1),"%"]}),e.jsx(Je,{className:"text-center text-[#FFD700]",children:K.position>0?`${K.position}/${K.totalStudents}`:"-"}),e.jsxs(Je,{className:"text-center text-[#C0C8D3]",children:[K.attendance.toFixed(0),"%"]}),e.jsx(Je,{children:ce(K.promotionStatus)}),e.jsx(Je,{children:y.includes(K.id)?e.jsxs(Qt,{value:B[K.id]?.toString()||"",onValueChange:ie=>F(K.id,Number(ie)),children:[e.jsx(Pt,{className:"h-10 w-full rounded-xl border border-white/10 bg-[#132C4A] text-white",children:e.jsx(Tt,{placeholder:"Select class"})}),e.jsx(Rt,{className:"bg-[#0F243E] border-white/10",children:le.map(ie=>e.jsx(be,{value:ie.id.toString(),className:"text-white hover:bg-[#1E90FF]",children:ie.name},ie.id))})]}):e.jsx("span",{className:"text-[#C0C8D3]",children:"-"})})]},K.id)})})]})})})]}):e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 mx-auto mb-4 text-[#1E90FF]"}),e.jsx("h3",{className:"text-white mb-2",children:"Select a Source Class"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"Choose a class from the dropdown above to view students for promotion"})]})}),e.jsx(kA,{open:E,onOpenChange:I,children:e.jsxs(UA,{className:"bg-[#0F243E] border-white/10",children:[e.jsxs(IA,{children:[e.jsx(QA,{className:"text-white",children:"Confirm Student Promotion"}),e.jsxs(TA,{className:"text-[#C0C8D3]",children:["You are about to promote ",y.length," student(s) to the ",k," academic year. This action will update their class assignments and academic year records.",e.jsx("br",{}),e.jsx("br",{}),"Are you sure you want to continue?"]})]}),e.jsxs(LA,{children:[e.jsx(RA,{className:"bg-[#132C4A] text-white border-white/10 hover:bg-[#132C4A]/80",children:"Cancel"}),e.jsx(PA,{onClick:P,className:"bg-[#28A745] hover:bg-[#28A745]/90 text-white",children:"Confirm Promotion"})]})]})})]})}function Zj({student:r,studentClass:t,result:s,detailedScores:n,showActions:a=!1,onDownload:i,onPrint:c,onApprovePrint:A,currentUser:d}){const{schoolSettings:u}=ys(),{students:m,classes:f,teachers:x,scores:g,subjectAssignments:y,subjects:b,loadScoresFromAPI:B,loadSubjectAssignmentsFromAPI:N,loadSubjectsFromAPI:E}=ys(),[I,k]=j.useState(!1),[$,z]=j.useState([]);j.useEffect(()=>{s&&s.student_id&&H()},[s,g]);const H=async()=>{if(!(!s||!s.student_id))try{await Promise.all([g.length===0&&B(),y.length===0&&N(),b.length===0&&E()]);let O=g.filter(P=>P.student_id===s.student_id&&P.academic_year===s.academic_year&&P.term===s.term);if(O=O.map(P=>{const ce=y.find(q=>q.id===P.subject_assignment_id),W=ce?b.find(q=>q.id===ce.subject_id):null,ae=ce?x.find(q=>q.id===ce.teacher_id):null,le=g.filter(q=>{const te=y.find(de=>de.id===q.subject_assignment_id);return te&&te.subject_id===ce?.subject_id&&q.academic_year===s.academic_year&&q.term===s.term&&q.total>0}).map(q=>q.total||0),ie=le.length>0?le.reduce((q,te)=>q+te,0)/le.length:0,se=le.length>0?Math.min(...le):0,R=le.length>0?Math.max(...le):0;return{...P,subject_name:W?W.name:P.subject_name||"Unknown Subject",subject_teacher:ae?`${ae.firstName} ${ae.lastName}`:"Not Assigned",class_average:parseFloat(ie.toFixed(2)),class_minimum:se,class_maximum:R}}).sort((P,ce)=>P.subject_name.localeCompare(ce.subject_name)),n&&n.length>0)z(n);else if(s.scores&&s.scores.length>0){const P=s.scores.map(ce=>{const W=y.find(te=>te.id===ce.subject_assignment_id),ae=W?b.find(te=>te.id===W.subject_id):null,K=W?x.find(te=>te.id===W.teacher_id):null,ie=g.filter(te=>{const de=y.find(fe=>fe.id===te.subject_assignment_id);return de&&de.subject_id===W?.subject_id&&te.academic_year===s.academic_year&&te.term===s.term&&te.total>0}).map(te=>te.total||0),se=ie.length>0?ie.reduce((te,de)=>te+de,0)/ie.length:0,R=ie.length>0?Math.min(...ie):0,q=ie.length>0?Math.max(...ie):0;return{...ce,subject_name:ae?ae.name:ce.subject_name||"Unknown Subject",subject_teacher:K?`${K.firstName} ${K.lastName}`:"Not Assigned",class_average:parseFloat(se.toFixed(2)),class_minimum:R,class_maximum:q}}).sort((ce,W)=>ce.subject_name.localeCompare(W.subject_name));z(P)}else z(O)}catch(O){console.error("Error loading detailed scores:",O),z([])}},T=r||m.find(O=>O.id===s.student_id),V=t||f.find(O=>O.id===s.class_id),G=()=>{if(V?.classTeacher)return V.classTeacher;if(V?.classTeacherId){const O=x.find(P=>P.id===V.classTeacherId);if(O)return`${O.firstName} ${O.lastName}`}return"CLASS TEACHER"},L=O=>O>=80?{grade:"A",remark:"Excellent"}:O>=70?{grade:"B",remark:"Very Good"}:O>=60?{grade:"C",remark:"Good"}:O>=50?{grade:"D",remark:"Satisfactory"}:O>=45?{grade:"E",remark:"Fair"}:{grade:"F",remark:"Fail"},F=O=>O===5?"Excellent":O===4?"Very Good":O===3?"Good":O===2?"Fair":"Poor";return d?.role==="admin"||s.print_approved,e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @media print {
          @page {
            size: A4;
            margin: 10mm;
            orientation: portrait;
          }
          
          * {
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          
          body {
            margin: 0;
            padding: 0;
            font-family: 'Times New Roman', serif;
            font-size: 10pt;
            line-height: 1.2;
            width: 100%;
            height: 100vh;
            overflow: hidden;
          }
          
          .print-container {
            width: 100%;
            max-width: 190mm;
            height: 277mm;
            margin: 0 auto;
            box-sizing: border-box;
            overflow: hidden;
            page-break-after: always;
            page-break-inside: avoid;
            padding: 5mm;
            background: white;
          }
          
          .print-header {
            page-break-after: auto;
            page-break-inside: avoid;
          }
          
          .print-table {
            page-break-inside: avoid;
            page-break-after: auto;
          }
          
          .print-section {
            page-break-inside: avoid;
            page-break-after: auto;
          }
          
          .print-affective-psychomotor {
            page-break-inside: avoid;
            display: flex !important;
            gap: 2mm !important;
          }
          
          .print-watermark {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            opacity: 0.1 !important;
            z-index: 0 !important;
            pointer-events: none !important;
          }
          
          .print-content {
            position: relative !important;
            z-index: 1 !important;
          }
          
          table {
            border-collapse: collapse !important;
            page-break-inside: avoid !important;
          }
          
          tr {
            page-break-inside: avoid !important;
          }
          
          td, th {
            page-break-inside: avoid !important;
          }
          
          .no-print {
            display: none !important;
          }
          
          .print-only {
            display: block !important;
          }
          
          @media screen {
            .print-only {
              display: none !important;
            }
          }
        }
      `}),e.jsxs("div",{className:"print-container bg-white",style:{fontFamily:'"Times New Roman", serif',width:"210mm",height:"297mm",margin:"0 auto",padding:"8mm",boxSizing:"border-box",backgroundColor:"white",overflow:"hidden",position:"relative",border:"3px double #333"},children:[e.jsx("div",{className:"print-watermark",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"120mm",height:"120mm",backgroundImage:`url(${ku})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:.08,zIndex:0}}),e.jsxs("div",{className:"print-content",style:{position:"relative",zIndex:1},children:[e.jsxs("div",{className:"print-header",style:{textAlign:"center",marginBottom:"2mm"},children:[e.jsx("div",{style:{marginBottom:"0.5mm"},children:e.jsx("img",{src:ku,alt:"School Logo",style:{width:"12mm",height:"12mm",display:"block",margin:"0 auto"}})}),e.jsx("h1",{style:{fontSize:"11pt",fontWeight:"bold",margin:"0.5mm 0",textTransform:"uppercase"},children:u.school_name||"GRACELAND ROYAL ACADEMY"}),e.jsx("p",{style:{fontSize:"6pt",margin:"0.3mm 0",fontStyle:"italic"},children:u.school_address||"BEHIND HAKIMI PALACE OPPOSITE NNPC DEPOT TUNFUFE, GOMBE"}),e.jsx("p",{style:{fontSize:"6pt",margin:"0.3mm 0"},children:u.school_email||"gracelandroyalacademy09@gmail.com"})]}),e.jsx("hr",{className:"border border-black"}),e.jsxs("div",{className:"print-section",style:{marginBottom:"2mm",display:"flex",gap:"0mm"},children:[e.jsx("div",{style:{width:"75%"},children:e.jsx("table",{className:"w-full border-collapse border border-black",style:{fontSize:"6pt",height:"22mm",pageBreakInside:"avoid"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontWeight:"bold",fontSize:"6pt"},children:"NAME:"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontSize:"6pt"},children:T?`${T.firstName} ${T.lastName}`.toUpperCase():"STUDENT NAME"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontWeight:"bold",fontSize:"6pt"},children:"SESSION:"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontSize:"6pt"},children:s.academic_year||"2024/2025"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontWeight:"bold",fontSize:"6pt"},children:"NO. IN CLASS:"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontSize:"6pt"},children:s.position||"___"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontWeight:"bold",fontSize:"6pt"},children:"ADM NO:"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontSize:"6pt"},children:T?.admissionNumber||"GRA/XXXXX"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontWeight:"bold",fontSize:"6pt"},children:"TERM:"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontSize:"6pt"},children:s.term||"THIRD TERM"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontWeight:"bold",fontSize:"6pt"},children:"TERM END:"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontSize:"6pt"},children:s.term_end||"25-JUL-2025"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontWeight:"bold",fontSize:"6pt"},children:"GENDER:"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontSize:"6pt"},children:T?.gender||"MALE"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontWeight:"bold",fontSize:"6pt"},children:"CLASS:"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontSize:"6pt"},children:V?.name||"CLASS NAME"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontWeight:"bold",fontSize:"6pt"},children:"NEXT TERM:"}),e.jsx("td",{className:"border border-black",style:{padding:"0.8mm",fontSize:"6pt"},children:u?.resumption_date||"_________________"})]})]})})}),e.jsx("div",{style:{width:"25%"},children:e.jsx("div",{className:"border border-black",style:{height:"22mm",display:"flex",alignItems:"center",justifyContent:"center"},children:T?.photo_url?e.jsx("img",{src:T.photo_url,alt:"Student Photo",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:"7pt",color:"#666"},children:"No Photo"})})})})]}),e.jsx("div",{style:{textAlign:"center",marginBottom:"1mm"},children:e.jsxs("h2",{style:{fontSize:"10pt",fontWeight:"bold",textDecoration:"underline",margin:"0.5mm 0",textTransform:"uppercase"},children:[s.term||"THIRD TERM"," RESULT SHEET"]})}),e.jsxs("table",{className:"print-table w-full border-collapse border border-black",style:{fontSize:"6pt",marginBottom:"1mm",pageBreakInside:"avoid",pageBreakAfter:"auto"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"3%",fontWeight:"bold",fontSize:"5pt"},children:"SN"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"16%",fontWeight:"bold",fontSize:"5pt"},children:"SUBJECT"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"6%",fontWeight:"bold",fontSize:"5pt"},children:"1st CA"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"6%",fontWeight:"bold",fontSize:"5pt"},children:"2nd CA"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"6%",fontWeight:"bold",fontSize:"5pt"},children:"Exams"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"6%",fontWeight:"bold",fontSize:"5pt"},children:"Total"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"7%",fontWeight:"bold",fontSize:"5pt"},children:"Avg"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"5%",fontWeight:"bold",fontSize:"5pt"},children:"Grd"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"8%",fontWeight:"bold",fontSize:"5pt"},children:"Remark"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"6%",fontWeight:"bold",fontSize:"5pt"},children:"Min"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",width:"6%",fontWeight:"bold",fontSize:"5pt"},children:"Max"})]})}),e.jsx("tbody",{children:$&&$.length>0?$.map((O,P)=>{const ce=L(O.total||0);return e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",textAlign:"center",fontSize:"6pt"},children:P+1}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"6pt"},children:O.subject_name||"Subject"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",textAlign:"center",fontSize:"6pt"},children:O.ca1||0}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",textAlign:"center",fontSize:"6pt"},children:O.ca2||0}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",textAlign:"center",fontSize:"6pt"},children:O.exam||0}),e.jsx("td",{className:"border border-black text-center font-bold",style:{padding:"0.5mm",textAlign:"center",fontWeight:"bold",fontSize:"6pt"},children:O.total||0}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",textAlign:"center",fontSize:"6pt"},children:O.class_average||"0.0"}),e.jsx("td",{className:"border border-black text-center font-bold",style:{padding:"0.5mm",textAlign:"center",fontWeight:"bold",fontSize:"6pt"},children:ce.grade}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",textAlign:"center",fontSize:"5pt"},children:ce.remark}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",textAlign:"center",fontSize:"6pt"},children:O.class_minimum||"0"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",textAlign:"center",fontSize:"6pt"},children:O.class_maximum||"0"})]},P)}):e.jsx("tr",{children:e.jsx("td",{colSpan:12,className:"border border-black p-2 text-center text-gray-500",style:{padding:"2mm",fontSize:"8pt"},children:"No scores available"})})})]}),e.jsx("table",{className:"print-table w-full border-collapse border border-black",style:{marginTop:"1mm",fontSize:"7pt",pageBreakInside:"avoid"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("td",{className:"border border-black p-1",style:{padding:"1mm",width:"25%",fontSize:"6pt"},children:[e.jsx("b",{children:"TOTAL:"})," ",s.total_score||"0.00"]}),e.jsxs("td",{className:"border border-black p-1",style:{padding:"1mm",width:"25%",fontSize:"6pt"},children:[e.jsx("b",{children:"AVG:"})," ",s.average_score||"0.00"]}),e.jsxs("td",{className:"border border-black p-1",style:{padding:"1mm",width:"25%",fontSize:"6pt"},children:[e.jsx("b",{children:"CLASS AVG:"})," ",s.class_average||"0.00"]}),e.jsxs("td",{className:"border border-black p-1",style:{padding:"1mm",width:"25%",fontSize:"6pt"},children:[e.jsx("b",{children:"POS:"})," ",s.position?`${s.position}${s.position===1?"st":s.position===2?"nd":s.position===3?"rd":"th"}`:"___"]})]})})}),e.jsx("div",{className:"print-section",style:{marginTop:"3mm",marginBottom:"2mm"},children:e.jsxs("div",{className:"border border-black p-1",style:{padding:"1mm",fontSize:"7pt"},children:[e.jsxs("p",{style:{margin:"0.5mm 0",fontSize:"6pt"},children:[e.jsx("b",{children:"CLASS TEACHER:"})," ",G()]}),e.jsxs("p",{style:{margin:"0.5mm 0",fontSize:"6pt"},children:[e.jsx("b",{children:"COMMENT:"})," ",s?.class_teacher_comment||s?.comment||"Good performance. Keep up the effort."]}),e.jsxs("p",{style:{margin:"0.5mm 0",fontSize:"6pt"},children:[e.jsx("b",{children:V?.category==="Primary"?"HEAD TEACHER:":"PRINCIPAL:"}),V?.category==="Primary"?` ${u?.head_teacher_name||"_________________"}`:` ${u?.principal_name||"_________________"}`]}),e.jsxs("div",{style:{margin:"0.5mm 0",fontSize:"6pt",display:"flex",alignItems:"center"},children:[e.jsx("b",{style:{marginRight:"2mm"},children:"SIGNATURE:"}),V?.category==="Primary"?u?.head_teacher_signature?e.jsx("img",{src:u.head_teacher_signature,alt:"Head Teacher Signature",style:{height:"8mm",maxHeight:"8mm"}}):e.jsx("span",{children:"______________________"}):u?.principal_signature?e.jsx("img",{src:u.principal_signature,alt:"Principal Signature",style:{height:"8mm",maxHeight:"8mm"}}):e.jsx("span",{children:"______________________"})]})]})}),e.jsxs("div",{className:"print-affective-psychomotor flex gap-1",style:{padding:"1mm",pageBreakInside:"avoid"},children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-center mb-1",children:e.jsx("h3",{className:"font-bold underline",style:{fontSize:"7pt",marginBottom:"0.5mm"},children:"AFFECTIVE"})}),e.jsxs("table",{className:"print-table w-full border-collapse border border-black",style:{fontSize:"5pt",pageBreakInside:"avoid"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"QUALITY"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"SCORE"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"REMARK"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"ATTENTIVE"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.affective?.attentiveness||"4"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.affective?.attentiveness||4)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"HONESTY"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.affective?.honesty||"3"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.affective?.honesty||3)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"NEATNESS"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.affective?.neatness||"4"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.affective?.neatness||4)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"OBEDIENT"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.affective?.obedience||"2"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.affective?.obedience||2)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"RESPONSIBLE"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.affective?.responsibility||"3"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.affective?.responsibility||3)})]})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-center mb-1",children:e.jsx("h3",{className:"font-bold underline",style:{fontSize:"7pt",marginBottom:"0.5mm"},children:"PSYCHOMOTOR"})}),e.jsxs("table",{className:"print-table w-full border-collapse border border-black",style:{fontSize:"5pt",pageBreakInside:"avoid"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"SKILL"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"SCORE"}),e.jsx("th",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"REMARK"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"ATTENTION"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.psychomotor?.attention_direction||"4"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.psychomotor?.attention_direction||4)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"CONSIDERATE"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.psychomotor?.considerate_others||"2"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.psychomotor?.considerate_others||2)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"HANDWRITING"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.psychomotor?.handwriting||"4"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.psychomotor?.handwriting||4)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"SPORTS"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.psychomotor?.sports||"3"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.psychomotor?.sports||3)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"VERBAL"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.psychomotor?.verbal_fluency||"4"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.psychomotor?.verbal_fluency||4)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:"INDEPENDENT"}),e.jsx("td",{className:"border border-black text-center",style:{padding:"0.5mm",fontSize:"4pt"},children:s.psychomotor?.independent_work||"5"}),e.jsx("td",{className:"border border-black",style:{padding:"0.5mm",fontSize:"4pt"},children:F(s.psychomotor?.independent_work||5)})]})]})]})]})]}),a&&e.jsx("div",{className:"p-4 bg-white border-t no-print",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{className:s.status==="Approved"?"bg-green-100 text-green-800":s.status==="Submitted"?"bg-blue-100 text-blue-800":s.status==="Rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800",children:s.status||"Draft"}),!s.print_approved&&d?.role==="admin"&&e.jsxs(Ct,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx(Is,{className:"w-3 h-3 mr-1"}),"Print Not Approved"]}),s.print_approved&&e.jsxs(Ct,{className:"bg-green-100 text-green-800",children:[e.jsx(kr,{className:"w-3 h-3 mr-1"}),"Print Approved"]})]}),e.jsx("div",{className:"flex items-center space-x-2 no-print",children:d?.role==="admin"&&e.jsxs(e.Fragment,{children:[!s.print_approved&&A&&e.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>A?.(s.id),className:"text-purple-600 border-purple-600 hover:bg-purple-50",children:[e.jsx(kr,{className:"w-4 h-4 mr-2"}),"Approve Print"]}),e.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>i?.(s.id),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),e.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>c?.(s.id),className:"text-green-600 border-green-600 hover:bg-green-50",children:[e.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Print"]})]})})]})})]})]})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $x=function(r,t){return $x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])},$x(r,t)};function hl(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$x(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}var Gx=function(){return Gx=Object.assign||function(t){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},Gx.apply(this,arguments)};function oi(r,t,s,n){function a(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function A(m){try{u(n.next(m))}catch(f){c(f)}}function d(m){try{u(n.throw(m))}catch(f){c(f)}}function u(m){m.done?i(m.value):a(m.value).then(A,d)}u((n=n.apply(r,[])).next())})}function Va(r,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,c;return c={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function A(u){return function(m){return d([u,m])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,a=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){s=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){s.label=u[1];break}if(u[0]===6&&s.label<i[1]){s.label=i[1],i=u;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(u);break}i[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(r,s)}catch(m){u=[6,m],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Qm(r,t,s){if(arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return r.concat(i||t)}var Tc=(function(){function r(t,s,n,a){this.left=t,this.top=s,this.width=n,this.height=a}return r.prototype.add=function(t,s,n,a){return new r(this.left+t,this.top+s,this.width+n,this.height+a)},r.fromClientRect=function(t,s){return new r(s.left+t.windowBounds.left,s.top+t.windowBounds.top,s.width,s.height)},r.fromDOMRectList=function(t,s){var n=Array.from(s).find(function(a){return a.width!==0});return n?new r(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),Bp=function(r,t){return Tc.fromClientRect(r,t.getBoundingClientRect())},bI=function(r){var t=r.body,s=r.documentElement;if(!t||!s)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,s.scrollWidth),Math.max(t.offsetWidth,s.offsetWidth),Math.max(t.clientWidth,s.clientWidth)),a=Math.max(Math.max(t.scrollHeight,s.scrollHeight),Math.max(t.offsetHeight,s.offsetHeight),Math.max(t.clientHeight,s.clientHeight));return new Tc(0,0,n,a)},Cp=function(r){for(var t=[],s=0,n=r.length;s<n;){var a=r.charCodeAt(s++);if(a>=55296&&a<=56319&&s<n){var i=r.charCodeAt(s++);(i&64512)===56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),s--)}else t.push(a)}return t},wn=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var s=r.length;if(!s)return"";for(var n=[],a=-1,i="";++a<s;){var c=r[a];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(a+1===s||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},y1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yI=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Tm=0;Tm<y1.length;Tm++)yI[y1.charCodeAt(Tm)]=Tm;var N1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pm=0;Pm<N1.length;Pm++)gh[N1.charCodeAt(Pm)]=Pm;var NI=function(r){var t=r.length*.75,s=r.length,n,a=0,i,c,A,d;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),m=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<s;n+=4)i=gh[r.charCodeAt(n)],c=gh[r.charCodeAt(n+1)],A=gh[r.charCodeAt(n+2)],d=gh[r.charCodeAt(n+3)],m[a++]=i<<2|c>>4,m[a++]=(c&15)<<4|A>>2,m[a++]=(A&3)<<6|d&63;return u},jI=function(r){for(var t=r.length,s=[],n=0;n<t;n+=2)s.push(r[n+1]<<8|r[n]);return s},BI=function(r){for(var t=r.length,s=[],n=0;n<t;n+=4)s.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return s},xd=5,av=11,Og=2,CI=av-xd,e5=65536>>xd,SI=1<<xd,Mg=SI-1,EI=1024>>xd,FI=e5+EI,_I=FI,kI=32,UI=_I+kI,II=65536>>av,LI=1<<CI,QI=LI-1,j1=function(r,t,s){return r.slice?r.slice(t,s):new Uint16Array(Array.prototype.slice.call(r,t,s))},TI=function(r,t,s){return r.slice?r.slice(t,s):new Uint32Array(Array.prototype.slice.call(r,t,s))},PI=function(r,t){var s=NI(r),n=Array.isArray(s)?BI(s):new Uint32Array(s),a=Array.isArray(s)?jI(s):new Uint16Array(s),i=24,c=j1(a,i/2,n[4]/2),A=n[5]===2?j1(a,(i+n[4])/2):TI(n,Math.ceil((i+n[4])/4));return new RI(n[0],n[1],n[2],n[3],c,A)},RI=(function(){function r(t,s,n,a,i,c){this.initialValue=t,this.errorValue=s,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=c}return r.prototype.get=function(t){var s;if(t>=0){if(t<55296||t>56319&&t<=65535)return s=this.index[t>>xd],s=(s<<Og)+(t&Mg),this.data[s];if(t<=65535)return s=this.index[e5+(t-55296>>xd)],s=(s<<Og)+(t&Mg),this.data[s];if(t<this.highStart)return s=UI-II+(t>>av),s=this.index[s],s+=t>>xd&QI,s=this.index[s],s=(s<<Og)+(t&Mg),this.data[s];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),B1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",DI=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Rm=0;Rm<B1.length;Rm++)DI[B1.charCodeAt(Rm)]=Rm;var OI="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",C1=50,MI=1,t5=2,s5=3,HI=4,KI=5,S1=7,r5=8,E1=9,BA=10,Wx=11,F1=12,qx=13,VI=14,xh=15,Yx=16,Dm=17,ch=18,zI=19,_1=20,Jx=21,Ah=22,Hg=23,nu=24,Ki=25,vh=26,wh=27,au=28,$I=29,md=30,GI=31,Om=32,Mm=33,Xx=34,Zx=35,e0=36,Dh=37,t0=38,wf=39,bf=40,Kg=41,n5=42,WI=43,qI=[9001,65288],a5="!",Js="",Hm="",s0=PI(OI),bc=[md,e0],r0=[MI,t5,s5,KI],i5=[BA,r5],k1=[wh,vh],YI=r0.concat(i5),U1=[t0,wf,bf,Xx,Zx],JI=[xh,qx],XI=function(r,t){t===void 0&&(t="strict");var s=[],n=[],a=[];return r.forEach(function(i,c){var A=s0.get(i);if(A>C1?(a.push(!0),A-=C1):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(c),s.push(Yx);if(A===HI||A===Wx){if(c===0)return n.push(c),s.push(md);var d=s[c-1];return YI.indexOf(d)===-1?(n.push(n[c-1]),s.push(d)):(n.push(c),s.push(md))}if(n.push(c),A===GI)return s.push(t==="strict"?Jx:Dh);if(A===n5||A===$I)return s.push(md);if(A===WI)return i>=131072&&i<=196605||i>=196608&&i<=262141?s.push(Dh):s.push(md);s.push(A)}),[n,s,a]},Vg=function(r,t,s,n){var a=n[s];if(Array.isArray(r)?r.indexOf(a)!==-1:r===a)for(var i=s;i<=n.length;){i++;var c=n[i];if(c===t)return!0;if(c!==BA)break}if(a===BA)for(var i=s;i>0;){i--;var A=n[i];if(Array.isArray(r)?r.indexOf(A)!==-1:r===A)for(var d=s;d<=n.length;){d++;var c=n[d];if(c===t)return!0;if(c!==BA)break}if(A!==BA)break}return!1},I1=function(r,t){for(var s=r;s>=0;){var n=t[s];if(n===BA)s--;else return n}return 0},ZI=function(r,t,s,n,a){if(s[n]===0)return Js;var i=n-1;if(Array.isArray(a)&&a[i]===!0)return Js;var c=i-1,A=i+1,d=t[i],u=c>=0?t[c]:0,m=t[A];if(d===t5&&m===s5)return Js;if(r0.indexOf(d)!==-1)return a5;if(r0.indexOf(m)!==-1||i5.indexOf(m)!==-1)return Js;if(I1(i,t)===r5)return Hm;if(s0.get(r[i])===Wx||(d===Om||d===Mm)&&s0.get(r[A])===Wx||d===S1||m===S1||d===E1||[BA,qx,xh].indexOf(d)===-1&&m===E1||[Dm,ch,zI,nu,au].indexOf(m)!==-1||I1(i,t)===Ah||Vg(Hg,Ah,i,t)||Vg([Dm,ch],Jx,i,t)||Vg(F1,F1,i,t))return Js;if(d===BA)return Hm;if(d===Hg||m===Hg)return Js;if(m===Yx||d===Yx)return Hm;if([qx,xh,Jx].indexOf(m)!==-1||d===VI||u===e0&&JI.indexOf(d)!==-1||d===au&&m===e0||m===_1||bc.indexOf(m)!==-1&&d===Ki||bc.indexOf(d)!==-1&&m===Ki||d===wh&&[Dh,Om,Mm].indexOf(m)!==-1||[Dh,Om,Mm].indexOf(d)!==-1&&m===vh||bc.indexOf(d)!==-1&&k1.indexOf(m)!==-1||k1.indexOf(d)!==-1&&bc.indexOf(m)!==-1||[wh,vh].indexOf(d)!==-1&&(m===Ki||[Ah,xh].indexOf(m)!==-1&&t[A+1]===Ki)||[Ah,xh].indexOf(d)!==-1&&m===Ki||d===Ki&&[Ki,au,nu].indexOf(m)!==-1)return Js;if([Ki,au,nu,Dm,ch].indexOf(m)!==-1)for(var f=i;f>=0;){var x=t[f];if(x===Ki)return Js;if([au,nu].indexOf(x)!==-1)f--;else break}if([wh,vh].indexOf(m)!==-1)for(var f=[Dm,ch].indexOf(d)!==-1?c:i;f>=0;){var x=t[f];if(x===Ki)return Js;if([au,nu].indexOf(x)!==-1)f--;else break}if(t0===d&&[t0,wf,Xx,Zx].indexOf(m)!==-1||[wf,Xx].indexOf(d)!==-1&&[wf,bf].indexOf(m)!==-1||[bf,Zx].indexOf(d)!==-1&&m===bf||U1.indexOf(d)!==-1&&[_1,vh].indexOf(m)!==-1||U1.indexOf(m)!==-1&&d===wh||bc.indexOf(d)!==-1&&bc.indexOf(m)!==-1||d===nu&&bc.indexOf(m)!==-1||bc.concat(Ki).indexOf(d)!==-1&&m===Ah&&qI.indexOf(r[A])===-1||bc.concat(Ki).indexOf(m)!==-1&&d===ch)return Js;if(d===Kg&&m===Kg){for(var g=s[i],y=1;g>0&&(g--,t[g]===Kg);)y++;if(y%2!==0)return Js}return d===Om&&m===Mm?Js:Hm},eL=function(r,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var s=XI(r,t.lineBreak),n=s[0],a=s[1],i=s[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(A){return[Ki,md,n5].indexOf(A)!==-1?Dh:A}));var c=t.wordBreak==="keep-all"?i.map(function(A,d){return A&&r[d]>=19968&&r[d]<=40959}):void 0;return[n,a,c]},tL=(function(){function r(t,s,n,a){this.codePoints=t,this.required=s===a5,this.start=n,this.end=a}return r.prototype.slice=function(){return wn.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),sL=function(r,t){var s=Cp(r),n=eL(s,t),a=n[0],i=n[1],c=n[2],A=s.length,d=0,u=0;return{next:function(){if(u>=A)return{done:!0,value:null};for(var m=Js;u<A&&(m=ZI(s,i,a,++u,c))===Js;);if(m!==Js||u===A){var f=new tL(s,m,d,u);return d=u,{value:f,done:!1}}return{done:!0,value:null}}}},rL=1,nL=2,Gh=4,L1=8,Kf=10,Q1=47,Ch=92,aL=9,iL=32,Km=34,dh=61,oL=35,lL=36,cL=37,Vm=39,zm=40,uh=41,AL=95,ji=45,dL=33,uL=60,hL=62,mL=64,fL=91,pL=93,gL=61,xL=123,$m=63,vL=125,T1=124,wL=126,bL=128,P1=65533,zg=42,pd=43,yL=44,NL=58,jL=59,Oh=46,BL=0,CL=8,SL=11,EL=14,FL=31,_L=127,Hl=-1,o5=48,l5=97,c5=101,kL=102,UL=117,IL=122,A5=65,d5=69,u5=70,LL=85,QL=90,za=function(r){return r>=o5&&r<=57},TL=function(r){return r>=55296&&r<=57343},iu=function(r){return za(r)||r>=A5&&r<=u5||r>=l5&&r<=kL},PL=function(r){return r>=l5&&r<=IL},RL=function(r){return r>=A5&&r<=QL},DL=function(r){return PL(r)||RL(r)},OL=function(r){return r>=bL},Gm=function(r){return r===Kf||r===aL||r===iL},Vf=function(r){return DL(r)||OL(r)||r===AL},R1=function(r){return Vf(r)||za(r)||r===ji},ML=function(r){return r>=BL&&r<=CL||r===SL||r>=EL&&r<=FL||r===_L},NA=function(r,t){return r!==Ch?!1:t!==Kf},Wm=function(r,t,s){return r===ji?Vf(t)||NA(t,s):Vf(r)?!0:!!(r===Ch&&NA(r,t))},$g=function(r,t,s){return r===pd||r===ji?za(t)?!0:t===Oh&&za(s):za(r===Oh?t:r)},HL=function(r){var t=0,s=1;(r[t]===pd||r[t]===ji)&&(r[t]===ji&&(s=-1),t++);for(var n=[];za(r[t]);)n.push(r[t++]);var a=n.length?parseInt(wn.apply(void 0,n),10):0;r[t]===Oh&&t++;for(var i=[];za(r[t]);)i.push(r[t++]);var c=i.length,A=c?parseInt(wn.apply(void 0,i),10):0;(r[t]===d5||r[t]===c5)&&t++;var d=1;(r[t]===pd||r[t]===ji)&&(r[t]===ji&&(d=-1),t++);for(var u=[];za(r[t]);)u.push(r[t++]);var m=u.length?parseInt(wn.apply(void 0,u),10):0;return s*(a+A*Math.pow(10,-c))*Math.pow(10,d*m)},KL={type:2},VL={type:3},zL={type:4},$L={type:13},GL={type:8},WL={type:21},qL={type:9},YL={type:10},JL={type:11},XL={type:12},ZL={type:14},qm={type:23},eQ={type:1},tQ={type:25},sQ={type:24},rQ={type:26},nQ={type:27},aQ={type:28},iQ={type:29},oQ={type:31},n0={type:32},h5=(function(){function r(){this._value=[]}return r.prototype.write=function(t){this._value=this._value.concat(Cp(t))},r.prototype.read=function(){for(var t=[],s=this.consumeToken();s!==n0;)t.push(s),s=this.consumeToken();return t},r.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Km:return this.consumeStringToken(Km);case oL:var s=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(R1(s)||NA(n,a)){var i=Wm(s,n,a)?nL:rL,c=this.consumeName();return{type:5,value:c,flags:i}}break;case lL:if(this.peekCodePoint(0)===dh)return this.consumeCodePoint(),$L;break;case Vm:return this.consumeStringToken(Vm);case zm:return KL;case uh:return VL;case zg:if(this.peekCodePoint(0)===dh)return this.consumeCodePoint(),ZL;break;case pd:if($g(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case yL:return zL;case ji:var A=t,d=this.peekCodePoint(0),u=this.peekCodePoint(1);if($g(A,d,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Wm(A,d,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(d===ji&&u===hL)return this.consumeCodePoint(),this.consumeCodePoint(),sQ;break;case Oh:if($g(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Q1:if(this.peekCodePoint(0)===zg)for(this.consumeCodePoint();;){var m=this.consumeCodePoint();if(m===zg&&(m=this.consumeCodePoint(),m===Q1))return this.consumeToken();if(m===Hl)return this.consumeToken()}break;case NL:return rQ;case jL:return nQ;case uL:if(this.peekCodePoint(0)===dL&&this.peekCodePoint(1)===ji&&this.peekCodePoint(2)===ji)return this.consumeCodePoint(),this.consumeCodePoint(),tQ;break;case mL:var f=this.peekCodePoint(0),x=this.peekCodePoint(1),g=this.peekCodePoint(2);if(Wm(f,x,g)){var c=this.consumeName();return{type:7,value:c}}break;case fL:return aQ;case Ch:if(NA(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case pL:return iQ;case gL:if(this.peekCodePoint(0)===dh)return this.consumeCodePoint(),GL;break;case xL:return JL;case vL:return XL;case UL:case LL:var y=this.peekCodePoint(0),b=this.peekCodePoint(1);return y===pd&&(iu(b)||b===$m)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case T1:if(this.peekCodePoint(0)===dh)return this.consumeCodePoint(),qL;if(this.peekCodePoint(0)===T1)return this.consumeCodePoint(),WL;break;case wL:if(this.peekCodePoint(0)===dh)return this.consumeCodePoint(),YL;break;case Hl:return n0}return Gm(t)?(this.consumeWhiteSpace(),oQ):za(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):Vf(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:wn(t)}},r.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},r.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},r.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},r.prototype.consumeUnicodeRangeToken=function(){for(var t=[],s=this.consumeCodePoint();iu(s)&&t.length<6;)t.push(s),s=this.consumeCodePoint();for(var n=!1;s===$m&&t.length<6;)t.push(s),s=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(wn.apply(void 0,t.map(function(d){return d===$m?o5:d})),16),i=parseInt(wn.apply(void 0,t.map(function(d){return d===$m?u5:d})),16);return{type:30,start:a,end:i}}var c=parseInt(wn.apply(void 0,t),16);if(this.peekCodePoint(0)===ji&&iu(this.peekCodePoint(1))){this.consumeCodePoint(),s=this.consumeCodePoint();for(var A=[];iu(s)&&A.length<6;)A.push(s),s=this.consumeCodePoint();var i=parseInt(wn.apply(void 0,A),16);return{type:30,start:c,end:i}}else return{type:30,start:c,end:c}},r.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===zm?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===zm?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},r.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Hl)return{type:22,value:""};var s=this.peekCodePoint(0);if(s===Vm||s===Km){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Hl||this.peekCodePoint(0)===uh)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),qm)}for(;;){var a=this.consumeCodePoint();if(a===Hl||a===uh)return{type:22,value:wn.apply(void 0,t)};if(Gm(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Hl||this.peekCodePoint(0)===uh?(this.consumeCodePoint(),{type:22,value:wn.apply(void 0,t)}):(this.consumeBadUrlRemnants(),qm);if(a===Km||a===Vm||a===zm||ML(a))return this.consumeBadUrlRemnants(),qm;if(a===Ch)if(NA(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),qm;else t.push(a)}},r.prototype.consumeWhiteSpace=function(){for(;Gm(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===uh||t===Hl)return;NA(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(t){for(var s=5e4,n="";t>0;){var a=Math.min(s,t);n+=wn.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},r.prototype.consumeStringToken=function(t){var s="",n=0;do{var a=this._value[n];if(a===Hl||a===void 0||a===t)return s+=this.consumeStringSlice(n),{type:0,value:s};if(a===Kf)return this._value.splice(0,n),eQ;if(a===Ch){var i=this._value[n+1];i!==Hl&&i!==void 0&&(i===Kf?(s+=this.consumeStringSlice(n),n=-1,this._value.shift()):NA(a,i)&&(s+=this.consumeStringSlice(n),s+=wn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var t=[],s=Gh,n=this.peekCodePoint(0);for((n===pd||n===ji)&&t.push(this.consumeCodePoint());za(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===Oh&&za(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),s=L1;za(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===d5||n===c5)&&((a===pd||a===ji)&&za(i)||za(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),s=L1;za(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[HL(t),s]},r.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),s=t[0],n=t[1],a=this.peekCodePoint(0),i=this.peekCodePoint(1),c=this.peekCodePoint(2);if(Wm(a,i,c)){var A=this.consumeName();return{type:15,number:s,flags:n,unit:A}}return a===cL?(this.consumeCodePoint(),{type:16,number:s,flags:n}):{type:17,number:s,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(iu(t)){for(var s=wn(t);iu(this.peekCodePoint(0))&&s.length<6;)s+=wn(this.consumeCodePoint());Gm(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(s,16);return n===0||TL(n)||n>1114111?P1:n}return t===Hl?P1:t},r.prototype.consumeName=function(){for(var t="";;){var s=this.consumeCodePoint();if(R1(s))t+=wn(s);else if(NA(s,this.peekCodePoint(0)))t+=wn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(s),t}},r})(),m5=(function(){function r(t){this._tokens=t}return r.create=function(t){var s=new h5;return s.write(t),new r(s.read())},r.parseValue=function(t){return r.create(t).parseComponentValue()},r.parseValues=function(t){return r.create(t).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var s=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return s;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var t=[];;){var s=this.consumeComponentValue();if(s.type===32)return t;t.push(s),t.push()}},r.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},r.prototype.consumeSimpleBlock=function(t){for(var s={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||cQ(n,t))return s;this.reconsumeToken(n),s.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(t){for(var s={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return s;this.reconsumeToken(n),s.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?n0:t},r.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},r})(),Wh=function(r){return r.type===15},Mu=function(r){return r.type===17},Sr=function(r){return r.type===20},lQ=function(r){return r.type===0},a0=function(r,t){return Sr(r)&&r.value===t},f5=function(r){return r.type!==31},Iu=function(r){return r.type!==31&&r.type!==4},sc=function(r){var t=[],s=[];return r.forEach(function(n){if(n.type===4){if(s.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(s),s=[];return}n.type!==31&&s.push(n)}),s.length&&t.push(s),t},cQ=function(r,t){return t===11&&r.type===12||t===28&&r.type===29?!0:t===2&&r.type===3},VA=function(r){return r.type===17||r.type===15},_n=function(r){return r.type===16||VA(r)},p5=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},wa={type:17,number:0,flags:Gh},iv={type:16,number:50,flags:Gh},CA={type:16,number:100,flags:Gh},bh=function(r,t,s){var n=r[0],a=r[1];return[Pr(n,t),Pr(typeof a<"u"?a:n,s)]},Pr=function(r,t){if(r.type===16)return r.number/100*t;if(Wh(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},g5="deg",x5="grad",v5="rad",w5="turn",Sp={name:"angle",parse:function(r,t){if(t.type===15)switch(t.unit){case g5:return Math.PI*t.number/180;case x5:return Math.PI/200*t.number;case v5:return t.number;case w5:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},b5=function(r){return r.type===15&&(r.unit===g5||r.unit===x5||r.unit===v5||r.unit===w5)},y5=function(r){var t=r.filter(Sr).map(function(s){return s.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[wa,wa];case"to top":case"bottom":return vo(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[wa,CA];case"to right":case"left":return vo(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[CA,CA];case"to bottom":case"top":return vo(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[CA,wa];case"to left":case"right":return vo(270)}return 0},vo=function(r){return Math.PI*r/180},DA={name:"color",parse:function(r,t){if(t.type===18){var s=AQ[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return s(r,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),i=t.value.substring(2,3);return SA(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),i=t.value.substring(2,3),c=t.value.substring(3,4);return SA(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),parseInt(c+c,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),i=t.value.substring(4,6);return SA(parseInt(n,16),parseInt(a,16),parseInt(i,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),i=t.value.substring(4,6),c=t.value.substring(6,8);return SA(parseInt(n,16),parseInt(a,16),parseInt(i,16),parseInt(c,16)/255)}}if(t.type===20){var A=_c[t.value.toUpperCase()];if(typeof A<"u")return A}return _c.TRANSPARENT}},OA=function(r){return(255&r)===0},la=function(r){var t=255&r,s=255&r>>8,n=255&r>>16,a=255&r>>24;return t<255?"rgba("+a+","+n+","+s+","+t/255+")":"rgb("+a+","+n+","+s+")"},SA=function(r,t,s,n){return(r<<24|t<<16|s<<8|Math.round(n*255)<<0)>>>0},D1=function(r,t){if(r.type===17)return r.number;if(r.type===16){var s=t===3?1:255;return t===3?r.number/100*s:Math.round(r.number/100*s)}return 0},O1=function(r,t){var s=t.filter(Iu);if(s.length===3){var n=s.map(D1),a=n[0],i=n[1],c=n[2];return SA(a,i,c,1)}if(s.length===4){var A=s.map(D1),a=A[0],i=A[1],c=A[2],d=A[3];return SA(a,i,c,d)}return 0};function Gg(r,t,s){return s<0&&(s+=1),s>=1&&(s-=1),s<1/6?(t-r)*s*6+r:s<1/2?t:s<2/3?(t-r)*6*(2/3-s)+r:r}var M1=function(r,t){var s=t.filter(Iu),n=s[0],a=s[1],i=s[2],c=s[3],A=(n.type===17?vo(n.number):Sp.parse(r,n))/(Math.PI*2),d=_n(a)?a.number/100:0,u=_n(i)?i.number/100:0,m=typeof c<"u"&&_n(c)?Pr(c,1):1;if(d===0)return SA(u*255,u*255,u*255,1);var f=u<=.5?u*(d+1):u+d-u*d,x=u*2-f,g=Gg(x,f,A+1/3),y=Gg(x,f,A),b=Gg(x,f,A-1/3);return SA(g*255,y*255,b*255,m)},AQ={hsl:M1,hsla:M1,rgb:O1,rgba:O1},Sh=function(r,t){return DA.parse(r,m5.create(t).parseComponentValue())},_c={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},dQ={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,t){return t.map(function(s){if(Sr(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},uQ={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ep=function(r,t){var s=DA.parse(r,t[0]),n=t[1];return n&&_n(n)?{color:s,stop:n}:{color:s,stop:null}},H1=function(r,t){var s=r[0],n=r[r.length-1];s.stop===null&&(s.stop=wa),n.stop===null&&(n.stop=CA);for(var a=[],i=0,c=0;c<r.length;c++){var A=r[c].stop;if(A!==null){var d=Pr(A,t);d>i?a.push(d):a.push(i),i=d}else a.push(null)}for(var u=null,c=0;c<a.length;c++){var m=a[c];if(m===null)u===null&&(u=c);else if(u!==null){for(var f=c-u,x=a[u-1],g=(m-x)/(f+1),y=1;y<=f;y++)a[u+y-1]=g*y;u=null}}return r.map(function(b,B){var N=b.color;return{color:N,stop:Math.max(Math.min(1,a[B]/t),0)}})},hQ=function(r,t,s){var n=t/2,a=s/2,i=Pr(r[0],t)-n,c=a-Pr(r[1],s);return(Math.atan2(c,i)+Math.PI*2)%(Math.PI*2)},mQ=function(r,t,s){var n=typeof r=="number"?r:hQ(r,t,s),a=Math.abs(t*Math.sin(n))+Math.abs(s*Math.cos(n)),i=t/2,c=s/2,A=a/2,d=Math.sin(n-Math.PI/2)*A,u=Math.cos(n-Math.PI/2)*A;return[a,i-u,i+u,c-d,c+d]},nl=function(r,t){return Math.sqrt(r*r+t*t)},K1=function(r,t,s,n,a){var i=[[0,0],[0,t],[r,0],[r,t]];return i.reduce(function(c,A){var d=A[0],u=A[1],m=nl(s-d,n-u);return(a?m<c.optimumDistance:m>c.optimumDistance)?{optimumCorner:A,optimumDistance:m}:c},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},fQ=function(r,t,s,n,a){var i=0,c=0;switch(r.size){case 0:r.shape===0?i=c=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(s),Math.abs(s-a)):r.shape===1&&(i=Math.min(Math.abs(t),Math.abs(t-n)),c=Math.min(Math.abs(s),Math.abs(s-a)));break;case 2:if(r.shape===0)i=c=Math.min(nl(t,s),nl(t,s-a),nl(t-n,s),nl(t-n,s-a));else if(r.shape===1){var A=Math.min(Math.abs(s),Math.abs(s-a))/Math.min(Math.abs(t),Math.abs(t-n)),d=K1(n,a,t,s,!0),u=d[0],m=d[1];i=nl(u-t,(m-s)/A),c=A*i}break;case 1:r.shape===0?i=c=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(s),Math.abs(s-a)):r.shape===1&&(i=Math.max(Math.abs(t),Math.abs(t-n)),c=Math.max(Math.abs(s),Math.abs(s-a)));break;case 3:if(r.shape===0)i=c=Math.max(nl(t,s),nl(t,s-a),nl(t-n,s),nl(t-n,s-a));else if(r.shape===1){var A=Math.max(Math.abs(s),Math.abs(s-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=K1(n,a,t,s,!1),u=f[0],m=f[1];i=nl(u-t,(m-s)/A),c=A*i}break}return Array.isArray(r.size)&&(i=Pr(r.size[0],n),c=r.size.length===2?Pr(r.size[1],a):i),[i,c]},pQ=function(r,t){var s=vo(180),n=[];return sc(t).forEach(function(a,i){if(i===0){var c=a[0];if(c.type===20&&c.value==="to"){s=y5(a);return}else if(b5(c)){s=Sp.parse(r,c);return}}var A=Ep(r,a);n.push(A)}),{angle:s,stops:n,type:1}},Ym=function(r,t){var s=vo(180),n=[];return sc(t).forEach(function(a,i){if(i===0){var c=a[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){s=y5(a);return}else if(b5(c)){s=(Sp.parse(r,c)+vo(270))%vo(360);return}}var A=Ep(r,a);n.push(A)}),{angle:s,stops:n,type:1}},gQ=function(r,t){var s=vo(180),n=[],a=1,i=0,c=3,A=[];return sc(t).forEach(function(d,u){var m=d[0];if(u===0){if(Sr(m)&&m.value==="linear"){a=1;return}else if(Sr(m)&&m.value==="radial"){a=2;return}}if(m.type===18){if(m.name==="from"){var f=DA.parse(r,m.values[0]);n.push({stop:wa,color:f})}else if(m.name==="to"){var f=DA.parse(r,m.values[0]);n.push({stop:CA,color:f})}else if(m.name==="color-stop"){var x=m.values.filter(Iu);if(x.length===2){var f=DA.parse(r,x[1]),g=x[0];Mu(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:f})}}}}),a===1?{angle:(s+vo(180))%vo(360),stops:n,type:a}:{size:c,shape:i,stops:n,position:A,type:a}},N5="closest-side",j5="farthest-side",B5="closest-corner",C5="farthest-corner",S5="circle",E5="ellipse",F5="cover",_5="contain",xQ=function(r,t){var s=0,n=3,a=[],i=[];return sc(t).forEach(function(c,A){var d=!0;if(A===0){var u=!1;d=c.reduce(function(f,x){if(u)if(Sr(x))switch(x.value){case"center":return i.push(iv),f;case"top":case"left":return i.push(wa),f;case"right":case"bottom":return i.push(CA),f}else(_n(x)||VA(x))&&i.push(x);else if(Sr(x))switch(x.value){case S5:return s=0,!1;case E5:return s=1,!1;case"at":return u=!0,!1;case N5:return n=0,!1;case F5:case j5:return n=1,!1;case _5:case B5:return n=2,!1;case C5:return n=3,!1}else if(VA(x)||_n(x))return Array.isArray(n)||(n=[]),n.push(x),!1;return f},d)}if(d){var m=Ep(r,c);a.push(m)}}),{size:n,shape:s,stops:a,position:i,type:2}},Jm=function(r,t){var s=0,n=3,a=[],i=[];return sc(t).forEach(function(c,A){var d=!0;if(A===0?d=c.reduce(function(m,f){if(Sr(f))switch(f.value){case"center":return i.push(iv),!1;case"top":case"left":return i.push(wa),!1;case"right":case"bottom":return i.push(CA),!1}else if(_n(f)||VA(f))return i.push(f),!1;return m},d):A===1&&(d=c.reduce(function(m,f){if(Sr(f))switch(f.value){case S5:return s=0,!1;case E5:return s=1,!1;case _5:case N5:return n=0,!1;case j5:return n=1,!1;case B5:return n=2,!1;case F5:case C5:return n=3,!1}else if(VA(f)||_n(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return m},d)),d){var u=Ep(r,c);a.push(u)}}),{size:n,shape:s,stops:a,position:i,type:2}},vQ=function(r){return r.type===1},wQ=function(r){return r.type===2},ov={name:"image",parse:function(r,t){if(t.type===22){var s={url:t.value,type:0};return r.cache.addImage(t.value),s}if(t.type===18){var n=k5[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(r,t.values)}throw new Error("Unsupported image type "+t.type)}};function bQ(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!k5[r.name])}var k5={"linear-gradient":pQ,"-moz-linear-gradient":Ym,"-ms-linear-gradient":Ym,"-o-linear-gradient":Ym,"-webkit-linear-gradient":Ym,"radial-gradient":xQ,"-moz-radial-gradient":Jm,"-ms-radial-gradient":Jm,"-o-radial-gradient":Jm,"-webkit-radial-gradient":Jm,"-webkit-gradient":gQ},yQ={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,t){if(t.length===0)return[];var s=t[0];return s.type===20&&s.value==="none"?[]:t.filter(function(n){return Iu(n)&&bQ(n)}).map(function(n){return ov.parse(r,n)})}},NQ={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,t){return t.map(function(s){if(Sr(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},jQ={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,t){return sc(t).map(function(s){return s.filter(_n)}).map(p5)}},BQ={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,t){return sc(t).map(function(s){return s.filter(Sr).map(function(n){return n.value}).join(" ")}).map(CQ)}},CQ=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Nu;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(Nu||(Nu={}));var SQ={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,t){return sc(t).map(function(s){return s.filter(EQ)})}},EQ=function(r){return Sr(r)||_n(r)},Fp=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},FQ=Fp("top"),_Q=Fp("right"),kQ=Fp("bottom"),UQ=Fp("left"),_p=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(t,s){return p5(s.filter(_n))}}},IQ=_p("top-left"),LQ=_p("top-right"),QQ=_p("bottom-right"),TQ=_p("bottom-left"),kp=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,s){switch(s){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},PQ=kp("top"),RQ=kp("right"),DQ=kp("bottom"),OQ=kp("left"),Up=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,s){return Wh(s)?s.number:0}}},MQ=Up("top"),HQ=Up("right"),KQ=Up("bottom"),VQ=Up("left"),zQ={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$Q={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},GQ={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,t){return t.filter(Sr).reduce(function(s,n){return s|WQ(n.value)},0)}},WQ=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},qQ={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},YQ={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},zf;(function(r){r.NORMAL="normal",r.STRICT="strict"})(zf||(zf={}));var JQ={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"strict":return zf.STRICT;case"normal":default:return zf.NORMAL}}},XQ={name:"line-height",initialValue:"normal",prefix:!1,type:4},V1=function(r,t){return Sr(r)&&r.value==="normal"?1.2*t:r.type===17?t*r.number:_n(r)?Pr(r,t):t},ZQ={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,t){return t.type===20&&t.value==="none"?null:ov.parse(r,t)}},e8={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},i0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ip=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},t8=Ip("top"),s8=Ip("right"),r8=Ip("bottom"),n8=Ip("left"),a8={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,t){return t.filter(Sr).map(function(s){switch(s.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},i8={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Lp=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},o8=Lp("top"),l8=Lp("right"),c8=Lp("bottom"),A8=Lp("left"),d8={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},u8={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},h8={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,t){return t.length===1&&a0(t[0],"none")?[]:sc(t).map(function(s){for(var n={color:_c.TRANSPARENT,offsetX:wa,offsetY:wa,blur:wa},a=0,i=0;i<s.length;i++){var c=s[i];VA(c)?(a===0?n.offsetX=c:a===1?n.offsetY=c:n.blur=c,a++):n.color=DA.parse(r,c)}return n})}},m8={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},f8={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var s=x8[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return s(t.values)}return null}},p8=function(r){var t=r.filter(function(s){return s.type===17}).map(function(s){return s.number});return t.length===6?t:null},g8=function(r){var t=r.filter(function(d){return d.type===17}).map(function(d){return d.number}),s=t[0],n=t[1];t[2],t[3];var a=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var c=t[12],A=t[13];return t[14],t[15],t.length===16?[s,n,a,i,c,A]:null},x8={matrix:p8,matrix3d:g8},z1={type:16,number:50,flags:Gh},v8=[z1,z1],w8={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,t){var s=t.filter(_n);return s.length!==2?v8:[s[0],s[1]]}},b8={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Eh;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(Eh||(Eh={}));var y8={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"break-all":return Eh.BREAK_ALL;case"keep-all":return Eh.KEEP_ALL;case"normal":default:return Eh.NORMAL}}},N8={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,t){if(t.type===20)return{auto:!0,order:0};if(Mu(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},U5={name:"time",parse:function(r,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},j8={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,t){return Mu(t)?t.number:1}},B8={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},C8={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,t){return t.filter(Sr).map(function(s){switch(s.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(s){return s!==0})}},S8={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,t){var s=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:s.push(a.value);break;case 17:s.push(a.number.toString());break;case 4:n.push(s.join(" ")),s.length=0;break}}),s.length&&n.push(s.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},E8={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},F8={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,t){if(Mu(t))return t.number;if(Sr(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},_8={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,t){return t.filter(Sr).map(function(s){return s.value})}},k8={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Kn=function(r,t){return(r&t)!==0},U8={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,t){if(t.length===0)return[];var s=t[0];return s.type===20&&s.value==="none"?[]:t}},I8={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,t){if(t.length===0)return null;var s=t[0];if(s.type===20&&s.value==="none")return null;for(var n=[],a=t.filter(f5),i=0;i<a.length;i++){var c=a[i],A=a[i+1];if(c.type===20){var d=A&&Mu(A)?A.number:1;n.push({counter:c.value,increment:d})}}return n}},L8={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,t){if(t.length===0)return[];for(var s=[],n=t.filter(f5),a=0;a<n.length;a++){var i=n[a],c=n[a+1];if(Sr(i)&&i.value!=="none"){var A=c&&Mu(c)?c.number:0;s.push({counter:i.value,reset:A})}}return s}},Q8={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,t){return t.filter(Wh).map(function(s){return U5.parse(r,s)})}},T8={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,t){if(t.length===0)return null;var s=t[0];if(s.type===20&&s.value==="none")return null;var n=[],a=t.filter(lQ);if(a.length%2!==0)return null;for(var i=0;i<a.length;i+=2){var c=a[i].value,A=a[i+1].value;n.push({open:c,close:A})}return n}},$1=function(r,t,s){if(!r)return"";var n=r[Math.min(t,r.length-1)];return n?s?n.open:n.close:""},P8={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,t){return t.length===1&&a0(t[0],"none")?[]:sc(t).map(function(s){for(var n={color:255,offsetX:wa,offsetY:wa,blur:wa,spread:wa,inset:!1},a=0,i=0;i<s.length;i++){var c=s[i];a0(c,"inset")?n.inset=!0:VA(c)?(a===0?n.offsetX=c:a===1?n.offsetY=c:a===2?n.blur=c:n.spread=c,a++):n.color=DA.parse(r,c)}return n})}},R8={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,t){var s=[0,1,2],n=[];return t.filter(Sr).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),s.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},D8={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},O8={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,t){return Wh(t)?t.number:0}},M8=(function(){function r(t,s){var n,a;this.animationDuration=qt(t,Q8,s.animationDuration),this.backgroundClip=qt(t,dQ,s.backgroundClip),this.backgroundColor=qt(t,uQ,s.backgroundColor),this.backgroundImage=qt(t,yQ,s.backgroundImage),this.backgroundOrigin=qt(t,NQ,s.backgroundOrigin),this.backgroundPosition=qt(t,jQ,s.backgroundPosition),this.backgroundRepeat=qt(t,BQ,s.backgroundRepeat),this.backgroundSize=qt(t,SQ,s.backgroundSize),this.borderTopColor=qt(t,FQ,s.borderTopColor),this.borderRightColor=qt(t,_Q,s.borderRightColor),this.borderBottomColor=qt(t,kQ,s.borderBottomColor),this.borderLeftColor=qt(t,UQ,s.borderLeftColor),this.borderTopLeftRadius=qt(t,IQ,s.borderTopLeftRadius),this.borderTopRightRadius=qt(t,LQ,s.borderTopRightRadius),this.borderBottomRightRadius=qt(t,QQ,s.borderBottomRightRadius),this.borderBottomLeftRadius=qt(t,TQ,s.borderBottomLeftRadius),this.borderTopStyle=qt(t,PQ,s.borderTopStyle),this.borderRightStyle=qt(t,RQ,s.borderRightStyle),this.borderBottomStyle=qt(t,DQ,s.borderBottomStyle),this.borderLeftStyle=qt(t,OQ,s.borderLeftStyle),this.borderTopWidth=qt(t,MQ,s.borderTopWidth),this.borderRightWidth=qt(t,HQ,s.borderRightWidth),this.borderBottomWidth=qt(t,KQ,s.borderBottomWidth),this.borderLeftWidth=qt(t,VQ,s.borderLeftWidth),this.boxShadow=qt(t,P8,s.boxShadow),this.color=qt(t,zQ,s.color),this.direction=qt(t,$Q,s.direction),this.display=qt(t,GQ,s.display),this.float=qt(t,qQ,s.cssFloat),this.fontFamily=qt(t,S8,s.fontFamily),this.fontSize=qt(t,E8,s.fontSize),this.fontStyle=qt(t,k8,s.fontStyle),this.fontVariant=qt(t,_8,s.fontVariant),this.fontWeight=qt(t,F8,s.fontWeight),this.letterSpacing=qt(t,YQ,s.letterSpacing),this.lineBreak=qt(t,JQ,s.lineBreak),this.lineHeight=qt(t,XQ,s.lineHeight),this.listStyleImage=qt(t,ZQ,s.listStyleImage),this.listStylePosition=qt(t,e8,s.listStylePosition),this.listStyleType=qt(t,i0,s.listStyleType),this.marginTop=qt(t,t8,s.marginTop),this.marginRight=qt(t,s8,s.marginRight),this.marginBottom=qt(t,r8,s.marginBottom),this.marginLeft=qt(t,n8,s.marginLeft),this.opacity=qt(t,j8,s.opacity);var i=qt(t,a8,s.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=qt(t,i8,s.overflowWrap),this.paddingTop=qt(t,o8,s.paddingTop),this.paddingRight=qt(t,l8,s.paddingRight),this.paddingBottom=qt(t,c8,s.paddingBottom),this.paddingLeft=qt(t,A8,s.paddingLeft),this.paintOrder=qt(t,R8,s.paintOrder),this.position=qt(t,u8,s.position),this.textAlign=qt(t,d8,s.textAlign),this.textDecorationColor=qt(t,B8,(n=s.textDecorationColor)!==null&&n!==void 0?n:s.color),this.textDecorationLine=qt(t,C8,(a=s.textDecorationLine)!==null&&a!==void 0?a:s.textDecoration),this.textShadow=qt(t,h8,s.textShadow),this.textTransform=qt(t,m8,s.textTransform),this.transform=qt(t,f8,s.transform),this.transformOrigin=qt(t,w8,s.transformOrigin),this.visibility=qt(t,b8,s.visibility),this.webkitTextStrokeColor=qt(t,D8,s.webkitTextStrokeColor),this.webkitTextStrokeWidth=qt(t,O8,s.webkitTextStrokeWidth),this.wordBreak=qt(t,y8,s.wordBreak),this.zIndex=qt(t,N8,s.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return OA(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Kn(this.display,4)||Kn(this.display,33554432)||Kn(this.display,268435456)||Kn(this.display,536870912)||Kn(this.display,67108864)||Kn(this.display,134217728)},r})(),H8=(function(){function r(t,s){this.content=qt(t,U8,s.content),this.quotes=qt(t,T8,s.quotes)}return r})(),G1=(function(){function r(t,s){this.counterIncrement=qt(t,I8,s.counterIncrement),this.counterReset=qt(t,L8,s.counterReset)}return r})(),qt=function(r,t,s){var n=new h5,a=s!==null&&typeof s<"u"?s.toString():t.initialValue;n.write(a);var i=new m5(n.read());switch(t.type){case 2:var c=i.parseComponentValue();return t.parse(r,Sr(c)?c.value:t.initialValue);case 0:return t.parse(r,i.parseComponentValue());case 1:return t.parse(r,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return Sp.parse(r,i.parseComponentValue());case"color":return DA.parse(r,i.parseComponentValue());case"image":return ov.parse(r,i.parseComponentValue());case"length":var A=i.parseComponentValue();return VA(A)?A:wa;case"length-percentage":var d=i.parseComponentValue();return _n(d)?d:wa;case"time":return U5.parse(r,i.parseComponentValue())}break}},K8="data-html2canvas-debug",V8=function(r){var t=r.getAttribute(K8);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},o0=function(r,t){var s=V8(r);return s===1||t===s},rc=(function(){function r(t,s){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,o0(s,3))debugger;this.styles=new M8(t,window.getComputedStyle(s,null)),A0(s)&&(this.styles.animationDuration.some(function(n){return n>0})&&(s.style.animationDuration="0s"),this.styles.transform!==null&&(s.style.transform="none")),this.bounds=Bp(this.context,s),o0(s,4)&&(this.flags|=16)}return r})(),z8="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",W1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xm=0;Xm<W1.length;Xm++)yh[W1.charCodeAt(Xm)]=Xm;var $8=function(r){var t=r.length*.75,s=r.length,n,a=0,i,c,A,d;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),m=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<s;n+=4)i=yh[r.charCodeAt(n)],c=yh[r.charCodeAt(n+1)],A=yh[r.charCodeAt(n+2)],d=yh[r.charCodeAt(n+3)],m[a++]=i<<2|c>>4,m[a++]=(c&15)<<4|A>>2,m[a++]=(A&3)<<6|d&63;return u},G8=function(r){for(var t=r.length,s=[],n=0;n<t;n+=2)s.push(r[n+1]<<8|r[n]);return s},W8=function(r){for(var t=r.length,s=[],n=0;n<t;n+=4)s.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return s},vd=5,lv=11,Wg=2,q8=lv-vd,I5=65536>>vd,Y8=1<<vd,qg=Y8-1,J8=1024>>vd,X8=I5+J8,Z8=X8,eT=32,tT=Z8+eT,sT=65536>>lv,rT=1<<q8,nT=rT-1,q1=function(r,t,s){return r.slice?r.slice(t,s):new Uint16Array(Array.prototype.slice.call(r,t,s))},aT=function(r,t,s){return r.slice?r.slice(t,s):new Uint32Array(Array.prototype.slice.call(r,t,s))},iT=function(r,t){var s=$8(r),n=Array.isArray(s)?W8(s):new Uint32Array(s),a=Array.isArray(s)?G8(s):new Uint16Array(s),i=24,c=q1(a,i/2,n[4]/2),A=n[5]===2?q1(a,(i+n[4])/2):aT(n,Math.ceil((i+n[4])/4));return new oT(n[0],n[1],n[2],n[3],c,A)},oT=(function(){function r(t,s,n,a,i,c){this.initialValue=t,this.errorValue=s,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=c}return r.prototype.get=function(t){var s;if(t>=0){if(t<55296||t>56319&&t<=65535)return s=this.index[t>>vd],s=(s<<Wg)+(t&qg),this.data[s];if(t<=65535)return s=this.index[I5+(t-55296>>vd)],s=(s<<Wg)+(t&qg),this.data[s];if(t<this.highStart)return s=tT-sT+(t>>lv),s=this.index[s],s+=t>>vd&nT,s=this.index[s],s=(s<<Wg)+(t&qg),this.data[s];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),Y1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zm=0;Zm<Y1.length;Zm++)lT[Y1.charCodeAt(Zm)]=Zm;var cT=1,Yg=2,Jg=3,J1=4,X1=5,AT=7,Z1=8,Xg=9,Zg=10,eb=11,tb=12,sb=13,rb=14,ex=15,dT=function(r){for(var t=[],s=0,n=r.length;s<n;){var a=r.charCodeAt(s++);if(a>=55296&&a<=56319&&s<n){var i=r.charCodeAt(s++);(i&64512)===56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),s--)}else t.push(a)}return t},uT=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var s=r.length;if(!s)return"";for(var n=[],a=-1,i="";++a<s;){var c=r[a];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(a+1===s||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},hT=iT(z8),mo="",tx="",mT=function(r){return hT.get(r)},fT=function(r,t,s){var n=s-2,a=t[n],i=t[s-1],c=t[s];if(i===Yg&&c===Jg)return mo;if(i===Yg||i===Jg||i===J1||c===Yg||c===Jg||c===J1)return tx;if(i===Z1&&[Z1,Xg,eb,tb].indexOf(c)!==-1||(i===eb||i===Xg)&&(c===Xg||c===Zg)||(i===tb||i===Zg)&&c===Zg||c===sb||c===X1||c===AT||i===cT)return mo;if(i===sb&&c===rb){for(;a===X1;)a=t[--n];if(a===rb)return mo}if(i===ex&&c===ex){for(var A=0;a===ex;)A++,a=t[--n];if(A%2===0)return mo}return tx},pT=function(r){var t=dT(r),s=t.length,n=0,a=0,i=t.map(mT);return{next:function(){if(n>=s)return{done:!0,value:null};for(var c=mo;n<s&&(c=fT(t,i,++n))===mo;);if(c!==mo||n===s){var A=uT.apply(null,t.slice(a,n));return a=n,{value:A,done:!1}}return{done:!0,value:null}}}},gT=function(r){for(var t=pT(r),s=[],n;!(n=t.next()).done;)n.value&&s.push(n.value.slice());return s},xT=function(r){var t=123;if(r.createRange){var s=r.createRange();if(s.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=t+"px",n.style.display="block",r.body.appendChild(n),s.selectNode(n);var a=s.getBoundingClientRect(),i=Math.round(a.height);if(r.body.removeChild(n),i===t)return!0}}return!1},vT=function(r){var t=r.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",r.body.appendChild(t);var s=r.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=Cp(n.data).map(function(d){return wn(d)}),i=0,c={},A=a.every(function(d,u){s.setStart(n,i),s.setEnd(n,i+d.length);var m=s.getBoundingClientRect();i+=d.length;var f=m.x>c.x||m.y>c.y;return c=m,u===0?!0:f});return r.body.removeChild(t),A},wT=function(){return typeof new Image().crossOrigin<"u"},bT=function(){return typeof new XMLHttpRequest().responseType=="string"},yT=function(r){var t=new Image,s=r.createElement("canvas"),n=s.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),s.toDataURL()}catch{return!1}return!0},nb=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},NT=function(r){var t=r.createElement("canvas"),s=100;t.width=s,t.height=s;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,s,s);var a=new Image,i=t.toDataURL();a.src=i;var c=l0(s,s,0,0,a);return n.fillStyle="red",n.fillRect(0,0,s,s),ab(c).then(function(A){n.drawImage(A,0,0);var d=n.getImageData(0,0,s,s).data;n.fillStyle="red",n.fillRect(0,0,s,s);var u=r.createElement("div");return u.style.backgroundImage="url("+i+")",u.style.height=s+"px",nb(d)?ab(l0(s,s,0,0,u)):Promise.reject(!1)}).then(function(A){return n.drawImage(A,0,0),nb(n.getImageData(0,0,s,s).data)}).catch(function(){return!1})},l0=function(r,t,s,n,a){var i="http://www.w3.org/2000/svg",c=document.createElementNS(i,"svg"),A=document.createElementNS(i,"foreignObject");return c.setAttributeNS(null,"width",r.toString()),c.setAttributeNS(null,"height",t.toString()),A.setAttributeNS(null,"width","100%"),A.setAttributeNS(null,"height","100%"),A.setAttributeNS(null,"x",s.toString()),A.setAttributeNS(null,"y",n.toString()),A.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(A),A.appendChild(a),c},ab=function(r){return new Promise(function(t,s){var n=new Image;n.onload=function(){return t(n)},n.onerror=s,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},va={get SUPPORT_RANGE_BOUNDS(){var r=xT(document);return Object.defineProperty(va,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=va.SUPPORT_RANGE_BOUNDS&&vT(document);return Object.defineProperty(va,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=yT(document);return Object.defineProperty(va,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?NT(document):Promise.resolve(!1);return Object.defineProperty(va,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=wT();return Object.defineProperty(va,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=bT();return Object.defineProperty(va,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(va,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(va,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Fh=(function(){function r(t,s){this.text=t,this.bounds=s}return r})(),jT=function(r,t,s,n){var a=ST(t,s),i=[],c=0;return a.forEach(function(A){if(s.textDecorationLine.length||A.trim().length>0)if(va.SUPPORT_RANGE_BOUNDS){var d=ib(n,c,A.length).getClientRects();if(d.length>1){var u=cv(A),m=0;u.forEach(function(x){i.push(new Fh(x,Tc.fromDOMRectList(r,ib(n,m+c,x.length).getClientRects()))),m+=x.length})}else i.push(new Fh(A,Tc.fromDOMRectList(r,d)))}else{var f=n.splitText(A.length);i.push(new Fh(A,BT(r,n))),n=f}else va.SUPPORT_RANGE_BOUNDS||(n=n.splitText(A.length));c+=A.length}),i},BT=function(r,t){var s=t.ownerDocument;if(s){var n=s.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var i=Bp(r,n);return n.firstChild&&a.replaceChild(n.firstChild,n),i}}return Tc.EMPTY},ib=function(r,t,s){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(r,t),a.setEnd(r,t+s),a},cv=function(r){if(va.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(r)).map(function(s){return s.segment})}return gT(r)},CT=function(r,t){if(va.SUPPORT_NATIVE_TEXT_SEGMENTATION){var s=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(s.segment(r)).map(function(n){return n.segment})}return FT(r,t)},ST=function(r,t){return t.letterSpacing!==0?cv(r):CT(r,t)},ET=[32,160,4961,65792,65793,4153,4241],FT=function(r,t){for(var s=sL(r,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,i=function(){if(a.value){var c=a.value.slice(),A=Cp(c),d="";A.forEach(function(u){ET.indexOf(u)===-1?d+=wn(u):(d.length&&n.push(d),n.push(wn(u)),d="")}),d.length&&n.push(d)}};!(a=s.next()).done;)i();return n},_T=(function(){function r(t,s,n){this.text=kT(s.data,n.textTransform),this.textBounds=jT(t,this.text,n,s)}return r})(),kT=function(r,t){switch(t){case 1:return r.toLowerCase();case 3:return r.replace(UT,IT);case 2:return r.toUpperCase();default:return r}},UT=/(^|\s|:|-|\(|\))([a-z])/g,IT=function(r,t,s){return r.length>0?t+s.toUpperCase():r},L5=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t})(rc),Q5=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t})(rc),T5=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this,i=new XMLSerializer,c=Bp(s,n);return n.setAttribute("width",c.width+"px"),n.setAttribute("height",c.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t})(rc),P5=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this;return a.value=n.value,a}return t})(rc),c0=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t})(rc),LT=[{type:15,flags:0,unit:"px",number:3}],QT=[{type:16,flags:0,number:50}],TT=function(r){return r.width>r.height?new Tc(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new Tc(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},PT=function(r){var t=r.type===RT?new Array(r.value.length+1).join(""):r.value;return t.length===0?r.placeholder||"":t},$f="checkbox",Gf="radio",RT="password",ob=707406591,Av=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=PT(n),(a.type===$f||a.type===Gf)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=TT(a.bounds)),a.type){case $f:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=LT;break;case Gf:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=QT;break}return a}return t})(rc),R5=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this,i=n.options[n.selectedIndex||0];return a.value=i&&i.text||"",a}return t})(rc),D5=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this;return a.value=n.value,a}return t})(rc),O5=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=H5(s,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Sh(s,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):_c.TRANSPARENT,c=n.contentWindow.document.body?Sh(s,getComputedStyle(n.contentWindow.document.body).backgroundColor):_c.TRANSPARENT;a.backgroundColor=OA(i)?OA(c)?a.styles.backgroundColor:c:i}}catch{}return a}return t})(rc),DT=["OL","UL","MENU"],yf=function(r,t,s,n){for(var a=t.firstChild,i=void 0;a;a=i)if(i=a.nextSibling,K5(a)&&a.data.trim().length>0)s.textNodes.push(new _T(r,a,s.styles));else if(gu(a))if(G5(a)&&a.assignedNodes)a.assignedNodes().forEach(function(A){return yf(r,A,s,n)});else{var c=M5(r,a);c.styles.isVisible()&&(OT(a,c,n)?c.flags|=4:MT(c.styles)&&(c.flags|=2),DT.indexOf(a.tagName)!==-1&&(c.flags|=8),s.elements.push(c),a.slot,a.shadowRoot?yf(r,a.shadowRoot,c,n):!Wf(a)&&!V5(a)&&!qf(a)&&yf(r,a,c,n))}},M5=function(r,t){return d0(t)?new L5(r,t):z5(t)?new Q5(r,t):V5(t)?new T5(r,t):HT(t)?new P5(r,t):KT(t)?new c0(r,t):VT(t)?new Av(r,t):qf(t)?new R5(r,t):Wf(t)?new D5(r,t):$5(t)?new O5(r,t):new rc(r,t)},H5=function(r,t){var s=M5(r,t);return s.flags|=4,yf(r,t,s,s),s},OT=function(r,t,s){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||dv(r)&&s.styles.isTransparent()},MT=function(r){return r.isPositioned()||r.isFloating()},K5=function(r){return r.nodeType===Node.TEXT_NODE},gu=function(r){return r.nodeType===Node.ELEMENT_NODE},A0=function(r){return gu(r)&&typeof r.style<"u"&&!Nf(r)},Nf=function(r){return typeof r.className=="object"},HT=function(r){return r.tagName==="LI"},KT=function(r){return r.tagName==="OL"},VT=function(r){return r.tagName==="INPUT"},zT=function(r){return r.tagName==="HTML"},V5=function(r){return r.tagName==="svg"},dv=function(r){return r.tagName==="BODY"},z5=function(r){return r.tagName==="CANVAS"},lb=function(r){return r.tagName==="VIDEO"},d0=function(r){return r.tagName==="IMG"},$5=function(r){return r.tagName==="IFRAME"},cb=function(r){return r.tagName==="STYLE"},$T=function(r){return r.tagName==="SCRIPT"},Wf=function(r){return r.tagName==="TEXTAREA"},qf=function(r){return r.tagName==="SELECT"},G5=function(r){return r.tagName==="SLOT"},Ab=function(r){return r.tagName.indexOf("-")>0},GT=(function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(t){var s=this.counters[t];return s&&s.length?s[s.length-1]:1},r.prototype.getCounterValues=function(t){var s=this.counters[t];return s||[]},r.prototype.pop=function(t){var s=this;t.forEach(function(n){return s.counters[n].pop()})},r.prototype.parse=function(t){var s=this,n=t.counterIncrement,a=t.counterReset,i=!0;n!==null&&n.forEach(function(A){var d=s.counters[A.counter];d&&A.increment!==0&&(i=!1,d.length||d.push(1),d[Math.max(0,d.length-1)]+=A.increment)});var c=[];return i&&a.forEach(function(A){var d=s.counters[A.counter];c.push(A.counter),d||(d=s.counters[A.counter]=[]),d.push(A.reset)}),c},r})(),db={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ub={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},WT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},qT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ou=function(r,t,s,n,a,i){return r<t||r>s?Mh(r,a,i.length>0):n.integers.reduce(function(c,A,d){for(;r>=A;)r-=A,c+=n.values[d];return c},"")+i},W5=function(r,t,s,n){var a="";do s||r--,a=n(r)+a,r/=t;while(r*t>=t);return a},vn=function(r,t,s,n,a){var i=s-t+1;return(r<0?"-":"")+(W5(Math.abs(r),i,n,function(c){return wn(Math.floor(c%i)+t)})+a)},ud=function(r,t,s){s===void 0&&(s=". ");var n=t.length;return W5(Math.abs(r),n,!1,function(a){return t[Math.floor(a%n)]})+s},hu=1,bA=2,yA=4,Nh=8,yc=function(r,t,s,n,a,i){if(r<-9999||r>9999)return Mh(r,4,a.length>0);var c=Math.abs(r),A=a;if(c===0)return t[0]+A;for(var d=0;c>0&&d<=4;d++){var u=c%10;u===0&&Kn(i,hu)&&A!==""?A=t[u]+A:u>1||u===1&&d===0||u===1&&d===1&&Kn(i,bA)||u===1&&d===1&&Kn(i,yA)&&r>100||u===1&&d>1&&Kn(i,Nh)?A=t[u]+(d>0?s[d-1]:"")+A:u===1&&d>0&&(A=s[d-1]+A),c=Math.floor(c/10)}return(r<0?n:"")+A},hb="",mb="",fb="",sx="",Mh=function(r,t,s){var n=s?". ":"",a=s?"":"",i=s?", ":"",c=s?" ":"";switch(t){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var A=vn(r,48,57,!0,n);return A.length<4?"0"+A:A;case 4:return ud(r,"",a);case 6:return ou(r,1,3999,db,3,n).toLowerCase();case 7:return ou(r,1,3999,db,3,n);case 8:return vn(r,945,969,!1,n);case 9:return vn(r,97,122,!1,n);case 10:return vn(r,65,90,!1,n);case 11:return vn(r,1632,1641,!0,n);case 12:case 49:return ou(r,1,9999,ub,3,n);case 35:return ou(r,1,9999,ub,3,n).toLowerCase();case 13:return vn(r,2534,2543,!0,n);case 14:case 30:return vn(r,6112,6121,!0,n);case 15:return ud(r,"",a);case 16:return ud(r,"",a);case 17:case 48:return yc(r,"",hb,"",a,bA|yA|Nh);case 47:return yc(r,"",mb,"",a,hu|bA|yA|Nh);case 42:return yc(r,"",hb,"",a,bA|yA|Nh);case 41:return yc(r,"",mb,"",a,hu|bA|yA|Nh);case 26:return yc(r,"","",fb,a,0);case 25:return yc(r,"","",fb,a,hu|bA|yA);case 31:return yc(r,"","",sx,i,hu|bA|yA);case 33:return yc(r,"","",sx,i,0);case 32:return yc(r,"","",sx,i,hu|bA|yA);case 18:return vn(r,2406,2415,!0,n);case 20:return ou(r,1,19999,qT,3,n);case 21:return vn(r,2790,2799,!0,n);case 22:return vn(r,2662,2671,!0,n);case 22:return ou(r,1,10999,WT,3,n);case 23:return ud(r,"");case 24:return ud(r,"");case 27:return vn(r,3302,3311,!0,n);case 28:return ud(r,"",a);case 29:return ud(r,"",a);case 34:return vn(r,3792,3801,!0,n);case 37:return vn(r,6160,6169,!0,n);case 38:return vn(r,4160,4169,!0,n);case 39:return vn(r,2918,2927,!0,n);case 40:return vn(r,1776,1785,!0,n);case 43:return vn(r,3046,3055,!0,n);case 44:return vn(r,3174,3183,!0,n);case 45:return vn(r,3664,3673,!0,n);case 46:return vn(r,3872,3881,!0,n);case 3:default:return vn(r,48,57,!0,n)}},q5="data-html2canvas-ignore",pb=(function(){function r(t,s,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=s,this.counters=new GT,this.quoteDepth=0,!s.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(s.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(t,s){var n=this,a=YT(t,s);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,c=t.defaultView.pageYOffset,A=a.contentWindow,d=A.document,u=ZT(a).then(function(){return oi(n,void 0,void 0,function(){var m,f;return Va(this,function(x){switch(x.label){case 0:return this.scrolledElements.forEach(rP),A&&(A.scrollTo(s.left,s.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(A.scrollY!==s.top||A.scrollX!==s.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(A.scrollX-s.left,A.scrollY-s.top,0,0))),m=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:d.fonts&&d.fonts.ready?[4,d.fonts.ready]:[3,2];case 1:x.sent(),x.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,XT(d)]:[3,4];case 3:x.sent(),x.label=4;case 4:return typeof m=="function"?[2,Promise.resolve().then(function(){return m(d,f)}).then(function(){return a})]:[2,a]}})})});return d.open(),d.write(tP(document.doctype)+"<html></html>"),sP(this.referenceElement.ownerDocument,i,c),d.replaceChild(d.adoptNode(this.documentElement),d.documentElement),d.close(),u},r.prototype.createElementClone=function(t){if(o0(t,2))debugger;if(z5(t))return this.createCanvasClone(t);if(lb(t))return this.createVideoClone(t);if(cb(t))return this.createStyleClone(t);var s=t.cloneNode(!1);return d0(s)&&(d0(t)&&t.currentSrc&&t.currentSrc!==t.src&&(s.src=t.currentSrc,s.srcset=""),s.loading==="lazy"&&(s.loading="eager")),Ab(s)?this.createCustomElementClone(s):s},r.prototype.createCustomElementClone=function(t){var s=document.createElement("html2canvascustomelement");return rx(t.style,s),s},r.prototype.createStyleClone=function(t){try{var s=t.sheet;if(s&&s.cssRules){var n=[].slice.call(s.cssRules,0).reduce(function(i,c){return c&&typeof c.cssText=="string"?i+c.cssText:i},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return t.cloneNode(!1)},r.prototype.createCanvasClone=function(t){var s;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var i=t.getContext("2d"),c=a.getContext("2d");if(c)if(!this.options.allowTaint&&i)c.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var A=(s=t.getContext("webgl2"))!==null&&s!==void 0?s:t.getContext("webgl");if(A){var d=A.getContextAttributes();d?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}c.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},r.prototype.createVideoClone=function(t){var s=t.ownerDocument.createElement("canvas");s.width=t.offsetWidth,s.height=t.offsetHeight;var n=s.getContext("2d");try{return n&&(n.drawImage(t,0,0,s.width,s.height),this.options.allowTaint||n.getImageData(0,0,s.width,s.height)),s}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},r.prototype.appendChildNode=function(t,s,n){(!gu(s)||!$T(s)&&!s.hasAttribute(q5)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(s)))&&(!this.options.copyStyles||!gu(s)||!cb(s))&&t.appendChild(this.cloneNode(s,n))},r.prototype.cloneChildNodes=function(t,s,n){for(var a=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(gu(i)&&G5(i)&&typeof i.assignedNodes=="function"){var c=i.assignedNodes();c.length&&c.forEach(function(A){return a.appendChildNode(s,A,n)})}else this.appendChildNode(s,i,n)},r.prototype.cloneNode=function(t,s){if(K5(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&gu(t)&&(A0(t)||Nf(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var i=n.getComputedStyle(t),c=n.getComputedStyle(t,":before"),A=n.getComputedStyle(t,":after");this.referenceElement===t&&A0(a)&&(this.clonedReferenceElement=a),dv(a)&&iP(a);var d=this.counters.parse(new G1(this.context,i)),u=this.resolvePseudoContent(t,a,c,_h.BEFORE);Ab(t)&&(s=!0),lb(t)||this.cloneChildNodes(t,a,s),u&&a.insertBefore(u,a.firstChild);var m=this.resolvePseudoContent(t,a,A,_h.AFTER);return m&&a.appendChild(m),this.counters.pop(d),(i&&(this.options.copyStyles||Nf(t))&&!$5(t)||s)&&rx(i,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(Wf(t)||qf(t))&&(Wf(a)||qf(a))&&(a.value=t.value),a}return t.cloneNode(!1)},r.prototype.resolvePseudoContent=function(t,s,n,a){var i=this;if(n){var c=n.content,A=s.ownerDocument;if(!(!A||!c||c==="none"||c==="-moz-alt-content"||n.display==="none")){this.counters.parse(new G1(this.context,n));var d=new H8(this.context,n),u=A.createElement("html2canvaspseudoelement");rx(n,u),d.content.forEach(function(f){if(f.type===0)u.appendChild(A.createTextNode(f.value));else if(f.type===22){var x=A.createElement("img");x.src=f.value,x.style.opacity="1",u.appendChild(x)}else if(f.type===18){if(f.name==="attr"){var g=f.values.filter(Sr);g.length&&u.appendChild(A.createTextNode(t.getAttribute(g[0].value)||""))}else if(f.name==="counter"){var y=f.values.filter(Iu),b=y[0],B=y[1];if(b&&Sr(b)){var N=i.counters.getCounterValue(b.value),E=B&&Sr(B)?i0.parse(i.context,B.value):3;u.appendChild(A.createTextNode(Mh(N,E,!1)))}}else if(f.name==="counters"){var I=f.values.filter(Iu),b=I[0],k=I[1],B=I[2];if(b&&Sr(b)){var $=i.counters.getCounterValues(b.value),z=B&&Sr(B)?i0.parse(i.context,B.value):3,H=k&&k.type===0?k.value:"",T=$.map(function(L){return Mh(L,z,!1)}).join(H);u.appendChild(A.createTextNode(T))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(A.createTextNode($1(d.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(A.createTextNode($1(d.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(A.createTextNode(f.value))}}),u.className=u0+" "+h0;var m=a===_h.BEFORE?" "+u0:" "+h0;return Nf(s)?s.className.baseValue+=m:s.className+=m,u}}},r.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},r})(),_h;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(_h||(_h={}));var YT=function(r,t){var s=r.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=t.width.toString(),s.height=t.height.toString(),s.scrolling="no",s.setAttribute(q5,"true"),r.body.appendChild(s),s},JT=function(r){return new Promise(function(t){if(r.complete){t();return}if(!r.src){t();return}r.onload=t,r.onerror=t})},XT=function(r){return Promise.all([].slice.call(r.images,0).map(JT))},ZT=function(r){return new Promise(function(t,s){var n=r.contentWindow;if(!n)return s("No window assigned for iframe");var a=n.document;n.onload=r.onload=function(){n.onload=r.onload=null;var i=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(i),t(r))},50)}})},eP=["all","d","content"],rx=function(r,t){for(var s=r.length-1;s>=0;s--){var n=r.item(s);eP.indexOf(n)===-1&&t.style.setProperty(n,r.getPropertyValue(n))}return t},tP=function(r){var t="";return r&&(t+="<!DOCTYPE ",r.name&&(t+=r.name),r.internalSubset&&(t+=r.internalSubset),r.publicId&&(t+='"'+r.publicId+'"'),r.systemId&&(t+='"'+r.systemId+'"'),t+=">"),t},sP=function(r,t,s){r&&r.defaultView&&(t!==r.defaultView.pageXOffset||s!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(t,s)},rP=function(r){var t=r[0],s=r[1],n=r[2];t.scrollLeft=s,t.scrollTop=n},nP=":before",aP=":after",u0="___html2canvas___pseudoelement_before",h0="___html2canvas___pseudoelement_after",gb=`{
    content: "" !important;
    display: none !important;
}`,iP=function(r){oP(r,"."+u0+nP+gb+`
         .`+h0+aP+gb)},oP=function(r,t){var s=r.ownerDocument;if(s){var n=s.createElement("style");n.textContent=t,r.appendChild(n)}},Y5=(function(){function r(){}return r.getOrigin=function(t){var s=r._link;return s?(s.href=t,s.href=s.href,s.protocol+s.hostname+s.port):"about:blank"},r.isSameOrigin=function(t){return r.getOrigin(t)===r._origin},r.setContext=function(t){r._link=t.document.createElement("a"),r._origin=r.getOrigin(t.location.href)},r._origin="about:blank",r})(),lP=(function(){function r(t,s){this.context=t,this._options=s,this._cache={}}return r.prototype.addImage=function(t){var s=Promise.resolve();return this.has(t)||(ax(t)||uP(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),s},r.prototype.match=function(t){return this._cache[t]},r.prototype.loadImage=function(t){return oi(this,void 0,void 0,function(){var s,n,a,i,c=this;return Va(this,function(A){switch(A.label){case 0:return s=Y5.isSameOrigin(t),n=!nx(t)&&this._options.useCORS===!0&&va.SUPPORT_CORS_IMAGES&&!s,a=!nx(t)&&!s&&!ax(t)&&typeof this._options.proxy=="string"&&va.SUPPORT_CORS_XHR&&!n,!s&&this._options.allowTaint===!1&&!nx(t)&&!ax(t)&&!a&&!n?[2]:(i=t,a?[4,this.proxy(i)]:[3,2]);case 1:i=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(d,u){var m=new Image;m.onload=function(){return d(m)},m.onerror=u,(hP(i)||n)&&(m.crossOrigin="anonymous"),m.src=i,m.complete===!0&&setTimeout(function(){return d(m)},500),c._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},r.prototype.has=function(t){return typeof this._cache[t]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(t){var s=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(i,c){var A=va.SUPPORT_RESPONSE_TYPE?"blob":"text",d=new XMLHttpRequest;d.onload=function(){if(d.status===200)if(A==="text")i(d.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(x){return c(x)},!1),f.readAsDataURL(d.response)}else c("Failed to proxy resource "+a+" with status code "+d.status)},d.onerror=c;var u=n.indexOf("?")>-1?"&":"?";if(d.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+A),A!=="text"&&d instanceof XMLHttpRequest&&(d.responseType=A),s._options.imageTimeout){var m=s._options.imageTimeout;d.timeout=m,d.ontimeout=function(){return c("Timed out ("+m+"ms) proxying "+a)}}d.send()})},r})(),cP=/^data:image\/svg\+xml/i,AP=/^data:image\/.*;base64,/i,dP=/^data:image\/.*/i,uP=function(r){return va.SUPPORT_SVG_DRAWING||!mP(r)},nx=function(r){return dP.test(r)},hP=function(r){return AP.test(r)},ax=function(r){return r.substr(0,4)==="blob"},mP=function(r){return r.substr(-3).toLowerCase()==="svg"||cP.test(r)},zt=(function(){function r(t,s){this.type=0,this.x=t,this.y=s}return r.prototype.add=function(t,s){return new r(this.x+t,this.y+s)},r})(),lu=function(r,t,s){return new zt(r.x+(t.x-r.x)*s,r.y+(t.y-r.y)*s)},ef=(function(){function r(t,s,n,a){this.type=1,this.start=t,this.startControl=s,this.endControl=n,this.end=a}return r.prototype.subdivide=function(t,s){var n=lu(this.start,this.startControl,t),a=lu(this.startControl,this.endControl,t),i=lu(this.endControl,this.end,t),c=lu(n,a,t),A=lu(a,i,t),d=lu(c,A,t);return s?new r(this.start,n,c,d):new r(d,A,i,this.end)},r.prototype.add=function(t,s){return new r(this.start.add(t,s),this.startControl.add(t,s),this.endControl.add(t,s),this.end.add(t,s))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),go=function(r){return r.type===1},fP=(function(){function r(t){var s=t.styles,n=t.bounds,a=bh(s.borderTopLeftRadius,n.width,n.height),i=a[0],c=a[1],A=bh(s.borderTopRightRadius,n.width,n.height),d=A[0],u=A[1],m=bh(s.borderBottomRightRadius,n.width,n.height),f=m[0],x=m[1],g=bh(s.borderBottomLeftRadius,n.width,n.height),y=g[0],b=g[1],B=[];B.push((i+d)/n.width),B.push((y+f)/n.width),B.push((c+b)/n.height),B.push((u+x)/n.height);var N=Math.max.apply(Math,B);N>1&&(i/=N,c/=N,d/=N,u/=N,f/=N,x/=N,y/=N,b/=N);var E=n.width-d,I=n.height-x,k=n.width-f,$=n.height-b,z=s.borderTopWidth,H=s.borderRightWidth,T=s.borderBottomWidth,V=s.borderLeftWidth,G=Pr(s.paddingTop,t.bounds.width),L=Pr(s.paddingRight,t.bounds.width),F=Pr(s.paddingBottom,t.bounds.width),O=Pr(s.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||c>0?Yr(n.left+V/3,n.top+z/3,i-V/3,c-z/3,vr.TOP_LEFT):new zt(n.left+V/3,n.top+z/3),this.topRightBorderDoubleOuterBox=i>0||c>0?Yr(n.left+E,n.top+z/3,d-H/3,u-z/3,vr.TOP_RIGHT):new zt(n.left+n.width-H/3,n.top+z/3),this.bottomRightBorderDoubleOuterBox=f>0||x>0?Yr(n.left+k,n.top+I,f-H/3,x-T/3,vr.BOTTOM_RIGHT):new zt(n.left+n.width-H/3,n.top+n.height-T/3),this.bottomLeftBorderDoubleOuterBox=y>0||b>0?Yr(n.left+V/3,n.top+$,y-V/3,b-T/3,vr.BOTTOM_LEFT):new zt(n.left+V/3,n.top+n.height-T/3),this.topLeftBorderDoubleInnerBox=i>0||c>0?Yr(n.left+V*2/3,n.top+z*2/3,i-V*2/3,c-z*2/3,vr.TOP_LEFT):new zt(n.left+V*2/3,n.top+z*2/3),this.topRightBorderDoubleInnerBox=i>0||c>0?Yr(n.left+E,n.top+z*2/3,d-H*2/3,u-z*2/3,vr.TOP_RIGHT):new zt(n.left+n.width-H*2/3,n.top+z*2/3),this.bottomRightBorderDoubleInnerBox=f>0||x>0?Yr(n.left+k,n.top+I,f-H*2/3,x-T*2/3,vr.BOTTOM_RIGHT):new zt(n.left+n.width-H*2/3,n.top+n.height-T*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||b>0?Yr(n.left+V*2/3,n.top+$,y-V*2/3,b-T*2/3,vr.BOTTOM_LEFT):new zt(n.left+V*2/3,n.top+n.height-T*2/3),this.topLeftBorderStroke=i>0||c>0?Yr(n.left+V/2,n.top+z/2,i-V/2,c-z/2,vr.TOP_LEFT):new zt(n.left+V/2,n.top+z/2),this.topRightBorderStroke=i>0||c>0?Yr(n.left+E,n.top+z/2,d-H/2,u-z/2,vr.TOP_RIGHT):new zt(n.left+n.width-H/2,n.top+z/2),this.bottomRightBorderStroke=f>0||x>0?Yr(n.left+k,n.top+I,f-H/2,x-T/2,vr.BOTTOM_RIGHT):new zt(n.left+n.width-H/2,n.top+n.height-T/2),this.bottomLeftBorderStroke=y>0||b>0?Yr(n.left+V/2,n.top+$,y-V/2,b-T/2,vr.BOTTOM_LEFT):new zt(n.left+V/2,n.top+n.height-T/2),this.topLeftBorderBox=i>0||c>0?Yr(n.left,n.top,i,c,vr.TOP_LEFT):new zt(n.left,n.top),this.topRightBorderBox=d>0||u>0?Yr(n.left+E,n.top,d,u,vr.TOP_RIGHT):new zt(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||x>0?Yr(n.left+k,n.top+I,f,x,vr.BOTTOM_RIGHT):new zt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=y>0||b>0?Yr(n.left,n.top+$,y,b,vr.BOTTOM_LEFT):new zt(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||c>0?Yr(n.left+V,n.top+z,Math.max(0,i-V),Math.max(0,c-z),vr.TOP_LEFT):new zt(n.left+V,n.top+z),this.topRightPaddingBox=d>0||u>0?Yr(n.left+Math.min(E,n.width-H),n.top+z,E>n.width+H?0:Math.max(0,d-H),Math.max(0,u-z),vr.TOP_RIGHT):new zt(n.left+n.width-H,n.top+z),this.bottomRightPaddingBox=f>0||x>0?Yr(n.left+Math.min(k,n.width-V),n.top+Math.min(I,n.height-T),Math.max(0,f-H),Math.max(0,x-T),vr.BOTTOM_RIGHT):new zt(n.left+n.width-H,n.top+n.height-T),this.bottomLeftPaddingBox=y>0||b>0?Yr(n.left+V,n.top+Math.min($,n.height-T),Math.max(0,y-V),Math.max(0,b-T),vr.BOTTOM_LEFT):new zt(n.left+V,n.top+n.height-T),this.topLeftContentBox=i>0||c>0?Yr(n.left+V+O,n.top+z+G,Math.max(0,i-(V+O)),Math.max(0,c-(z+G)),vr.TOP_LEFT):new zt(n.left+V+O,n.top+z+G),this.topRightContentBox=d>0||u>0?Yr(n.left+Math.min(E,n.width+V+O),n.top+z+G,E>n.width+V+O?0:d-V+O,u-(z+G),vr.TOP_RIGHT):new zt(n.left+n.width-(H+L),n.top+z+G),this.bottomRightContentBox=f>0||x>0?Yr(n.left+Math.min(k,n.width-(V+O)),n.top+Math.min(I,n.height+z+G),Math.max(0,f-(H+L)),x-(T+F),vr.BOTTOM_RIGHT):new zt(n.left+n.width-(H+L),n.top+n.height-(T+F)),this.bottomLeftContentBox=y>0||b>0?Yr(n.left+V+O,n.top+$,Math.max(0,y-(V+O)),b-(T+F),vr.BOTTOM_LEFT):new zt(n.left+V+O,n.top+n.height-(T+F))}return r})(),vr;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(vr||(vr={}));var Yr=function(r,t,s,n,a){var i=4*((Math.sqrt(2)-1)/3),c=s*i,A=n*i,d=r+s,u=t+n;switch(a){case vr.TOP_LEFT:return new ef(new zt(r,u),new zt(r,u-A),new zt(d-c,t),new zt(d,t));case vr.TOP_RIGHT:return new ef(new zt(r,t),new zt(r+c,t),new zt(d,u-A),new zt(d,u));case vr.BOTTOM_RIGHT:return new ef(new zt(d,t),new zt(d,t+A),new zt(r+c,u),new zt(r,u));case vr.BOTTOM_LEFT:default:return new ef(new zt(d,u),new zt(d-c,u),new zt(r,t+A),new zt(r,t))}},Yf=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},pP=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},Jf=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},gP=(function(){function r(t,s,n){this.offsetX=t,this.offsetY=s,this.matrix=n,this.type=0,this.target=6}return r})(),tf=(function(){function r(t,s){this.path=t,this.target=s,this.type=1}return r})(),xP=(function(){function r(t){this.opacity=t,this.type=2,this.target=6}return r})(),vP=function(r){return r.type===0},J5=function(r){return r.type===1},wP=function(r){return r.type===2},xb=function(r,t){return r.length===t.length?r.some(function(s,n){return s===t[n]}):!1},bP=function(r,t,s,n,a){return r.map(function(i,c){switch(c){case 0:return i.add(t,s);case 1:return i.add(t+n,s);case 2:return i.add(t+n,s+a);case 3:return i.add(t,s+a)}return i})},X5=(function(){function r(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),Z5=(function(){function r(t,s){if(this.container=t,this.parent=s,this.effects=[],this.curves=new fP(this.container),this.container.styles.opacity<1&&this.effects.push(new xP(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new gP(n,a,i))}if(this.container.styles.overflowX!==0){var c=Yf(this.curves),A=Jf(this.curves);xb(c,A)?this.effects.push(new tf(c,6)):(this.effects.push(new tf(c,2)),this.effects.push(new tf(A,4)))}}return r.prototype.getEffects=function(t){for(var s=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var i=n.effects.filter(function(d){return!J5(d)});if(s||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,i),s=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var c=Yf(n.curves),A=Jf(n.curves);xb(c,A)||a.unshift(new tf(A,6))}}else a.unshift.apply(a,i);n=n.parent}return a.filter(function(d){return Kn(d.target,t)})},r})(),m0=function(r,t,s,n){r.container.elements.forEach(function(a){var i=Kn(a.flags,4),c=Kn(a.flags,2),A=new Z5(a,r);Kn(a.styles.display,2048)&&n.push(A);var d=Kn(a.flags,8)?[]:n;if(i||c){var u=i||a.styles.isPositioned()?s:t,m=new X5(A);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var x=0;u.negativeZIndex.some(function(y,b){return f>y.element.container.styles.zIndex.order?(x=b,!1):x>0}),u.negativeZIndex.splice(x,0,m)}else if(f>0){var g=0;u.positiveZIndex.some(function(y,b){return f>=y.element.container.styles.zIndex.order?(g=b+1,!1):g>0}),u.positiveZIndex.splice(g,0,m)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(m)}else a.styles.isFloating()?u.nonPositionedFloats.push(m):u.nonPositionedInlineLevel.push(m);m0(A,m,i?m:s,d)}else a.styles.isInlineLevel()?t.inlineLevel.push(A):t.nonInlineLevel.push(A),m0(A,t,s,d);Kn(a.flags,8)&&eB(a,d)})},eB=function(r,t){for(var s=r instanceof c0?r.start:1,n=r instanceof c0?r.reversed:!1,a=0;a<t.length;a++){var i=t[a];i.container instanceof P5&&typeof i.container.value=="number"&&i.container.value!==0&&(s=i.container.value),i.listValue=Mh(s,i.container.styles.listStyleType,!0),s+=n?-1:1}},yP=function(r){var t=new Z5(r,null),s=new X5(t),n=[];return m0(t,s,s,n),eB(t.container,n),s},vb=function(r,t){switch(t){case 0:return wo(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return wo(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return wo(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return wo(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},NP=function(r,t){switch(t){case 0:return wo(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return wo(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return wo(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return wo(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},jP=function(r,t){switch(t){case 0:return wo(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return wo(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return wo(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return wo(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},BP=function(r,t){switch(t){case 0:return sf(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return sf(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return sf(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return sf(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},sf=function(r,t){var s=[];return go(r)?s.push(r.subdivide(.5,!1)):s.push(r),go(t)?s.push(t.subdivide(.5,!0)):s.push(t),s},wo=function(r,t,s,n){var a=[];return go(r)?a.push(r.subdivide(.5,!1)):a.push(r),go(s)?a.push(s.subdivide(.5,!0)):a.push(s),go(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),go(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},tB=function(r){var t=r.bounds,s=r.styles;return t.add(s.borderLeftWidth,s.borderTopWidth,-(s.borderRightWidth+s.borderLeftWidth),-(s.borderTopWidth+s.borderBottomWidth))},Xf=function(r){var t=r.styles,s=r.bounds,n=Pr(t.paddingLeft,s.width),a=Pr(t.paddingRight,s.width),i=Pr(t.paddingTop,s.width),c=Pr(t.paddingBottom,s.width);return s.add(n+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+i+c))},CP=function(r,t){return r===0?t.bounds:r===2?Xf(t):tB(t)},SP=function(r,t){return r===0?t.bounds:r===2?Xf(t):tB(t)},ix=function(r,t,s){var n=CP(mu(r.styles.backgroundOrigin,t),r),a=SP(mu(r.styles.backgroundClip,t),r),i=EP(mu(r.styles.backgroundSize,t),s,n),c=i[0],A=i[1],d=bh(mu(r.styles.backgroundPosition,t),n.width-c,n.height-A),u=FP(mu(r.styles.backgroundRepeat,t),d,i,n,a),m=Math.round(n.left+d[0]),f=Math.round(n.top+d[1]);return[u,m,f,c,A]},cu=function(r){return Sr(r)&&r.value===Nu.AUTO},rf=function(r){return typeof r=="number"},EP=function(r,t,s){var n=t[0],a=t[1],i=t[2],c=r[0],A=r[1];if(!c)return[0,0];if(_n(c)&&A&&_n(A))return[Pr(c,s.width),Pr(A,s.height)];var d=rf(i);if(Sr(c)&&(c.value===Nu.CONTAIN||c.value===Nu.COVER)){if(rf(i)){var u=s.width/s.height;return u<i!=(c.value===Nu.COVER)?[s.width,s.width/i]:[s.height*i,s.height]}return[s.width,s.height]}var m=rf(n),f=rf(a),x=m||f;if(cu(c)&&(!A||cu(A))){if(m&&f)return[n,a];if(!d&&!x)return[s.width,s.height];if(x&&d){var g=m?n:a*i,y=f?a:n/i;return[g,y]}var b=m?n:s.width,B=f?a:s.height;return[b,B]}if(d){var N=0,E=0;return _n(c)?N=Pr(c,s.width):_n(A)&&(E=Pr(A,s.height)),cu(c)?N=E*i:(!A||cu(A))&&(E=N/i),[N,E]}var I=null,k=null;if(_n(c)?I=Pr(c,s.width):A&&_n(A)&&(k=Pr(A,s.height)),I!==null&&(!A||cu(A))&&(k=m&&f?I/n*a:s.height),k!==null&&cu(c)&&(I=m&&f?k/a*n:s.width),I!==null&&k!==null)return[I,k];throw new Error("Unable to calculate background-size for element")},mu=function(r,t){var s=r[t];return typeof s>"u"?r[0]:s},FP=function(r,t,s,n,a){var i=t[0],c=t[1],A=s[0],d=s[1];switch(r){case 2:return[new zt(Math.round(n.left),Math.round(n.top+c)),new zt(Math.round(n.left+n.width),Math.round(n.top+c)),new zt(Math.round(n.left+n.width),Math.round(d+n.top+c)),new zt(Math.round(n.left),Math.round(d+n.top+c))];case 3:return[new zt(Math.round(n.left+i),Math.round(n.top)),new zt(Math.round(n.left+i+A),Math.round(n.top)),new zt(Math.round(n.left+i+A),Math.round(n.height+n.top)),new zt(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new zt(Math.round(n.left+i),Math.round(n.top+c)),new zt(Math.round(n.left+i+A),Math.round(n.top+c)),new zt(Math.round(n.left+i+A),Math.round(n.top+c+d)),new zt(Math.round(n.left+i),Math.round(n.top+c+d))];default:return[new zt(Math.round(a.left),Math.round(a.top)),new zt(Math.round(a.left+a.width),Math.round(a.top)),new zt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new zt(Math.round(a.left),Math.round(a.height+a.top))]}},_P="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",wb="Hidden Text",kP=(function(){function r(t){this._data={},this._document=t}return r.prototype.parseMetrics=function(t,s){var n=this._document.createElement("div"),a=this._document.createElement("img"),i=this._document.createElement("span"),c=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=s,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",c.appendChild(n),a.src=_P,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=s,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(wb)),n.appendChild(i),n.appendChild(a);var A=a.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(wb)),n.style.lineHeight="normal",a.style.verticalAlign="super";var d=a.offsetTop-n.offsetTop+2;return c.removeChild(n),{baseline:A,middle:d}},r.prototype.getMetrics=function(t,s){var n=t+" "+s;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,s)),this._data[n]},r})(),sB=(function(){function r(t,s){this.context=t,this.options=s}return r})(),UP=1e4,IP=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new kP(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(s){for(var n=this;this._activeEffects.length;)this.popEffect();s.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(s){this.ctx.save(),wP(s)&&(this.ctx.globalAlpha=s.opacity),vP(s)&&(this.ctx.translate(s.offsetX,s.offsetY),this.ctx.transform(s.matrix[0],s.matrix[1],s.matrix[2],s.matrix[3],s.matrix[4],s.matrix[5]),this.ctx.translate(-s.offsetX,-s.offsetY)),J5(s)&&(this.path(s.path),this.ctx.clip()),this._activeEffects.push(s)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(s){return oi(this,void 0,void 0,function(){var n;return Va(this,function(a){switch(a.label){case 0:return n=s.element.container.styles,n.isVisible()?[4,this.renderStackContent(s)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(s){return oi(this,void 0,void 0,function(){return Va(this,function(n){switch(n.label){case 0:if(Kn(s.container.flags,16))debugger;return s.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(s)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(s)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(s,n,a){var i=this;if(n===0)this.ctx.fillText(s.text,s.bounds.left,s.bounds.top+a);else{var c=cv(s.text);c.reduce(function(A,d){return i.ctx.fillText(d,A,s.bounds.top+a),A+i.ctx.measureText(d).width},s.bounds.left)}},t.prototype.createFontStyle=function(s){var n=s.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),a=RP(s.fontFamily).join(", "),i=Wh(s.fontSize)?""+s.fontSize.number+s.fontSize.unit:s.fontSize.number+"px";return[[s.fontStyle,n,s.fontWeight,i,a].join(" "),a,i]},t.prototype.renderTextNode=function(s,n){return oi(this,void 0,void 0,function(){var a,i,c,A,d,u,m,f,x=this;return Va(this,function(g){return a=this.createFontStyle(n),i=a[0],c=a[1],A=a[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",d=this.fontMetrics.getMetrics(c,A),u=d.baseline,m=d.middle,f=n.paintOrder,s.textBounds.forEach(function(y){f.forEach(function(b){switch(b){case 0:x.ctx.fillStyle=la(n.color),x.renderTextWithLetterSpacing(y,n.letterSpacing,u);var B=n.textShadow;B.length&&y.text.trim().length&&(B.slice(0).reverse().forEach(function(N){x.ctx.shadowColor=la(N.color),x.ctx.shadowOffsetX=N.offsetX.number*x.options.scale,x.ctx.shadowOffsetY=N.offsetY.number*x.options.scale,x.ctx.shadowBlur=N.blur.number,x.renderTextWithLetterSpacing(y,n.letterSpacing,u)}),x.ctx.shadowColor="",x.ctx.shadowOffsetX=0,x.ctx.shadowOffsetY=0,x.ctx.shadowBlur=0),n.textDecorationLine.length&&(x.ctx.fillStyle=la(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(N){switch(N){case 1:x.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+u),y.bounds.width,1);break;case 2:x.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:x.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+m),y.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&y.text.trim().length&&(x.ctx.strokeStyle=la(n.webkitTextStrokeColor),x.ctx.lineWidth=n.webkitTextStrokeWidth,x.ctx.lineJoin=window.chrome?"miter":"round",x.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+u)),x.ctx.strokeStyle="",x.ctx.lineWidth=0,x.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(s,n,a){if(a&&s.intrinsicWidth>0&&s.intrinsicHeight>0){var i=Xf(s),c=Jf(n);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,s.intrinsicWidth,s.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(s){return oi(this,void 0,void 0,function(){var n,a,i,c,A,d,E,E,u,m,f,x,k,g,y,$,b,B,N,E,I,k,$;return Va(this,function(z){switch(z.label){case 0:this.applyEffects(s.getEffects(4)),n=s.container,a=s.curves,i=n.styles,c=0,A=n.textNodes,z.label=1;case 1:return c<A.length?(d=A[c],[4,this.renderTextNode(d,i)]):[3,4];case 2:z.sent(),z.label=3;case 3:return c++,[3,1];case 4:if(!(n instanceof L5))return[3,8];z.label=5;case 5:return z.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return E=z.sent(),this.renderReplacedElement(n,a,E),[3,8];case 7:return z.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Q5&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof T5))return[3,12];z.label=9;case 9:return z.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return E=z.sent(),this.renderReplacedElement(n,a,E),[3,12];case 11:return z.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof O5&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:m=z.sent(),n.width&&n.height&&this.ctx.drawImage(m,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),z.label=14;case 14:if(n instanceof Av&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===$f?n.checked&&(this.ctx.save(),this.path([new zt(n.bounds.left+f*.39363,n.bounds.top+f*.79),new zt(n.bounds.left+f*.16,n.bounds.top+f*.5549),new zt(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new zt(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new zt(n.bounds.left+f*.72983,n.bounds.top+f*.23),new zt(n.bounds.left+f*.84,n.bounds.top+f*.34085),new zt(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=la(ob),this.ctx.fill(),this.ctx.restore()):n.type===Gf&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=la(ob),this.ctx.fill(),this.ctx.restore())),LP(n)&&n.value.length){switch(x=this.createFontStyle(i),k=x[0],g=x[1],y=this.fontMetrics.getMetrics(k,g).baseline,this.ctx.font=k,this.ctx.fillStyle=la(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=TP(n.styles.textAlign),$=Xf(n),b=0,n.styles.textAlign){case 1:b+=$.width/2;break;case 2:b+=$.width;break}B=$.add(b,0,0,-$.height/2+1),this.ctx.save(),this.path([new zt($.left,$.top),new zt($.left+$.width,$.top),new zt($.left+$.width,$.top+$.height),new zt($.left,$.top+$.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Fh(n.value,B),i.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Kn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(N=n.styles.listStyleImage,N.type!==0)return[3,18];E=void 0,I=N.url,z.label=15;case 15:return z.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return E=z.sent(),this.ctx.drawImage(E,n.bounds.left-(E.width+10),n.bounds.top),[3,18];case 17:return z.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:s.listValue&&n.styles.listStyleType!==-1&&(k=this.createFontStyle(i)[0],this.ctx.font=k,this.ctx.fillStyle=la(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",$=new Tc(n.bounds.left,n.bounds.top+Pr(n.styles.paddingTop,n.bounds.width),n.bounds.width,V1(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Fh(s.listValue,$),i.letterSpacing,V1(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),z.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(s){return oi(this,void 0,void 0,function(){var n,a,N,i,c,N,A,d,N,u,m,N,f,x,N,g,y,N,b,B,N;return Va(this,function(E){switch(E.label){case 0:if(Kn(s.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(s.element)];case 1:E.sent(),n=0,a=s.negativeZIndex,E.label=2;case 2:return n<a.length?(N=a[n],[4,this.renderStack(N)]):[3,5];case 3:E.sent(),E.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(s.element)];case 6:E.sent(),i=0,c=s.nonInlineLevel,E.label=7;case 7:return i<c.length?(N=c[i],[4,this.renderNode(N)]):[3,10];case 8:E.sent(),E.label=9;case 9:return i++,[3,7];case 10:A=0,d=s.nonPositionedFloats,E.label=11;case 11:return A<d.length?(N=d[A],[4,this.renderStack(N)]):[3,14];case 12:E.sent(),E.label=13;case 13:return A++,[3,11];case 14:u=0,m=s.nonPositionedInlineLevel,E.label=15;case 15:return u<m.length?(N=m[u],[4,this.renderStack(N)]):[3,18];case 16:E.sent(),E.label=17;case 17:return u++,[3,15];case 18:f=0,x=s.inlineLevel,E.label=19;case 19:return f<x.length?(N=x[f],[4,this.renderNode(N)]):[3,22];case 20:E.sent(),E.label=21;case 21:return f++,[3,19];case 22:g=0,y=s.zeroOrAutoZIndexOrTransformedOrOpacity,E.label=23;case 23:return g<y.length?(N=y[g],[4,this.renderStack(N)]):[3,26];case 24:E.sent(),E.label=25;case 25:return g++,[3,23];case 26:b=0,B=s.positiveZIndex,E.label=27;case 27:return b<B.length?(N=B[b],[4,this.renderStack(N)]):[3,30];case 28:E.sent(),E.label=29;case 29:return b++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(s){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(s.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(s){this.ctx.beginPath(),this.formatPath(s),this.ctx.closePath()},t.prototype.formatPath=function(s){var n=this;s.forEach(function(a,i){var c=go(a)?a.start:a;i===0?n.ctx.moveTo(c.x,c.y):n.ctx.lineTo(c.x,c.y),go(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(s,n,a,i){this.path(s),this.ctx.fillStyle=n,this.ctx.translate(a,i),this.ctx.fill(),this.ctx.translate(-a,-i)},t.prototype.resizeImage=function(s,n,a){var i;if(s.width===n&&s.height===a)return s;var c=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,A=c.createElement("canvas");A.width=Math.max(1,n),A.height=Math.max(1,a);var d=A.getContext("2d");return d.drawImage(s,0,0,s.width,s.height,0,0,n,a),A},t.prototype.renderBackgroundImage=function(s){return oi(this,void 0,void 0,function(){var n,a,i,c,A,d;return Va(this,function(u){switch(u.label){case 0:n=s.styles.backgroundImage.length-1,a=function(m){var f,x,g,G,W,ae,O,P,T,y,G,W,ae,O,P,b,B,N,E,I,k,$,z,H,T,V,G,L,F,O,P,ce,W,ae,K,le,ie,se,R,q,te,de;return Va(this,function(fe){switch(fe.label){case 0:if(m.type!==0)return[3,5];f=void 0,x=m.url,fe.label=1;case 1:return fe.trys.push([1,3,,4]),[4,i.context.cache.match(x)];case 2:return f=fe.sent(),[3,4];case 3:return fe.sent(),i.context.logger.error("Error loading background-image "+x),[3,4];case 4:return f&&(g=ix(s,n,[f.width,f.height,f.width/f.height]),G=g[0],W=g[1],ae=g[2],O=g[3],P=g[4],T=i.ctx.createPattern(i.resizeImage(f,O,P),"repeat"),i.renderRepeat(G,T,W,ae)),[3,6];case 5:vQ(m)?(y=ix(s,n,[null,null,null]),G=y[0],W=y[1],ae=y[2],O=y[3],P=y[4],b=mQ(m.angle,O,P),B=b[0],N=b[1],E=b[2],I=b[3],k=b[4],$=document.createElement("canvas"),$.width=O,$.height=P,z=$.getContext("2d"),H=z.createLinearGradient(N,I,E,k),H1(m.stops,B).forEach(function(me){return H.addColorStop(me.stop,la(me.color))}),z.fillStyle=H,z.fillRect(0,0,O,P),O>0&&P>0&&(T=i.ctx.createPattern($,"repeat"),i.renderRepeat(G,T,W,ae))):wQ(m)&&(V=ix(s,n,[null,null,null]),G=V[0],L=V[1],F=V[2],O=V[3],P=V[4],ce=m.position.length===0?[iv]:m.position,W=Pr(ce[0],O),ae=Pr(ce[ce.length-1],P),K=fQ(m,W,ae,O,P),le=K[0],ie=K[1],le>0&&ie>0&&(se=i.ctx.createRadialGradient(L+W,F+ae,0,L+W,F+ae,le),H1(m.stops,le*2).forEach(function(me){return se.addColorStop(me.stop,la(me.color))}),i.path(G),i.ctx.fillStyle=se,le!==ie?(R=s.bounds.left+.5*s.bounds.width,q=s.bounds.top+.5*s.bounds.height,te=ie/le,de=1/te,i.ctx.save(),i.ctx.translate(R,q),i.ctx.transform(1,0,0,te,0,0),i.ctx.translate(-R,-q),i.ctx.fillRect(L,de*(F-q)+q,O,P*de),i.ctx.restore()):i.ctx.fill())),fe.label=6;case 6:return n--,[2]}})},i=this,c=0,A=s.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return c<A.length?(d=A[c],[5,a(d)]):[3,4];case 2:u.sent(),u.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(s,n,a){return oi(this,void 0,void 0,function(){return Va(this,function(i){return this.path(vb(a,n)),this.ctx.fillStyle=la(s),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(s,n,a,i){return oi(this,void 0,void 0,function(){var c,A;return Va(this,function(d){switch(d.label){case 0:return n<3?[4,this.renderSolidBorder(s,a,i)]:[3,2];case 1:return d.sent(),[2];case 2:return c=NP(i,a),this.path(c),this.ctx.fillStyle=la(s),this.ctx.fill(),A=jP(i,a),this.path(A),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(s){return oi(this,void 0,void 0,function(){var n,a,i,c,A,d,u,m,f=this;return Va(this,function(x){switch(x.label){case 0:return this.applyEffects(s.getEffects(2)),n=s.container.styles,a=!OA(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],c=QP(mu(n.backgroundClip,0),s.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),OA(n.backgroundColor)||(this.ctx.fillStyle=la(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(s.container)]):[3,2];case 1:x.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){f.ctx.save();var y=Yf(s.curves),b=g.inset?0:UP,B=bP(y,-b+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(f.path(y),f.ctx.clip(),f.mask(B)):(f.mask(y),f.ctx.clip(),f.path(B)),f.ctx.shadowOffsetX=g.offsetX.number+b,f.ctx.shadowOffsetY=g.offsetY.number,f.ctx.shadowColor=la(g.color),f.ctx.shadowBlur=g.blur.number,f.ctx.fillStyle=g.inset?la(g.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),x.label=2;case 2:A=0,d=0,u=i,x.label=3;case 3:return d<u.length?(m=u[d],m.style!==0&&!OA(m.color)&&m.width>0?m.style!==2?[3,5]:[4,this.renderDashedDottedBorder(m.color,m.width,A,s.curves,2)]:[3,11]):[3,13];case 4:return x.sent(),[3,11];case 5:return m.style!==3?[3,7]:[4,this.renderDashedDottedBorder(m.color,m.width,A,s.curves,3)];case 6:return x.sent(),[3,11];case 7:return m.style!==4?[3,9]:[4,this.renderDoubleBorder(m.color,m.width,A,s.curves)];case 8:return x.sent(),[3,11];case 9:return[4,this.renderSolidBorder(m.color,A,s.curves)];case 10:x.sent(),x.label=11;case 11:A++,x.label=12;case 12:return d++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(s,n,a,i,c){return oi(this,void 0,void 0,function(){var A,d,u,m,f,x,g,y,b,B,N,E,I,k,$,z,$,z;return Va(this,function(H){return this.ctx.save(),A=BP(i,a),d=vb(i,a),c===2&&(this.path(d),this.ctx.clip()),go(d[0])?(u=d[0].start.x,m=d[0].start.y):(u=d[0].x,m=d[0].y),go(d[1])?(f=d[1].end.x,x=d[1].end.y):(f=d[1].x,x=d[1].y),a===0||a===2?g=Math.abs(u-f):g=Math.abs(m-x),this.ctx.beginPath(),c===3?this.formatPath(A):this.formatPath(d.slice(0,2)),y=n<3?n*3:n*2,b=n<3?n*2:n,c===3&&(y=n,b=n),B=!0,g<=y*2?B=!1:g<=y*2+b?(N=g/(2*y+b),y*=N,b*=N):(E=Math.floor((g+b)/(y+b)),I=(g-E*y)/(E-1),k=(g-(E+1)*y)/E,b=k<=0||Math.abs(b-I)<Math.abs(b-k)?I:k),B&&(c===3?this.ctx.setLineDash([0,y+b]):this.ctx.setLineDash([y,b])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=la(s),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(go(d[0])&&($=d[3],z=d[0],this.ctx.beginPath(),this.formatPath([new zt($.end.x,$.end.y),new zt(z.start.x,z.start.y)]),this.ctx.stroke()),go(d[1])&&($=d[1],z=d[2],this.ctx.beginPath(),this.formatPath([new zt($.end.x,$.end.y),new zt(z.start.x,z.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(s){return oi(this,void 0,void 0,function(){var n;return Va(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=la(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=yP(s),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t})(sB),LP=function(r){return r instanceof D5||r instanceof R5?!0:r instanceof Av&&r.type!==Gf&&r.type!==$f},QP=function(r,t){switch(r){case 0:return Yf(t);case 2:return pP(t);case 1:default:return Jf(t)}},TP=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},PP=["-apple-system","system-ui"],RP=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(t){return PP.indexOf(t)===-1}):r},DP=(function(r){hl(t,r);function t(s,n){var a=r.call(this,s,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(s){return oi(this,void 0,void 0,function(){var n,a;return Va(this,function(i){switch(i.label){case 0:return n=l0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,s),[4,OP(n)];case 1:return a=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=la(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t})(sB),OP=function(r){return new Promise(function(t,s){var n=new Image;n.onload=function(){t(n)},n.onerror=s,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},MP=(function(){function r(t){var s=t.id,n=t.enabled;this.id=s,this.enabled=n,this.start=Date.now()}return r.prototype.debug=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Qm([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Qm([this.id,this.getTime()+"ms"],t))},r.prototype.warn=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Qm([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},r.prototype.error=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Qm([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},r.instances={},r})(),HP=(function(){function r(t,s){var n;this.windowBounds=s,this.instanceName="#"+r.instanceCount++,this.logger=new MP({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new lP(this,t)}return r.instanceCount=1,r})(),rB=function(r,t){return t===void 0&&(t={}),KP(r,t)};typeof window<"u"&&Y5.setContext(window);var KP=function(r,t){return oi(void 0,void 0,void 0,function(){var s,n,a,i,c,A,d,u,m,f,x,g,y,b,B,N,E,I,k,$,H,z,H,T,V,G,L,F,O,P,ce,W,ae,K,le,ie,se,R,q,te;return Va(this,function(de){switch(de.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(s=r.ownerDocument,!s)throw new Error("Element is not attached to a Document");if(n=s.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(T=t.allowTaint)!==null&&T!==void 0?T:!1,imageTimeout:(V=t.imageTimeout)!==null&&V!==void 0?V:15e3,proxy:t.proxy,useCORS:(G=t.useCORS)!==null&&G!==void 0?G:!1},i=Gx({logging:(L=t.logging)!==null&&L!==void 0?L:!0,cache:t.cache},a),c={windowWidth:(F=t.windowWidth)!==null&&F!==void 0?F:n.innerWidth,windowHeight:(O=t.windowHeight)!==null&&O!==void 0?O:n.innerHeight,scrollX:(P=t.scrollX)!==null&&P!==void 0?P:n.pageXOffset,scrollY:(ce=t.scrollY)!==null&&ce!==void 0?ce:n.pageYOffset},A=new Tc(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),d=new HP(i,A),u=(W=t.foreignObjectRendering)!==null&&W!==void 0?W:!1,m={allowTaint:(ae=t.allowTaint)!==null&&ae!==void 0?ae:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},d.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),f=new pb(d,r,m),x=f.clonedReferenceElement,x?[4,f.toIFrame(s,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=de.sent(),y=dv(x)||zT(x)?bI(x.ownerDocument):Bp(d,x),b=y.width,B=y.height,N=y.left,E=y.top,I=VP(d,x,t.backgroundColor),k={canvas:t.canvas,backgroundColor:I,scale:(le=(K=t.scale)!==null&&K!==void 0?K:n.devicePixelRatio)!==null&&le!==void 0?le:1,x:((ie=t.x)!==null&&ie!==void 0?ie:0)+N,y:((se=t.y)!==null&&se!==void 0?se:0)+E,width:(R=t.width)!==null&&R!==void 0?R:Math.ceil(b),height:(q=t.height)!==null&&q!==void 0?q:Math.ceil(B)},u?(d.logger.debug("Document cloned, using foreign object rendering"),H=new DP(d,k),[4,H.render(x)]):[3,3];case 2:return $=de.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+N+","+E+" with size "+b+"x"+B+" using computed rendering"),d.logger.debug("Starting DOM parsing"),z=H5(d,x),I===z.styles.backgroundColor&&(z.styles.backgroundColor=_c.TRANSPARENT),d.logger.debug("Starting renderer for element at "+k.x+","+k.y+" with size "+k.width+"x"+k.height),H=new IP(d,k),[4,H.render(z)];case 4:$=de.sent(),de.label=5;case 5:return(!((te=t.removeContainer)!==null&&te!==void 0)||te)&&(pb.destroy(g)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,$]}})})},VP=function(r,t,s){var n=t.ownerDocument,a=n.documentElement?Sh(r,getComputedStyle(n.documentElement).backgroundColor):_c.TRANSPARENT,i=n.body?Sh(r,getComputedStyle(n.body).backgroundColor):_c.TRANSPARENT,c=typeof s=="string"?Sh(r,s):s===null?_c.TRANSPARENT:4294967295;return t===n.documentElement?OA(a)?OA(i)?c:i:a:c};const zP=Object.freeze(Object.defineProperty({__proto__:null,default:rB},Symbol.toStringTag,{value:"Module"}));function jr(r){"@babel/helpers - typeof";return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(r)}var dl=Uint8Array,$i=Uint16Array,uv=Int32Array,hv=new dl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mv=new dl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bb=new dl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nB=function(r,t){for(var s=new $i(31),n=0;n<31;++n)s[n]=t+=1<<r[n-1];for(var a=new uv(s[30]),n=1;n<30;++n)for(var i=s[n];i<s[n+1];++i)a[i]=i-s[n]<<5|n;return{b:s,r:a}},aB=nB(hv,2),$P=aB.b,f0=aB.r;$P[28]=258,f0[258]=28;var GP=nB(mv,0),yb=GP.r,p0=new $i(32768);for(var Vr=0;Vr<32768;++Vr){var gA=(Vr&43690)>>1|(Vr&21845)<<1;gA=(gA&52428)>>2|(gA&13107)<<2,gA=(gA&61680)>>4|(gA&3855)<<4,p0[Vr]=((gA&65280)>>8|(gA&255)<<8)>>1}var kh=(function(r,t,s){for(var n=r.length,a=0,i=new $i(t);a<n;++a)r[a]&&++i[r[a]-1];var c=new $i(t);for(a=1;a<t;++a)c[a]=c[a-1]+i[a-1]<<1;var A;if(s){A=new $i(1<<t);var d=15-t;for(a=0;a<n;++a)if(r[a])for(var u=a<<4|r[a],m=t-r[a],f=c[r[a]-1]++<<m,x=f|(1<<m)-1;f<=x;++f)A[p0[f]>>d]=u}else for(A=new $i(n),a=0;a<n;++a)r[a]&&(A[a]=p0[c[r[a]-1]++]>>15-r[a]);return A}),Cd=new dl(288);for(var Vr=0;Vr<144;++Vr)Cd[Vr]=8;for(var Vr=144;Vr<256;++Vr)Cd[Vr]=9;for(var Vr=256;Vr<280;++Vr)Cd[Vr]=7;for(var Vr=280;Vr<288;++Vr)Cd[Vr]=8;var Zf=new dl(32);for(var Vr=0;Vr<32;++Vr)Zf[Vr]=5;var WP=kh(Cd,9,0),qP=kh(Zf,5,0),iB=function(r){return(r+7)/8|0},YP=function(r,t,s){return(s==null||s>r.length)&&(s=r.length),new dl(r.subarray(t,s))},Nc=function(r,t,s){s<<=t&7;var n=t/8|0;r[n]|=s,r[n+1]|=s>>8},hh=function(r,t,s){s<<=t&7;var n=t/8|0;r[n]|=s,r[n+1]|=s>>8,r[n+2]|=s>>16},ox=function(r,t){for(var s=[],n=0;n<r.length;++n)r[n]&&s.push({s:n,f:r[n]});var a=s.length,i=s.slice();if(!a)return{t:lB,l:0};if(a==1){var c=new dl(s[0].s+1);return c[s[0].s]=1,{t:c,l:1}}s.sort(function($,z){return $.f-z.f}),s.push({s:-1,f:25001});var A=s[0],d=s[1],u=0,m=1,f=2;for(s[0]={s:-1,f:A.f+d.f,l:A,r:d};m!=a-1;)A=s[s[u].f<s[f].f?u++:f++],d=s[u!=m&&s[u].f<s[f].f?u++:f++],s[m++]={s:-1,f:A.f+d.f,l:A,r:d};for(var x=i[0].s,n=1;n<a;++n)i[n].s>x&&(x=i[n].s);var g=new $i(x+1),y=g0(s[m-1],g,0);if(y>t){var n=0,b=0,B=y-t,N=1<<B;for(i.sort(function(z,H){return g[H.s]-g[z.s]||z.f-H.f});n<a;++n){var E=i[n].s;if(g[E]>t)b+=N-(1<<y-g[E]),g[E]=t;else break}for(b>>=B;b>0;){var I=i[n].s;g[I]<t?b-=1<<t-g[I]++-1:++n}for(;n>=0&&b;--n){var k=i[n].s;g[k]==t&&(--g[k],++b)}y=t}return{t:new dl(g),l:y}},g0=function(r,t,s){return r.s==-1?Math.max(g0(r.l,t,s+1),g0(r.r,t,s+1)):t[r.s]=s},Nb=function(r){for(var t=r.length;t&&!r[--t];);for(var s=new $i(++t),n=0,a=r[0],i=1,c=function(d){s[n++]=d},A=1;A<=t;++A)if(r[A]==a&&A!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)c(32754);i>2&&(c(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(c(a),--i;i>6;i-=6)c(8304);i>2&&(c(i-3<<5|8208),i=0)}for(;i--;)c(a);i=1,a=r[A]}return{c:s.subarray(0,n),n:t}},mh=function(r,t){for(var s=0,n=0;n<t.length;++n)s+=r[n]*t[n];return s},oB=function(r,t,s){var n=s.length,a=iB(t+2);r[a]=n&255,r[a+1]=n>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var i=0;i<n;++i)r[a+i+4]=s[i];return(a+4+n)*8},jb=function(r,t,s,n,a,i,c,A,d,u,m){Nc(t,m++,s),++a[256];for(var f=ox(a,15),x=f.t,g=f.l,y=ox(i,15),b=y.t,B=y.l,N=Nb(x),E=N.c,I=N.n,k=Nb(b),$=k.c,z=k.n,H=new $i(19),T=0;T<E.length;++T)++H[E[T]&31];for(var T=0;T<$.length;++T)++H[$[T]&31];for(var V=ox(H,7),G=V.t,L=V.l,F=19;F>4&&!G[bb[F-1]];--F);var O=u+5<<3,P=mh(a,Cd)+mh(i,Zf)+c,ce=mh(a,x)+mh(i,b)+c+14+3*F+mh(H,G)+2*H[16]+3*H[17]+7*H[18];if(d>=0&&O<=P&&O<=ce)return oB(t,m,r.subarray(d,d+u));var W,ae,K,le;if(Nc(t,m,1+(ce<P)),m+=2,ce<P){W=kh(x,g,0),ae=x,K=kh(b,B,0),le=b;var ie=kh(G,L,0);Nc(t,m,I-257),Nc(t,m+5,z-1),Nc(t,m+10,F-4),m+=14;for(var T=0;T<F;++T)Nc(t,m+3*T,G[bb[T]]);m+=3*F;for(var se=[E,$],R=0;R<2;++R)for(var q=se[R],T=0;T<q.length;++T){var te=q[T]&31;Nc(t,m,ie[te]),m+=G[te],te>15&&(Nc(t,m,q[T]>>5&127),m+=q[T]>>12)}}else W=WP,ae=Cd,K=qP,le=Zf;for(var T=0;T<A;++T){var de=n[T];if(de>255){var te=de>>18&31;hh(t,m,W[te+257]),m+=ae[te+257],te>7&&(Nc(t,m,de>>23&31),m+=hv[te]);var fe=de&31;hh(t,m,K[fe]),m+=le[fe],fe>3&&(hh(t,m,de>>5&8191),m+=mv[fe])}else hh(t,m,W[de]),m+=ae[de]}return hh(t,m,W[256]),m+ae[256]},JP=new uv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),lB=new dl(0),XP=function(r,t,s,n,a,i){var c=i.z||r.length,A=new dl(n+c+5*(1+Math.ceil(c/7e3))+a),d=A.subarray(n,A.length-a),u=i.l,m=(i.r||0)&7;if(t){m&&(d[0]=i.r>>3);for(var f=JP[t-1],x=f>>13,g=f&8191,y=(1<<s)-1,b=i.p||new $i(32768),B=i.h||new $i(y+1),N=Math.ceil(s/3),E=2*N,I=function(Se){return(r[Se]^r[Se+1]<<N^r[Se+2]<<E)&y},k=new uv(25e3),$=new $i(288),z=new $i(32),H=0,T=0,V=i.i||0,G=0,L=i.w||0,F=0;V+2<c;++V){var O=I(V),P=V&32767,ce=B[O];if(b[P]=ce,B[O]=P,L<=V){var W=c-V;if((H>7e3||G>24576)&&(W>423||!u)){m=jb(r,d,0,k,$,z,T,G,F,V-F,m),G=H=T=0,F=V;for(var ae=0;ae<286;++ae)$[ae]=0;for(var ae=0;ae<30;++ae)z[ae]=0}var K=2,le=0,ie=g,se=P-ce&32767;if(W>2&&O==I(V-se))for(var R=Math.min(x,W)-1,q=Math.min(32767,V),te=Math.min(258,W);se<=q&&--ie&&P!=ce;){if(r[V+K]==r[V+K-se]){for(var de=0;de<te&&r[V+de]==r[V+de-se];++de);if(de>K){if(K=de,le=se,de>R)break;for(var fe=Math.min(se,de-2),me=0,ae=0;ae<fe;++ae){var pe=V-se+ae&32767,ee=b[pe],je=pe-ee&32767;je>me&&(me=je,ce=pe)}}}P=ce,ce=b[P],se+=P-ce&32767}if(le){k[G++]=268435456|f0[K]<<18|yb[le];var Pe=f0[K]&31,De=yb[le]&31;T+=hv[Pe]+mv[De],++$[257+Pe],++z[De],L=V+K,++H}else k[G++]=r[V],++$[r[V]]}}for(V=Math.max(V,L);V<c;++V)k[G++]=r[V],++$[r[V]];m=jb(r,d,u,k,$,z,T,G,F,V-F,m),u||(i.r=m&7|d[m/8|0]<<3,m-=7,i.h=B,i.p=b,i.i=V,i.w=L)}else{for(var V=i.w||0;V<c+u;V+=65535){var nt=V+65535;nt>=c&&(d[m/8|0]=u,nt=c),m=oB(d,m+1,r.subarray(V,nt))}i.i=c}return YP(A,0,n+iB(m)+a)},cB=function(){var r=1,t=0;return{p:function(s){for(var n=r,a=t,i=s.length|0,c=0;c!=i;){for(var A=Math.min(c+2655,i);c<A;++c)a+=n+=s[c];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}r=n,t=a},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},ZP=function(r,t,s,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),c=new dl(i.length+r.length);c.set(i),c.set(r,i.length),r=c,a.w=i.length}return XP(r,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,s,n,a)},AB=function(r,t,s){for(;s;++t)r[t]=s,s>>>=8},e7=function(r,t){var s=t.level,n=s==0?0:s<6?1:s==9?3:2;if(r[0]=120,r[1]=n<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var a=cB();a.p(t.dictionary),AB(r,2,a.d())}};function x0(r,t){t||(t={});var s=cB();s.p(r);var n=ZP(r,t,t.dictionary?6:2,4);return e7(n,t),AB(n,n.length-4,s.d()),n}var t7=typeof TextDecoder<"u"&&new TextDecoder,s7=0;try{t7.decode(lB,{stream:!0}),s7=1}catch{}function r7(r){if(Array.isArray(r))return r}function n7(r,t){var s=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(s!=null){var n,a,i,c,A=[],d=!0,u=!1;try{if(i=(s=s.call(r)).next,t!==0)for(;!(d=(n=i.call(s)).done)&&(A.push(n.value),A.length!==t);d=!0);}catch(m){u=!0,a=m}finally{try{if(!d&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(u)throw a}}return A}}function Bb(r,t){(t==null||t>r.length)&&(t=r.length);for(var s=0,n=Array(t);s<t;s++)n[s]=r[s];return n}function a7(r,t){if(r){if(typeof r=="string")return Bb(r,t);var s={}.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Bb(r,t):void 0}}function i7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cb(r,t){return r7(r)||n7(r,t)||a7(r,t)||i7()}function Sb(r,t="utf8"){return new TextDecoder(t).decode(r)}const o7=new TextEncoder;function l7(r){return o7.encode(r)}const c7=1024*8,A7=(()=>{const r=new Uint8Array(4),t=new Uint32Array(r.buffer);return!((t[0]=1)&r[0])})(),lx={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class fv{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=c7,s={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=s.offset?s.offset>>>0:0,i=t.byteLength-a;let c=a;(ArrayBuffer.isView(t)||t instanceof fv)&&(t.byteLength!==t.buffer.byteLength&&(c=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,s){const n=lx[s].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===A7&&s!=="uint8"&&s!=="int8"){const A=new Uint8Array(this.buffer.slice(a,a+n));A.reverse();const d=new lx[s](A.buffer);return this.offset+=n,d.reverse(),d}const c=new lx[s](i);return this.offset+=n,c}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let s="";for(let n=0;n<t;n++)s+=this.readChar();return s}readUtf8(t=1){return Sb(this.readBytes(t))}decodeText(t=1,s="utf8"){return Sb(this.readBytes(t),s)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let s=0;s<t.length;s++)this._data.setUint8(this.offset++,t[s]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let s=0;s<t.length;s++)this.writeUint8(t.charCodeAt(s));return this}writeUtf8(t){return this.writeBytes(l7(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Hu(r){let t=r.length;for(;--t>=0;)r[t]=0}const d7=3,u7=258,dB=29,h7=256,m7=h7+1+dB,uB=30,f7=512,p7=new Array((m7+2)*2);Hu(p7);const g7=new Array(uB*2);Hu(g7);const x7=new Array(f7);Hu(x7);const v7=new Array(u7-d7+1);Hu(v7);const w7=new Array(dB);Hu(w7);const b7=new Array(uB);Hu(b7);const y7=(r,t,s,n)=>{let a=r&65535|0,i=r>>>16&65535|0,c=0;for(;s!==0;){c=s>2e3?2e3:s,s-=c;do a=a+t[n++]|0,i=i+a|0;while(--c);a%=65521,i%=65521}return a|i<<16|0};var v0=y7;const N7=()=>{let r,t=[];for(var s=0;s<256;s++){r=s;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[s]=r}return t},j7=new Uint32Array(N7()),B7=(r,t,s,n)=>{const a=j7,i=n+s;r^=-1;for(let c=n;c<i;c++)r=r>>>8^a[(r^t[c])&255];return r^-1};var Kl=B7,w0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},hB={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const C7=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var S7=function(r){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const s=t.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const n in s)C7(s,n)&&(r[n]=s[n])}}return r},E7=r=>{let t=0;for(let n=0,a=r.length;n<a;n++)t+=r[n].length;const s=new Uint8Array(t);for(let n=0,a=0,i=r.length;n<i;n++){let c=r[n];s.set(c,a),a+=c.length}return s},mB={assign:S7,flattenChunks:E7};let fB=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{fB=!1}const Hh=new Uint8Array(256);for(let r=0;r<256;r++)Hh[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Hh[254]=Hh[254]=1;var F7=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,s,n,a,i,c=r.length,A=0;for(a=0;a<c;a++)s=r.charCodeAt(a),(s&64512)===55296&&a+1<c&&(n=r.charCodeAt(a+1),(n&64512)===56320&&(s=65536+(s-55296<<10)+(n-56320),a++)),A+=s<128?1:s<2048?2:s<65536?3:4;for(t=new Uint8Array(A),i=0,a=0;i<A;a++)s=r.charCodeAt(a),(s&64512)===55296&&a+1<c&&(n=r.charCodeAt(a+1),(n&64512)===56320&&(s=65536+(s-55296<<10)+(n-56320),a++)),s<128?t[i++]=s:s<2048?(t[i++]=192|s>>>6,t[i++]=128|s&63):s<65536?(t[i++]=224|s>>>12,t[i++]=128|s>>>6&63,t[i++]=128|s&63):(t[i++]=240|s>>>18,t[i++]=128|s>>>12&63,t[i++]=128|s>>>6&63,t[i++]=128|s&63);return t};const _7=(r,t)=>{if(t<65534&&r.subarray&&fB)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let s="";for(let n=0;n<t;n++)s+=String.fromCharCode(r[n]);return s};var k7=(r,t)=>{const s=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,a;const i=new Array(s*2);for(a=0,n=0;n<s;){let c=r[n++];if(c<128){i[a++]=c;continue}let A=Hh[c];if(A>4){i[a++]=65533,n+=A-1;continue}for(c&=A===2?31:A===3?15:7;A>1&&n<s;)c=c<<6|r[n++]&63,A--;if(A>1){i[a++]=65533;continue}c<65536?i[a++]=c:(c-=65536,i[a++]=55296|c>>10&1023,i[a++]=56320|c&1023)}return _7(i,a)},U7=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let s=t-1;for(;s>=0&&(r[s]&192)===128;)s--;return s<0||s===0?t:s+Hh[r[s]]>t?s:t},b0={string2buf:F7,buf2string:k7,utf8border:U7};function I7(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var L7=I7;const nf=16209,Q7=16191;var T7=function(t,s){let n,a,i,c,A,d,u,m,f,x,g,y,b,B,N,E,I,k,$,z,H,T,V,G;const L=t.state;n=t.next_in,V=t.input,a=n+(t.avail_in-5),i=t.next_out,G=t.output,c=i-(s-t.avail_out),A=i+(t.avail_out-257),d=L.dmax,u=L.wsize,m=L.whave,f=L.wnext,x=L.window,g=L.hold,y=L.bits,b=L.lencode,B=L.distcode,N=(1<<L.lenbits)-1,E=(1<<L.distbits)-1;e:do{y<15&&(g+=V[n++]<<y,y+=8,g+=V[n++]<<y,y+=8),I=b[g&N];t:for(;;){if(k=I>>>24,g>>>=k,y-=k,k=I>>>16&255,k===0)G[i++]=I&65535;else if(k&16){$=I&65535,k&=15,k&&(y<k&&(g+=V[n++]<<y,y+=8),$+=g&(1<<k)-1,g>>>=k,y-=k),y<15&&(g+=V[n++]<<y,y+=8,g+=V[n++]<<y,y+=8),I=B[g&E];s:for(;;){if(k=I>>>24,g>>>=k,y-=k,k=I>>>16&255,k&16){if(z=I&65535,k&=15,y<k&&(g+=V[n++]<<y,y+=8,y<k&&(g+=V[n++]<<y,y+=8)),z+=g&(1<<k)-1,z>d){t.msg="invalid distance too far back",L.mode=nf;break e}if(g>>>=k,y-=k,k=i-c,z>k){if(k=z-k,k>m&&L.sane){t.msg="invalid distance too far back",L.mode=nf;break e}if(H=0,T=x,f===0){if(H+=u-k,k<$){$-=k;do G[i++]=x[H++];while(--k);H=i-z,T=G}}else if(f<k){if(H+=u+f-k,k-=f,k<$){$-=k;do G[i++]=x[H++];while(--k);if(H=0,f<$){k=f,$-=k;do G[i++]=x[H++];while(--k);H=i-z,T=G}}}else if(H+=f-k,k<$){$-=k;do G[i++]=x[H++];while(--k);H=i-z,T=G}for(;$>2;)G[i++]=T[H++],G[i++]=T[H++],G[i++]=T[H++],$-=3;$&&(G[i++]=T[H++],$>1&&(G[i++]=T[H++]))}else{H=i-z;do G[i++]=G[H++],G[i++]=G[H++],G[i++]=G[H++],$-=3;while($>2);$&&(G[i++]=G[H++],$>1&&(G[i++]=G[H++]))}}else if((k&64)===0){I=B[(I&65535)+(g&(1<<k)-1)];continue s}else{t.msg="invalid distance code",L.mode=nf;break e}break}}else if((k&64)===0){I=b[(I&65535)+(g&(1<<k)-1)];continue t}else if(k&32){L.mode=Q7;break e}else{t.msg="invalid literal/length code",L.mode=nf;break e}break}}while(n<a&&i<A);$=y>>3,n-=$,y-=$<<3,g&=(1<<y)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<A?257+(A-i):257-(i-A),L.hold=g,L.bits=y};const Au=15,Eb=852,Fb=592,_b=0,cx=1,kb=2,P7=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),R7=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),D7=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),O7=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),M7=(r,t,s,n,a,i,c,A)=>{const d=A.bits;let u=0,m=0,f=0,x=0,g=0,y=0,b=0,B=0,N=0,E=0,I,k,$,z,H,T=null,V;const G=new Uint16Array(Au+1),L=new Uint16Array(Au+1);let F=null,O,P,ce;for(u=0;u<=Au;u++)G[u]=0;for(m=0;m<n;m++)G[t[s+m]]++;for(g=d,x=Au;x>=1&&G[x]===0;x--);if(g>x&&(g=x),x===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,A.bits=1,0;for(f=1;f<x&&G[f]===0;f++);for(g<f&&(g=f),B=1,u=1;u<=Au;u++)if(B<<=1,B-=G[u],B<0)return-1;if(B>0&&(r===_b||x!==1))return-1;for(L[1]=0,u=1;u<Au;u++)L[u+1]=L[u]+G[u];for(m=0;m<n;m++)t[s+m]!==0&&(c[L[t[s+m]]++]=m);if(r===_b?(T=F=c,V=20):r===cx?(T=P7,F=R7,V=257):(T=D7,F=O7,V=0),E=0,m=0,u=f,H=i,y=g,b=0,$=-1,N=1<<g,z=N-1,r===cx&&N>Eb||r===kb&&N>Fb)return 1;for(;;){O=u-b,c[m]+1<V?(P=0,ce=c[m]):c[m]>=V?(P=F[c[m]-V],ce=T[c[m]-V]):(P=96,ce=0),I=1<<u-b,k=1<<y,f=k;do k-=I,a[H+(E>>b)+k]=O<<24|P<<16|ce|0;while(k!==0);for(I=1<<u-1;E&I;)I>>=1;if(I!==0?(E&=I-1,E+=I):E=0,m++,--G[u]===0){if(u===x)break;u=t[s+c[m]]}if(u>g&&(E&z)!==$){for(b===0&&(b=g),H+=f,y=u-b,B=1<<y;y+b<x&&(B-=G[y+b],!(B<=0));)y++,B<<=1;if(N+=1<<y,r===cx&&N>Eb||r===kb&&N>Fb)return 1;$=E&z,a[$]=g<<24|y<<16|H-i|0}}return E!==0&&(a[H+E]=u-b<<24|64<<16|0),A.bits=g,0};var Uh=M7;const H7=0,pB=1,gB=2,{Z_FINISH:Ub,Z_BLOCK:K7,Z_TREES:af,Z_OK:Sd,Z_STREAM_END:V7,Z_NEED_DICT:z7,Z_STREAM_ERROR:No,Z_DATA_ERROR:xB,Z_MEM_ERROR:vB,Z_BUF_ERROR:$7,Z_DEFLATED:Ib}=hB,Qp=16180,Lb=16181,Qb=16182,Tb=16183,Pb=16184,Rb=16185,Db=16186,Ob=16187,Mb=16188,Hb=16189,ep=16190,jc=16191,Ax=16192,Kb=16193,dx=16194,Vb=16195,zb=16196,$b=16197,Gb=16198,of=16199,lf=16200,Wb=16201,qb=16202,Yb=16203,Jb=16204,Xb=16205,ux=16206,Zb=16207,ey=16208,Jr=16209,wB=16210,bB=16211,G7=852,W7=592,q7=15,Y7=q7,ty=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function J7(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Fd=r=>{if(!r)return 1;const t=r.state;return!t||t.strm!==r||t.mode<Qp||t.mode>bB?1:0},yB=r=>{if(Fd(r))return No;const t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=Qp,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(G7),t.distcode=t.distdyn=new Int32Array(W7),t.sane=1,t.back=-1,Sd},NB=r=>{if(Fd(r))return No;const t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,yB(r)},jB=(r,t)=>{let s;if(Fd(r))return No;const n=r.state;return t<0?(s=0,t=-t):(s=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?No:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=s,n.wbits=t,NB(r))},BB=(r,t)=>{if(!r)return No;const s=new J7;r.state=s,s.strm=r,s.window=null,s.mode=Qp;const n=jB(r,t);return n!==Sd&&(r.state=null),n},X7=r=>BB(r,Y7);let sy=!0,hx,mx;const Z7=r=>{if(sy){hx=new Int32Array(512),mx=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Uh(pB,r.lens,0,288,hx,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Uh(gB,r.lens,0,32,mx,0,r.work,{bits:5}),sy=!1}r.lencode=hx,r.lenbits=9,r.distcode=mx,r.distbits=5},CB=(r,t,s,n)=>{let a;const i=r.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(s-i.wsize,s),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(s-n,s-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(s-n,s),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},eR=(r,t)=>{let s,n,a,i,c,A,d,u,m,f,x,g,y,b,B=0,N,E,I,k,$,z,H,T;const V=new Uint8Array(4);let G,L;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Fd(r)||!r.output||!r.input&&r.avail_in!==0)return No;s=r.state,s.mode===jc&&(s.mode=Ax),c=r.next_out,a=r.output,d=r.avail_out,i=r.next_in,n=r.input,A=r.avail_in,u=s.hold,m=s.bits,f=A,x=d,T=Sd;e:for(;;)switch(s.mode){case Qp:if(s.wrap===0){s.mode=Ax;break}for(;m<16;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if(s.wrap&2&&u===35615){s.wbits===0&&(s.wbits=15),s.check=0,V[0]=u&255,V[1]=u>>>8&255,s.check=Kl(s.check,V,2,0),u=0,m=0,s.mode=Lb;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((u&255)<<8)+(u>>8))%31){r.msg="incorrect header check",s.mode=Jr;break}if((u&15)!==Ib){r.msg="unknown compression method",s.mode=Jr;break}if(u>>>=4,m-=4,H=(u&15)+8,s.wbits===0&&(s.wbits=H),H>15||H>s.wbits){r.msg="invalid window size",s.mode=Jr;break}s.dmax=1<<s.wbits,s.flags=0,r.adler=s.check=1,s.mode=u&512?Hb:jc,u=0,m=0;break;case Lb:for(;m<16;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if(s.flags=u,(s.flags&255)!==Ib){r.msg="unknown compression method",s.mode=Jr;break}if(s.flags&57344){r.msg="unknown header flags set",s.mode=Jr;break}s.head&&(s.head.text=u>>8&1),s.flags&512&&s.wrap&4&&(V[0]=u&255,V[1]=u>>>8&255,s.check=Kl(s.check,V,2,0)),u=0,m=0,s.mode=Qb;case Qb:for(;m<32;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}s.head&&(s.head.time=u),s.flags&512&&s.wrap&4&&(V[0]=u&255,V[1]=u>>>8&255,V[2]=u>>>16&255,V[3]=u>>>24&255,s.check=Kl(s.check,V,4,0)),u=0,m=0,s.mode=Tb;case Tb:for(;m<16;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}s.head&&(s.head.xflags=u&255,s.head.os=u>>8),s.flags&512&&s.wrap&4&&(V[0]=u&255,V[1]=u>>>8&255,s.check=Kl(s.check,V,2,0)),u=0,m=0,s.mode=Pb;case Pb:if(s.flags&1024){for(;m<16;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}s.length=u,s.head&&(s.head.extra_len=u),s.flags&512&&s.wrap&4&&(V[0]=u&255,V[1]=u>>>8&255,s.check=Kl(s.check,V,2,0)),u=0,m=0}else s.head&&(s.head.extra=null);s.mode=Rb;case Rb:if(s.flags&1024&&(g=s.length,g>A&&(g=A),g&&(s.head&&(H=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(n.subarray(i,i+g),H)),s.flags&512&&s.wrap&4&&(s.check=Kl(s.check,n,g,i)),A-=g,i+=g,s.length-=g),s.length))break e;s.length=0,s.mode=Db;case Db:if(s.flags&2048){if(A===0)break e;g=0;do H=n[i+g++],s.head&&H&&s.length<65536&&(s.head.name+=String.fromCharCode(H));while(H&&g<A);if(s.flags&512&&s.wrap&4&&(s.check=Kl(s.check,n,g,i)),A-=g,i+=g,H)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=Ob;case Ob:if(s.flags&4096){if(A===0)break e;g=0;do H=n[i+g++],s.head&&H&&s.length<65536&&(s.head.comment+=String.fromCharCode(H));while(H&&g<A);if(s.flags&512&&s.wrap&4&&(s.check=Kl(s.check,n,g,i)),A-=g,i+=g,H)break e}else s.head&&(s.head.comment=null);s.mode=Mb;case Mb:if(s.flags&512){for(;m<16;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if(s.wrap&4&&u!==(s.check&65535)){r.msg="header crc mismatch",s.mode=Jr;break}u=0,m=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),r.adler=s.check=0,s.mode=jc;break;case Hb:for(;m<32;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}r.adler=s.check=ty(u),u=0,m=0,s.mode=ep;case ep:if(s.havedict===0)return r.next_out=c,r.avail_out=d,r.next_in=i,r.avail_in=A,s.hold=u,s.bits=m,z7;r.adler=s.check=1,s.mode=jc;case jc:if(t===K7||t===af)break e;case Ax:if(s.last){u>>>=m&7,m-=m&7,s.mode=ux;break}for(;m<3;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}switch(s.last=u&1,u>>>=1,m-=1,u&3){case 0:s.mode=Kb;break;case 1:if(Z7(s),s.mode=of,t===af){u>>>=2,m-=2;break e}break;case 2:s.mode=zb;break;case 3:r.msg="invalid block type",s.mode=Jr}u>>>=2,m-=2;break;case Kb:for(u>>>=m&7,m-=m&7;m<32;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if((u&65535)!==(u>>>16^65535)){r.msg="invalid stored block lengths",s.mode=Jr;break}if(s.length=u&65535,u=0,m=0,s.mode=dx,t===af)break e;case dx:s.mode=Vb;case Vb:if(g=s.length,g){if(g>A&&(g=A),g>d&&(g=d),g===0)break e;a.set(n.subarray(i,i+g),c),A-=g,i+=g,d-=g,c+=g,s.length-=g;break}s.mode=jc;break;case zb:for(;m<14;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if(s.nlen=(u&31)+257,u>>>=5,m-=5,s.ndist=(u&31)+1,u>>>=5,m-=5,s.ncode=(u&15)+4,u>>>=4,m-=4,s.nlen>286||s.ndist>30){r.msg="too many length or distance symbols",s.mode=Jr;break}s.have=0,s.mode=$b;case $b:for(;s.have<s.ncode;){for(;m<3;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}s.lens[F[s.have++]]=u&7,u>>>=3,m-=3}for(;s.have<19;)s.lens[F[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,G={bits:s.lenbits},T=Uh(H7,s.lens,0,19,s.lencode,0,s.work,G),s.lenbits=G.bits,T){r.msg="invalid code lengths set",s.mode=Jr;break}s.have=0,s.mode=Gb;case Gb:for(;s.have<s.nlen+s.ndist;){for(;B=s.lencode[u&(1<<s.lenbits)-1],N=B>>>24,E=B>>>16&255,I=B&65535,!(N<=m);){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if(I<16)u>>>=N,m-=N,s.lens[s.have++]=I;else{if(I===16){for(L=N+2;m<L;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if(u>>>=N,m-=N,s.have===0){r.msg="invalid bit length repeat",s.mode=Jr;break}H=s.lens[s.have-1],g=3+(u&3),u>>>=2,m-=2}else if(I===17){for(L=N+3;m<L;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}u>>>=N,m-=N,H=0,g=3+(u&7),u>>>=3,m-=3}else{for(L=N+7;m<L;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}u>>>=N,m-=N,H=0,g=11+(u&127),u>>>=7,m-=7}if(s.have+g>s.nlen+s.ndist){r.msg="invalid bit length repeat",s.mode=Jr;break}for(;g--;)s.lens[s.have++]=H}}if(s.mode===Jr)break;if(s.lens[256]===0){r.msg="invalid code -- missing end-of-block",s.mode=Jr;break}if(s.lenbits=9,G={bits:s.lenbits},T=Uh(pB,s.lens,0,s.nlen,s.lencode,0,s.work,G),s.lenbits=G.bits,T){r.msg="invalid literal/lengths set",s.mode=Jr;break}if(s.distbits=6,s.distcode=s.distdyn,G={bits:s.distbits},T=Uh(gB,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,G),s.distbits=G.bits,T){r.msg="invalid distances set",s.mode=Jr;break}if(s.mode=of,t===af)break e;case of:s.mode=lf;case lf:if(A>=6&&d>=258){r.next_out=c,r.avail_out=d,r.next_in=i,r.avail_in=A,s.hold=u,s.bits=m,T7(r,x),c=r.next_out,a=r.output,d=r.avail_out,i=r.next_in,n=r.input,A=r.avail_in,u=s.hold,m=s.bits,s.mode===jc&&(s.back=-1);break}for(s.back=0;B=s.lencode[u&(1<<s.lenbits)-1],N=B>>>24,E=B>>>16&255,I=B&65535,!(N<=m);){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if(E&&(E&240)===0){for(k=N,$=E,z=I;B=s.lencode[z+((u&(1<<k+$)-1)>>k)],N=B>>>24,E=B>>>16&255,I=B&65535,!(k+N<=m);){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}u>>>=k,m-=k,s.back+=k}if(u>>>=N,m-=N,s.back+=N,s.length=I,E===0){s.mode=Xb;break}if(E&32){s.back=-1,s.mode=jc;break}if(E&64){r.msg="invalid literal/length code",s.mode=Jr;break}s.extra=E&15,s.mode=Wb;case Wb:if(s.extra){for(L=s.extra;m<L;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}s.length+=u&(1<<s.extra)-1,u>>>=s.extra,m-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=qb;case qb:for(;B=s.distcode[u&(1<<s.distbits)-1],N=B>>>24,E=B>>>16&255,I=B&65535,!(N<=m);){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if((E&240)===0){for(k=N,$=E,z=I;B=s.distcode[z+((u&(1<<k+$)-1)>>k)],N=B>>>24,E=B>>>16&255,I=B&65535,!(k+N<=m);){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}u>>>=k,m-=k,s.back+=k}if(u>>>=N,m-=N,s.back+=N,E&64){r.msg="invalid distance code",s.mode=Jr;break}s.offset=I,s.extra=E&15,s.mode=Yb;case Yb:if(s.extra){for(L=s.extra;m<L;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}s.offset+=u&(1<<s.extra)-1,u>>>=s.extra,m-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){r.msg="invalid distance too far back",s.mode=Jr;break}s.mode=Jb;case Jb:if(d===0)break e;if(g=x-d,s.offset>g){if(g=s.offset-g,g>s.whave&&s.sane){r.msg="invalid distance too far back",s.mode=Jr;break}g>s.wnext?(g-=s.wnext,y=s.wsize-g):y=s.wnext-g,g>s.length&&(g=s.length),b=s.window}else b=a,y=c-s.offset,g=s.length;g>d&&(g=d),d-=g,s.length-=g;do a[c++]=b[y++];while(--g);s.length===0&&(s.mode=lf);break;case Xb:if(d===0)break e;a[c++]=s.length,d--,s.mode=lf;break;case ux:if(s.wrap){for(;m<32;){if(A===0)break e;A--,u|=n[i++]<<m,m+=8}if(x-=d,r.total_out+=x,s.total+=x,s.wrap&4&&x&&(r.adler=s.check=s.flags?Kl(s.check,a,x,c-x):v0(s.check,a,x,c-x)),x=d,s.wrap&4&&(s.flags?u:ty(u))!==s.check){r.msg="incorrect data check",s.mode=Jr;break}u=0,m=0}s.mode=Zb;case Zb:if(s.wrap&&s.flags){for(;m<32;){if(A===0)break e;A--,u+=n[i++]<<m,m+=8}if(s.wrap&4&&u!==(s.total&4294967295)){r.msg="incorrect length check",s.mode=Jr;break}u=0,m=0}s.mode=ey;case ey:T=V7;break e;case Jr:T=xB;break e;case wB:return vB;case bB:default:return No}return r.next_out=c,r.avail_out=d,r.next_in=i,r.avail_in=A,s.hold=u,s.bits=m,(s.wsize||x!==r.avail_out&&s.mode<Jr&&(s.mode<ux||t!==Ub))&&CB(r,r.output,r.next_out,x-r.avail_out),f-=r.avail_in,x-=r.avail_out,r.total_in+=f,r.total_out+=x,s.total+=x,s.wrap&4&&x&&(r.adler=s.check=s.flags?Kl(s.check,a,x,r.next_out-x):v0(s.check,a,x,r.next_out-x)),r.data_type=s.bits+(s.last?64:0)+(s.mode===jc?128:0)+(s.mode===of||s.mode===dx?256:0),(f===0&&x===0||t===Ub)&&T===Sd&&(T=$7),T},tR=r=>{if(Fd(r))return No;let t=r.state;return t.window&&(t.window=null),r.state=null,Sd},sR=(r,t)=>{if(Fd(r))return No;const s=r.state;return(s.wrap&2)===0?No:(s.head=t,t.done=!1,Sd)},rR=(r,t)=>{const s=t.length;let n,a,i;return Fd(r)||(n=r.state,n.wrap!==0&&n.mode!==ep)?No:n.mode===ep&&(a=1,a=v0(a,t,s,0),a!==n.check)?xB:(i=CB(r,t,s,s),i?(n.mode=wB,vB):(n.havedict=1,Sd))};var nR=NB,aR=jB,iR=yB,oR=X7,lR=BB,cR=eR,AR=tR,dR=sR,uR=rR,hR="pako inflate (from Nodeca project)",Bc={inflateReset:nR,inflateReset2:aR,inflateResetKeep:iR,inflateInit:oR,inflateInit2:lR,inflate:cR,inflateEnd:AR,inflateGetHeader:dR,inflateSetDictionary:uR,inflateInfo:hR};function mR(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var fR=mR;const SB=Object.prototype.toString,{Z_NO_FLUSH:pR,Z_FINISH:gR,Z_OK:Kh,Z_STREAM_END:fx,Z_NEED_DICT:px,Z_STREAM_ERROR:xR,Z_DATA_ERROR:ry,Z_MEM_ERROR:vR}=hB;function qh(r){this.options=mB.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new L7,this.strm.avail_out=0;let s=Bc.inflateInit2(this.strm,t.windowBits);if(s!==Kh)throw new Error(w0[s]);if(this.header=new fR,Bc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=b0.string2buf(t.dictionary):SB.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(s=Bc.inflateSetDictionary(this.strm,t.dictionary),s!==Kh)))throw new Error(w0[s])}qh.prototype.push=function(r,t){const s=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,c,A;if(this.ended)return!1;for(t===~~t?c=t:c=t===!0?gR:pR,SB.call(r)==="[object ArrayBuffer]"?s.input=new Uint8Array(r):s.input=r,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(n),s.next_out=0,s.avail_out=n),i=Bc.inflate(s,c),i===px&&a&&(i=Bc.inflateSetDictionary(s,a),i===Kh?i=Bc.inflate(s,c):i===ry&&(i=px));s.avail_in>0&&i===fx&&s.state.wrap>0&&r[s.next_in]!==0;)Bc.inflateReset(s),i=Bc.inflate(s,c);switch(i){case xR:case ry:case px:case vR:return this.onEnd(i),this.ended=!0,!1}if(A=s.avail_out,s.next_out&&(s.avail_out===0||i===fx))if(this.options.to==="string"){let d=b0.utf8border(s.output,s.next_out),u=s.next_out-d,m=b0.buf2string(s.output,d);s.next_out=u,s.avail_out=n-u,u&&s.output.set(s.output.subarray(d,d+u),0),this.onData(m)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(i===Kh&&A===0)){if(i===fx)return i=Bc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};qh.prototype.onData=function(r){this.chunks.push(r)};qh.prototype.onEnd=function(r){r===Kh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=mB.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function wR(r,t){const s=new qh(t);if(s.push(r),s.err)throw s.msg||w0[s.err];return s.result}var bR=qh,yR=wR,NR={Inflate:bR,inflate:yR};const{Inflate:jR,inflate:BR}=NR;var ny=jR,CR=BR;const EB=[];for(let r=0;r<256;r++){let t=r;for(let s=0;s<8;s++)t&1?t=3988292384^t>>>1:t=t>>>1;EB[r]=t}const ay=4294967295;function SR(r,t,s){let n=r;for(let a=0;a<s;a++)n=EB[(n^t[a])&255]^n>>>8;return n}function ER(r,t){return(SR(ay,r,t)^ay)>>>0}function iy(r,t,s){const n=r.readUint32(),a=ER(new Uint8Array(r.buffer,r.byteOffset+r.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${s}. Expected ${n}, found ${a}`)}function FB(r,t,s){for(let n=0;n<s;n++)t[n]=r[n]}function _B(r,t,s,n){let a=0;for(;a<n;a++)t[a]=r[a];for(;a<s;a++)t[a]=r[a]+t[a-n]&255}function kB(r,t,s,n){let a=0;if(s.length===0)for(;a<n;a++)t[a]=r[a];else for(;a<n;a++)t[a]=r[a]+s[a]&255}function UB(r,t,s,n,a){let i=0;if(s.length===0){for(;i<a;i++)t[i]=r[i];for(;i<n;i++)t[i]=r[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=r[i]+(s[i]>>1)&255;for(;i<n;i++)t[i]=r[i]+(t[i-a]+s[i]>>1)&255}}function IB(r,t,s,n,a){let i=0;if(s.length===0){for(;i<a;i++)t[i]=r[i];for(;i<n;i++)t[i]=r[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=r[i]+s[i]&255;for(;i<n;i++)t[i]=r[i]+FR(t[i-a],s[i],s[i-a])&255}}function FR(r,t,s){const n=r+t-s,a=Math.abs(n-r),i=Math.abs(n-t),c=Math.abs(n-s);return a<=i&&a<=c?r:i<=c?t:s}function _R(r,t,s,n,a,i){switch(r){case 0:FB(t,s,a);break;case 1:_B(t,s,a,i);break;case 2:kB(t,s,n,a);break;case 3:UB(t,s,n,a,i);break;case 4:IB(t,s,n,a,i);break;default:throw new Error(`Unsupported filter: ${r}`)}}const kR=new Uint16Array([255]),UR=new Uint8Array(kR.buffer),IR=UR[0]===255;function LR(r){const{data:t,width:s,height:n,channels:a,depth:i}=r,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],A=Math.ceil(i/8)*a,d=new Uint8Array(n*s*A);let u=0;for(let m=0;m<7;m++){const f=c[m],x=Math.ceil((s-f.x)/f.xStep),g=Math.ceil((n-f.y)/f.yStep);if(x<=0||g<=0)continue;const y=x*A,b=new Uint8Array(y);for(let B=0;B<g;B++){const N=t[u++],E=t.subarray(u,u+y);u+=y;const I=new Uint8Array(y);_R(N,E,I,b,y,A),b.set(I);for(let k=0;k<x;k++){const $=f.x+k*f.xStep,z=f.y+B*f.yStep;if(!($>=s||z>=n))for(let H=0;H<A;H++)d[(z*s+$)*A+H]=I[k*A+H]}}}if(i===16){const m=new Uint16Array(d.buffer);if(IR)for(let f=0;f<m.length;f++)m[f]=QR(m[f]);return m}else return d}function QR(r){return(r&255)<<8|r>>8&255}const TR=new Uint16Array([255]),PR=new Uint8Array(TR.buffer),RR=PR[0]===255,DR=new Uint8Array(0);function oy(r){const{data:t,width:s,height:n,channels:a,depth:i}=r,c=Math.ceil(i/8)*a,A=Math.ceil(i/8*a*s),d=new Uint8Array(n*A);let u=DR,m=0,f,x;for(let g=0;g<n;g++){switch(f=t.subarray(m+1,m+1+A),x=d.subarray(g*A,(g+1)*A),t[m]){case 0:FB(f,x,A);break;case 1:_B(f,x,A,c);break;case 2:kB(f,x,u,A);break;case 3:UB(f,x,u,A,c);break;case 4:IB(f,x,u,A,c);break;default:throw new Error(`Unsupported filter: ${t[m]}`)}u=x,m+=A+1}if(i===16){const g=new Uint16Array(d.buffer);if(RR)for(let y=0;y<g.length;y++)g[y]=OR(g[y]);return g}else return d}function OR(r){return(r&255)<<8|r>>8&255}const jf=Uint8Array.of(137,80,78,71,13,10,26,10);function ly(r){if(!MR(r.readBytes(jf.length)))throw new Error("wrong PNG signature")}function MR(r){if(r.length<jf.length)return!1;for(let t=0;t<jf.length;t++)if(r[t]!==jf[t])return!1;return!0}const HR="tEXt",KR=0,LB=new TextDecoder("latin1");function VR(r){if($R(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const zR=/^[\u0000-\u00FF]*$/;function $R(r){if(!zR.test(r))throw new Error("invalid latin1 text")}function GR(r,t,s){const n=QB(t);r[n]=WR(t,s-n.length-1)}function QB(r){for(r.mark();r.readByte()!==KR;);const t=r.offset;r.reset();const s=LB.decode(r.readBytes(t-r.offset-1));return r.skip(1),VR(s),s}function WR(r,t){return LB.decode(r.readBytes(t))}const Hi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},gx={UNKNOWN:-1,DEFLATE:0},cy={UNKNOWN:-1,ADAPTIVE:0},xx={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},cf={NONE:0,BACKGROUND:1,PREVIOUS:2},vx={SOURCE:0,OVER:1};class qR extends fv{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,s={}){super(t);const{checkCrc:n=!1}=s;this._checkCrc=n,this._inflator=new ny,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=gx.UNKNOWN,this._filterMethod=cy.UNKNOWN,this._interlaceMethod=xx.UNKNOWN,this._colorType=Hi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(ly(this);!this._end;){const t=this.readUint32(),s=this.readChars(4);this.decodeChunk(t,s)}return this.decodeImage(),this._png}decodeApng(){for(ly(this);!this._end;){const t=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(t,s)}return this.decodeApngImage(),this._apng}decodeChunk(t,s){const n=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case HR:GR(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?iy(this,t+4,s):this.skip(4)}decodeApngChunk(t,s){const n=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,s),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?iy(this,t+4,s):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=YR(this.readUint8());const s=this.readUint8();this._colorType=s;let n;switch(s){case Hi.GREYSCALE:n=1;break;case Hi.TRUECOLOUR:n=3;break;case Hi.INDEXED_COLOUR:n=1;break;case Hi.GREYSCALE_ALPHA:n=2;break;case Hi.TRUECOLOUR_ALPHA:n=4;break;case Hi.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==gx.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const s=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let a=0;a<s;a++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const s=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let s=t,n=this.offset+this.byteOffset;if(n+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,n,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Hi.GREYSCALE:case Hi.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let s=0;s<t/2;s++)this._transparency[s]=this.readUint16();break}case Hi.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let s=0;for(;s<t;s++){const n=this.readByte();this._palette[s].push(n)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case Hi.UNKNOWN:case Hi.GREYSCALE_ALPHA:case Hi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const s=QB(this),n=this.readUint8();if(n!==gx.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const a=this.readBytes(t-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:CR(a)}}decodepHYs(){const t=this.readUint32(),s=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:s,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const s={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=oy({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)s.data=n.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(n,a,s),this.addFrameDataToCanvas(s,n)}this._apng.frames.push(s)}}return this._apng}disposeFrame(t,s,n){switch(t.disposeOp){case cf.NONE:break;case cf.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let i=0;i<this._png.width;i++){const c=(a*t.width+i)*this._png.channels;for(let A=0;A<this._png.channels;A++)n.data[c+A]=0}break;case cf.PREVIOUS:n.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,s){const n=1<<this._png.depth,a=(i,c)=>{const A=((i+s.yOffset)*this._png.width+s.xOffset+c)*this._png.channels,d=(i*s.width+c)*this._png.channels;return{index:A,frameIndex:d}};switch(s.blendOp){case vx.SOURCE:for(let i=0;i<s.height;i++)for(let c=0;c<s.width;c++){const{index:A,frameIndex:d}=a(i,c);for(let u=0;u<this._png.channels;u++)t.data[A+u]=s.data[d+u]}break;case vx.OVER:for(let i=0;i<s.height;i++)for(let c=0;c<s.width;c++){const{index:A,frameIndex:d}=a(i,c);for(let u=0;u<this._png.channels;u++){const m=s.data[d+this._png.channels-1]/n,f=u%(this._png.channels-1)===0?1:s.data[d+u],x=Math.floor(m*f+(1-m)*t.data[A+u]);t.data[A+u]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==cy.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===xx.NO_INTERLACE)this._png.data=oy({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===xx.ADAM7)this._png.data=LR({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,s=this._frames.at(-1);s?s.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:cf.NONE,blendOp:vx.SOURCE,data:t}),this._inflator=new ny,this._writingDataChunks=!1}}function YR(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Ay;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Ay||(Ay={}));function JR(r,t){return new qR(r,t).decode()}var Es=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function wx(){Es.console&&typeof Es.console.log=="function"&&Es.console.log.apply(Es.console,arguments)}var _r={log:wx,warn:function(r){Es.console&&(typeof Es.console.warn=="function"?Es.console.warn.apply(Es.console,arguments):wx.call(null,arguments))},error:function(r){Es.console&&(typeof Es.console.error=="function"?Es.console.error.apply(Es.console,arguments):wx(r))}};function bx(r,t,s){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){hd(n.response,t,s)},n.onerror=function(){_r.error("could not download file")},n.send()}function dy(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Af(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var hd=Es.saveAs||((typeof window>"u"?"undefined":jr(window))!=="object"||window!==Es?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,s){var n=Es.URL||Es.webkitURL,a=document.createElement("a");t=t||r.name||"download",a.download=t,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?dy(a.href)?bx(r,t,s):Af(a,a.target="_blank"):Af(a)):(a.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Af(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,s){if(t=t||r.name||"download",typeof r=="string")if(dy(r))bx(r,t,s);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Af(n)})}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:jr(i)!=="object"&&(_r.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(r,s),t)}:function(r,t,s,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return bx(r,t,s);var a=r.type==="application/octet-stream",i=/constructor/i.test(Es.HTMLElement)||Es.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&i)&&(typeof FileReader>"u"?"undefined":jr(FileReader))==="object"){var A=new FileReader;A.onloadend=function(){var m=A.result;m=c?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=m:location=m,n=null},A.readAsDataURL(r)}else{var d=Es.URL||Es.webkitURL,u=d.createObjectURL(r);n?n.location=u:location.href=u,n=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function TB(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(A){return[parseInt(A[1]),parseInt(A[2]),parseInt(A[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(A){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(A){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}}],n=0;n<s.length;n++){var a=s[n].re,i=s[n].process,c=a.exec(r);c&&(t=i(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var A=this.r.toString(16),d=this.g.toString(16),u=this.b.toString(16);return A.length==1&&(A="0"+A),d.length==1&&(d="0"+d),u.length==1&&(u="0"+u),"#"+A+d+u}}var Bf=Es.atob.bind(Es),uy=Es.btoa.bind(Es);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function yx(r,t){var s=r[0],n=r[1],a=r[2],i=r[3];s=Oa(s,n,a,i,t[0],7,-680876936),i=Oa(i,s,n,a,t[1],12,-389564586),a=Oa(a,i,s,n,t[2],17,606105819),n=Oa(n,a,i,s,t[3],22,-1044525330),s=Oa(s,n,a,i,t[4],7,-176418897),i=Oa(i,s,n,a,t[5],12,1200080426),a=Oa(a,i,s,n,t[6],17,-1473231341),n=Oa(n,a,i,s,t[7],22,-45705983),s=Oa(s,n,a,i,t[8],7,1770035416),i=Oa(i,s,n,a,t[9],12,-1958414417),a=Oa(a,i,s,n,t[10],17,-42063),n=Oa(n,a,i,s,t[11],22,-1990404162),s=Oa(s,n,a,i,t[12],7,1804603682),i=Oa(i,s,n,a,t[13],12,-40341101),a=Oa(a,i,s,n,t[14],17,-1502002290),s=Ma(s,n=Oa(n,a,i,s,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Ma(i,s,n,a,t[6],9,-1069501632),a=Ma(a,i,s,n,t[11],14,643717713),n=Ma(n,a,i,s,t[0],20,-373897302),s=Ma(s,n,a,i,t[5],5,-701558691),i=Ma(i,s,n,a,t[10],9,38016083),a=Ma(a,i,s,n,t[15],14,-660478335),n=Ma(n,a,i,s,t[4],20,-405537848),s=Ma(s,n,a,i,t[9],5,568446438),i=Ma(i,s,n,a,t[14],9,-1019803690),a=Ma(a,i,s,n,t[3],14,-187363961),n=Ma(n,a,i,s,t[8],20,1163531501),s=Ma(s,n,a,i,t[13],5,-1444681467),i=Ma(i,s,n,a,t[2],9,-51403784),a=Ma(a,i,s,n,t[7],14,1735328473),s=Ha(s,n=Ma(n,a,i,s,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Ha(i,s,n,a,t[8],11,-2022574463),a=Ha(a,i,s,n,t[11],16,1839030562),n=Ha(n,a,i,s,t[14],23,-35309556),s=Ha(s,n,a,i,t[1],4,-1530992060),i=Ha(i,s,n,a,t[4],11,1272893353),a=Ha(a,i,s,n,t[7],16,-155497632),n=Ha(n,a,i,s,t[10],23,-1094730640),s=Ha(s,n,a,i,t[13],4,681279174),i=Ha(i,s,n,a,t[0],11,-358537222),a=Ha(a,i,s,n,t[3],16,-722521979),n=Ha(n,a,i,s,t[6],23,76029189),s=Ha(s,n,a,i,t[9],4,-640364487),i=Ha(i,s,n,a,t[12],11,-421815835),a=Ha(a,i,s,n,t[15],16,530742520),s=Ka(s,n=Ha(n,a,i,s,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Ka(i,s,n,a,t[7],10,1126891415),a=Ka(a,i,s,n,t[14],15,-1416354905),n=Ka(n,a,i,s,t[5],21,-57434055),s=Ka(s,n,a,i,t[12],6,1700485571),i=Ka(i,s,n,a,t[3],10,-1894986606),a=Ka(a,i,s,n,t[10],15,-1051523),n=Ka(n,a,i,s,t[1],21,-2054922799),s=Ka(s,n,a,i,t[8],6,1873313359),i=Ka(i,s,n,a,t[15],10,-30611744),a=Ka(a,i,s,n,t[6],15,-1560198380),n=Ka(n,a,i,s,t[13],21,1309151649),s=Ka(s,n,a,i,t[4],6,-145523070),i=Ka(i,s,n,a,t[11],10,-1120210379),a=Ka(a,i,s,n,t[2],15,718787259),n=Ka(n,a,i,s,t[9],21,-343485551),r[0]=EA(s,r[0]),r[1]=EA(n,r[1]),r[2]=EA(a,r[2]),r[3]=EA(i,r[3])}function Tp(r,t,s,n,a,i){return t=EA(EA(t,r),EA(n,i)),EA(t<<a|t>>>32-a,s)}function Oa(r,t,s,n,a,i,c){return Tp(t&s|~t&n,r,t,a,i,c)}function Ma(r,t,s,n,a,i,c){return Tp(t&n|s&~n,r,t,a,i,c)}function Ha(r,t,s,n,a,i,c){return Tp(t^s^n,r,t,a,i,c)}function Ka(r,t,s,n,a,i,c){return Tp(s^(t|~n),r,t,a,i,c)}function PB(r){var t,s=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)yx(n,XR(r.substring(t-64,t)));r=r.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)a[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(yx(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*s,yx(n,a),n}function XR(r){var t,s=[];for(t=0;t<64;t+=4)s[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return s}var hy="0123456789abcdef".split("");function ZR(r){for(var t="",s=0;s<4;s++)t+=hy[r>>8*s+4&15]+hy[r>>8*s&15];return t}function eD(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function y0(r){return PB(r).map(eD).join("")}var tD=(function(r){for(var t=0;t<r.length;t++)r[t]=ZR(r[t]);return r.join("")})(PB("hello"))!="5d41402abc4b2a76b9719d911017c592";function EA(r,t){if(tD){var s=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(s>>16)<<16|65535&s}return r+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function N0(r,t){var s,n,a,i;if(r!==s){for(var c=(a=r,i=1+(256/r.length|0),new Array(i+1).join(a)),A=[],d=0;d<256;d++)A[d]=d;var u=0;for(d=0;d<256;d++){var m=A[d];u=(u+m+c.charCodeAt(d))%256,A[d]=A[u],A[u]=m}s=r,n=A}else A=n;var f=t.length,x=0,g=0,y="";for(d=0;d<f;d++)g=(g+(m=A[x=(x+1)%256]))%256,A[x]=A[g],A[g]=m,c=A[(A[x]+A[g])%256],y+=String.fromCharCode(t.charCodeAt(d)^c);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var my={print:4,modify:8,copy:16,"annot-forms":32};function fu(r,t,s,n){this.v=1,this.r=2;var a=192;r.forEach(function(A){if(my.perm!==void 0)throw new Error("Invalid permission: "+A);a+=my[A]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),c=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,c),this.P=-(1+(255^a)),this.encryptionKey=y0(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=N0(this.encryptionKey,this.padding)}function pu(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",s=r.length,n=0;n<s;n++){var a=r.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):r[n]}return t}function fy(r){if(jr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(s,n,a){if(a=a||!1,typeof s!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(s)||(t[s]={});var i=Math.random().toString(35);return t[s][i]=[n,!!a],i},this.unsubscribe=function(s){for(var n in t)if(t[n][s])return delete t[n][s],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(s){if(t.hasOwnProperty(s)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[s]){var c=t[s][i];try{c[0].apply(r,n)}catch(A){Es.console&&_r.error("jsPDF PubSub Error",A.message,A)}c[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function tp(r){if(!(this instanceof tp))return new tp(r);var t="opacity,stroke-opacity".split(",");for(var s in r)r.hasOwnProperty(s)&&t.indexOf(s)>=0&&(this[s]=r[s]);this.id="",this.objectNumber=-1}function RB(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function fd(r,t,s,n,a){if(!(this instanceof fd))return new fd(r,t,s,n,a);this.type=r==="axial"?2:3,this.coords=t,this.colors=s,RB.call(this,n,a)}function xu(r,t,s,n,a){if(!(this instanceof xu))return new xu(r,t,s,n,a);this.boundingBox=r,this.xStep=t,this.yStep=s,this.stream="",this.cloneIndex=0,RB.call(this,n,a)}function hs(r){var t,s=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],c=[],A=1,d=16,u="S",m=null;jr(r=r||{})==="object"&&(s=r.orientation,n=r.unit||n,a=r.format||a,i=r.compress||r.compressPdf||i,(m=r.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),A=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(d=r.floatPrecision),u=r.defaultPathOperation||"S"),c=r.filters||(i===!0?["FlateEncode"]:c),n=n||"mm",s=(""+(s||"P")).toLowerCase();var f=r.putOnlyUsedFonts||!1,x={},g={internal:{},__private__:{}};g.__private__.PubSub=fy;var y="1.3",b=g.__private__.getPdfVersion=function(){return y};g.__private__.setPdfVersion=function(C){y=C};var B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return B};var N=g.__private__.getPageFormat=function(C){return B[C]};a=a||"a4";var E="compat",I="advanced",k=E;function $(){this.saveGraphicsState(),X(new yt(Ve,0,0,-Ve,0,Ea()*Ve).toString()+" cm"),this.setFontSize(this.getFontSize()/Ve),u="n",k=I}function z(){this.restoreGraphicsState(),u="S",k=E}var H=g.__private__.combineFontStyleAndFontWeight=function(C,Y){if(C=="bold"&&Y=="normal"||C=="bold"&&Y==400||C=="normal"&&Y=="italic"||C=="bold"&&Y=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Y&&(C=Y==400||Y==="normal"?C==="italic"?"italic":"normal":Y!=700&&Y!=="bold"||C!=="normal"?(Y==700?"bold":Y)+""+C:"bold"),C};g.advancedAPI=function(C){var Y=k===E;return Y&&$.call(this),typeof C!="function"||(C(this),Y&&z.call(this)),this},g.compatAPI=function(C){var Y=k===I;return Y&&z.call(this),typeof C!="function"||(C(this),Y&&$.call(this)),this},g.isAdvancedAPI=function(){return k===I};var T,V=function(C){if(k!==I)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=g.roundToPrecision=g.__private__.roundToPrecision=function(C,Y){var ve=t||Y;if(isNaN(C)||isNaN(ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(ve).replace(/0+$/,"")};T=g.hpf=g.__private__.hpf=typeof d=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return G(C,d)}:d==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return G(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return G(C,16)};var L=g.f2=g.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return G(C,2)},F=g.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return G(C,3)},O=g.scale=g.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return k===E?C*Ve:k===I?C:void 0},P=function(C){return O((function(Y){return k===E?Ea()-Y:k===I?Y:void 0})(C))};g.__private__.setPrecision=g.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(t=parseInt(C,10))};var ce,W="00000000000000000000000000000000",ae=g.__private__.getFileId=function(){return W},K=g.__private__.setFileId=function(C){return W=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Xr=new fu(m.userPermissions,m.userPassword,m.ownerPassword,W)),W};g.setFileId=function(C){return K(C),this},g.getFileId=function(){return ae()};var le=g.__private__.convertDateToPDFDate=function(C){var Y=C.getTimezoneOffset(),ve=Y<0?"+":"-",Fe=Math.floor(Math.abs(Y/60)),Ke=Math.abs(Y%60),ht=[ve,te(Fe),"'",te(Ke),"'"].join("");return["D:",C.getFullYear(),te(C.getMonth()+1),te(C.getDate()),te(C.getHours()),te(C.getMinutes()),te(C.getSeconds()),ht].join("")},ie=g.__private__.convertPDFDateToDate=function(C){var Y=parseInt(C.substr(2,4),10),ve=parseInt(C.substr(6,2),10)-1,Fe=parseInt(C.substr(8,2),10),Ke=parseInt(C.substr(10,2),10),ht=parseInt(C.substr(12,2),10),vt=parseInt(C.substr(14,2),10);return new Date(Y,ve,Fe,Ke,ht,vt,0)},se=g.__private__.setCreationDate=function(C){var Y;if(C===void 0&&(C=new Date),C instanceof Date)Y=le(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Y=C}return ce=Y},R=g.__private__.getCreationDate=function(C){var Y=ce;return C==="jsDate"&&(Y=ie(ce)),Y};g.setCreationDate=function(C){return se(C),this},g.getCreationDate=function(C){return R(C)};var q,te=g.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},de=g.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},fe=0,me=[],pe=[],ee=0,je=[],Pe=[],De=!1,nt=pe;g.__private__.setCustomOutputDestination=function(C){De=!0,nt=C};var Se=function(C){De||(nt=C)};g.__private__.resetCustomOutputDestination=function(){De=!1,nt=pe};var X=g.__private__.out=function(C){return C=C.toString(),ee+=C.length+1,nt.push(C),nt},Ie=g.__private__.write=function(C){return X(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},rt=g.__private__.getArrayBuffer=function(C){for(var Y=C.length,ve=new ArrayBuffer(Y),Fe=new Uint8Array(ve);Y--;)Fe[Y]=C.charCodeAt(Y);return ve},Ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Ee};var Te=r.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(C){return Te=k===I?C/Ve:C,this};var dt,st=g.__private__.getFontSize=g.getFontSize=function(){return k===E?Te:Te*Ve},ft=r.R2L||!1;g.__private__.setR2L=g.setR2L=function(C){return ft=C,this},g.__private__.getR2L=g.getR2L=function(){return ft};var et,it=g.__private__.setZoomMode=function(C){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))dt=C;else if(isNaN(C)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');dt=C}else dt=parseInt(C,10)};g.__private__.getZoomMode=function(){return dt};var Ue,We=g.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');et=C};g.__private__.getPageMode=function(){return et};var Bt=g.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');Ue=C};g.__private__.getLayoutMode=function(){return Ue},g.__private__.setDisplayMode=g.setDisplayMode=function(C,Y,ve){return it(C),Bt(Y),We(ve),this};var mt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(C){if(Object.keys(mt).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return mt[C]},g.__private__.getDocumentProperties=function(){return mt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(C){for(var Y in mt)mt.hasOwnProperty(Y)&&C[Y]&&(mt[Y]=C[Y]);return this},g.__private__.setDocumentProperty=function(C,Y){if(Object.keys(mt).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return mt[C]=Y};var Me,Ve,wt,As,_e,$e={},gt={},Ft=[],bt={},Ot={},Lt={},Vt={},Ns=null,Yt=0,Ht=[],_t=new fy(g),Ls=r.hotfixes||[],vs={},Gt={},Xs=[],yt=function C(Y,ve,Fe,Ke,ht,vt){if(!(this instanceof C))return new C(Y,ve,Fe,Ke,ht,vt);isNaN(Y)&&(Y=1),isNaN(ve)&&(ve=0),isNaN(Fe)&&(Fe=0),isNaN(Ke)&&(Ke=1),isNaN(ht)&&(ht=0),isNaN(vt)&&(vt=0),this._matrix=[Y,ve,Fe,Ke,ht,vt]};Object.defineProperty(yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),yt.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(C)},yt.prototype.multiply=function(C){var Y=C.sx*this.sx+C.shy*this.shx,ve=C.sx*this.shy+C.shy*this.sy,Fe=C.shx*this.sx+C.sy*this.shx,Ke=C.shx*this.shy+C.sy*this.sy,ht=C.tx*this.sx+C.ty*this.shx+this.tx,vt=C.tx*this.shy+C.ty*this.sy+this.ty;return new yt(Y,ve,Fe,Ke,ht,vt)},yt.prototype.decompose=function(){var C=this.sx,Y=this.shy,ve=this.shx,Fe=this.sy,Ke=this.tx,ht=this.ty,vt=Math.sqrt(C*C+Y*Y),Zt=(C/=vt)*ve+(Y/=vt)*Fe;ve-=C*Zt,Fe-=Y*Zt;var is=Math.sqrt(ve*ve+Fe*Fe);return Zt/=is,C*(Fe/=is)<Y*(ve/=is)&&(C=-C,Y=-Y,Zt=-Zt,vt=-vt),{scale:new yt(vt,0,0,is,0,0),translate:new yt(1,0,0,1,Ke,ht),rotate:new yt(C,Y,-Y,C,0,0),skew:new yt(1,0,Zt,1,0,0)}},yt.prototype.toString=function(C){return this.join(" ")},yt.prototype.inversed=function(){var C=this.sx,Y=this.shy,ve=this.shx,Fe=this.sy,Ke=this.tx,ht=this.ty,vt=1/(C*Fe-Y*ve),Zt=Fe*vt,is=-Y*vt,ws=-ve*vt,Bs=C*vt;return new yt(Zt,is,ws,Bs,-Zt*Ke-ws*ht,-is*Ke-Bs*ht)},yt.prototype.applyToPoint=function(C){var Y=C.x*this.sx+C.y*this.shx+this.tx,ve=C.x*this.shy+C.y*this.sy+this.ty;return new Ba(Y,ve)},yt.prototype.applyToRectangle=function(C){var Y=this.applyToPoint(C),ve=this.applyToPoint(new Ba(C.x+C.w,C.y+C.h));return new To(Y.x,Y.y,ve.x-Y.x,ve.y-Y.y)},yt.prototype.clone=function(){var C=this.sx,Y=this.shy,ve=this.shx,Fe=this.sy,Ke=this.tx,ht=this.ty;return new yt(C,Y,ve,Fe,Ke,ht)},g.Matrix=yt;var Fs=g.matrixMult=function(C,Y){return Y.multiply(C)},us=new yt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=us;var Ts=function(C,Y){if(!Ot[C]){var ve=(Y instanceof fd?"Sh":"P")+(Object.keys(bt).length+1).toString(10);Y.id=ve,Ot[C]=ve,bt[ve]=Y,_t.publish("addPattern",Y)}};g.ShadingPattern=fd,g.TilingPattern=xu,g.addShadingPattern=function(C,Y){return V("addShadingPattern()"),Ts(C,Y),this},g.beginTilingPattern=function(C){V("beginTilingPattern()"),Ca(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},g.endTilingPattern=function(C,Y){V("endTilingPattern()"),Y.stream=Pe[q].join(`
`),Ts(C,Y),_t.publish("endTilingPattern",Y),Xs.pop().restore()};var tr,Vs=g.__private__.newObject=function(){var C=zs();return mr(C,!0),C},zs=g.__private__.newObjectDeferred=function(){return fe++,me[fe]=function(){return ee},fe},mr=function(C,Y){return Y=typeof Y=="boolean"&&Y,me[C]=ee,Y&&X(C+" 0 obj"),C},$n=g.__private__.newAdditionalObject=function(){var C={objId:zs(),content:""};return je.push(C),C},Na=zs(),Qn=zs(),ze=g.__private__.decodeColorString=function(C){var Y=C.split(" ");if(Y.length!==2||Y[1]!=="g"&&Y[1]!=="G")Y.length!==5||Y[4]!=="k"&&Y[4]!=="K"||(Y=[(1-Y[0])*(1-Y[3]),(1-Y[1])*(1-Y[3]),(1-Y[2])*(1-Y[3]),"r"]);else{var ve=parseFloat(Y[0]);Y=[ve,ve,ve,"r"]}for(var Fe="#",Ke=0;Ke<3;Ke++)Fe+=("0"+Math.floor(255*parseFloat(Y[Ke])).toString(16)).slice(-2);return Fe},ms=g.__private__.encodeColorString=function(C){var Y;typeof C=="string"&&(C={ch1:C});var ve=C.ch1,Fe=C.ch2,Ke=C.ch3,ht=C.ch4,vt=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ve=="string"&&ve.charAt(0)!=="#"){var Zt=new TB(ve);if(Zt.ok)ve=Zt.toHex();else if(!/^\d*\.?\d*$/.test(ve))throw new Error('Invalid color "'+ve+'" passed to jsPDF.encodeColorString.')}if(typeof ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ve)&&(ve="#"+ve[1]+ve[1]+ve[2]+ve[2]+ve[3]+ve[3]),typeof ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ve)){var is=parseInt(ve.substr(1),16);ve=is>>16&255,Fe=is>>8&255,Ke=255&is}if(Fe===void 0||ht===void 0&&ve===Fe&&Fe===Ke)Y=typeof ve=="string"?ve+" "+vt[0]:C.precision===2?L(ve/255)+" "+vt[0]:F(ve/255)+" "+vt[0];else if(ht===void 0||jr(ht)==="object"){if(ht&&!isNaN(ht.a)&&ht.a===0)return["1.","1.","1.",vt[1]].join(" ");Y=typeof ve=="string"?[ve,Fe,Ke,vt[1]].join(" "):C.precision===2?[L(ve/255),L(Fe/255),L(Ke/255),vt[1]].join(" "):[F(ve/255),F(Fe/255),F(Ke/255),vt[1]].join(" ")}else Y=typeof ve=="string"?[ve,Fe,Ke,ht,vt[2]].join(" "):C.precision===2?[L(ve),L(Fe),L(Ke),L(ht),vt[2]].join(" "):[F(ve),F(Fe),F(Ke),F(ht),vt[2]].join(" ");return Y},Cs=g.__private__.getFilters=function(){return c},sr=g.__private__.putStream=function(C){var Y=(C=C||{}).data||"",ve=C.filters||Cs(),Fe=C.alreadyAppliedFilters||[],Ke=C.addLength1||!1,ht=Y.length,vt=C.objectId,Zt=function(Zr){return Zr};if(m!==null&&vt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Zt=Xr.encryptor(vt,0));var is={};ve===!0&&(ve=["FlateEncode"]);var ws=C.additionalKeyValues||[],Bs=(is=hs.API.processDataByFilters!==void 0?hs.API.processDataByFilters(Y,ve):{data:Y,reverseChain:[]}).reverseChain+(Array.isArray(Fe)?Fe.join(" "):Fe.toString());if(is.data.length!==0&&(ws.push({key:"Length",value:is.data.length}),Ke===!0&&ws.push({key:"Length1",value:ht})),Bs.length!=0)if(Bs.split("/").length-1==1)ws.push({key:"Filter",value:Bs});else{ws.push({key:"Filter",value:"["+Bs+"]"});for(var $s=0;$s<ws.length;$s+=1)if(ws[$s].key==="DecodeParms"){for(var Br=[],Rr=0;Rr<is.reverseChain.split("/").length-1;Rr+=1)Br.push("null");Br.push(ws[$s].value),ws[$s].value="["+Br.join(" ")+"]"}}X("<<");for(var fr=0;fr<ws.length;fr++)X("/"+ws[fr].key+" "+ws[fr].value);X(">>"),is.data.length!==0&&(X("stream"),X(Zt(is.data)),X("endstream"))},Be=g.__private__.putPage=function(C){var Y=C.number,ve=C.data,Fe=C.objId,Ke=C.contentsObjId;mr(Fe,!0),X("<</Type /Page"),X("/Parent "+C.rootDictionaryObjId+" 0 R"),X("/Resources "+C.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(T(C.mediaBox.bottomLeftX))+" "+parseFloat(T(C.mediaBox.bottomLeftY))+" "+T(C.mediaBox.topRightX)+" "+T(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&X("/CropBox ["+T(C.cropBox.bottomLeftX)+" "+T(C.cropBox.bottomLeftY)+" "+T(C.cropBox.topRightX)+" "+T(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&X("/BleedBox ["+T(C.bleedBox.bottomLeftX)+" "+T(C.bleedBox.bottomLeftY)+" "+T(C.bleedBox.topRightX)+" "+T(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&X("/TrimBox ["+T(C.trimBox.bottomLeftX)+" "+T(C.trimBox.bottomLeftY)+" "+T(C.trimBox.topRightX)+" "+T(C.trimBox.topRightY)+"]"),C.artBox!==null&&X("/ArtBox ["+T(C.artBox.bottomLeftX)+" "+T(C.artBox.bottomLeftY)+" "+T(C.artBox.topRightX)+" "+T(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&X("/UserUnit "+C.userUnit),_t.publish("putPage",{objId:Fe,pageContext:Ht[Y],pageNumber:Y,page:ve}),X("/Contents "+Ke+" 0 R"),X(">>"),X("endobj");var ht=ve.join(`
`);return k===I&&(ht+=`
Q`),mr(Ke,!0),sr({data:ht,filters:Cs(),objectId:Ke}),X("endobj"),Fe},js=g.__private__.putPages=function(){var C,Y,ve=[];for(C=1;C<=Yt;C++)Ht[C].objId=zs(),Ht[C].contentsObjId=zs();for(C=1;C<=Yt;C++)ve.push(Be({number:C,data:Pe[C],objId:Ht[C].objId,contentsObjId:Ht[C].contentsObjId,mediaBox:Ht[C].mediaBox,cropBox:Ht[C].cropBox,bleedBox:Ht[C].bleedBox,trimBox:Ht[C].trimBox,artBox:Ht[C].artBox,userUnit:Ht[C].userUnit,rootDictionaryObjId:Na,resourceDictionaryObjId:Qn}));mr(Na,!0),X("<</Type /Pages");var Fe="/Kids [";for(Y=0;Y<Yt;Y++)Fe+=ve[Y]+" 0 R ";X(Fe+"]"),X("/Count "+Yt),X(">>"),X("endobj"),_t.publish("postPutPages")},rr=function(C){_t.publish("putFont",{font:C,out:X,newObject:Vs,putStream:sr}),C.isAlreadyPutted!==!0&&(C.objectNumber=Vs(),X("<<"),X("/Type /Font"),X("/BaseFont /"+pu(C.postScriptName)),X("/Subtype /Type1"),typeof C.encoding=="string"&&X("/Encoding /"+C.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},Gn=function(C){C.objectNumber=Vs();var Y=[];Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Form"}),Y.push({key:"BBox",value:"["+[T(C.x),T(C.y),T(C.x+C.width),T(C.y+C.height)].join(" ")+"]"}),Y.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var ve=C.pages[1].join(`
`);sr({data:ve,additionalKeyValues:Y,objectId:C.objectNumber}),X("endobj")},li=function(C,Y){Y||(Y=21);var ve=Vs(),Fe=(function(vt,Zt){var is,ws=[],Bs=1/(Zt-1);for(is=0;is<1;is+=Bs)ws.push(is);if(ws.push(1),vt[0].offset!=0){var $s={offset:0,color:vt[0].color};vt.unshift($s)}if(vt[vt.length-1].offset!=1){var Br={offset:1,color:vt[vt.length-1].color};vt.push(Br)}for(var Rr="",fr=0,Zr=0;Zr<ws.length;Zr++){for(is=ws[Zr];is>vt[fr+1].offset;)fr++;var cr=vt[fr].offset,mn=(is-cr)/(vt[fr+1].offset-cr),Pn=vt[fr].color,Xn=vt[fr+1].color;Rr+=de(Math.round((1-mn)*Pn[0]+mn*Xn[0]).toString(16))+de(Math.round((1-mn)*Pn[1]+mn*Xn[1]).toString(16))+de(Math.round((1-mn)*Pn[2]+mn*Xn[2]).toString(16))}return Rr.trim()})(C.colors,Y),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+Y+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sr({data:Fe,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ve}),X("endobj"),C.objectNumber=Vs(),X("<< /ShadingType "+C.type),X("/ColorSpace /DeviceRGB");var ht="/Coords ["+T(parseFloat(C.coords[0]))+" "+T(parseFloat(C.coords[1]))+" ";C.type===2?ht+=T(parseFloat(C.coords[2]))+" "+T(parseFloat(C.coords[3])):ht+=T(parseFloat(C.coords[2]))+" "+T(parseFloat(C.coords[3]))+" "+T(parseFloat(C.coords[4]))+" "+T(parseFloat(C.coords[5])),X(ht+="]"),C.matrix&&X("/Matrix ["+C.matrix.toString()+"]"),X("/Function "+ve+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},Wn=function(C,Y){var ve=zs(),Fe=Vs();Y.push({resourcesOid:ve,objectOid:Fe}),C.objectNumber=Fe;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+C.boundingBox.map(T).join(" ")+"]"}),Ke.push({key:"XStep",value:T(C.xStep)}),Ke.push({key:"YStep",value:T(C.yStep)}),Ke.push({key:"Resources",value:ve+" 0 R"}),C.matrix&&Ke.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),sr({data:C.stream,additionalKeyValues:Ke,objectId:C.objectNumber}),X("endobj")},lr=function(C){for(var Y in C.objectNumber=Vs(),X("<<"),C)switch(Y){case"opacity":X("/ca "+L(C[Y]));break;case"stroke-opacity":X("/CA "+L(C[Y]))}X(">>"),X("endobj")},wr=function(C){mr(C.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Y in X("/Font <<"),$e)$e.hasOwnProperty(Y)&&(f===!1||f===!0&&x.hasOwnProperty(Y))&&X("/"+Y+" "+$e[Y].objectNumber+" 0 R");X(">>")})(),(function(){if(Object.keys(bt).length>0){for(var Y in X("/Shading <<"),bt)bt.hasOwnProperty(Y)&&bt[Y]instanceof fd&&bt[Y].objectNumber>=0&&X("/"+Y+" "+bt[Y].objectNumber+" 0 R");_t.publish("putShadingPatternDict"),X(">>")}})(),(function(Y){if(Object.keys(bt).length>0){for(var ve in X("/Pattern <<"),bt)bt.hasOwnProperty(ve)&&bt[ve]instanceof g.TilingPattern&&bt[ve].objectNumber>=0&&bt[ve].objectNumber<Y&&X("/"+ve+" "+bt[ve].objectNumber+" 0 R");_t.publish("putTilingPatternDict"),X(">>")}})(C.objectOid),(function(){if(Object.keys(Lt).length>0){var Y;for(Y in X("/ExtGState <<"),Lt)Lt.hasOwnProperty(Y)&&Lt[Y].objectNumber>=0&&X("/"+Y+" "+Lt[Y].objectNumber+" 0 R");_t.publish("putGStateDict"),X(">>")}})(),(function(){for(var Y in X("/XObject <<"),vs)vs.hasOwnProperty(Y)&&vs[Y].objectNumber>=0&&X("/"+Y+" "+vs[Y].objectNumber+" 0 R");_t.publish("putXobjectDict"),X(">>")})(),X(">>"),X("endobj")},Hc=function(C){gt[C.fontName]=gt[C.fontName]||{},gt[C.fontName][C.fontStyle]=C.id},pl=function(C,Y,ve,Fe,Ke){var ht={id:"F"+(Object.keys($e).length+1).toString(10),postScriptName:C,fontName:Y,fontStyle:ve,encoding:Fe,isStandardFont:Ke||!1,metadata:{}};return _t.publish("addFont",{font:ht,instance:this}),$e[ht.id]=ht,Hc(ht),ht.id},Aa=g.__private__.pdfEscape=g.pdfEscape=function(C,Y){return(function(ve,Fe){var Ke,ht,vt,Zt,is,ws,Bs,$s,Br;if(vt=(Fe=Fe||{}).sourceEncoding||"Unicode",is=Fe.outputEncoding,(Fe.autoencode||is)&&$e[Me].metadata&&$e[Me].metadata[vt]&&$e[Me].metadata[vt].encoding&&(Zt=$e[Me].metadata[vt].encoding,!is&&$e[Me].encoding&&(is=$e[Me].encoding),!is&&Zt.codePages&&(is=Zt.codePages[0]),typeof is=="string"&&(is=Zt[is]),is)){for(Bs=!1,ws=[],Ke=0,ht=ve.length;Ke<ht;Ke++)($s=is[ve.charCodeAt(Ke)])?ws.push(String.fromCharCode($s)):ws.push(ve[Ke]),ws[Ke].charCodeAt(0)>>8&&(Bs=!0);ve=ws.join("")}for(Ke=ve.length;Bs===void 0&&Ke!==0;)ve.charCodeAt(Ke-1)>>8&&(Bs=!0),Ke--;if(!Bs)return ve;for(ws=Fe.noBOM?[]:[254,255],Ke=0,ht=ve.length;Ke<ht;Ke++){if((Br=($s=ve.charCodeAt(Ke))>>8)>>8)throw new Error("Character at position "+Ke+" of string '"+ve+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ws.push(Br),ws.push($s-(Br<<8))}return String.fromCharCode.apply(void 0,ws)})(C,Y).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wi=g.__private__.beginPage=function(C){Pe[++Yt]=[],Ht[Yt]={objId:0,contentsObjId:0,userUnit:Number(A),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},jo(Yt),Se(Pe[q])},Kc=function(C,Y){var ve,Fe,Ke;switch(s=Y||s,typeof C=="string"&&(ve=N(C.toLowerCase()),Array.isArray(ve)&&(Fe=ve[0],Ke=ve[1])),Array.isArray(C)&&(Fe=C[0]*Ve,Ke=C[1]*Ve),isNaN(Fe)&&(Fe=a[0],Ke=a[1]),(Fe>14400||Ke>14400)&&(_r.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Fe=Math.min(14400,Fe),Ke=Math.min(14400,Ke)),a=[Fe,Ke],s.substr(0,1)){case"l":Ke>Fe&&(a=[Ke,Fe]);break;case"p":Fe>Ke&&(a=[Ke,Fe])}Wi(a),fs(ua),X(Io),Qo!==0&&X(Qo+" J"),Nl!==0&&X(Nl+" j"),_t.publish("addPage",{pageNumber:Yt})},gl=function(C){C>0&&C<=Yt&&(Pe.splice(C,1),Ht.splice(C,1),Yt--,q>Yt&&(q=Yt),this.setPage(q))},jo=function(C){C>0&&C<=Yt&&(q=C)},da=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Pe.length-1},Vc=function(C,Y,ve){var Fe,Ke=void 0;return ve=ve||{},C=C!==void 0?C:$e[Me].fontName,Y=Y!==void 0?Y:$e[Me].fontStyle,Fe=C.toLowerCase(),gt[Fe]!==void 0&&gt[Fe][Y]!==void 0?Ke=gt[Fe][Y]:gt[C]!==void 0&&gt[C][Y]!==void 0?Ke=gt[C][Y]:ve.disableWarning===!1&&_r.warn("Unable to look up font label for font '"+C+"', '"+Y+"'. Refer to getFontList() for available fonts."),Ke||ve.noFallback||(Ke=gt.times[Y])==null&&(Ke=gt.times.normal),Ke},zr=g.__private__.putInfo=function(){var C=Vs(),Y=function(Fe){return Fe};for(var ve in m!==null&&(Y=Xr.encryptor(C,0)),X("<<"),X("/Producer ("+Aa(Y("jsPDF "+hs.version))+")"),mt)mt.hasOwnProperty(ve)&&mt[ve]&&X("/"+ve.substr(0,1).toUpperCase()+ve.substr(1)+" ("+Aa(Y(mt[ve]))+")");X("/CreationDate ("+Aa(Y(ce))+")"),X(">>"),X("endobj")},xl=g.__private__.putCatalog=function(C){var Y=(C=C||{}).rootDictionaryObjId||Na;switch(Vs(),X("<<"),X("/Type /Catalog"),X("/Pages "+Y+" 0 R"),dt||(dt="fullwidth"),dt){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ve=""+dt;ve.substr(ve.length-1)==="%"&&(dt=parseInt(dt)/100),typeof dt=="number"&&X("/OpenAction [3 0 R /XYZ null null "+L(dt)+"]")}switch(Ue||(Ue="continuous"),Ue){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}et&&X("/PageMode /"+et),_t.publish("putCatalog"),X(">>"),X("endobj")},WA=g.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(fe+1)),X("/Root "+fe+" 0 R"),X("/Info "+(fe-1)+" 0 R"),m!==null&&X("/Encrypt "+Xr.oid+" 0 R"),X("/ID [ <"+W+"> <"+W+"> ]"),X(">>")},$r=g.__private__.putHeader=function(){X("%PDF-"+y),X("%")},Bo=g.__private__.putXRef=function(){var C="0000000000";X("xref"),X("0 "+(fe+1)),X("0000000000 65535 f ");for(var Y=1;Y<=fe;Y++)typeof me[Y]=="function"?X((C+me[Y]()).slice(-10)+" 00000 n "):me[Y]!==void 0?X((C+me[Y]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},qn=g.__private__.buildDocument=function(){var C;fe=0,ee=0,pe=[],me=[],je=[],Na=zs(),Qn=zs(),Se(pe),_t.publish("buildDocument"),$r(),js(),(function(){_t.publish("putAdditionalObjects");for(var ve=0;ve<je.length;ve++){var Fe=je[ve];mr(Fe.objId,!0),X(Fe.content),X("endobj")}_t.publish("postPutAdditionalObjects")})(),C=[],(function(){for(var ve in $e)$e.hasOwnProperty(ve)&&(f===!1||f===!0&&x.hasOwnProperty(ve))&&rr($e[ve])})(),(function(){var ve;for(ve in Lt)Lt.hasOwnProperty(ve)&&lr(Lt[ve])})(),(function(){for(var ve in vs)vs.hasOwnProperty(ve)&&Gn(vs[ve])})(),(function(ve){var Fe;for(Fe in bt)bt.hasOwnProperty(Fe)&&(bt[Fe]instanceof fd?li(bt[Fe]):bt[Fe]instanceof xu&&Wn(bt[Fe],ve))})(C),_t.publish("putResources"),C.forEach(wr),wr({resourcesOid:Qn,objectOid:Number.MAX_SAFE_INTEGER}),_t.publish("postPutResources"),m!==null&&(Xr.oid=Vs(),X("<<"),X("/Filter /Standard"),X("/V "+Xr.v),X("/R "+Xr.r),X("/U <"+Xr.toHexString(Xr.U)+">"),X("/O <"+Xr.toHexString(Xr.O)+">"),X("/P "+Xr.P),X(">>"),X("endobj")),zr(),xl();var Y=ee;return Bo(),WA(),X("startxref"),X(""+Y),X("%%EOF"),Se(Pe[q]),pe.join(`
`)},qa=g.__private__.getBlob=function(C){return new Blob([rt(C)],{type:"application/pdf"})},Co=g.output=g.__private__.output=(tr=function(C,Y){switch(typeof(Y=Y||{})=="string"?Y={filename:Y}:Y.filename=Y.filename||"generated.pdf",C){case void 0:return qn();case"save":g.save(Y.filename);break;case"arraybuffer":return rt(qn());case"blob":return qa(qn());case"bloburi":case"bloburl":if(Es.URL!==void 0&&typeof Es.URL.createObjectURL=="function")return Es.URL&&Es.URL.createObjectURL(qa(qn()))||void 0;_r.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ve="",Fe=qn();try{ve=uy(Fe)}catch{ve=uy(unescape(encodeURIComponent(Fe)))}return"data:application/pdf;filename="+Y.filename+";base64,"+ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Es)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ht=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Y.pdfObjectUrl&&(Ke=Y.pdfObjectUrl,ht="");var vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+ht+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Y)+");<\/script></body></html>",Zt=Es.open();return Zt!==null&&Zt.document.write(vt),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Es)==="[object Window]"){var is='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Y.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Y.filename+'" width="500px" height="400px" /></body></html>',ws=Es.open();if(ws!==null){ws.document.write(is);var Bs=this;ws.document.documentElement.querySelector("#pdfViewer").onload=function(){ws.document.title=Y.filename,ws.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Bs.output("bloburl"))}}return ws}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Es)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Y)+'"></iframe></body></html>',Br=Es.open();if(Br!==null&&(Br.document.write($s),Br.document.title=Y.filename),Br||typeof safari>"u")return Br;break;case"datauri":case"dataurl":return Es.document.location.href=this.output("datauristring",Y);default:return null}},tr.foo=function(){try{return tr.apply(this,arguments)}catch(ve){var C=ve.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var Y="Error in function "+C.split(`
`)[0].split("<")[0]+": "+ve.message;if(!Es.console)throw new Error(Y);Es.console.error(Y,ve),Es.alert&&alert(Y)}},tr.foo.bar=tr,tr.foo),ja=function(C){return Array.isArray(Ls)===!0&&Ls.indexOf(C)>-1};switch(n){case"pt":Ve=1;break;case"mm":Ve=72/25.4;break;case"cm":Ve=72/2.54;break;case"in":Ve=72;break;case"px":Ve=ja("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ve=12;break;case"ex":Ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ve=n}var Xr=null;se(),K();var Ya=g.__private__.getPageInfo=g.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ht[C].objId,pageNumber:C,pageContext:Ht[C]}},ac=g.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Y in Ht)if(Ht[Y].objId===C)break;return Ya(Y)},vl=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Ht[q].objId,pageNumber:q,pageContext:Ht[q]}};g.addPage=function(){return Kc.apply(this,arguments),this},g.setPage=function(){return jo.apply(this,arguments),Se.call(this,Pe[q]),this},g.insertPage=function(C){return this.addPage(),this.movePage(q,C),this},g.movePage=function(C,Y){var ve,Fe;if(C>Y){ve=Pe[C],Fe=Ht[C];for(var Ke=C;Ke>Y;Ke--)Pe[Ke]=Pe[Ke-1],Ht[Ke]=Ht[Ke-1];Pe[Y]=ve,Ht[Y]=Fe,this.setPage(Y)}else if(C<Y){ve=Pe[C],Fe=Ht[C];for(var ht=C;ht<Y;ht++)Pe[ht]=Pe[ht+1],Ht[ht]=Ht[ht+1];Pe[Y]=ve,Ht[Y]=Fe,this.setPage(Y)}return this},g.deletePage=function(){return gl.apply(this,arguments),this},g.__private__.text=g.text=function(C,Y,ve,Fe,Ke){var ht,vt,Zt,is,ws,Bs,$s,Br,Rr,fr=(Fe=Fe||{}).scope||this;if(typeof C=="number"&&typeof Y=="number"&&(typeof ve=="string"||Array.isArray(ve))){var Zr=ve;ve=Y,Y=C,C=Zr}if(arguments[3]instanceof yt==0?(Zt=arguments[4],is=arguments[5],jr($s=arguments[3])==="object"&&$s!==null||(typeof Zt=="string"&&(is=Zt,Zt=null),typeof $s=="string"&&(is=$s,$s=null),typeof $s=="number"&&(Zt=$s,$s=null),Fe={flags:$s,angle:Zt,align:is})):(V("The transform parameter of text() with a Matrix value"),Rr=Ke),isNaN(Y)||isNaN(ve)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return fr;var cr,mn="",Pn=typeof Fe.lineHeightFactor=="number"?Fe.lineHeightFactor:Yn,Xn=fr.internal.scaleFactor;function Fa(Gs){return Gs=Gs.split("	").join(Array(Fe.TabLen||9).join(" ")),Aa(Gs,$s)}function ui(Gs){for(var Ar,Or=Gs.concat(),tn=[],pi=Or.length;pi--;)typeof(Ar=Or.shift())=="string"?tn.push(Ar):Array.isArray(Gs)&&(Ar.length===1||Ar[1]===void 0&&Ar[2]===void 0)?tn.push(Ar[0]):tn.push([Ar[0],Ar[1],Ar[2]]);return tn}function Cl(Gs,Ar){var Or;if(typeof Gs=="string")Or=Ar(Gs)[0];else if(Array.isArray(Gs)){for(var tn,pi,Wc=Gs.concat(),Ac=[],ao=Wc.length;ao--;)typeof(tn=Wc.shift())=="string"?Ac.push(Ar(tn)[0]):Array.isArray(tn)&&typeof tn[0]=="string"&&(pi=Ar(tn[0],tn[1],tn[2]),Ac.push([pi[0],pi[1],pi[2]]));Or=Ac}return Or}var Ji=!1,Do=!0;if(typeof C=="string")Ji=!0;else if(Array.isArray(C)){var Xi=C.concat();vt=[];for(var Zi,fn=Xi.length;fn--;)(typeof(Zi=Xi.shift())!="string"||Array.isArray(Zi)&&typeof Zi[0]!="string")&&(Do=!1);Ji=Do}if(Ji===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var _a=Te/fr.internal.scaleFactor,Za=_a*(Pn-1);switch(Fe.baseline){case"bottom":ve-=Za;break;case"top":ve+=_a-Za;break;case"hanging":ve+=_a-2*Za;break;case"middle":ve+=_a/2-Za}if((Bs=Fe.maxWidth||0)>0&&(typeof C=="string"?C=fr.splitTextToSize(C,Bs):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Gs,Ar){return Gs.concat(fr.splitTextToSize(Ar,Bs))},[]))),ht={text:C,x:Y,y:ve,options:Fe,mutex:{pdfEscape:Aa,activeFontKey:Me,fonts:$e,activeFontSize:Te}},_t.publish("preProcessText",ht),C=ht.text,Zt=(Fe=ht.options).angle,Rr instanceof yt==0&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Fe.rotationDirection===0&&(Zt=-Zt),k===I&&(Zt=-Zt);var Oo=Math.cos(Zt),Sl=Math.sin(Zt);Rr=new yt(Oo,Sl,-Sl,Oo,0,0)}else Zt&&Zt instanceof yt&&(Rr=Zt);k!==I||Rr||(Rr=us),(ws=Fe.charSpace||Jn)!==void 0&&(mn+=T(O(ws))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Br=Fe.horizontalScale)!==void 0&&(mn+=T(100*Br)+` Tz
`),Fe.lang;var en=-1,ka=Fe.renderingMode!==void 0?Fe.renderingMode:Fe.stroke,ei=fr.internal.getCurrentPageInfo().pageContext;switch(ka){case 0:case!1:case"fill":en=0;break;case 1:case!0:case"stroke":en=1;break;case 2:case"fillThenStroke":en=2;break;case 3:case"invisible":en=3;break;case 4:case"fillAndAddForClipping":en=4;break;case 5:case"strokeAndAddPathForClipping":en=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":en=6;break;case 7:case"addToPathForClipping":en=7}var cc=ei.usedRenderingMode!==void 0?ei.usedRenderingMode:-1;en!==-1?mn+=en+` Tr
`:cc!==-1&&(mn+=`0 Tr
`),en!==-1&&(ei.usedRenderingMode=en),is=Fe.align||"left";var Zn,eo=Te*Pn,Mo=fr.internal.pageSize.getWidth(),El=$e[Me];ws=Fe.charSpace||Jn,Bs=Fe.maxWidth||0,$s=Object.assign({autoencode:!0,noBOM:!0},Fe.flags);var ki=[],Ua=function(Gs){return fr.getStringUnitWidth(Gs,{font:El,charSpace:ws,fontSize:Te,doKerning:!1})*Te/Xn};if(Object.prototype.toString.call(C)==="[object Array]"){var ma;vt=ui(C),is!=="left"&&(Zn=vt.map(Ua));var fa,to=0;if(is==="right"){Y-=Zn[0],C=[],fn=vt.length;for(var hi=0;hi<fn;hi++)hi===0?(fa=ha(Y),ma=Fi(ve)):(fa=O(to-Zn[hi]),ma=-eo),C.push([vt[hi],fa,ma]),to=Zn[hi]}else if(is==="center"){Y-=Zn[0]/2,C=[],fn=vt.length;for(var Ui=0;Ui<fn;Ui++)Ui===0?(fa=ha(Y),ma=Fi(ve)):(fa=O((to-Zn[Ui])/2),ma=-eo),C.push([vt[Ui],fa,ma]),to=Zn[Ui]}else if(is==="left"){C=[],fn=vt.length;for(var Ii=0;Ii<fn;Ii++)C.push(vt[Ii])}else if(is==="justify"&&El.encoding==="Identity-H"){C=[],fn=vt.length,Bs=Bs!==0?Bs:Mo;for(var mi=0,Dr=0;Dr<fn;Dr++)if(ma=Dr===0?Fi(ve):-eo,fa=Dr===0?ha(Y):mi,Dr<fn-1){var Ho=O((Bs-Zn[Dr])/(vt[Dr].split(" ").length-1)),fi=vt[Dr].split(" ");C.push([fi[0]+" ",fa,ma]),mi=0;for(var ti=1;ti<fi.length;ti++){var Ko=(Ua(fi[ti-1]+" "+fi[ti])-Ua(fi[ti]))*Xn+Ho;ti==fi.length-1?C.push([fi[ti],Ko,0]):C.push([fi[ti]+" ",Ko,0]),mi-=Ko}}else C.push([vt[Dr],fa,ma]);C.push(["",mi,0])}else{if(is!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],fn=vt.length,Bs=Bs!==0?Bs:Mo,Dr=0;Dr<fn;Dr++){ma=Dr===0?Fi(ve):-eo,fa=Dr===0?ha(Y):0;var Vo=vt[Dr].split(" ").length-1,Fl=Vo>0?(Bs-Zn[Dr])/Vo:0;Dr<fn-1?ki.push(T(O(Fl))):ki.push(0),C.push([vt[Dr],fa,ma])}}}(typeof Fe.R2L=="boolean"?Fe.R2L:ft)===!0&&(C=Cl(C,function(Gs,Ar,Or){return[Gs.split("").reverse().join(""),Ar,Or]})),ht={text:C,x:Y,y:ve,options:Fe,mutex:{pdfEscape:Aa,activeFontKey:Me,fonts:$e,activeFontSize:Te}},_t.publish("postProcessText",ht),C=ht.text,cr=ht.mutex.isHex||!1;var _l=$e[Me].encoding;_l!=="WinAnsiEncoding"&&_l!=="StandardEncoding"||(C=Cl(C,function(Gs,Ar,Or){return[Fa(Gs),Ar,Or]})),vt=ui(C),C=[];for(var Li,so,ro,zo=Array.isArray(vt[0])?1:0,no="",$o=function(Gs,Ar,Or){var tn="";return Or instanceof yt?(Or=typeof Fe.angle=="number"?Fs(Or,new yt(1,0,0,1,Gs,Ar)):Fs(new yt(1,0,0,1,Gs,Ar),Or),k===I&&(Or=Fs(new yt(1,0,0,-1,0,0),Or)),tn=Or.join(" ")+` Tm
`):tn=T(Gs)+" "+T(Ar)+` Td
`,tn},Ir=0;Ir<vt.length;Ir++){switch(no="",zo){case 1:ro=(cr?"<":"(")+vt[Ir][0]+(cr?">":")"),Li=parseFloat(vt[Ir][1]),so=parseFloat(vt[Ir][2]);break;case 0:ro=(cr?"<":"(")+vt[Ir]+(cr?">":")"),Li=ha(Y),so=Fi(ve)}ki!==void 0&&ki[Ir]!==void 0&&(no=ki[Ir]+` Tw
`),Ir===0?C.push(no+$o(Li,so,Rr)+ro):zo===0?C.push(no+ro):zo===1&&C.push(no+$o(Li,so,Rr)+ro)}C=zo===0?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var ea=`BT
/`;return ea+=Me+" "+Te+` Tf
`,ea+=T(Te*Pn)+` TL
`,ea+=Xa+`
`,ea+=mn,ea+=C,X(ea+="ET"),x[Me]=!0,fr};var So=g.__private__.clip=g.clip=function(C){return X(C==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return So("evenodd")},g.__private__.discardPath=g.discardPath=function(){return X("n"),this};var Ja=g.__private__.isValidStyle=function(C){var Y=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(Y=!0),Y};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(C){return Ja(C)&&(u=C),this};var wl=g.__private__.getStyle=g.getStyle=function(C){var Y=u;switch(C){case"D":case"S":Y="S";break;case"F":Y="f";break;case"FD":case"DF":Y="B";break;case"f":case"f*":case"B":case"B*":Y=C}return Y},Ys=g.close=function(){return X("h"),this};g.stroke=function(){return X("S"),this},g.fill=function(C){return Eo("f",C),this},g.fillEvenOdd=function(C){return Eo("f*",C),this},g.fillStroke=function(C){return Eo("B",C),this},g.fillStrokeEvenOdd=function(C){return Eo("B*",C),this};var Eo=function(C,Y){jr(Y)==="object"?zc(Y,C):X(C)},qi=function(C){C===null||k===I&&C===void 0||(C=wl(C),X(C))};function Fo(C,Y,ve,Fe,Ke){var ht=new xu(Y||this.boundingBox,ve||this.xStep,Fe||this.yStep,this.gState,Ke||this.matrix);ht.stream=this.stream;var vt=C+"$$"+this.cloneIndex+++"$$";return Ts(vt,ht),ht}var zc=function(C,Y){var ve=Ot[C.key],Fe=bt[ve];if(Fe instanceof fd)X("q"),X(ic(Y)),Fe.gState&&g.setGState(Fe.gState),X(C.matrix.toString()+" cm"),X("/"+ve+" sh"),X("Q");else if(Fe instanceof xu){var Ke=new yt(1,0,0,-1,0,Ea());C.matrix&&(Ke=Ke.multiply(C.matrix||us),ve=Fo.call(Fe,C.key,C.boundingBox,C.xStep,C.yStep,Ke).id),X("q"),X("/Pattern cs"),X("/"+ve+" scn"),Fe.gState&&g.setGState(Fe.gState),X(Y),X("Q")}},ic=function(C){switch(C){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},_o=g.moveTo=function(C,Y){return X(T(O(C))+" "+T(P(Y))+" m"),this},ko=g.lineTo=function(C,Y){return X(T(O(C))+" "+T(P(Y))+" l"),this},Tn=g.curveTo=function(C,Y,ve,Fe,Ke,ht){return X([T(O(C)),T(P(Y)),T(O(ve)),T(P(Fe)),T(O(Ke)),T(P(ht)),"c"].join(" ")),this};g.__private__.line=g.line=function(C,Y,ve,Fe,Ke){if(isNaN(C)||isNaN(Y)||isNaN(ve)||isNaN(Fe)||!Ja(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return k===E?this.lines([[ve-C,Fe-Y]],C,Y,[1,1],Ke||"S"):this.lines([[ve-C,Fe-Y]],C,Y,[1,1]).stroke()},g.__private__.lines=g.lines=function(C,Y,ve,Fe,Ke,ht){var vt,Zt,is,ws,Bs,$s,Br,Rr,fr,Zr,cr,mn;if(typeof C=="number"&&(mn=ve,ve=Y,Y=C,C=mn),Fe=Fe||[1,1],ht=ht||!1,isNaN(Y)||isNaN(ve)||!Array.isArray(C)||!Array.isArray(Fe)||!Ja(Ke)||typeof ht!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_o(Y,ve),vt=Fe[0],Zt=Fe[1],ws=C.length,Zr=Y,cr=ve,is=0;is<ws;is++)(Bs=C[is]).length===2?(Zr=Bs[0]*vt+Zr,cr=Bs[1]*Zt+cr,ko(Zr,cr)):($s=Bs[0]*vt+Zr,Br=Bs[1]*Zt+cr,Rr=Bs[2]*vt+Zr,fr=Bs[3]*Zt+cr,Zr=Bs[4]*vt+Zr,cr=Bs[5]*Zt+cr,Tn($s,Br,Rr,fr,Zr,cr));return ht&&Ys(),qi(Ke),this},g.path=function(C){for(var Y=0;Y<C.length;Y++){var ve=C[Y],Fe=ve.c;switch(ve.op){case"m":_o(Fe[0],Fe[1]);break;case"l":ko(Fe[0],Fe[1]);break;case"c":Tn.apply(this,Fe);break;case"h":Ys()}}return this},g.__private__.rect=g.rect=function(C,Y,ve,Fe,Ke){if(isNaN(C)||isNaN(Y)||isNaN(ve)||isNaN(Fe)||!Ja(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return k===E&&(Fe=-Fe),X([T(O(C)),T(P(Y)),T(O(ve)),T(O(Fe)),"re"].join(" ")),qi(Ke),this},g.__private__.triangle=g.triangle=function(C,Y,ve,Fe,Ke,ht,vt){if(isNaN(C)||isNaN(Y)||isNaN(ve)||isNaN(Fe)||isNaN(Ke)||isNaN(ht)||!Ja(vt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ve-C,Fe-Y],[Ke-ve,ht-Fe],[C-Ke,Y-ht]],C,Y,[1,1],vt,!0),this},g.__private__.roundedRect=g.roundedRect=function(C,Y,ve,Fe,Ke,ht,vt){if(isNaN(C)||isNaN(Y)||isNaN(ve)||isNaN(Fe)||isNaN(Ke)||isNaN(ht)||!Ja(vt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*ve),ht=Math.min(ht,.5*Fe),this.lines([[ve-2*Ke,0],[Ke*Zt,0,Ke,ht-ht*Zt,Ke,ht],[0,Fe-2*ht],[0,ht*Zt,-Ke*Zt,ht,-Ke,ht],[2*Ke-ve,0],[-Ke*Zt,0,-Ke,-ht*Zt,-Ke,-ht],[0,2*ht-Fe],[0,-ht*Zt,Ke*Zt,-ht,Ke,-ht]],C+Ke,Y,[1,1],vt,!0),this},g.__private__.ellipse=g.ellipse=function(C,Y,ve,Fe,Ke){if(isNaN(C)||isNaN(Y)||isNaN(ve)||isNaN(Fe)||!Ja(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ht=4/3*(Math.SQRT2-1)*ve,vt=4/3*(Math.SQRT2-1)*Fe;return _o(C+ve,Y),Tn(C+ve,Y-vt,C+ht,Y-Fe,C,Y-Fe),Tn(C-ht,Y-Fe,C-ve,Y-vt,C-ve,Y),Tn(C-ve,Y+vt,C-ht,Y+Fe,C,Y+Fe),Tn(C+ht,Y+Fe,C+ve,Y+vt,C+ve,Y),qi(Ke),this},g.__private__.circle=g.circle=function(C,Y,ve,Fe){if(isNaN(C)||isNaN(Y)||isNaN(ve)||!Ja(Fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,Y,ve,ve,Fe)},g.setFont=function(C,Y,ve){return ve&&(Y=H(Y,ve)),Me=Vc(C,Y,{disableWarning:!1}),this};var ci=g.__private__.getFont=g.getFont=function(){return $e[Vc.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var C,Y,ve={};for(C in gt)if(gt.hasOwnProperty(C))for(Y in ve[C]=[],gt[C])gt[C].hasOwnProperty(Y)&&ve[C].push(Y);return ve},g.addFont=function(C,Y,ve,Fe,Ke){var ht=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ht.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&ht.indexOf(arguments[3])==-1&&(ve=H(ve,Fe)),pl.call(this,C,Y,ve,Ke=Ke||"Identity-H")};var Yn,ua=r.lineWidth||.200025,Uo=g.__private__.getLineWidth=g.getLineWidth=function(){return ua},fs=g.__private__.setLineWidth=g.setLineWidth=function(C){return ua=C,X(T(O(C))+" w"),this};g.__private__.setLineDash=hs.API.setLineDash=hs.API.setLineDashPattern=function(C,Y){if(C=C||[],Y=Y||0,isNaN(Y)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(ve){return T(O(ve))}).join(" "),Y=T(O(Y)),X("["+C+"] "+Y+" d"),this};var Ai=g.__private__.getLineHeight=g.getLineHeight=function(){return Te*Yn};g.__private__.getLineHeight=g.getLineHeight=function(){return Te*Yn};var qA=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(Yn=C),this},$c=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Yn};qA(r.lineHeight);var ha=g.__private__.getHorizontalCoordinate=function(C){return O(C)},Fi=g.__private__.getVerticalCoordinate=function(C){return k===I?C:Ht[q].mediaBox.topRightY-Ht[q].mediaBox.bottomLeftY-O(C)},Gc=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(C){return T(ha(C))},bl=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(C){return T(Fi(C))},Io=r.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ze(Io)},g.__private__.setStrokeColor=g.setDrawColor=function(C,Y,ve,Fe){return Io=ms({ch1:C,ch2:Y,ch3:ve,ch4:Fe,pdfColorType:"draw",precision:2}),X(Io),this};var oc=r.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ze(oc)},g.__private__.setFillColor=g.setFillColor=function(C,Y,ve,Fe){return oc=ms({ch1:C,ch2:Y,ch3:ve,ch4:Fe,pdfColorType:"fill",precision:2}),X(oc),this};var Xa=r.textColor||"0 g",Lo=g.__private__.getTextColor=g.getTextColor=function(){return ze(Xa)};g.__private__.setTextColor=g.setTextColor=function(C,Y,ve,Fe){return Xa=ms({ch1:C,ch2:Y,ch3:ve,ch4:Fe,pdfColorType:"text",precision:3}),this};var Jn=r.charSpace,yl=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Jn||0)};g.__private__.setCharSpace=g.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jn=C,this};var Qo=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(C){var Y=g.CapJoinStyles[C];if(Y===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qo=Y,X(Y+" J"),this};var Nl=0;g.__private__.setLineJoin=g.setLineJoin=function(C){var Y=g.CapJoinStyles[C];if(Y===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=Y,X(Y+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(T(O(C))+" M"),this},g.GState=tp,g.setGState=function(C){(C=typeof C=="string"?Lt[Vt[C]]:jl(null,C)).equals(Ns)||(X("/"+C.id+" gs"),Ns=C)};var jl=function(C,Y){if(!C||!Vt[C]){var ve=!1;for(var Fe in Lt)if(Lt.hasOwnProperty(Fe)&&Lt[Fe].equals(Y)){ve=!0;break}if(ve)Y=Lt[Fe];else{var Ke="GS"+(Object.keys(Lt).length+1).toString(10);Lt[Ke]=Y,Y.id=Ke}return C&&(Vt[C]=Y.id),_t.publish("addGState",Y),Y}};g.addGState=function(C,Y){return jl(C,Y),this},g.saveGraphicsState=function(){return X("q"),Ft.push({key:Me,size:Te,color:Xa}),this},g.restoreGraphicsState=function(){X("Q");var C=Ft.pop();return Me=C.key,Te=C.size,Xa=C.color,Ns=null,this},g.setCurrentTransformationMatrix=function(C){return X(C.toString()+" cm"),this},g.comment=function(C){return X("#"+C),this};var Ba=function(C,Y){var ve=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ve},set:function(ht){isNaN(ht)||(ve=parseFloat(ht))}});var Fe=Y||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Fe},set:function(ht){isNaN(ht)||(Fe=parseFloat(ht))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(ht){Ke=ht.toString()}}),this},To=function(C,Y,ve,Fe){Ba.call(this,C,Y),this.type="rect";var Ke=ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(vt){isNaN(vt)||(Ke=parseFloat(vt))}});var ht=Fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ht},set:function(vt){isNaN(vt)||(ht=parseFloat(vt))}}),this},Po=function(){this.page=Yt,this.currentPage=q,this.pages=Pe.slice(0),this.pagesContext=Ht.slice(0),this.x=wt,this.y=As,this.matrix=_e,this.width=Yi(q),this.height=Ro(q),this.outputDestination=nt,this.id="",this.objectNumber=-1};Po.prototype.restore=function(){Yt=this.page,q=this.currentPage,Ht=this.pagesContext,Pe=this.pages,wt=this.x,As=this.y,_e=this.matrix,lc(q,this.width),Sa(q,this.height),nt=this.outputDestination};var Ca=function(C,Y,ve,Fe,Ke){Xs.push(new Po),Yt=q=0,Pe=[],wt=C,As=Y,_e=Ke,Wi([ve,Fe])};for(var _i in g.beginFormObject=function(C,Y,ve,Fe,Ke){return Ca(C,Y,ve,Fe,Ke),this},g.endFormObject=function(C){return(function(Y){if(Gt[Y])Xs.pop().restore();else{var ve=new Po,Fe="Xo"+(Object.keys(vs).length+1).toString(10);ve.id=Fe,Gt[Y]=Fe,vs[Fe]=ve,_t.publish("addFormObject",ve),Xs.pop().restore()}})(C),this},g.doFormObject=function(C,Y){var ve=vs[Gt[C]];return X("q"),X(Y.toString()+" cm"),X("/"+ve.id+" Do"),X("Q"),this},g.getFormObject=function(C){var Y=vs[Gt[C]];return{x:Y.x,y:Y.y,width:Y.width,height:Y.height,matrix:Y.matrix}},g.save=function(C,Y){return C=C||"generated.pdf",(Y=Y||{}).returnPromise=Y.returnPromise||!1,Y.returnPromise===!1?(hd(qa(qn()),C),typeof hd.unload=="function"&&Es.setTimeout&&setTimeout(hd.unload,911),this):new Promise(function(ve,Fe){try{var Ke=hd(qa(qn()),C);typeof hd.unload=="function"&&Es.setTimeout&&setTimeout(hd.unload,911),ve(Ke)}catch(ht){Fe(ht.message)}})},hs.API)hs.API.hasOwnProperty(_i)&&(_i==="events"&&hs.API.events.length?(function(C,Y){var ve,Fe,Ke;for(Ke=Y.length-1;Ke!==-1;Ke--)ve=Y[Ke][0],Fe=Y[Ke][1],C.subscribe.apply(C,[ve].concat(typeof Fe=="function"?[Fe]:Fe))})(_t,hs.API.events):g[_i]=hs.API[_i]);function Yi(C){return Ht[C].mediaBox.topRightX-Ht[C].mediaBox.bottomLeftX}function lc(C,Y){Ht[C].mediaBox.topRightX=Y+Ht[C].mediaBox.bottomLeftX}function Ro(C){return Ht[C].mediaBox.topRightY-Ht[C].mediaBox.bottomLeftY}function Sa(C,Y){Ht[C].mediaBox.topRightY=Y+Ht[C].mediaBox.bottomLeftY}var di=g.getPageWidth=function(C){return Yi(C=C||q)/Ve},Bn=g.setPageWidth=function(C,Y){lc(C,Y*Ve)},Ea=g.getPageHeight=function(C){return Ro(C=C||q)/Ve},Bl=g.setPageHeight=function(C,Y){Sa(C,Y*Ve)};return g.internal={pdfEscape:Aa,getStyle:wl,getFont:ci,getFontSize:st,getCharSpace:yl,getTextColor:Lo,getLineHeight:Ai,getLineHeightFactor:$c,getLineWidth:Uo,write:Ie,getHorizontalCoordinate:ha,getVerticalCoordinate:Fi,getCoordinateString:Gc,getVerticalCoordinateString:bl,collections:{},newObject:Vs,newAdditionalObject:$n,newObjectDeferred:zs,newObjectDeferredBegin:mr,getFilters:Cs,putStream:sr,events:_t,scaleFactor:Ve,pageSize:{getWidth:function(){return di(q)},setWidth:function(C){Bn(q,C)},getHeight:function(){return Ea(q)},setHeight:function(C){Bl(q,C)}},encryptionOptions:m,encryption:Xr,getEncryptor:function(C){return m!==null?Xr.encryptor(C,0):function(Y){return Y}},output:Co,getNumberOfPages:da,get pages(){return Pe},out:X,f2:L,f3:F,getPageInfo:Ya,getPageInfoByObjId:ac,getCurrentPageInfo:vl,getPDFVersion:b,Point:Ba,Rectangle:To,Matrix:yt,hasHotfix:ja},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return di(q)},set:function(C){Bn(q,C)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ea(q)},set:function(C){Bl(q,C)},enumerable:!0,configurable:!0}),function(C){for(var Y=0,ve=Ee.length;Y<ve;Y++){var Fe=pl.call(this,C[Y][0],C[Y][1],C[Y][2],Ee[Y][3],!0);f===!1&&(x[Fe]=!0);var Ke=C[Y][0].split("-");Hc({id:Fe,fontName:Ke[0],fontStyle:Ke[1]||""})}_t.publish("addFonts",{fonts:$e,dictionary:gt})}.call(g,Ee),Me="F1",Kc(a,s),_t.publish("initialized"),g}fu.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},fu.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},fu.prototype.hexToBytes=function(r){for(var t=[],s=0;s<r.length;s+=2)t.push(String.fromCharCode(parseInt(r.substr(s,2),16)));return t.join("")},fu.prototype.processOwnerPassword=function(r,t){return N0(y0(t).substr(0,5),r)},fu.prototype.encryptor=function(r,t){var s=y0(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return N0(s,n)}},tp.prototype.equals=function(r){var t,s="id,objectNumber,equals";if(!r||jr(r)!==jr(this))return!1;var n=0;for(t in this)if(!(s.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;n++}for(t in r)r.hasOwnProperty(t)&&s.indexOf(t)<0&&n--;return n===0},hs.API={events:[]},hs.version="3.0.4";var hn=hs.API,pv=1,_d=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},du=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Us=function(r){return r.toFixed(2)},xA=function(r){return r.toFixed(5)};hn.__acroform__={};var Ei=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},py=function(r){return r*pv},Vl=function(r){var t=new OB,s=as.internal.getHeight(r)||0,n=as.internal.getWidth(r)||0;return t.BBox=[0,0,Number(Us(n)),Number(Us(s))],t},sD=hn.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<t},rD=hn.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<t)},nD=hn.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<t?1:0},bn=hn.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return nD(r,t-1)},yn=hn.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return sD(r,t-1)},Nn=hn.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return rD(r,t-1)},aD=hn.__acroform__.calculateCoordinates=function(r,t){var s=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=r[0],i=r[1],c=r[2],A=r[3],d={};return d.lowerLeft_X=s(a)||0,d.lowerLeft_Y=n(i+A)||0,d.upperRight_X=s(a+c)||0,d.upperRight_Y=n(i)||0,[Number(Us(d.lowerLeft_X)),Number(Us(d.lowerLeft_Y)),Number(Us(d.upperRight_X)),Number(Us(d.upperRight_Y))]},iD=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],s=r._V||r.DV,n=j0(r,s),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+a+" "+Us(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Vl(r);return i.scope=r.scope,i.stream=t.join(`
`),i}},j0=function(r,t){var s=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=r.multiline?a.map(function(L){return L.split(`
`)}):a.map(function(L){return[L]});var i=s,c=as.internal.getHeight(r)||0;c=c<0?-c:c;var A=as.internal.getWidth(r)||0;A=A<0?-A:A;var d=function(L,F,O){if(L+1<a.length){var P=F+" "+a[L+1][0];return df(P,r,O).width<=A-4}return!1};i++;e:for(;i>0;){t="",i--;var u,m,f=df("3",r,i).height,x=r.multiline?c-i:(c-f)/2,g=x+=2,y=0,b=0,B=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+df(t,r,i=12).width+", FieldWidth:"+A+`
`;break}for(var N="",E=0,I=0;I<a.length;I++)if(a.hasOwnProperty(I)){var k=!1;if(a[I].length!==1&&B!==a[I].length-1){if((f+2)*(E+2)+2>c)continue e;N+=a[I][B],k=!0,b=I,I--}else{N=(N+=a[I][B]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var $=parseInt(I),z=d($,N,i),H=I>=a.length-1;if(z&&!H){N+=" ",B=0;continue}if(z||H){if(H)b=$;else if(r.multiline&&(f+2)*(E+2)+2>c)continue e}else{if(!r.multiline||(f+2)*(E+2)+2>c)continue e;b=$}}for(var T="",V=y;V<=b;V++){var G=a[V];if(r.multiline){if(V===b){T+=G[B]+" ",B=(B+1)%G.length;continue}if(V===y){T+=G[G.length-1]+" ";continue}}T+=G[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,m=df(T,r,i).width,r.textAlign){case"right":u=A-m-2;break;case"center":u=(A-m)/2;break;default:u=2}t+=Us(u)+" "+Us(g)+` Td
`,t+="("+_d(T)+`) Tj
`,t+=-Us(u)+` 0 Td
`,g=-(i+2),m=0,y=k?b:b+1,E++,N=""}break}return n.text=t,n.fontSize=i,n},df=function(r,t,s){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:a}},oD={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},lD=function(r,t){var s={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===s.type&&n.object===s.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(s)},cD=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(ml.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(oD)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pv=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new MB,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&lD(i,s)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(s){(function(n,a){var i=!n;for(var c in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var A=n[c],d=[],u=A.Rect;if(A.Rect&&(A.Rect=aD(A.Rect,a)),a.internal.newObjectDeferredBegin(A.objId,!0),A.DA=as.createDefaultAppearanceStream(A),jr(A)==="object"&&typeof A.getKeyValueListForStream=="function"&&(d=A.getKeyValueListForStream()),A.Rect=u,A.hasAppearanceStream&&!A.appearanceStreamContent){var m=iD(A);d.push({key:"AP",value:"<</N "+m+">>"}),a.internal.acroformPlugin.xForms.push(m)}if(A.appearanceStreamContent){var f="";for(var x in A.appearanceStreamContent)if(A.appearanceStreamContent.hasOwnProperty(x)){var g=A.appearanceStreamContent[x];if(f+="/"+x+" ",f+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var c in g)if(g.hasOwnProperty(c)){var y=g[c];typeof y=="function"&&(y=y.call(a,A)),f+="/"+c+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=g)=="function"&&(y=y.call(a,A)),f+="/"+c+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);f+=">>"}d.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:d,objectId:A.objId}),a.internal.out("endobj")}i&&(function(b,B){for(var N in b)if(b.hasOwnProperty(N)){var E=N,I=b[N];B.internal.newObjectDeferredBegin(I.objId,!0),jr(I)==="object"&&typeof I.putStream=="function"&&I.putStream(),delete b[E]}})(a.internal.acroformPlugin.xForms,a)})(s,r)}),r.internal.acroformPlugin.isInitialized=!0}},DB=hn.__acroform__.arrayToPdfArray=function(r,t,s){var n=function(c){return c};if(Array.isArray(r)){for(var a="[",i=0;i<r.length;i++)switch(i!==0&&(a+=" "),jr(r[i])){case"boolean":case"number":case"object":a+=r[i].toString();break;case"string":r[i].substr(0,1)!=="/"?(t!==void 0&&s&&(n=s.internal.getEncryptor(t)),a+="("+_d(n(r[i].toString()))+")"):a+=r[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Nx=function(r,t,s){var n=function(a){return a};return t!==void 0&&s&&(n=s.internal.getEncryptor(t)),(r=r||"").toString(),"("+_d(n(r))+")"},ql=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ql.prototype.toString=function(){return this.objId+" 0 R"},ql.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ql.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var s in t)if(Object.getOwnPropertyDescriptor(this,t[s]).configurable===!1){var n=t[s],a=this[n];a&&(Array.isArray(a)?r.push({key:n,value:DB(a,this.objId,this.scope)}):a instanceof ql?(a.scope=this.scope,r.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:n,value:a}))}return r};var OB=function(){ql.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){r=s.trim()},get:function(){return r||null}})};Ei(OB,ql);var MB=function(){ql.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var s=function(n){return n};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+_d(s(r))+")"}},set:function(s){r=s}})};Ei(MB,ql);var ml=function r(){ql.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');t=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!bn(t,3)},set:function(N){N?this.F=yn(t,3):this.F=Nn(t,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');s=N}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(N){n=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(N){n[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(N){n[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(N){n[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(N){n[3]=N}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof sp)return;i="FieldObject"+r.FieldNum++}var N=function(E){return E};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+_d(N(i))+")"},set:function(N){i=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(N){i=N}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var A="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return A},set:function(N){A=N}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(N){d=N}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/pv:u},set:function(N){u=N}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(N){m=N}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof sp||this instanceof wd))return Nx(f,this.objId,this.scope)},set:function(N){N=N.toString(),f=N}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof ca==0?Nx(x,this.objId,this.scope):x},set:function(N){N=N.toString(),x=this instanceof ca==0?N.substr(0,1)==="("?du(N.substr(1,N.length-2)):du(N):N}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ca==1?du(x.substr(1,x.length-1)):x},set:function(N){N=N.toString(),x=this instanceof ca==1?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ca==0?Nx(g,this.objId,this.scope):g},set:function(N){N=N.toString(),g=this instanceof ca==0?N.substr(0,1)==="("?du(N.substr(1,N.length-2)):du(N):N}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ca==1?du(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof ca==1?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(N){N=!!N,b=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(N){y=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,1)},set:function(N){N?this.Ff=yn(this.Ff,1):this.Ff=Nn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,2)},set:function(N){N?this.Ff=yn(this.Ff,2):this.Ff=Nn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,3)},set:function(N){N?this.Ff=yn(this.Ff,3):this.Ff=Nn(this.Ff,3)}});var B=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(B!==null)return B},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');B=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(B){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:B=2;break;case"center":case 1:B=1;break;default:B=0}}})};Ei(ml,ql);var ju=function(){ml.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(s){r=s}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return DB(t,this.objId,this.scope)},set:function(s){var n,a;a=[],typeof(n=s)=="string"&&(a=(function(i,c,A){A||(A=1);for(var d,u=[];d=c.exec(i);)u.push(d[A]);return u})(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(s){t=s,this.sort&&t.sort()},this.addOption=function(s){s=(s=s||"").toString(),t.push(s),this.sort&&t.sort()},this.removeOption=function(s,n){for(n=n||!1,s=(s=s||"").toString();t.indexOf(s)!==-1&&(t.splice(t.indexOf(s),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,18)},set:function(s){s?this.Ff=yn(this.Ff,18):this.Ff=Nn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=yn(this.Ff,19):this.Ff=Nn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,20)},set:function(s){s?(this.Ff=yn(this.Ff,20),t.sort()):this.Ff=Nn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,22)},set:function(s){s?this.Ff=yn(this.Ff,22):this.Ff=Nn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,23)},set:function(s){s?this.Ff=yn(this.Ff,23):this.Ff=Nn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,27)},set:function(s){s?this.Ff=yn(this.Ff,27):this.Ff=Nn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ei(ju,ml);var Bu=function(){ju.call(this),this.fontName="helvetica",this.combo=!1};Ei(Bu,ju);var Cu=function(){Bu.call(this),this.combo=!0};Ei(Cu,Bu);var Cf=function(){Cu.call(this),this.edit=!0};Ei(Cf,Cu);var ca=function(){ml.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,15)},set:function(s){s?this.Ff=yn(this.Ff,15):this.Ff=Nn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,16)},set:function(s){s?this.Ff=yn(this.Ff,16):this.Ff=Nn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,17)},set:function(s){s?this.Ff=yn(this.Ff,17):this.Ff=Nn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,26)},set:function(s){s?this.Ff=yn(this.Ff,26):this.Ff=Nn(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(i){return i};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+_d(s(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(s){jr(s)==="object"&&(t=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(s){typeof s=="string"&&(t.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}})};Ei(ca,ml);var Sf=function(){ca.call(this),this.pushButton=!0};Ei(Sf,ca);var Su=function(){ca.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};Ei(Su,ca);var sp=function(){var r,t;ml.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var s,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(A){return A};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,c=[];for(i in c.push("<<"),n)c.push("/"+i+" ("+_d(a(n[i]))+")");return c.push(">>"),c.join(`
`)},set:function(a){jr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(a){s="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=as.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ei(sp,ml),Su.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var s=this.Kids[t];s.appearanceStreamContent=r.createAppearanceStream(s.optionName),s.caption=r.getCA()}},Su.prototype.createOption=function(r){var t=new sp;return t.Parent=this,t.optionName=r,this.Kids.push(t),AD.call(this.scope,t),t};var Ef=function(){ca.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=as.CheckBox.createAppearanceStream()};Ei(Ef,ca);var wd=function(){ml.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,13)},set:function(t){t?this.Ff=yn(this.Ff,13):this.Ff=Nn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,21)},set:function(t){t?this.Ff=yn(this.Ff,21):this.Ff=Nn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,23)},set:function(t){t?this.Ff=yn(this.Ff,23):this.Ff=Nn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,24)},set:function(t){t?this.Ff=yn(this.Ff,24):this.Ff=Nn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,25)},set:function(t){t?this.Ff=yn(this.Ff,25):this.Ff=Nn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,26)},set:function(t){t?this.Ff=yn(this.Ff,26):this.Ff=Nn(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ei(wd,ml);var Ff=function(){wd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!bn(this.Ff,14)},set:function(r){r?this.Ff=yn(this.Ff,14):this.Ff=Nn(this.Ff,14)}}),this.password=!0};Ei(Ff,wd);var as={CheckBox:{createAppearanceStream:function(){return{N:{On:as.CheckBox.YesNormal},D:{On:as.CheckBox.YesPushDown,Off:as.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=Vl(r);t.scope=r.scope;var s=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),i=j0(r,r.caption);return s.push("0.749023 g"),s.push("0 0 "+Us(as.internal.getWidth(r))+" "+Us(as.internal.getHeight(r))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+n+" "+Us(i.fontSize)+" Tf "+a),s.push("BT"),s.push(i.text),s.push("ET"),s.push("Q"),s.push("EMC"),t.stream=s.join(`
`),t},YesNormal:function(r){var t=Vl(r);t.scope=r.scope;var s=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),a=[],i=as.internal.getHeight(r),c=as.internal.getWidth(r),A=j0(r,r.caption);return a.push("1 g"),a.push("0 0 "+Us(c)+" "+Us(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Us(c-1)+" "+Us(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+s+" "+Us(A.fontSize)+" Tf "+n),a.push(A.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(r){var t=Vl(r);t.scope=r.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+Us(as.internal.getWidth(r))+" "+Us(as.internal.getHeight(r))+" re"),s.push("f"),t.stream=s.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:as.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=as.RadioButton.Circle.YesNormal,t.D[r]=as.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=Vl(r);t.scope=r.scope;var s=[],n=as.internal.getWidth(r)<=as.internal.getHeight(r)?as.internal.getWidth(r)/4:as.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=as.internal.Bezier_C,i=Number((n*a).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+xA(as.internal.getWidth(r)/2)+" "+xA(as.internal.getHeight(r)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),s.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),s.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),s.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t},YesPushDown:function(r){var t=Vl(r);t.scope=r.scope;var s=[],n=as.internal.getWidth(r)<=as.internal.getHeight(r)?as.internal.getWidth(r)/4:as.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*as.internal.Bezier_C).toFixed(5)),c=Number((n*as.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+xA(as.internal.getWidth(r)/2)+" "+xA(as.internal.getHeight(r)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),s.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),s.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),s.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+xA(as.internal.getWidth(r)/2)+" "+xA(as.internal.getHeight(r)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),s.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),s.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),s.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(r){var t=Vl(r);t.scope=r.scope;var s=[],n=as.internal.getWidth(r)<=as.internal.getHeight(r)?as.internal.getWidth(r)/4:as.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*as.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+xA(as.internal.getWidth(r)/2)+" "+xA(as.internal.getHeight(r)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),s.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),s.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),s.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),s.push("f"),s.push("Q"),t.stream=s.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:as.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=as.RadioButton.Cross.YesNormal,t.D[r]=as.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=Vl(r);t.scope=r.scope;var s=[],n=as.internal.calculateCross(r);return s.push("q"),s.push("1 1 "+Us(as.internal.getWidth(r)-2)+" "+Us(as.internal.getHeight(r)-2)+" re"),s.push("W"),s.push("n"),s.push(Us(n.x1.x)+" "+Us(n.x1.y)+" m"),s.push(Us(n.x2.x)+" "+Us(n.x2.y)+" l"),s.push(Us(n.x4.x)+" "+Us(n.x4.y)+" m"),s.push(Us(n.x3.x)+" "+Us(n.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},YesPushDown:function(r){var t=Vl(r);t.scope=r.scope;var s=as.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+Us(as.internal.getWidth(r))+" "+Us(as.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Us(as.internal.getWidth(r)-2)+" "+Us(as.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(Us(s.x1.x)+" "+Us(s.x1.y)+" m"),n.push(Us(s.x2.x)+" "+Us(s.x2.y)+" l"),n.push(Us(s.x4.x)+" "+Us(s.x4.y)+" m"),n.push(Us(s.x3.x)+" "+Us(s.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(r){var t=Vl(r);t.scope=r.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+Us(as.internal.getWidth(r))+" "+Us(as.internal.getHeight(r))+" re"),s.push("f"),t.stream=s.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+s}};as.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=as.internal.getWidth(r),s=as.internal.getHeight(r),n=Math.min(t,s);return{x1:{x:(t-n)/2,y:(s-n)/2+n},x2:{x:(t-n)/2+n,y:(s-n)/2},x3:{x:(t-n)/2,y:(s-n)/2},x4:{x:(t-n)/2+n,y:(s-n)/2+n}}}},as.internal.getWidth=function(r){var t=0;return jr(r)==="object"&&(t=py(r.Rect[2])),t},as.internal.getHeight=function(r){var t=0;return jr(r)==="object"&&(t=py(r.Rect[3])),t};var AD=hn.addField=function(r){if(cD(this,r),!(r instanceof ml))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};hn.AcroFormChoiceField=ju,hn.AcroFormListBox=Bu,hn.AcroFormComboBox=Cu,hn.AcroFormEditBox=Cf,hn.AcroFormButton=ca,hn.AcroFormPushButton=Sf,hn.AcroFormRadioButton=Su,hn.AcroFormCheckBox=Ef,hn.AcroFormTextField=wd,hn.AcroFormPasswordField=Ff,hn.AcroFormAppearance=as,hn.AcroForm={ChoiceField:ju,ListBox:Bu,ComboBox:Cu,EditBox:Cf,Button:ca,PushButton:Sf,RadioButton:Su,CheckBox:Ef,TextField:wd,PasswordField:Ff,Appearance:as},hs.AcroForm={ChoiceField:ju,ListBox:Bu,ComboBox:Cu,EditBox:Cf,Button:ca,PushButton:Sf,RadioButton:Su,CheckBox:Ef,TextField:wd,PasswordField:Ff,Appearance:as};hs.AcroForm;function HB(r){return r.reduce(function(t,s,n){return t[s]=n,t},{})}(function(r){var t="addImage_";r.__addimage__={};var s="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=r.__addimage__.getImageFileTypeByImageData=function(L,F){var O,P,ce,W,ae,K=s;if((F=F||s)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(z(L))for(ae in n)for(ce=n[ae],O=0;O<ce.length;O+=1){for(W=!0,P=0;P<ce[O].length;P+=1)if(ce[O][P]!==void 0&&ce[O][P]!==L[P]){W=!1;break}if(W===!0){K=ae;break}}else for(ae in n)for(ce=n[ae],O=0;O<ce.length;O+=1){for(W=!0,P=0;P<ce[O].length;P+=1)if(ce[O][P]!==void 0&&ce[O][P]!==L.charCodeAt(P)){W=!1;break}if(W===!0){K=ae;break}}return K===s&&F!==s&&(K=F),K},i=function L(F){for(var O=this.internal.write,P=this.internal.putStream,ce=(0,this.internal.getFilters)();ce.indexOf("FlateEncode")!==-1;)ce.splice(ce.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:F.width}),W.push({key:"Height",value:F.height}),F.colorSpace===N.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===N.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)&&F.transparency.length>0){for(var ae="",K=0,le=F.transparency.length;K<le;K++)ae+=F.transparency[K]+" "+F.transparency[K]+" ";W.push({key:"Mask",value:"["+ae+"]"})}F.sMask!==void 0&&W.push({key:"SMask",value:F.objectId+1+" 0 R"});var ie=F.filter!==void 0?["/"+F.filter]:void 0;if(P({data:F.data,additionalKeyValues:W,alreadyAppliedFilters:ie,objectId:F.objectId}),O("endobj"),"sMask"in F&&F.sMask!==void 0){var se,R=(se=F.sMaskBitsPerComponent)!==null&&se!==void 0?se:F.bitsPerComponent,q={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:R,data:F.sMask};"filter"in F&&(q.decodeParameters="/Predictor ".concat(F.predictor," /Colors 1 /BitsPerComponent ").concat(R," /Columns ").concat(F.width),q.filter=F.filter),L.call(this,q)}if(F.colorSpace===N.INDEXED){var te=this.internal.newObject();P({data:T(new Uint8Array(F.palette)),objectId:te}),O("endobj")}},c=function(){var L=this.internal.collections[t+"images"];for(var F in L)i.call(this,L[F])},A=function(){var L,F=this.internal.collections[t+"images"],O=this.internal.write;for(var P in F)O("/I"+(L=F[P]).index,L.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",A))},u=function(){var L=this.internal.collections[t+"images"];return d.call(this),L},m=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(L){return typeof r["process"+L.toUpperCase()]=="function"},x=function(L){return jr(L)==="object"&&L.nodeType===1},g=function(L,F){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var O=""+L.getAttribute("src");if(O.indexOf("data:image/")===0)return Bf(unescape(O).split("base64,").pop());var P=r.loadFile(O,!0);if(P!==void 0)return P}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var ce;switch(F){case"PNG":ce="image/png";break;case"WEBP":ce="image/webp";break;default:ce="image/jpeg"}return Bf(L.toDataURL(ce,1).split("base64,").pop())}},y=function(L){var F=this.internal.collections[t+"images"];if(F){for(var O in F)if(L===F[O].alias)return F[O]}},b=function(L,F,O){return L||F||(L=-96,F=-96),L<0&&(L=-1*O.width*72/L/this.internal.scaleFactor),F<0&&(F=-1*O.height*72/F/this.internal.scaleFactor),L===0&&(L=F*O.width/O.height),F===0&&(F=L*O.height/O.width),[L,F]},B=function(L,F,O,P,ce,W){var ae=b.call(this,O,P,ce),K=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,ie=u.call(this);if(O=ae[0],P=ae[1],ie[ce.index]=ce,W){W*=Math.PI/180;var se=Math.cos(W),R=Math.sin(W),q=function(de){return de.toFixed(4)},te=[q(se),q(R),q(-1*R),q(se),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,K(L),le(F+P),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([K(O),"0","0",K(P),"0","0","cm"].join(" "))):this.internal.write([K(O),"0","0",K(P),K(L),le(F+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ce.index+" Do"),this.internal.write("Q")},N=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=r.__addimage__.sHashCode=function(L){var F,O,P=0;if(typeof L=="string")for(O=L.length,F=0;F<O;F++)P=(P<<5)-P+L.charCodeAt(F),P|=0;else if(z(L))for(O=L.byteLength/2,F=0;F<O;F++)P=(P<<5)-P+L[F],P|=0;return P},k=r.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var F=!0;return L.length===0&&(F=!1),L.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(F=!1),F},$=r.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var F=L.indexOf(",");return F<0?null:L.substring(0,F).trim().endsWith("base64")?L.substring(F+1):null};r.__addimage__.isArrayBuffer=function(L){return L instanceof ArrayBuffer};var z=r.__addimage__.isArrayBufferView=function(L){return L instanceof Int8Array||L instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array},H=r.__addimage__.binaryStringToUint8Array=function(L){for(var F=L.length,O=new Uint8Array(F),P=0;P<F;P++)O[P]=L.charCodeAt(P);return O},T=r.__addimage__.arrayBufferToBinaryString=function(L){for(var F="",O=z(L)?L:new Uint8Array(L),P=0;P<O.length;P+=8192)F+=String.fromCharCode.apply(null,O.subarray(P,P+8192));return F};r.addImage=function(){var L,F,O,P,ce,W,ae,K,le;if(typeof arguments[1]=="number"?(F=s,O=arguments[1],P=arguments[2],ce=arguments[3],W=arguments[4],ae=arguments[5],K=arguments[6],le=arguments[7]):(F=arguments[1],O=arguments[2],P=arguments[3],ce=arguments[4],W=arguments[5],ae=arguments[6],K=arguments[7],le=arguments[8]),jr(L=arguments[0])==="object"&&!x(L)&&"imageData"in L){var ie=L;L=ie.imageData,F=ie.format||F||s,O=ie.x||O||0,P=ie.y||P||0,ce=ie.w||ie.width||ce,W=ie.h||ie.height||W,ae=ie.alias||ae,K=ie.compression||K,le=ie.rotation||ie.angle||le}var se=this.internal.getFilters();if(K===void 0&&se.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(O)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var R=V.call(this,L,F,ae,K);return B.call(this,O,P,ce,W,R,le),this};var V=function(L,F,O,P){var ce,W,ae;if(typeof L=="string"&&a(L)===s){L=unescape(L);var K=G(L,!1);(K!==""||(K=r.loadFile(L,!0))!==void 0)&&(L=K)}if(x(L)&&(L=g(L,F)),F=a(L,F),!f(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((ae=O)==null||ae.length===0)&&(O=(function(le){return typeof le=="string"||z(le)?I(le):z(le.data)?I(le.data):null})(L)),(ce=y.call(this,O))||(L instanceof Uint8Array||F==="RGBA"||(W=L,L=H(L)),ce=this["process"+F.toUpperCase()](L,m.call(this),O,(function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in r.image_compression?le:E.NONE})(P),W)),!ce)throw new Error("An unknown error occurred whilst processing the image.");return ce},G=r.__addimage__.convertBase64ToBinaryString=function(L,F){F=typeof F!="boolean"||F;var O,P="";if(typeof L=="string"){var ce;O=(ce=$(L))!==null&&ce!==void 0?ce:L;try{P=Bf(O)}catch(W){if(F)throw k(O)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return P};r.getImageProperties=function(L){var F,O,P="";if(x(L)&&(L=g(L)),typeof L=="string"&&a(L)===s&&((P=G(L,!1))===""&&(P=r.loadFile(L)||""),L=P),O=a(L),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(L instanceof Uint8Array||(L=H(L)),!(F=this["process"+O.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=O,F}})(hs.API),(function(r){var t=function(s){if(s!==void 0&&s!="")return!0};hs.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(s){for(var n,a,i,c=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(s.objId),u=s.pageContext.annotations,m=!1,f=0;f<u.length&&!m;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var x=0;x<u.length;x++){n=u[x];var g=this.internal.pdfEscape,y=this.internal.getEncryptor(s.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),B=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(b.objId),E=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+c(n.bounds.x)+" "+A(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+A(n.bounds.y)+"] ")+"/Contents ("+g(N(n.contents))+")",i+=" /Popup "+B.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+g(N(E))+") >>",b.content=i;var I=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+c(n.bounds.x+30)+" "+A(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+A(n.bounds.y)+"] ")+" /Parent "+I,n.open&&(i+=" /Open true"),i+=" >>",B.content=i,this.internal.write(b.objId,"0 R",B.objId,"0 R");break;case"freetext":a="/Rect ["+c(n.bounds.x)+" "+A(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+A(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var $=this.annotations._nameMap[n.options.name];n.options.pageNumber=$.page,n.options.top=$.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var z=A(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+z+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),r.createAnnotation=function(s){var n=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":n.pageContext.annotations.push(s)}},r.link=function(s,n,a,i,c){var A=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;A.pageContext.annotations.push({finalBounds:{x:d(s),y:u(n),w:d(s+a),h:u(n+i)},options:c,type:"link"})},r.textWithLink=function(s,n,a,i){var c,A,d=this.getTextWidth(s),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){A=i.maxWidth;var m=this.splitTextToSize(s,A).length;c=Math.ceil(u*m)}else A=d,c=u;return this.text(s,n,a,i),a+=.2*u,i.align==="center"&&(n-=d/2),i.align==="right"&&(n-=d),this.link(n,a-u,A,c,i),d},r.getTextWidth=function(s){var n=this.internal.getFontSize();return this.getStringUnitWidth(s)*n/this.internal.scaleFactor}})(hs.API),(function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var i=r.__arabicParser__.isInArabicSubstitutionA=function(b){return t[b.charCodeAt(0)]!==void 0},c=r.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},A=r.__arabicParser__.isArabicEndLetter=function(b){return c(b)&&i(b)&&t[b.charCodeAt(0)].length<=2},d=r.__arabicParser__.isArabicAlfLetter=function(b){return c(b)&&a.indexOf(b.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return c(b)&&i(b)&&t[b.charCodeAt(0)].length>=1};var u=r.__arabicParser__.arabicLetterHasFinalForm=function(b){return c(b)&&i(b)&&t[b.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(b){return c(b)&&i(b)&&t[b.charCodeAt(0)].length>=3};var m=r.__arabicParser__.arabicLetterHasMedialForm=function(b){return c(b)&&i(b)&&t[b.charCodeAt(0)].length==4},f=r.__arabicParser__.resolveLigatures=function(b){var B=0,N=s,E="",I=0;for(B=0;B<b.length;B+=1)N[b.charCodeAt(B)]!==void 0?(I++,typeof(N=N[b.charCodeAt(B)])=="number"&&(E+=String.fromCharCode(N),N=s,I=0),B===b.length-1&&(N=s,E+=b.charAt(B-(I-1)),B-=I-1,I=0)):(N=s,E+=b.charAt(B-I),B-=I,I=0);return E};r.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&n[b.charCodeAt(0)]!==void 0};var x=r.__arabicParser__.getCorrectForm=function(b,B,N){return c(b)?i(b)===!1?-1:!u(b)||!c(B)&&!c(N)||!c(N)&&A(B)||A(b)&&!c(B)||A(b)&&d(B)||A(b)&&A(B)?0:m(b)&&c(B)&&!A(B)&&c(N)&&u(N)?3:A(b)||!c(N)?1:2:-1},g=function(b){var B=0,N=0,E=0,I="",k="",$="",z=(b=b||"").split("\\s+"),H=[];for(B=0;B<z.length;B+=1){for(H.push(""),N=0;N<z[B].length;N+=1)I=z[B][N],k=z[B][N-1],$=z[B][N+1],c(I)?(E=x(I,k,$),H[B]+=E!==-1?String.fromCharCode(t[I.charCodeAt(0)][E]):I):H[B]+=I;H[B]=f(H[B])}return H.join(" ")},y=r.__arabicParser__.processArabic=r.processArabic=function(){var b,B=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(B)){var E=0;for(N=[],E=0;E<B.length;E+=1)Array.isArray(B[E])?N.push([g(B[E][0]),B[E][1],B[E][2]]):N.push([g(B[E])]);b=N}else b=g(B);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};r.events.push(["preProcessText",y])})(hs.API),hs.API.autoPrint=function(r){var t;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(r){var t=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(A){s=A}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(A){n=isNaN(A)||Number.isInteger(A)===!1||A<0?150:A,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(A){a=isNaN(A)||Number.isInteger(A)===!1||A<0?300:A,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(A){i=A}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(A){c=A}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(s,n){var a;if((s=s||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(hs.API),(function(r){var t={left:0,top:0,bottom:0,right:0},s=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(b){x=b}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(b){y=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(d){return n.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},r.getTextDimensions=function(d,u){n.call(this);var m=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),x=u.scaleFactor||this.internal.scaleFactor,g=0,y=0,b=0,B=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var N=u.maxWidth;N>0?typeof d=="string"?d=this.splitTextToSize(d,N):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(I,k){return I.concat(B.splitTextToSize(k,N))},[])):d=Array.isArray(d)?d:[d];for(var E=0;E<d.length;E++)g<(b=this.getStringUnitWidth(d[E],{font:f})*m)&&(g=b);return g!==0&&(y=d.length),{w:g/=x,h:Math.max((y*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/x,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=r.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===d.lineNumber?(d.x=(u.x||0)+(u.width||0),d.y=u.y||0):u.y+u.height+d.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=f.top,g&&x&&(this.printHeaderRow(d.lineNumber,!0),d.y+=x[0].height)):d.y=u.y+u.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,s===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-m,d.y+m,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+m,{align:"center",baseline:"top",maxWidth:d.width-m-m}):this.text(d.text,d.x+m,d.y+m,{align:"left",baseline:"top",maxWidth:d.width-m-m})),this.internal.__cell__.lastCell=d,this};r.table=function(d,u,m,f,x){if(n.call(this),!m)throw new Error("No data for PDF table.");var g,y,b,B,N=[],E=[],I=[],k={},$={},z=[],H=[],T=(x=x||{}).autoSize||!1,V=x.printHeaders!==!1,G=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,L=x.margins||Object.assign({width:this.getPageWidth()},t),F=typeof x.padding=="number"?x.padding:3,O=x.headerBackgroundColor||"#c8c8c8",P=x.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=V,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=P,this.setFontSize(G),f==null)E=N=Object.keys(m[0]),I=N.map(function(){return"left"});else if(Array.isArray(f)&&jr(f[0])==="object")for(N=f.map(function(ie){return ie.name}),E=f.map(function(ie){return ie.prompt||ie.name||""}),I=f.map(function(ie){return ie.align||"left"}),g=0;g<f.length;g+=1)$[f[g].name]=.7499990551181103*f[g].width;else Array.isArray(f)&&typeof f[0]=="string"&&(E=N=f,I=N.map(function(){return"left"}));if(T||Array.isArray(f)&&typeof f[0]=="string")for(g=0;g<N.length;g+=1){for(k[B=N[g]]=m.map(function(ie){return ie[B]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(E[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=k[B],this.setFont(void 0,"normal"),b=0;b<y.length;b+=1)z.push(this.getTextDimensions(y[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);$[B]=Math.max.apply(null,z)+F+F,z=[]}if(V){var ce={};for(g=0;g<N.length;g+=1)ce[N[g]]={},ce[N[g]].text=E[g],ce[N[g]].align=I[g];var W=A.call(this,ce,$);H=N.map(function(ie){return new i(d,u,$[ie],W,ce[ie].text,void 0,ce[ie].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var ae=f.reduce(function(ie,se){return ie[se.name]=se.align,ie},{});for(g=0;g<m.length;g+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:g,data:m[g]},this);var K=A.call(this,m[g],$);for(b=0;b<N.length;b+=1){var le=m[g][N[b]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:g,col:b,data:le},this),c.call(this,new i(d,u,$[N[b]],K,le,g+2,ae[N[b]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=u,this};var A=function(d,u){var m=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(d).map(function(g){var y=d[g];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[g]-m-m)},this).map(function(g){return this.getLineHeightFactor()*g.length*f/x+m+m},this).reduce(function(g,y){return Math.max(g,y)},0)};r.setTableHeaderRow=function(d){n.call(this),this.internal.__cell__.tableHeaderRow=d},r.printHeaderRow=function(d,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){m=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(m.y=this.internal.__cell__.margins.top||0,x.push(m)),m.lineNumber=d;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,m),this.setTextColor(y)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),s=!1}})(hs.API);var KB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},VB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],B0=HB(VB),zB=[100,200,300,400,500,600,700,800,900],dD=HB(zB);function jx(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),s=(function(i){return KB[i=i||"normal"]?i:"normal"})(r.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(r.weight),a=(function(i){return typeof B0[i=i||"normal"]=="number"?i:"normal"})(r.stretch);return{family:t,style:s,weight:n,stretch:a,src:r.src||[],ref:r.ref||{name:t,style:[a,s,n].join(" ")}}}function gy(r,t,s,n){var a;for(a=s;a>=0&&a<t.length;a+=n)if(r[t[a]])return r[t[a]];for(a=s;a>=0&&a<t.length;a-=n)if(r[t[a]])return r[t[a]]}var uD={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},xy={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function vy(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function wy(r){return r.trimLeft()}function hD(r,t){for(var s=0;s<r.length;){if(r.charAt(s)===t)return[r.substring(0,s),r.substring(s+1)];s+=1}return null}function mD(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var uf,by,yy,uu,hf,Ny,jy,By,Bx=["times"];function Cy(r,t,s,n,a){var i=4,c=Ey;switch(a){case hs.API.image_compression.FAST:i=1,c=Sy;break;case hs.API.image_compression.MEDIUM:i=6,c=Fy;break;case hs.API.image_compression.SLOW:i=9,c=_y}r=(function(d,u,m,f){for(var x,g=d.length/u,y=new Uint8Array(d.length+g),b=[fD,Sy,Ey,Fy,_y],B=0;B<g;B+=1){var N=B*u,E=d.subarray(N,N+u);if(f)y.set(f(E,m,x),N+B);else{for(var I=b.length,k=[],$=0;$<I;$+=1)k[$]=b[$](E,m,x);var z=gD(k.concat());y.set(k[z],N+B)}x=E}return y})(r,t,Math.ceil(s*n/8),c);var A=x0(r,{level:i});return hs.API.__addimage__.arrayBufferToBinaryString(A)}function fD(r){var t=Array.apply([],r);return t.unshift(0),t}function Sy(r,t){var s=r.length,n=[];n[0]=1;for(var a=0;a<s;a+=1){var i=r[a-t]||0;n[a+1]=r[a]-i+256&255}return n}function Ey(r,t,s){var n=r.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var c=s&&s[i]||0;a[i+1]=r[i]-c+256&255}return a}function Fy(r,t,s){var n=r.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var c=r[i-t]||0,A=s&&s[i]||0;a[i+1]=r[i]+256-(c+A>>>1)&255}return a}function _y(r,t,s){var n=r.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var c=pD(r[i-t]||0,s&&s[i]||0,s&&s[i-t]||0);a[i+1]=r[i]-c+256&255}return a}function pD(r,t,s){if(r===t&&t===s)return r;var n=Math.abs(t-s),a=Math.abs(r-s),i=Math.abs(r+t-s-s);return n<=a&&n<=i?r:a<=i?t:s}function gD(r){var t=r.map(function(s){return s.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function Cx(r,t,s){var n=t*s,a=Math.floor(n/8),i=16-(n-8*a+s),c=(1<<s)-1;return $B(r,a)>>i&c}function ky(r,t,s,n){var a=s*n,i=Math.floor(a/8),c=16-(a-8*i+n),A=(1<<n)-1,d=(t&A)<<c;(function(u,m,f){if(m+1<u.byteLength)u.setUint16(m,f,!1);else{var x=f>>8&255;u.setUint8(m,x)}})(r,i,$B(r,i)&~(A<<c)&65535|d)}function $B(r,t){return t+1<r.byteLength?r.getUint16(t,!1):r.getUint8(t)<<8}function xD(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=r[t++]|r[t++]<<8,n=r[t++]|r[t++]<<8,a=r[t++],i=a>>7,c=1<<1+(7&a);r[t++],r[t++];var A=null,d=null;i&&(A=t,d=c,t+=3*c);var u=!0,m=[],f=0,x=null,g=0,y=null;for(this.width=s,this.height=n;u&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,y=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((L=r[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var b=r[t++];f=r[t++]|r[t++]<<8,x=r[t++],1&b||(x=null),g=b>>2&7,t++;break;case 254:for(;;){if(!((L=r[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var B=r[t++]|r[t++]<<8,N=r[t++]|r[t++]<<8,E=r[t++]|r[t++]<<8,I=r[t++]|r[t++]<<8,k=r[t++],$=k>>6&1,z=1<<1+(7&k),H=A,T=d,V=!1;k>>7&&(V=!0,H=t,T=z,t+=3*z);var G=t;for(t++;;){var L;if(!((L=r[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}m.push({x:B,y:N,width:E,height:I,has_local_palette:V,palette_offset:H,palette_size:T,data_offset:G,data_length:t-G,transparent_index:x,interlaced:!!$,delay:f,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return y},this.frameInfo=function(F){if(F<0||F>=m.length)throw new Error("Frame index out of range.");return m[F]},this.decodeAndBlitFrameBGRA=function(F,O){var P=this.frameInfo(F),ce=P.width*P.height,W=new Uint8Array(ce);Uy(r,P.data_offset,W,ce);var ae=P.palette_offset,K=P.transparent_index;K===null&&(K=256);var le=P.width,ie=s-le,se=le,R=4*(P.y*s+P.x),q=4*((P.y+P.height)*s+P.x),te=R,de=4*ie;P.interlaced===!0&&(de+=4*s*7);for(var fe=8,me=0,pe=W.length;me<pe;++me){var ee=W[me];if(se===0&&(se=le,(te+=de)>=q&&(de=4*ie+4*s*(fe-1),te=R+(le+ie)*(fe<<1),fe>>=1)),ee===K)te+=4;else{var je=r[ae+3*ee],Pe=r[ae+3*ee+1],De=r[ae+3*ee+2];O[te++]=De,O[te++]=Pe,O[te++]=je,O[te++]=255}--se}},this.decodeAndBlitFrameRGBA=function(F,O){var P=this.frameInfo(F),ce=P.width*P.height,W=new Uint8Array(ce);Uy(r,P.data_offset,W,ce);var ae=P.palette_offset,K=P.transparent_index;K===null&&(K=256);var le=P.width,ie=s-le,se=le,R=4*(P.y*s+P.x),q=4*((P.y+P.height)*s+P.x),te=R,de=4*ie;P.interlaced===!0&&(de+=4*s*7);for(var fe=8,me=0,pe=W.length;me<pe;++me){var ee=W[me];if(se===0&&(se=le,(te+=de)>=q&&(de=4*ie+4*s*(fe-1),te=R+(le+ie)*(fe<<1),fe>>=1)),ee===K)te+=4;else{var je=r[ae+3*ee],Pe=r[ae+3*ee+1],De=r[ae+3*ee+2];O[te++]=je,O[te++]=Pe,O[te++]=De,O[te++]=255}--se}}}function Uy(r,t,s,n){for(var a=r[t++],i=1<<a,c=i+1,A=c+1,d=a+1,u=(1<<d)-1,m=0,f=0,x=0,g=r[t++],y=new Int32Array(4096),b=null;;){for(;m<16&&g!==0;)f|=r[t++]<<m,m+=8,g===1?g=r[t++]:--g;if(m<d)break;var B=f&u;if(f>>=d,m-=d,B!==i){if(B===c)break;for(var N=B<A?B:b,E=0,I=N;I>i;)I=y[I]>>8,++E;var k=I;if(x+E+(N!==B?1:0)>n)return void _r.log("Warning, gif stream longer than expected.");s[x++]=k;var $=x+=E;for(N!==B&&(s[x++]=k),I=N;E--;)I=y[I],s[--$]=255&I,I>>=8;b!==null&&A<4096&&(y[A++]=b<<8|k,A>=u+1&&d<12&&(++d,u=u<<1|1)),b=B}else A=c+1,u=(1<<(d=a+1))-1,b=null}return x!==n&&_r.log("Warning, gif stream shorter than expected."),s}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Sx(r){var t,s,n,a,i,c=Math.floor,A=new Array(64),d=new Array(64),u=new Array(64),m=new Array(64),f=new Array(65535),x=new Array(65535),g=new Array(64),y=new Array(64),b=[],B=0,N=7,E=new Array(64),I=new Array(64),k=new Array(64),$=new Array(256),z=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(R,q){for(var te=0,de=0,fe=new Array,me=1;me<=16;me++){for(var pe=1;pe<=R[me];pe++)fe[q[de]]=[],fe[q[de]][0]=te,fe[q[de]][1]=me,de++,te++;te*=2}return fe}function ae(R){for(var q=R[0],te=R[1]-1;te>=0;)q&1<<te&&(B|=1<<N),te--,--N<0&&(B==255?(K(255),K(0)):K(B),N=7,B=0)}function K(R){b.push(R)}function le(R){K(R>>8&255),K(255&R)}function ie(R,q,te,de,fe){for(var me,pe=fe[0],ee=fe[240],je=(function(Te,dt){var st,ft,et,it,Ue,We,Bt,mt,Me,Ve,wt=0;for(Me=0;Me<8;++Me){st=Te[wt],ft=Te[wt+1],et=Te[wt+2],it=Te[wt+3],Ue=Te[wt+4],We=Te[wt+5],Bt=Te[wt+6];var As=st+(mt=Te[wt+7]),_e=st-mt,$e=ft+Bt,gt=ft-Bt,Ft=et+We,bt=et-We,Ot=it+Ue,Lt=it-Ue,Vt=As+Ot,Ns=As-Ot,Yt=$e+Ft,Ht=$e-Ft;Te[wt]=Vt+Yt,Te[wt+4]=Vt-Yt;var _t=.707106781*(Ht+Ns);Te[wt+2]=Ns+_t,Te[wt+6]=Ns-_t;var Ls=.382683433*((Vt=Lt+bt)-(Ht=gt+_e)),vs=.5411961*Vt+Ls,Gt=1.306562965*Ht+Ls,Xs=.707106781*(Yt=bt+gt),yt=_e+Xs,Fs=_e-Xs;Te[wt+5]=Fs+vs,Te[wt+3]=Fs-vs,Te[wt+1]=yt+Gt,Te[wt+7]=yt-Gt,wt+=8}for(wt=0,Me=0;Me<8;++Me){st=Te[wt],ft=Te[wt+8],et=Te[wt+16],it=Te[wt+24],Ue=Te[wt+32],We=Te[wt+40],Bt=Te[wt+48];var us=st+(mt=Te[wt+56]),Ts=st-mt,tr=ft+Bt,Vs=ft-Bt,zs=et+We,mr=et-We,$n=it+Ue,Na=it-Ue,Qn=us+$n,ze=us-$n,ms=tr+zs,Cs=tr-zs;Te[wt]=Qn+ms,Te[wt+32]=Qn-ms;var sr=.707106781*(Cs+ze);Te[wt+16]=ze+sr,Te[wt+48]=ze-sr;var Be=.382683433*((Qn=Na+mr)-(Cs=Vs+Ts)),js=.5411961*Qn+Be,rr=1.306562965*Cs+Be,Gn=.707106781*(ms=mr+Vs),li=Ts+Gn,Wn=Ts-Gn;Te[wt+40]=Wn+js,Te[wt+24]=Wn-js,Te[wt+8]=li+rr,Te[wt+56]=li-rr,wt++}for(Me=0;Me<64;++Me)Ve=Te[Me]*dt[Me],g[Me]=Ve>0?Ve+.5|0:Ve-.5|0;return g})(R,q),Pe=0;Pe<64;++Pe)y[H[Pe]]=je[Pe];var De=y[0]-te;te=y[0],De==0?ae(de[0]):(ae(de[x[me=32767+De]]),ae(f[me]));for(var nt=63;nt>0&&y[nt]==0;)nt--;if(nt==0)return ae(pe),te;for(var Se,X=1;X<=nt;){for(var Ie=X;y[X]==0&&X<=nt;)++X;var rt=X-Ie;if(rt>=16){Se=rt>>4;for(var Ee=1;Ee<=Se;++Ee)ae(ee);rt&=15}me=32767+y[X],ae(fe[(rt<<4)+x[me]]),ae(f[me]),X++}return nt!=63&&ae(pe),te}function se(R){R=Math.min(Math.max(R,1),100),i!=R&&((function(q){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var fe=c((te[de]*q+50)/100);fe=Math.min(Math.max(fe,1),255),A[H[de]]=fe}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var ee=c((me[pe]*q+50)/100);ee=Math.min(Math.max(ee,1),255),d[H[pe]]=ee}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,De=0;De<8;De++)for(var nt=0;nt<8;nt++)u[Pe]=1/(A[H[Pe]]*je[De]*je[nt]*8),m[Pe]=1/(d[H[Pe]]*je[De]*je[nt]*8),Pe++})(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),i=R)}this.encode=function(R,q){q&&se(q),b=new Array,B=0,N=7,le(65496),le(65504),le(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),le(1),le(1),K(0),K(0),(function(){le(65499),le(132),K(0);for(var ft=0;ft<64;ft++)K(A[ft]);K(1);for(var et=0;et<64;et++)K(d[et])})(),(function(ft,et){le(65472),le(17),K(8),le(et),le(ft),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)})(R.width,R.height),(function(){le(65476),le(418),K(0);for(var ft=0;ft<16;ft++)K(T[ft+1]);for(var et=0;et<=11;et++)K(V[et]);K(16);for(var it=0;it<16;it++)K(G[it+1]);for(var Ue=0;Ue<=161;Ue++)K(L[Ue]);K(1);for(var We=0;We<16;We++)K(F[We+1]);for(var Bt=0;Bt<=11;Bt++)K(O[Bt]);K(17);for(var mt=0;mt<16;mt++)K(P[mt+1]);for(var Me=0;Me<=161;Me++)K(ce[Me])})(),le(65498),le(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var te=0,de=0,fe=0;B=0,N=7,this.encode.displayName="_encode_";for(var me,pe,ee,je,Pe,De,nt,Se,X,Ie=R.data,rt=R.width,Ee=R.height,Te=4*rt,dt=0;dt<Ee;){for(me=0;me<Te;){for(Pe=Te*dt+me,nt=-1,Se=0,X=0;X<64;X++)De=Pe+(Se=X>>3)*Te+(nt=4*(7&X)),dt+Se>=Ee&&(De-=Te*(dt+1+Se-Ee)),me+nt>=Te&&(De-=me+nt-Te+4),pe=Ie[De++],ee=Ie[De++],je=Ie[De++],E[X]=(z[pe]+z[ee+256|0]+z[je+512|0]>>16)-128,I[X]=(z[pe+768|0]+z[ee+1024|0]+z[je+1280|0]>>16)-128,k[X]=(z[pe+1280|0]+z[ee+1536|0]+z[je+1792|0]>>16)-128;te=ie(E,u,te,t,n),de=ie(I,m,de,s,a),fe=ie(k,m,fe,s,a),me+=32}dt+=8}if(N>=0){var st=[];st[1]=N+1,st[0]=(1<<N+1)-1,ae(st)}return le(65497),new Uint8Array(b)},r=r||50,(function(){for(var R=String.fromCharCode,q=0;q<256;q++)$[q]=R(q)})(),t=W(T,V),s=W(F,O),n=W(G,L),a=W(P,ce),(function(){for(var R=1,q=2,te=1;te<=15;te++){for(var de=R;de<q;de++)x[32767+de]=te,f[32767+de]=[],f[32767+de][1]=te,f[32767+de][0]=de;for(var fe=-(q-1);fe<=-R;fe++)x[32767+fe]=te,f[32767+fe]=[],f[32767+fe][1]=te,f[32767+fe][0]=q-1+fe;R<<=1,q<<=1}})(),(function(){for(var R=0;R<256;R++)z[R]=19595*R,z[R+256|0]=38470*R,z[R+512|0]=7471*R+32768,z[R+768|0]=-11059*R,z[R+1024|0]=-21709*R,z[R+1280|0]=32768*R+8421375,z[R+1536|0]=-27439*R,z[R+1792|0]=-5329*R})(),se(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function rl(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Iy(r){function t(V){if(!V)throw Error("assert :P")}function s(V,G,L){for(var F=0;4>F;F++)if(V[G+F]!=L.charCodeAt(F))return!0;return!1}function n(V,G,L,F,O){for(var P=0;P<O;P++)V[G+P]=L[F+P]}function a(V,G,L,F){for(var O=0;O<F;O++)V[G+O]=L}function i(V){return new Int32Array(V)}function c(V,G){for(var L=[],F=0;F<V;F++)L.push(new G);return L}function A(V,G){var L=[];return(function F(O,P,ce){for(var W=ce[P],ae=0;ae<W&&(O.push(ce.length>P+1?[]:new G),!(ce.length<P+1));ae++)F(O[ae],P+1,ce)})(L,0,V),L}var d=function(){var V=this;function G(p,w){for(var U=1<<w-1>>>0;p&U;)U>>>=1;return U?(p&U-1)+U:p}function L(p,w,U,D,J){t(!(D%U));do p[w+(D-=U)]=J;while(0<D)}function F(p,w,U,D,J){if(t(2328>=J),512>=J)var ne=i(512);else if((ne=i(J))==null)return 0;return(function(oe,Ae,ue,ge,Le,Ye){var xe,Re,Ge=Ae,ut=1<<ue,Ze=i(16),ot=i(16);for(t(Le!=0),t(ge!=null),t(oe!=null),t(0<ue),Re=0;Re<Le;++Re){if(15<ge[Re])return 0;++Ze[ge[Re]]}if(Ze[0]==Le)return 0;for(ot[1]=0,xe=1;15>xe;++xe){if(Ze[xe]>1<<xe)return 0;ot[xe+1]=ot[xe]+Ze[xe]}for(Re=0;Re<Le;++Re)xe=ge[Re],0<ge[Re]&&(Ye[ot[xe]++]=Re);if(ot[15]==1)return(ge=new O).g=0,ge.value=Ye[0],L(oe,Ge,1,ut,ge),ut;var ct,pt=-1,xt=ut-1,cs=0,Jt=1,_s=1,ts=1<<ue;for(Re=0,xe=1,Le=2;xe<=ue;++xe,Le<<=1){if(Jt+=_s<<=1,0>(_s-=Ze[xe]))return 0;for(;0<Ze[xe];--Ze[xe])(ge=new O).g=xe,ge.value=Ye[Re++],L(oe,Ge+cs,Le,ts,ge),cs=G(cs,xe)}for(xe=ue+1,Le=2;15>=xe;++xe,Le<<=1){if(Jt+=_s<<=1,0>(_s-=Ze[xe]))return 0;for(;0<Ze[xe];--Ze[xe]){if(ge=new O,(cs&xt)!=pt){for(Ge+=ts,ct=1<<(pt=xe)-ue;15>pt&&!(0>=(ct-=Ze[pt]));)++pt,ct<<=1;ut+=ts=1<<(ct=pt-ue),oe[Ae+(pt=cs&xt)].g=ct+ue,oe[Ae+pt].value=Ge-Ae-pt}ge.g=xe-ue,ge.value=Ye[Re++],L(oe,Ge+(cs>>ue),Le,ts,ge),cs=G(cs,xe)}}return Jt!=2*ot[15]-1?0:ut})(p,w,U,D,J,ne)}function O(){this.value=this.g=0}function P(){this.value=this.g=0}function ce(){this.G=c(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Ua,P)}function W(p,w,U,D){t(p!=null),t(w!=null),t(2147483648>D),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=w,p.pa=U,p.Jd=w,p.Yc=U+D,p.Zc=4<=D?U+D-4+1:U,pe(p)}function ae(p,w){for(var U=0;0<w--;)U|=je(p,128)<<w;return U}function K(p,w){var U=ae(p,w);return ee(p)?-U:U}function le(p,w,U,D){var J,ne=0;for(t(p!=null),t(w!=null),t(4294967288>D),p.Sb=D,p.Ra=0,p.u=0,p.h=0,4<D&&(D=4),J=0;J<D;++J)ne+=w[U+J]<<8*J;p.Ra=ne,p.bb=D,p.oa=w,p.pa=U}function ie(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<to-8>>>0,++p.bb,p.u-=8;de(p)&&(p.h=1,p.u=0)}function se(p,w){if(t(0<=w),!p.h&&w<=fa){var U=te(p)&ma[w];return p.u+=w,ie(p),U}return p.h=1,p.u=0}function R(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(p){return p.Ra>>>(p.u&to-1)>>>0}function de(p){return t(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>to}function fe(p,w){p.u=w,p.h=de(p)}function me(p){p.u>=hi&&(t(p.u>=hi),ie(p))}function pe(p){t(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(t(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function ee(p){return ae(p,1)}function je(p,w){var U=p.Ca;0>p.b&&pe(p);var D=p.b,J=U*w>>>8,ne=(p.I>>>D>J)+0;for(ne?(U-=J,p.I-=J+1<<D>>>0):U=J+1,D=U,J=0;256<=D;)J+=8,D>>=8;return D=7^J+Ui[D],p.b-=D,p.Ca=(U<<D)-1,ne}function Pe(p,w,U){p[w+0]=U>>24&255,p[w+1]=U>>16&255,p[w+2]=U>>8&255,p[w+3]=255&U}function De(p,w){return p[w+0]|p[w+1]<<8}function nt(p,w){return De(p,w)|p[w+2]<<16}function Se(p,w){return De(p,w)|De(p,w+2)<<16}function X(p,w){var U=1<<w;return t(p!=null),t(0<w),p.X=i(U),p.X==null?0:(p.Mb=32-w,p.Xa=w,1)}function Ie(p,w){t(p!=null),t(w!=null),t(p.Xa==w.Xa),n(w.X,0,p.X,0,1<<w.Xa)}function rt(){this.X=[],this.Xa=this.Mb=0}function Ee(p,w,U,D){t(U!=null),t(D!=null);var J=U[0],ne=D[0];return J==0&&(J=(p*ne+w/2)/w),ne==0&&(ne=(w*J+p/2)/p),0>=J||0>=ne?0:(U[0]=J,D[0]=ne,1)}function Te(p,w){return p+(1<<w)-1>>>w}function dt(p,w){return((4278255360&p)+(4278255360&w)>>>0&4278255360)+((16711935&p)+(16711935&w)>>>0&16711935)>>>0}function st(p,w){V[w]=function(U,D,J,ne,oe,Ae,ue){var ge;for(ge=0;ge<oe;++ge){var Le=V[p](Ae[ue+ge-1],J,ne+ge);Ae[ue+ge]=dt(U[D+ge],Le)}}}function ft(){this.ud=this.hd=this.jd=0}function et(p,w){return((4278124286&(p^w))>>>1)+(p&w)>>>0}function it(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Ue(p,w){return it(p+(p-w+.5>>1))}function We(p,w,U){return Math.abs(w-U)-Math.abs(p-U)}function Bt(p,w,U,D,J,ne,oe){for(D=ne[oe-1],U=0;U<J;++U)ne[oe+U]=D=dt(p[w+U],D)}function mt(p,w,U,D,J){var ne;for(ne=0;ne<U;++ne){var oe=p[w+ne],Ae=oe>>8&255,ue=16711935&(ue=(ue=16711935&oe)+((Ae<<16)+Ae));D[J+ne]=(4278255360&oe)+ue>>>0}}function Me(p,w){w.jd=255&p,w.hd=p>>8&255,w.ud=p>>16&255}function Ve(p,w,U,D,J,ne){var oe;for(oe=0;oe<D;++oe){var Ae=w[U+oe],ue=Ae>>>8,ge=Ae,Le=255&(Le=(Le=Ae>>>16)+((p.jd<<24>>24)*(ue<<24>>24)>>>5));ge=255&(ge=(ge+=(p.hd<<24>>24)*(ue<<24>>24)>>>5)+((p.ud<<24>>24)*(Le<<24>>24)>>>5)),J[ne+oe]=(4278255360&Ae)+(Le<<16)+ge}}function wt(p,w,U,D,J){V[w]=function(ne,oe,Ae,ue,ge,Le,Ye,xe,Re){for(ue=Ye;ue<xe;++ue)for(Ye=0;Ye<Re;++Ye)ge[Le++]=J(Ae[D(ne[oe++])])},V[p]=function(ne,oe,Ae,ue,ge,Le,Ye){var xe=8>>ne.b,Re=ne.Ea,Ge=ne.K[0],ut=ne.w;if(8>xe)for(ne=(1<<ne.b)-1,ut=(1<<xe)-1;oe<Ae;++oe){var Ze,ot=0;for(Ze=0;Ze<Re;++Ze)Ze&ne||(ot=D(ue[ge++])),Le[Ye++]=J(Ge[ot&ut]),ot>>=xe}else V["VP8LMapColor"+U](ue,ge,Ge,ut,Le,Ye,oe,Ae,Re)}}function As(p,w,U,D,J){for(U=w+U;w<U;){var ne=p[w++];D[J++]=ne>>16&255,D[J++]=ne>>8&255,D[J++]=255&ne}}function _e(p,w,U,D,J){for(U=w+U;w<U;){var ne=p[w++];D[J++]=ne>>16&255,D[J++]=ne>>8&255,D[J++]=255&ne,D[J++]=ne>>24&255}}function $e(p,w,U,D,J){for(U=w+U;w<U;){var ne=(oe=p[w++])>>16&240|oe>>12&15,oe=240&oe|oe>>28&15;D[J++]=ne,D[J++]=oe}}function gt(p,w,U,D,J){for(U=w+U;w<U;){var ne=(oe=p[w++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;D[J++]=ne,D[J++]=oe}}function Ft(p,w,U,D,J){for(U=w+U;w<U;){var ne=p[w++];D[J++]=255&ne,D[J++]=ne>>8&255,D[J++]=ne>>16&255}}function bt(p,w,U,D,J,ne){if(ne==0)for(U=w+U;w<U;)Pe(D,((ne=p[w++])[0]>>24|ne[1]>>8&65280|ne[2]<<8&16711680|ne[3]<<24)>>>0),J+=32;else n(D,J,p,w,U)}function Ot(p,w){V[w][0]=V[p+"0"],V[w][1]=V[p+"1"],V[w][2]=V[p+"2"],V[w][3]=V[p+"3"],V[w][4]=V[p+"4"],V[w][5]=V[p+"5"],V[w][6]=V[p+"6"],V[w][7]=V[p+"7"],V[w][8]=V[p+"8"],V[w][9]=V[p+"9"],V[w][10]=V[p+"10"],V[w][11]=V[p+"11"],V[w][12]=V[p+"12"],V[w][13]=V[p+"13"],V[w][14]=V[p+"0"],V[w][15]=V[p+"0"]}function Lt(p){return p==hc||p==Il||p==Zc||p==eA}function Vt(){this.eb=[],this.size=this.A=this.fb=0}function Ns(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Yt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vt,this.f.kb=new Ns,this.sd=null}function Ht(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function _t(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ls(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function vs(p,w){var U=p.T,D=w.ba.f.RGBA,J=D.eb,ne=D.fb+p.ka*D.A,oe=La[w.ba.S],Ae=p.y,ue=p.O,ge=p.f,Le=p.N,Ye=p.ea,xe=p.W,Re=w.cc,Ge=w.dc,ut=w.Mc,Ze=w.Nc,ot=p.ka,ct=p.ka+p.T,pt=p.U,xt=pt+1>>1;for(ot==0?oe(Ae,ue,null,null,ge,Le,Ye,xe,ge,Le,Ye,xe,J,ne,null,null,pt):(oe(w.ec,w.fc,Ae,ue,Re,Ge,ut,Ze,ge,Le,Ye,xe,J,ne-D.A,J,ne,pt),++U);ot+2<ct;ot+=2)Re=ge,Ge=Le,ut=Ye,Ze=xe,Le+=p.Rc,xe+=p.Rc,ne+=2*D.A,oe(Ae,(ue+=2*p.fa)-p.fa,Ae,ue,Re,Ge,ut,Ze,ge,Le,Ye,xe,J,ne-D.A,J,ne,pt);return ue+=p.fa,p.j+ct<p.o?(n(w.ec,w.fc,Ae,ue,pt),n(w.cc,w.dc,ge,Le,xt),n(w.Mc,w.Nc,Ye,xe,xt),U--):1&ct||oe(Ae,ue,null,null,ge,Le,Ye,xe,ge,Le,Ye,xe,J,ne+D.A,null,null,pt),U}function Gt(p,w,U){var D=p.F,J=[p.J];if(D!=null){var ne=p.U,oe=w.ba.S,Ae=oe==Xc||oe==Zc;w=w.ba.f.RGBA;var ue=[0],ge=p.ka;ue[0]=p.T,p.Kb&&(ge==0?--ue[0]:(--ge,J[0]-=p.width),p.j+p.ka+p.T==p.o&&(ue[0]=p.o-p.j-ge));var Le=w.eb;ge=w.fb+ge*w.A,p=Yc(D,J[0],p.width,ne,ue,Le,ge+(Ae?0:3),w.A),t(U==ue),p&&Lt(oe)&&Ul(Le,ge,Ae,ne,ue,w.A)}return 0}function Xs(p){var w=p.ma,U=w.ba.S,D=11>U,J=U==Go||U==Jc||U==Xc||U==pr||U==12||Lt(U);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Mo(w.Oa,p,J?11:12))return 0;if(J&&Lt(U)&&ui(),p.da)alert("todo:use_scaling");else{if(D){if(w.Ib=Ls,p.Kb){if(U=p.U+1>>1,w.memory=i(p.U+2*U),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+p.U,w.Mc=w.cc,w.Nc=w.dc+U,w.Ib=vs,ui()}}else alert("todo:EmitYUV");J&&(w.Jb=Gt,D&&Xn())}if(D&&!Rn){for(p=0;256>p;++p)Qa[p]=89858*(p-128)+Ti>>Wo,Ta[p]=-22014*(p-128)+Ti,nA[p]=-45773*(p-128),fc[p]=113618*(p-128)+Ti>>Wo;for(p=dr;p<gr;++p)w=76283*(p-16)+Ti>>Wo,Dd[p-dr]=zr(w,255),Yh[p-dr]=zr(w+8>>4,15);Rn=1}return 1}function yt(p){var w=p.ma,U=p.U,D=p.T;return t(!(1&p.ka)),0>=U||0>=D?0:(U=w.Ib(p,w),w.Jb!=null&&w.Jb(p,w,U),w.Dc+=U,1)}function Fs(p){p.ma.memory=null}function us(p,w,U,D){return se(p,8)!=47?0:(w[0]=se(p,14)+1,U[0]=se(p,14)+1,D[0]=se(p,1),se(p,3)!=0?0:!p.h)}function Ts(p,w){if(4>p)return p+1;var U=p-2>>1;return(2+(1&p)<<U)+se(w,U)+1}function tr(p,w){return 120<w?w-120:1<=(U=((U=_[w-1])>>4)*p+(8-(15&U)))?U:1;var U}function Vs(p,w,U){var D=te(U),J=p[w+=255&D].g-8;return 0<J&&(fe(U,U.u+8),D=te(U),w+=p[w].value,w+=D&(1<<J)-1),fe(U,U.u+p[w].g),p[w].value}function zs(p,w,U){return U.g+=p.g,U.value+=p.value<<w>>>0,t(8>=U.g),p.g}function mr(p,w,U){var D=p.xc;return t((w=D==0?0:p.vc[p.md*(U>>D)+(w>>D)])<p.Wb),p.Ya[w]}function $n(p,w,U,D){var J=p.ab,ne=p.c*w,oe=p.C;w=oe+w;var Ae=U,ue=D;for(D=p.Ta,U=p.Ua;0<J--;){var ge=p.gc[J],Le=oe,Ye=w,xe=Ae,Re=ue,Ge=(ue=D,Ae=U,ge.Ea);switch(t(Le<Ye),t(Ye<=ge.nc),ge.hc){case 2:Dr(xe,Re,(Ye-Le)*Ge,ue,Ae);break;case 0:var ut=Le,Ze=Ye,ot=ue,ct=Ae,pt=(ts=ge).Ea;ut==0&&(Ii(xe,Re,null,null,1,ot,ct),Bt(xe,Re+1,0,0,pt-1,ot,ct+1),Re+=pt,ct+=pt,++ut);for(var xt=1<<ts.b,cs=xt-1,Jt=Te(pt,ts.b),_s=ts.K,ts=ts.w+(ut>>ts.b)*Jt;ut<Ze;){var Os=_s,Gr=ts,ks=1;for(mi(xe,Re,ot,ct-pt,1,ot,ct);ks<pt;){var Xt=(ks&~cs)+xt;Xt>pt&&(Xt=pt),(0,Vo[Os[Gr++]>>8&15])(xe,Re+ +ks,ot,ct+ks-pt,Xt-ks,ot,ct+ks),ks=Xt}Re+=pt,ct+=pt,++ut&cs||(ts+=Jt)}Ye!=ge.nc&&n(ue,Ae-Ge,ue,Ae+(Ye-Le-1)*Ge,Ge);break;case 1:for(Ge=xe,Ze=Re,pt=(xe=ge.Ea)-(ct=xe&~(ot=(Re=1<<ge.b)-1)),ut=Te(xe,ge.b),xt=ge.K,ge=ge.w+(Le>>ge.b)*ut;Le<Ye;){for(cs=xt,Jt=ge,_s=new ft,ts=Ze+ct,Os=Ze+xe;Ze<ts;)Me(cs[Jt++],_s),Fl(_s,Ge,Ze,Re,ue,Ae),Ze+=Re,Ae+=Re;Ze<Os&&(Me(cs[Jt++],_s),Fl(_s,Ge,Ze,pt,ue,Ae),Ze+=pt,Ae+=pt),++Le&ot||(ge+=ut)}break;case 3:if(xe==ue&&Re==Ae&&0<ge.b){for(Ze=ue,xe=Ge=Ae+(Ye-Le)*Ge-(ct=(Ye-Le)*Te(ge.Ea,ge.b)),Re=ue,ot=Ae,ut=[],ct=(pt=ct)-1;0<=ct;--ct)ut[ct]=Re[ot+ct];for(ct=pt-1;0<=ct;--ct)Ze[xe+ct]=ut[ct];Ho(ge,Le,Ye,ue,Ge,ue,Ae)}else Ho(ge,Le,Ye,xe,Re,ue,Ae)}Ae=D,ue=U}ue!=U&&n(D,U,Ae,ue,ne)}function Na(p,w){var U=p.V,D=p.Ba+p.c*p.C,J=w-p.C;if(t(w<=p.l.o),t(16>=J),0<J){var ne=p.l,oe=p.Ta,Ae=p.Ua,ue=ne.width;if($n(p,J,U,D),J=Ae=[Ae],t((U=p.C)<(D=w)),t(ne.v<ne.va),D>ne.o&&(D=ne.o),U<ne.j){var ge=ne.j-U;U=ne.j,J[0]+=ge*ue}if(U>=D?U=0:(J[0]+=4*ne.v,ne.ka=U-ne.j,ne.U=ne.va-ne.v,ne.T=D-U,U=1),U){if(Ae=Ae[0],11>(U=p.ca).S){var Le=U.f.RGBA,Ye=(D=U.S,J=ne.U,ne=ne.T,ge=Le.eb,Le.A),xe=ne;for(Le=Le.fb+p.Ma*Le.A;0<xe--;){var Re=oe,Ge=Ae,ut=J,Ze=ge,ot=Le;switch(D){case XA:_l(Re,Ge,ut,Ze,ot);break;case Go:Li(Re,Ge,ut,Ze,ot);break;case hc:Li(Re,Ge,ut,Ze,ot),Ul(Ze,ot,0,ut,1,0);break;case Ku:zo(Re,Ge,ut,Ze,ot);break;case Jc:bt(Re,Ge,ut,Ze,ot,1);break;case Il:bt(Re,Ge,ut,Ze,ot,1),Ul(Ze,ot,0,ut,1,0);break;case Xc:bt(Re,Ge,ut,Ze,ot,0);break;case Zc:bt(Re,Ge,ut,Ze,ot,0),Ul(Ze,ot,1,ut,1,0);break;case pr:so(Re,Ge,ut,Ze,ot);break;case eA:so(Re,Ge,ut,Ze,ot),Ud(Ze,ot,ut,1,0);break;case ZA:ro(Re,Ge,ut,Ze,ot);break;default:t(0)}Ae+=ue,Le+=Ye}p.Ma+=ne}else alert("todo:EmitRescaledRowsYUVA");t(p.Ma<=U.height)}}p.C=w,t(p.C<=p.i)}function Qn(p){var w;if(0<p.ua)return 0;for(w=0;w<p.Wb;++w){var U=p.Ya[w].G,D=p.Ya[w].H;if(0<U[1][D[1]+0].g||0<U[2][D[2]+0].g||0<U[3][D[3]+0].g)return 0}return 1}function ze(p,w,U,D,J,ne){if(p.Z!=0){var oe=p.qd,Ae=p.rd;for(t(sa[p.Z]!=null);w<U;++w)sa[p.Z](oe,Ae,D,J,D,J,ne),oe=D,Ae=J,J+=ne;p.qd=oe,p.rd=Ae}}function ms(p,w){var U=p.l.ma,D=U.Z==0||U.Z==1?p.l.j:p.C;if(D=p.C<D?D:p.C,t(w<=p.l.o),w>D){var J=p.l.width,ne=U.ca,oe=U.tb+J*D,Ae=p.V,ue=p.Ba+p.c*D,ge=p.gc;t(p.ab==1),t(ge[0].hc==3),ti(ge[0],D,w,Ae,ue,ne,oe),ze(U,D,w,ne,oe,J)}p.C=p.Ma=w}function Cs(p,w,U,D,J,ne,oe){var Ae=p.$/D,ue=p.$%D,ge=p.m,Le=p.s,Ye=U+p.$,xe=Ye;J=U+D*J;var Re=U+D*ne,Ge=280+Le.ua,ut=p.Pb?Ae:16777216,Ze=0<Le.ua?Le.Wa:null,ot=Le.wc,ct=Ye<Re?mr(Le,ue,Ae):null;t(p.C<ne),t(Re<=J);var pt=!1;e:for(;;){for(;pt||Ye<Re;){var xt=0;if(Ae>=ut){var cs=Ye-U;t((ut=p).Pb),ut.wd=ut.m,ut.xd=cs,0<ut.s.ua&&Ie(ut.s.Wa,ut.s.vb),ut=Ae+Z}if(ue&ot||(ct=mr(Le,ue,Ae)),t(ct!=null),ct.Qb&&(w[Ye]=ct.qb,pt=!0),!pt)if(me(ge),ct.jc){xt=ge,cs=w;var Jt=Ye,_s=ct.pd[te(xt)&Ua-1];t(ct.jc),256>_s.g?(fe(xt,xt.u+_s.g),cs[Jt]=_s.value,xt=0):(fe(xt,xt.u+_s.g-256),t(256<=_s.value),xt=_s.value),xt==0&&(pt=!0)}else xt=Vs(ct.G[0],ct.H[0],ge);if(ge.h)break;if(pt||256>xt){if(!pt)if(ct.nd)w[Ye]=(ct.qb|xt<<8)>>>0;else{if(me(ge),pt=Vs(ct.G[1],ct.H[1],ge),me(ge),cs=Vs(ct.G[2],ct.H[2],ge),Jt=Vs(ct.G[3],ct.H[3],ge),ge.h)break;w[Ye]=(Jt<<24|pt<<16|xt<<8|cs)>>>0}if(pt=!1,++Ye,++ue>=D&&(ue=0,++Ae,oe!=null&&Ae<=ne&&!(Ae%16)&&oe(p,Ae),Ze!=null))for(;xe<Ye;)xt=w[xe++],Ze.X[(506832829*xt&4294967295)>>>Ze.Mb]=xt}else if(280>xt){if(xt=Ts(xt-256,ge),cs=Vs(ct.G[4],ct.H[4],ge),me(ge),cs=tr(D,cs=Ts(cs,ge)),ge.h)break;if(Ye-U<cs||J-Ye<xt)break e;for(Jt=0;Jt<xt;++Jt)w[Ye+Jt]=w[Ye+Jt-cs];for(Ye+=xt,ue+=xt;ue>=D;)ue-=D,++Ae,oe!=null&&Ae<=ne&&!(Ae%16)&&oe(p,Ae);if(t(Ye<=J),ue&ot&&(ct=mr(Le,ue,Ae)),Ze!=null)for(;xe<Ye;)xt=w[xe++],Ze.X[(506832829*xt&4294967295)>>>Ze.Mb]=xt}else{if(!(xt<Ge))break e;for(pt=xt-280,t(Ze!=null);xe<Ye;)xt=w[xe++],Ze.X[(506832829*xt&4294967295)>>>Ze.Mb]=xt;xt=Ye,t(!(pt>>>(cs=Ze).Xa)),w[xt]=cs.X[pt],pt=!0}pt||t(ge.h==de(ge))}if(p.Pb&&ge.h&&Ye<J)t(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Ie(p.s.vb,p.s.Wa);else{if(ge.h)break e;oe?.(p,Ae>ne?ne:Ae),p.a=0,p.$=Ye-U}return 1}return p.a=3,0}function sr(p){t(p!=null),p.vc=null,p.yc=null,p.Ya=null;var w=p.Wa;w!=null&&(w.X=null),p.vb=null,t(p!=null)}function Be(){var p=new ws;return p==null?null:(p.a=0,p.xb=sA,Ot("Predictor","VP8LPredictors"),Ot("Predictor","VP8LPredictors_C"),Ot("PredictorAdd","VP8LPredictorsAdd"),Ot("PredictorAdd","VP8LPredictorsAdd_C"),Dr=mt,Fl=Ve,_l=As,Li=_e,so=$e,ro=gt,zo=Ft,V.VP8LMapColor32b=fi,V.VP8LMapColor8b=Ko,p)}function js(p,w,U,D,J){var ne=1,oe=[p],Ae=[w],ue=D.m,ge=D.s,Le=null,Ye=0;e:for(;;){if(U)for(;ne&&se(ue,1);){var xe=oe,Re=Ae,Ge=D,ut=1,Ze=Ge.m,ot=Ge.gc[Ge.ab],ct=se(Ze,2);if(Ge.Oc&1<<ct)ne=0;else{switch(Ge.Oc|=1<<ct,ot.hc=ct,ot.Ea=xe[0],ot.nc=Re[0],ot.K=[null],++Ge.ab,t(4>=Ge.ab),ct){case 0:case 1:ot.b=se(Ze,3)+2,ut=js(Te(ot.Ea,ot.b),Te(ot.nc,ot.b),0,Ge,ot.K),ot.K=ot.K[0];break;case 3:var pt,xt=se(Ze,8)+1,cs=16<xt?0:4<xt?1:2<xt?2:3;if(xe[0]=Te(ot.Ea,cs),ot.b=cs,pt=ut=js(xt,1,0,Ge,ot.K)){var Jt,_s=xt,ts=ot,Os=1<<(8>>ts.b),Gr=i(Os);if(Gr==null)pt=0;else{var ks=ts.K[0],Xt=ts.w;for(Gr[0]=ts.K[0][0],Jt=1;Jt<1*_s;++Jt)Gr[Jt]=dt(ks[Xt+Jt],Gr[Jt-1]);for(;Jt<4*Os;++Jt)Gr[Jt]=0;ts.K[0]=null,ts.K[0]=Gr,pt=1}}ut=pt;break;case 2:break;default:t(0)}ne=ut}}if(oe=oe[0],Ae=Ae[0],ne&&se(ue,1)&&!(ne=1<=(Ye=se(ue,4))&&11>=Ye)){D.a=3;break e}var Dt;if(Dt=ne)t:{var rn,bs,Rs,Cr=D,Cn=oe,cn=Ae,Hr=Ye,pn=U,Sn=Cr.m,Lr=Cr.s,Ws=[null],nr=1,Qr=0,ar=M[Hr];s:for(;;){if(pn&&se(Sn,1)){var Wr=se(Sn,3)+2,qr=Te(Cn,Wr),br=Te(cn,Wr),ra=qr*br;if(!js(qr,br,0,Cr,Ws))break s;for(Ws=Ws[0],Lr.xc=Wr,rn=0;rn<ra;++rn){var xr=Ws[rn]>>8&65535;Ws[rn]=xr,xr>=nr&&(nr=xr+1)}}if(Sn.h)break s;for(bs=0;5>bs;++bs){var yr=Ll[bs];!bs&&0<Hr&&(yr+=1<<Hr),Qr<yr&&(Qr=yr)}var An=c(nr*ar,O),Dn=nr,Pa=c(Dn,ce);if(Pa==null)var nn=null;else t(65536>=Dn),nn=Pa;var an=i(Qr);if(nn==null||an==null||An==null){Cr.a=1;break s}var na=An;for(rn=Rs=0;rn<nr;++rn){var Nr=nn[rn],aa=Nr.G,xi=Nr.H,Pi=0,En=1,on=0;for(bs=0;5>bs;++bs){yr=Ll[bs],aa[bs]=na,xi[bs]=Rs,!bs&&0<Hr&&(yr+=1<<Hr);n:{var Rl,Yo=yr,aA=Cr,oo=an,Xh=na,Yu=Rs,Fr=0,Ri=aA.m,Ju=se(Ri,1);if(a(oo,0,0,Yo),Ju){var Xu=se(Ri,1)+1,Od=se(Ri,1),Md=se(Ri,Od==0?1:8);oo[Md]=1,Xu==2&&(oo[Md=se(Ri,8)]=1);var lo=1}else{var Tr=i(19),dn=se(Ri,4)+4;if(19<dn){aA.a=3;var ln=0;break n}for(Rl=0;Rl<dn;++Rl)Tr[zu[Rl]]=se(Ri,3);var iA=void 0,Jo=void 0,oA=aA,Op=Tr,gn=Yo,Hd=oo,rd=0,co=oA.m,Di=8,ri=c(128,O);r:for(;F(ri,0,7,Op,19);){if(se(co,1)){var nd=2+2*se(co,3);if((iA=2+se(co,nd))>gn)break r}else iA=gn;for(Jo=0;Jo<gn&&iA--;){me(co);var Kd=ri[0+(127&te(co))];fe(co,co.u+Kd.g);var Dl=Kd.value;if(16>Dl)Hd[Jo++]=Dl,Dl!=0&&(Di=Dl);else{var Zh=Dl==16,Zu=Dl-16,em=ed[Zu],eh=se(co,tA[Zu])+em;if(Jo+eh>gn)break r;for(var tm=Zh?Di:0;0<eh--;)Hd[Jo++]=tm}}rd=1;break r}rd||(oA.a=3),lo=rd}(lo=lo&&!Ri.h)&&(Fr=F(Xh,Yu,8,oo,Yo)),lo&&Fr!=0?ln=Fr:(aA.a=3,ln=0)}if(ln==0)break s;if(En&&Vu[bs]==1&&(En=na[Rs].g==0),Pi+=na[Rs].g,Rs+=ln,3>=bs){var lA,Vd=an[0];for(lA=1;lA<yr;++lA)an[lA]>Vd&&(Vd=an[lA]);on+=Vd}}if(Nr.nd=En,Nr.Qb=0,En&&(Nr.qb=(aa[3][xi[3]+0].value<<24|aa[1][xi[1]+0].value<<16|aa[2][xi[2]+0].value)>>>0,Pi==0&&256>aa[0][xi[0]+0].value&&(Nr.Qb=1,Nr.qb+=aa[0][xi[0]+0].value<<8)),Nr.jc=!Nr.Qb&&6>on,Nr.jc){var ad,ni=Nr;for(ad=0;ad<Ua;++ad){var Xo=ad,Oi=ni.pd[Xo],gc=ni.G[0][ni.H[0]+Xo];256<=gc.value?(Oi.g=gc.g+256,Oi.value=gc.value):(Oi.g=0,Oi.value=0,Xo>>=zs(gc,8,Oi),Xo>>=zs(ni.G[1][ni.H[1]+Xo],16,Oi),Xo>>=zs(ni.G[2][ni.H[2]+Xo],0,Oi),zs(ni.G[3][ni.H[3]+Xo],24,Oi))}}}Lr.vc=Ws,Lr.Wb=nr,Lr.Ya=nn,Lr.yc=An,Dt=1;break t}Dt=0}if(!(ne=Dt)){D.a=3;break e}if(0<Ye){if(ge.ua=1<<Ye,!X(ge.Wa,Ye)){D.a=1,ne=0;break e}}else ge.ua=0;var zd=D,$d=oe,sm=Ae,Gd=zd.s,Wd=Gd.xc;if(zd.c=$d,zd.i=sm,Gd.md=Te($d,Wd),Gd.wc=Wd==0?-1:(1<<Wd)-1,U){D.xb=io;break e}if((Le=i(oe*Ae))==null){D.a=1,ne=0;break e}ne=(ne=Cs(D,Le,0,oe,Ae,Ae,null))&&!ue.h;break e}return ne?(J!=null?J[0]=Le:(t(Le==null),t(U)),D.$=0,U||sr(ge)):sr(ge),ne}function rr(p,w){var U=p.c*p.i,D=U+w+16*w;return t(p.c<=w),p.V=i(D),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+U+w,1)}function Gn(p,w){var U=p.C,D=w-U,J=p.V,ne=p.Ba+p.c*U;for(t(w<=p.l.o);0<D;){var oe=16<D?16:D,Ae=p.l.ma,ue=p.l.width,ge=ue*oe,Le=Ae.ca,Ye=Ae.tb+ue*U,xe=p.Ta,Re=p.Ua;$n(p,oe,J,ne),Id(xe,Re,Le,Ye,ge),ze(Ae,U,U+oe,Le,Ye,ue),D-=oe,J+=oe*p.c,U+=oe}t(U==w),p.C=p.Ma=w}function li(){this.ub=this.yd=this.td=this.Rb=0}function Wn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function lr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function wr(){this.Yb=(function(){var p=[];return(function w(U,D,J){for(var ne=J[D],oe=0;oe<ne&&(U.push(J.length>D+1?[]:0),!(J.length<D+1));oe++)w(U[oe],D+1,J)})(p,0,[3,11]),p})()}function Hc(){this.jb=i(3),this.Wc=A([4,8],wr),this.Xc=A([4,17],wr)}function pl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Aa(){this.ld=this.La=this.dd=this.tc=0}function Wi(){this.Na=this.la=0}function Kc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function gl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function jo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Aa),this.Y=0,this.ya=Array(new gl),this.aa=0,this.l=new xl}function da(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Vc(){this.cb=this.a=0,this.sc="",this.m=new R,this.Od=new li,this.Kc=new Wn,this.ed=new pl,this.Qa=new lr,this.Ic=this.$c=this.Aa=0,this.D=new jo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,R),this.ia=0,this.pb=c(4,Kc),this.Pa=new Hc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new da),this.Hd=0,this.rb=Array(new Wi),this.sb=0,this.wa=Array(new Aa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new gl),this.L=this.aa=0,this.gd=A([4,2],Aa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function zr(p,w){return 0>p?0:p>w?w:p}function xl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function WA(){var p=new Vc;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Kt||(Kt=qa)),p}function $r(p,w,U){return p.a==0&&(p.a=w,p.sc=U,p.cb=0),0}function Bo(p,w,U){return 3<=U&&p[w+0]==157&&p[w+1]==1&&p[w+2]==42}function qn(p,w){if(p==null)return 0;if(p.a=0,p.sc="OK",w==null)return $r(p,2,"null VP8Io passed to VP8GetHeaders()");var U=w.data,D=w.w,J=w.ha;if(4>J)return $r(p,7,"Truncated header.");var ne=U[D+0]|U[D+1]<<8|U[D+2]<<16,oe=p.Od;if(oe.Rb=!(1&ne),oe.td=ne>>1&7,oe.yd=ne>>4&1,oe.ub=ne>>5,3<oe.td)return $r(p,3,"Incorrect keyframe parameters.");if(!oe.yd)return $r(p,4,"Frame not displayable.");D+=3,J-=3;var Ae=p.Kc;if(oe.Rb){if(7>J)return $r(p,7,"cannot parse picture header");if(!Bo(U,D,J))return $r(p,3,"Bad code word");Ae.c=16383&(U[D+4]<<8|U[D+3]),Ae.Td=U[D+4]>>6,Ae.i=16383&(U[D+6]<<8|U[D+5]),Ae.Ud=U[D+6]>>6,D+=7,J-=7,p.za=Ae.c+15>>4,p.Ub=Ae.i+15>>4,w.width=Ae.c,w.height=Ae.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,a((ne=p.Pa).jb,0,255,ne.jb.length),t((ne=p.Qa)!=null),ne.Cb=0,ne.Bb=0,ne.Fb=1,a(ne.Zb,0,0,ne.Zb.length),a(ne.Lb,0,0,ne.Lb)}if(oe.ub>J)return $r(p,7,"bad partition length");W(ne=p.m,U,D,oe.ub),D+=oe.ub,J-=oe.ub,oe.Rb&&(Ae.Ld=ee(ne),Ae.Kd=ee(ne)),Ae=p.Qa;var ue,ge=p.Pa;if(t(ne!=null),t(Ae!=null),Ae.Cb=ee(ne),Ae.Cb){if(Ae.Bb=ee(ne),ee(ne)){for(Ae.Fb=ee(ne),ue=0;4>ue;++ue)Ae.Zb[ue]=ee(ne)?K(ne,7):0;for(ue=0;4>ue;++ue)Ae.Lb[ue]=ee(ne)?K(ne,6):0}if(Ae.Bb)for(ue=0;3>ue;++ue)ge.jb[ue]=ee(ne)?ae(ne,8):255}else Ae.Bb=0;if(ne.Ka)return $r(p,3,"cannot parse segment header");if((Ae=p.ed).zd=ee(ne),Ae.Tb=ae(ne,6),Ae.wb=ae(ne,3),Ae.Pc=ee(ne),Ae.Pc&&ee(ne)){for(ge=0;4>ge;++ge)ee(ne)&&(Ae.vd[ge]=K(ne,6));for(ge=0;4>ge;++ge)ee(ne)&&(Ae.od[ge]=K(ne,6))}if(p.L=Ae.Tb==0?0:Ae.zd?1:2,ne.Ka)return $r(p,3,"cannot parse filter header");var Le=J;if(J=ue=D,D=ue+Le,Ae=Le,p.Xb=(1<<ae(p.m,2))-1,Le<3*(ge=p.Xb))U=7;else{for(ue+=3*ge,Ae-=3*ge,Le=0;Le<ge;++Le){var Ye=U[J+0]|U[J+1]<<8|U[J+2]<<16;Ye>Ae&&(Ye=Ae),W(p.Jc[+Le],U,ue,Ye),ue+=Ye,Ae-=Ye,J+=3}W(p.Jc[+ge],U,ue,Ae),U=ue<D?0:5}if(U!=0)return $r(p,U,"cannot parse partitions");for(U=ae(ue=p.m,7),J=ee(ue)?K(ue,4):0,D=ee(ue)?K(ue,4):0,Ae=ee(ue)?K(ue,4):0,ge=ee(ue)?K(ue,4):0,ue=ee(ue)?K(ue,4):0,Le=p.Qa,Ye=0;4>Ye;++Ye){if(Le.Cb){var xe=Le.Zb[Ye];Le.Fb||(xe+=U)}else{if(0<Ye){p.pb[Ye]=p.pb[0];continue}xe=U}var Re=p.pb[Ye];Re.Sc[0]=we[zr(xe+J,127)],Re.Sc[1]=qe[zr(xe+0,127)],Re.Eb[0]=2*we[zr(xe+D,127)],Re.Eb[1]=101581*qe[zr(xe+Ae,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=we[zr(xe+ge,117)],Re.Qc[1]=qe[zr(xe+ue,127)],Re.lc=xe+ue}if(!oe.Rb)return $r(p,4,"Not a key frame.");for(ee(ne),oe=p.Pa,U=0;4>U;++U){for(J=0;8>J;++J)for(D=0;3>D;++D)for(Ae=0;11>Ae;++Ae)ge=je(ne,$u[U][J][D][Ae])?ae(ne,8):Mr[U][J][D][Ae],oe.Wc[U][J].Yb[D][Ae]=ge;for(J=0;17>J;++J)oe.Xc[U][J]=oe.Wc[U][Gu[J]]}return p.kc=ee(ne),p.kc&&(p.Bd=ae(ne,8)),p.cb=1}function qa(p,w,U,D,J,ne,oe){var Ae=w[J].Yb[U];for(U=0;16>J;++J){if(!je(p,Ae[U+0]))return J;for(;!je(p,Ae[U+1]);)if(Ae=w[++J].Yb[0],U=0,J==16)return 16;var ue=w[J+1].Yb;if(je(p,Ae[U+2])){var ge=p,Le=0;if(je(ge,(xe=Ae)[(Ye=U)+3]))if(je(ge,xe[Ye+6])){for(Ae=0,Ye=2*(Le=je(ge,xe[Ye+8]))+(xe=je(ge,xe[Ye+9+Le])),Le=0,xe=Wt[Ye];xe[Ae];++Ae)Le+=Le+je(ge,xe[Ae]);Le+=3+(8<<Ye)}else je(ge,xe[Ye+7])?(Le=7+2*je(ge,165),Le+=je(ge,145)):Le=5+je(ge,159);else Le=je(ge,xe[Ye+4])?3+je(ge,xe[Ye+5]):2;Ae=ue[2]}else Le=1,Ae=ue[1];ue=oe+Ps[J],0>(ge=p).b&&pe(ge);var Ye,xe=ge.b,Re=(Ye=ge.Ca>>1)-(ge.I>>xe)>>31;--ge.b,ge.Ca+=Re,ge.Ca|=1,ge.I-=(Ye+1&Re)<<xe,ne[ue]=((Le^Re)-Re)*D[(0<J)+0]}return 16}function Co(p){var w=p.rb[p.sb-1];w.la=0,w.Na=0,a(p.zc,0,0,p.zc.length),p.ja=0}function ja(p,w,U,D,J){J=p[w+U+32*D]+(J>>3),p[w+U+32*D]=-256&J?0>J?0:255:J}function Xr(p,w,U,D,J,ne){ja(p,w,0,U,D+J),ja(p,w,1,U,D+ne),ja(p,w,2,U,D-ne),ja(p,w,3,U,D-J)}function Ya(p){return(20091*p>>16)+p}function ac(p,w,U,D){var J,ne=0,oe=i(16);for(J=0;4>J;++J){var Ae=p[w+0]+p[w+8],ue=p[w+0]-p[w+8],ge=(35468*p[w+4]>>16)-Ya(p[w+12]),Le=Ya(p[w+4])+(35468*p[w+12]>>16);oe[ne+0]=Ae+Le,oe[ne+1]=ue+ge,oe[ne+2]=ue-ge,oe[ne+3]=Ae-Le,ne+=4,w++}for(J=ne=0;4>J;++J)Ae=(p=oe[ne+0]+4)+oe[ne+8],ue=p-oe[ne+8],ge=(35468*oe[ne+4]>>16)-Ya(oe[ne+12]),ja(U,D,0,0,Ae+(Le=Ya(oe[ne+4])+(35468*oe[ne+12]>>16))),ja(U,D,1,0,ue+ge),ja(U,D,2,0,ue-ge),ja(U,D,3,0,Ae-Le),ne++,D+=32}function vl(p,w,U,D){var J=p[w+0]+4,ne=35468*p[w+4]>>16,oe=Ya(p[w+4]),Ae=35468*p[w+1]>>16;Xr(U,D,0,J+oe,p=Ya(p[w+1]),Ae),Xr(U,D,1,J+ne,p,Ae),Xr(U,D,2,J-ne,p,Ae),Xr(U,D,3,J-oe,p,Ae)}function So(p,w,U,D,J){ac(p,w,U,D),J&&ac(p,w+16,U,D+4)}function Ja(p,w,U,D){$o(p,w+0,U,D,1),$o(p,w+32,U,D+128,1)}function wl(p,w,U,D){var J;for(p=p[w+0]+4,J=0;4>J;++J)for(w=0;4>w;++w)ja(U,D,w,J,p)}function Ys(p,w,U,D){p[w+0]&&Gs(p,w+0,U,D),p[w+16]&&Gs(p,w+16,U,D+4),p[w+32]&&Gs(p,w+32,U,D+128),p[w+48]&&Gs(p,w+48,U,D+128+4)}function Eo(p,w,U,D){var J,ne=i(16);for(J=0;4>J;++J){var oe=p[w+0+J]+p[w+12+J],Ae=p[w+4+J]+p[w+8+J],ue=p[w+4+J]-p[w+8+J],ge=p[w+0+J]-p[w+12+J];ne[0+J]=oe+Ae,ne[8+J]=oe-Ae,ne[4+J]=ge+ue,ne[12+J]=ge-ue}for(J=0;4>J;++J)oe=(p=ne[0+4*J]+3)+ne[3+4*J],Ae=ne[1+4*J]+ne[2+4*J],ue=ne[1+4*J]-ne[2+4*J],ge=p-ne[3+4*J],U[D+0]=oe+Ae>>3,U[D+16]=ge+ue>>3,U[D+32]=oe-Ae>>3,U[D+48]=ge-ue>>3,D+=64}function qi(p,w,U){var D,J=w-32,ne=ta,oe=255-p[J-1];for(D=0;D<U;++D){var Ae,ue=ne,ge=oe+p[w-1];for(Ae=0;Ae<U;++Ae)p[w+Ae]=ue[ge+p[J+Ae]];w+=32}}function Fo(p,w){qi(p,w,4)}function zc(p,w){qi(p,w,8)}function ic(p,w){qi(p,w,16)}function _o(p,w){var U;for(U=0;16>U;++U)n(p,w+32*U,p,w-32,16)}function ko(p,w){var U;for(U=16;0<U;--U)a(p,w,p[w-1],16),w+=32}function Tn(p,w,U){var D;for(D=0;16>D;++D)a(w,U+32*D,p,16)}function ci(p,w){var U,D=16;for(U=0;16>U;++U)D+=p[w-1+32*U]+p[w+U-32];Tn(D>>5,p,w)}function Yn(p,w){var U,D=8;for(U=0;16>U;++U)D+=p[w-1+32*U];Tn(D>>4,p,w)}function ua(p,w){var U,D=8;for(U=0;16>U;++U)D+=p[w+U-32];Tn(D>>4,p,w)}function Uo(p,w){Tn(128,p,w)}function fs(p,w,U){return p+2*w+U+2>>2}function Ai(p,w){var U,D=w-32;for(D=new Uint8Array([fs(p[D-1],p[D+0],p[D+1]),fs(p[D+0],p[D+1],p[D+2]),fs(p[D+1],p[D+2],p[D+3]),fs(p[D+2],p[D+3],p[D+4])]),U=0;4>U;++U)n(p,w+32*U,D,0,D.length)}function qA(p,w){var U=p[w-1],D=p[w-1+32],J=p[w-1+64],ne=p[w-1+96];Pe(p,w+0,16843009*fs(p[w-1-32],U,D)),Pe(p,w+32,16843009*fs(U,D,J)),Pe(p,w+64,16843009*fs(D,J,ne)),Pe(p,w+96,16843009*fs(J,ne,ne))}function $c(p,w){var U,D=4;for(U=0;4>U;++U)D+=p[w+U-32]+p[w-1+32*U];for(D>>=3,U=0;4>U;++U)a(p,w+32*U,D,4)}function ha(p,w){var U=p[w-1+0],D=p[w-1+32],J=p[w-1+64],ne=p[w-1-32],oe=p[w+0-32],Ae=p[w+1-32],ue=p[w+2-32],ge=p[w+3-32];p[w+0+96]=fs(D,J,p[w-1+96]),p[w+1+96]=p[w+0+64]=fs(U,D,J),p[w+2+96]=p[w+1+64]=p[w+0+32]=fs(ne,U,D),p[w+3+96]=p[w+2+64]=p[w+1+32]=p[w+0+0]=fs(oe,ne,U),p[w+3+64]=p[w+2+32]=p[w+1+0]=fs(Ae,oe,ne),p[w+3+32]=p[w+2+0]=fs(ue,Ae,oe),p[w+3+0]=fs(ge,ue,Ae)}function Fi(p,w){var U=p[w+1-32],D=p[w+2-32],J=p[w+3-32],ne=p[w+4-32],oe=p[w+5-32],Ae=p[w+6-32],ue=p[w+7-32];p[w+0+0]=fs(p[w+0-32],U,D),p[w+1+0]=p[w+0+32]=fs(U,D,J),p[w+2+0]=p[w+1+32]=p[w+0+64]=fs(D,J,ne),p[w+3+0]=p[w+2+32]=p[w+1+64]=p[w+0+96]=fs(J,ne,oe),p[w+3+32]=p[w+2+64]=p[w+1+96]=fs(ne,oe,Ae),p[w+3+64]=p[w+2+96]=fs(oe,Ae,ue),p[w+3+96]=fs(Ae,ue,ue)}function Gc(p,w){var U=p[w-1+0],D=p[w-1+32],J=p[w-1+64],ne=p[w-1-32],oe=p[w+0-32],Ae=p[w+1-32],ue=p[w+2-32],ge=p[w+3-32];p[w+0+0]=p[w+1+64]=ne+oe+1>>1,p[w+1+0]=p[w+2+64]=oe+Ae+1>>1,p[w+2+0]=p[w+3+64]=Ae+ue+1>>1,p[w+3+0]=ue+ge+1>>1,p[w+0+96]=fs(J,D,U),p[w+0+64]=fs(D,U,ne),p[w+0+32]=p[w+1+96]=fs(U,ne,oe),p[w+1+32]=p[w+2+96]=fs(ne,oe,Ae),p[w+2+32]=p[w+3+96]=fs(oe,Ae,ue),p[w+3+32]=fs(Ae,ue,ge)}function bl(p,w){var U=p[w+0-32],D=p[w+1-32],J=p[w+2-32],ne=p[w+3-32],oe=p[w+4-32],Ae=p[w+5-32],ue=p[w+6-32],ge=p[w+7-32];p[w+0+0]=U+D+1>>1,p[w+1+0]=p[w+0+64]=D+J+1>>1,p[w+2+0]=p[w+1+64]=J+ne+1>>1,p[w+3+0]=p[w+2+64]=ne+oe+1>>1,p[w+0+32]=fs(U,D,J),p[w+1+32]=p[w+0+96]=fs(D,J,ne),p[w+2+32]=p[w+1+96]=fs(J,ne,oe),p[w+3+32]=p[w+2+96]=fs(ne,oe,Ae),p[w+3+64]=fs(oe,Ae,ue),p[w+3+96]=fs(Ae,ue,ge)}function Io(p,w){var U=p[w-1+0],D=p[w-1+32],J=p[w-1+64],ne=p[w-1+96];p[w+0+0]=U+D+1>>1,p[w+2+0]=p[w+0+32]=D+J+1>>1,p[w+2+32]=p[w+0+64]=J+ne+1>>1,p[w+1+0]=fs(U,D,J),p[w+3+0]=p[w+1+32]=fs(D,J,ne),p[w+3+32]=p[w+1+64]=fs(J,ne,ne),p[w+3+64]=p[w+2+64]=p[w+0+96]=p[w+1+96]=p[w+2+96]=p[w+3+96]=ne}function oc(p,w){var U=p[w-1+0],D=p[w-1+32],J=p[w-1+64],ne=p[w-1+96],oe=p[w-1-32],Ae=p[w+0-32],ue=p[w+1-32],ge=p[w+2-32];p[w+0+0]=p[w+2+32]=U+oe+1>>1,p[w+0+32]=p[w+2+64]=D+U+1>>1,p[w+0+64]=p[w+2+96]=J+D+1>>1,p[w+0+96]=ne+J+1>>1,p[w+3+0]=fs(Ae,ue,ge),p[w+2+0]=fs(oe,Ae,ue),p[w+1+0]=p[w+3+32]=fs(U,oe,Ae),p[w+1+32]=p[w+3+64]=fs(D,U,oe),p[w+1+64]=p[w+3+96]=fs(J,D,U),p[w+1+96]=fs(ne,J,D)}function Xa(p,w){var U;for(U=0;8>U;++U)n(p,w+32*U,p,w-32,8)}function Lo(p,w){var U;for(U=0;8>U;++U)a(p,w,p[w-1],8),w+=32}function Jn(p,w,U){var D;for(D=0;8>D;++D)a(w,U+32*D,p,8)}function yl(p,w){var U,D=8;for(U=0;8>U;++U)D+=p[w+U-32]+p[w-1+32*U];Jn(D>>4,p,w)}function Qo(p,w){var U,D=4;for(U=0;8>U;++U)D+=p[w+U-32];Jn(D>>3,p,w)}function Nl(p,w){var U,D=4;for(U=0;8>U;++U)D+=p[w-1+32*U];Jn(D>>3,p,w)}function jl(p,w){Jn(128,p,w)}function Ba(p,w,U){var D=p[w-U],J=p[w+0],ne=3*(J-D)+Qi[1020+p[w-2*U]-p[w+U]],oe=uc[112+(ne+4>>3)];p[w-U]=ta[255+D+uc[112+(ne+3>>3)]],p[w+0]=ta[255+J-oe]}function To(p,w,U,D){var J=p[w+0],ne=p[w+U];return si[255+p[w-2*U]-p[w-U]]>D||si[255+ne-J]>D}function Po(p,w,U,D){return 4*si[255+p[w-U]-p[w+0]]+si[255+p[w-2*U]-p[w+U]]<=D}function Ca(p,w,U,D,J){var ne=p[w-3*U],oe=p[w-2*U],Ae=p[w-U],ue=p[w+0],ge=p[w+U],Le=p[w+2*U],Ye=p[w+3*U];return 4*si[255+Ae-ue]+si[255+oe-ge]>D?0:si[255+p[w-4*U]-ne]<=J&&si[255+ne-oe]<=J&&si[255+oe-Ae]<=J&&si[255+Ye-Le]<=J&&si[255+Le-ge]<=J&&si[255+ge-ue]<=J}function _i(p,w,U,D){var J=2*D+1;for(D=0;16>D;++D)Po(p,w+D,U,J)&&Ba(p,w+D,U)}function Yi(p,w,U,D){var J=2*D+1;for(D=0;16>D;++D)Po(p,w+D*U,1,J)&&Ba(p,w+D*U,1)}function lc(p,w,U,D){var J;for(J=3;0<J;--J)_i(p,w+=4*U,U,D)}function Ro(p,w,U,D){var J;for(J=3;0<J;--J)Yi(p,w+=4,U,D)}function Sa(p,w,U,D,J,ne,oe,Ae){for(ne=2*ne+1;0<J--;){if(Ca(p,w,U,ne,oe))if(To(p,w,U,Ae))Ba(p,w,U);else{var ue=p,ge=w,Le=U,Ye=ue[ge-2*Le],xe=ue[ge-Le],Re=ue[ge+0],Ge=ue[ge+Le],ut=ue[ge+2*Le],Ze=27*(ct=Qi[1020+3*(Re-xe)+Qi[1020+Ye-Ge]])+63>>7,ot=18*ct+63>>7,ct=9*ct+63>>7;ue[ge-3*Le]=ta[255+ue[ge-3*Le]+ct],ue[ge-2*Le]=ta[255+Ye+ot],ue[ge-Le]=ta[255+xe+Ze],ue[ge+0]=ta[255+Re-Ze],ue[ge+Le]=ta[255+Ge-ot],ue[ge+2*Le]=ta[255+ut-ct]}w+=D}}function di(p,w,U,D,J,ne,oe,Ae){for(ne=2*ne+1;0<J--;){if(Ca(p,w,U,ne,oe))if(To(p,w,U,Ae))Ba(p,w,U);else{var ue=p,ge=w,Le=U,Ye=ue[ge-Le],xe=ue[ge+0],Re=ue[ge+Le],Ge=uc[112+(4+(ut=3*(xe-Ye))>>3)],ut=uc[112+(ut+3>>3)],Ze=Ge+1>>1;ue[ge-2*Le]=ta[255+ue[ge-2*Le]+Ze],ue[ge-Le]=ta[255+Ye+ut],ue[ge+0]=ta[255+xe-Ge],ue[ge+Le]=ta[255+Re-Ze]}w+=D}}function Bn(p,w,U,D,J,ne){Sa(p,w,U,1,16,D,J,ne)}function Ea(p,w,U,D,J,ne){Sa(p,w,1,U,16,D,J,ne)}function Bl(p,w,U,D,J,ne){var oe;for(oe=3;0<oe;--oe)di(p,w+=4*U,U,1,16,D,J,ne)}function C(p,w,U,D,J,ne){var oe;for(oe=3;0<oe;--oe)di(p,w+=4,1,U,16,D,J,ne)}function Y(p,w,U,D,J,ne,oe,Ae){Sa(p,w,J,1,8,ne,oe,Ae),Sa(U,D,J,1,8,ne,oe,Ae)}function ve(p,w,U,D,J,ne,oe,Ae){Sa(p,w,1,J,8,ne,oe,Ae),Sa(U,D,1,J,8,ne,oe,Ae)}function Fe(p,w,U,D,J,ne,oe,Ae){di(p,w+4*J,J,1,8,ne,oe,Ae),di(U,D+4*J,J,1,8,ne,oe,Ae)}function Ke(p,w,U,D,J,ne,oe,Ae){di(p,w+4,1,J,8,ne,oe,Ae),di(U,D+4,1,J,8,ne,oe,Ae)}function ht(){this.ba=new Yt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new _t,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function vt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Zt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function is(){this.ua=0,this.Wa=new rt,this.vb=new rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ce,this.yc=new O}function ws(){this.xb=this.a=0,this.l=new xl,this.ca=new Yt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new is,this.ab=0,this.gc=c(4,Zt),this.Oc=0}function Bs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function $s(p,w,U,D,J,ne,oe){for(p=p==null?0:p[w+0],w=0;w<oe;++w)J[ne+w]=p+U[D+w]&255,p=J[ne+w]}function Br(p,w,U,D,J,ne,oe){var Ae;if(p==null)$s(null,null,U,D,J,ne,oe);else for(Ae=0;Ae<oe;++Ae)J[ne+Ae]=p[w+Ae]+U[D+Ae]&255}function Rr(p,w,U,D,J,ne,oe){if(p==null)$s(null,null,U,D,J,ne,oe);else{var Ae,ue=p[w+0],ge=ue,Le=ue;for(Ae=0;Ae<oe;++Ae)ge=Le+(ue=p[w+Ae])-ge,Le=U[D+Ae]+(-256&ge?0>ge?0:255:ge)&255,ge=ue,J[ne+Ae]=Le}}function fr(p,w,U,D){var J=w.width,ne=w.o;if(t(p!=null&&w!=null),0>U||0>=D||U+D>ne)return null;if(!p.Cc){if(p.ga==null){var oe;if(p.ga=new Bs,(oe=p.ga==null)||(oe=w.width*w.o,t(p.Gb.length==0),p.Gb=i(oe),p.Uc=0,p.Gb==null?oe=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,oe=1),oe=!oe),!oe){oe=p.ga;var Ae=p.Fa,ue=p.P,ge=p.qc,Le=p.mb,Ye=p.nb,xe=ue+1,Re=ge-1,Ge=oe.l;if(t(Ae!=null&&Le!=null&&w!=null),sa[0]=null,sa[1]=$s,sa[2]=Br,sa[3]=Rr,oe.ca=Le,oe.tb=Ye,oe.c=w.width,oe.i=w.height,t(0<oe.c&&0<oe.i),1>=ge)w=0;else if(oe.$a=3&Ae[ue+0],oe.Z=Ae[ue+0]>>2&3,oe.Lc=Ae[ue+0]>>4&3,ue=Ae[ue+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||ue)w=0;else if(Ge.put=yt,Ge.ac=Xs,Ge.bc=Fs,Ge.ma=oe,Ge.width=w.width,Ge.height=w.height,Ge.Da=w.Da,Ge.v=w.v,Ge.va=w.va,Ge.j=w.j,Ge.o=w.o,oe.$a)e:{t(oe.$a==1),w=Be();t:for(;;){if(w==null){w=0;break e}if(t(oe!=null),oe.mc=w,w.c=oe.c,w.i=oe.i,w.l=oe.l,w.l.ma=oe,w.l.width=oe.c,w.l.height=oe.i,w.a=0,le(w.m,Ae,xe,Re),!js(oe.c,oe.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Qn(w.s)?(oe.ic=1,Ae=w.c*w.i,w.Ta=null,w.Ua=0,w.V=i(Ae),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(oe.ic=0,w=rr(w,oe.c)),!w))break t;w=1;break e}oe.mc=null,w=0}else w=Re>=oe.c*oe.i;oe=!w}if(oe)return null;p.ga.Lc!=1?p.Ga=0:D=ne-U}t(p.ga!=null),t(U+D<=ne);e:{if(w=(Ae=p.ga).c,ne=Ae.l.o,Ae.$a==0){if(xe=p.rc,Re=p.Vc,Ge=p.Fa,ue=p.P+1+U*w,ge=p.mb,Le=p.nb+U*w,t(ue<=p.P+p.qc),Ae.Z!=0)for(t(sa[Ae.Z]!=null),oe=0;oe<D;++oe)sa[Ae.Z](xe,Re,Ge,ue,ge,Le,w),xe=ge,Re=Le,Le+=w,ue+=w;else for(oe=0;oe<D;++oe)n(ge,Le,Ge,ue,w),xe=ge,Re=Le,Le+=w,ue+=w;p.rc=xe,p.Vc=Re}else{if(t(Ae.mc!=null),w=U+D,t((oe=Ae.mc)!=null),t(w<=oe.i),oe.C>=w)w=1;else if(Ae.ic||Xn(),Ae.ic){Ae=oe.V,xe=oe.Ba,Re=oe.c;var ut=oe.i,Ze=(Ge=1,ue=oe.$/Re,ge=oe.$%Re,Le=oe.m,Ye=oe.s,oe.$),ot=Re*ut,ct=Re*w,pt=Ye.wc,xt=Ze<ct?mr(Ye,ge,ue):null;t(Ze<=ot),t(w<=ut),t(Qn(Ye));t:for(;;){for(;!Le.h&&Ze<ct;){if(ge&pt||(xt=mr(Ye,ge,ue)),t(xt!=null),me(Le),256>(ut=Vs(xt.G[0],xt.H[0],Le)))Ae[xe+Ze]=ut,++Ze,++ge>=Re&&(ge=0,++ue<=w&&!(ue%16)&&ms(oe,ue));else{if(!(280>ut)){Ge=0;break t}ut=Ts(ut-256,Le);var cs,Jt=Vs(xt.G[4],xt.H[4],Le);if(me(Le),!(Ze>=(Jt=tr(Re,Jt=Ts(Jt,Le)))&&ot-Ze>=ut)){Ge=0;break t}for(cs=0;cs<ut;++cs)Ae[xe+Ze+cs]=Ae[xe+Ze+cs-Jt];for(Ze+=ut,ge+=ut;ge>=Re;)ge-=Re,++ue<=w&&!(ue%16)&&ms(oe,ue);Ze<ct&&ge&pt&&(xt=mr(Ye,ge,ue))}t(Le.h==de(Le))}ms(oe,ue>w?w:ue);break t}!Ge||Le.h&&Ze<ot?(Ge=0,oe.a=Le.h?5:3):oe.$=Ze,w=Ge}else w=Cs(oe,oe.V,oe.Ba,oe.c,oe.i,w,Gn);if(!w){D=0;break e}}U+D>=ne&&(p.Cc=1),D=1}if(!D)return null;if(p.Cc&&((D=p.ga)!=null&&(D.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+U*J}function Zr(p,w,U,D,J,ne){for(;0<J--;){var oe,Ae=p,ue=w+(U?1:0),ge=p,Le=w+(U?0:3);for(oe=0;oe<D;++oe){var Ye=ge[Le+4*oe];Ye!=255&&(Ye*=32897,Ae[ue+4*oe+0]=Ae[ue+4*oe+0]*Ye>>23,Ae[ue+4*oe+1]=Ae[ue+4*oe+1]*Ye>>23,Ae[ue+4*oe+2]=Ae[ue+4*oe+2]*Ye>>23)}w+=ne}}function cr(p,w,U,D,J){for(;0<D--;){var ne;for(ne=0;ne<U;++ne){var oe=p[w+2*ne+0],Ae=15&(ge=p[w+2*ne+1]),ue=4369*Ae,ge=(240&ge|ge>>4)*ue>>16;p[w+2*ne+0]=(240&oe|oe>>4)*ue>>16&240|(15&oe|oe<<4)*ue>>16>>4&15,p[w+2*ne+1]=240&ge|Ae}w+=J}}function mn(p,w,U,D,J,ne,oe,Ae){var ue,ge,Le=255;for(ge=0;ge<J;++ge){for(ue=0;ue<D;++ue){var Ye=p[w+ue];ne[oe+4*ue]=Ye,Le&=Ye}w+=U,oe+=Ae}return Le!=255}function Pn(p,w,U,D,J){var ne;for(ne=0;ne<J;++ne)U[D+ne]=p[w+ne]>>8}function Xn(){Ul=Zr,Ud=cr,Yc=mn,Id=Pn}function Fa(p,w,U){V[p]=function(D,J,ne,oe,Ae,ue,ge,Le,Ye,xe,Re,Ge,ut,Ze,ot,ct,pt){var xt,cs=pt-1>>1,Jt=Ae[ue+0]|ge[Le+0]<<16,_s=Ye[xe+0]|Re[Ge+0]<<16;t(D!=null);var ts=3*Jt+_s+131074>>2;for(w(D[J+0],255&ts,ts>>16,ut,Ze),ne!=null&&(ts=3*_s+Jt+131074>>2,w(ne[oe+0],255&ts,ts>>16,ot,ct)),xt=1;xt<=cs;++xt){var Os=Ae[ue+xt]|ge[Le+xt]<<16,Gr=Ye[xe+xt]|Re[Ge+xt]<<16,ks=Jt+Os+_s+Gr+524296,Xt=ks+2*(Os+_s)>>3;ts=Xt+Jt>>1,Jt=(ks=ks+2*(Jt+Gr)>>3)+Os>>1,w(D[J+2*xt-1],255&ts,ts>>16,ut,Ze+(2*xt-1)*U),w(D[J+2*xt-0],255&Jt,Jt>>16,ut,Ze+(2*xt-0)*U),ne!=null&&(ts=ks+_s>>1,Jt=Xt+Gr>>1,w(ne[oe+2*xt-1],255&ts,ts>>16,ot,ct+(2*xt-1)*U),w(ne[oe+2*xt+0],255&Jt,Jt>>16,ot,ct+(2*xt+0)*U)),Jt=Os,_s=Gr}1&pt||(ts=3*Jt+_s+131074>>2,w(D[J+pt-1],255&ts,ts>>16,ut,Ze+(pt-1)*U),ne!=null&&(ts=3*_s+Jt+131074>>2,w(ne[oe+pt-1],255&ts,ts>>16,ot,ct+(pt-1)*U)))}}function ui(){La[XA]=Rp,La[Go]=Tl,La[Ku]=Dp,La[Jc]=rA,La[Xc]=mc,La[pr]=td,La[ZA]=Wu,La[hc]=Tl,La[Il]=rA,La[Zc]=mc,La[eA]=td}function Cl(p){return p&-16384?0>p?0:255:p>>Pl}function Ji(p,w){return Cl((19077*p>>8)+(26149*w>>8)-14234)}function Do(p,w,U){return Cl((19077*p>>8)-(6419*w>>8)-(13320*U>>8)+8708)}function Xi(p,w){return Cl((19077*p>>8)+(33050*w>>8)-17685)}function Zi(p,w,U,D,J){D[J+0]=Ji(p,U),D[J+1]=Do(p,w,U),D[J+2]=Xi(p,w)}function fn(p,w,U,D,J){D[J+0]=Xi(p,w),D[J+1]=Do(p,w,U),D[J+2]=Ji(p,U)}function _a(p,w,U,D,J){var ne=Do(p,w,U);w=ne<<3&224|Xi(p,w)>>3,D[J+0]=248&Ji(p,U)|ne>>5,D[J+1]=w}function Za(p,w,U,D,J){var ne=240&Xi(p,w)|15;D[J+0]=240&Ji(p,U)|Do(p,w,U)>>4,D[J+1]=ne}function Oo(p,w,U,D,J){D[J+0]=255,Zi(p,w,U,D,J+1)}function Sl(p,w,U,D,J){fn(p,w,U,D,J),D[J+3]=255}function en(p,w,U,D,J){Zi(p,w,U,D,J),D[J+3]=255}function ka(p,w,U){V[p]=function(D,J,ne,oe,Ae,ue,ge,Le,Ye){for(var xe=Le+(-2&Ye)*U;Le!=xe;)w(D[J+0],ne[oe+0],Ae[ue+0],ge,Le),w(D[J+1],ne[oe+0],Ae[ue+0],ge,Le+U),J+=2,++oe,++ue,Le+=2*U;1&Ye&&w(D[J+0],ne[oe+0],Ae[ue+0],ge,Le)}}function ei(p,w,U){return U==0?p==0?w==0?6:5:w==0?4:0:U}function cc(p,w,U,D,J){switch(p>>>30){case 3:$o(w,U,D,J,0);break;case 2:Ir(w,U,D,J);break;case 1:Gs(w,U,D,J)}}function Zn(p,w){var U,D,J=w.M,ne=w.Nb,oe=p.oc,Ae=p.pc+40,ue=p.oc,ge=p.pc+584,Le=p.oc,Ye=p.pc+600;for(U=0;16>U;++U)oe[Ae+32*U-1]=129;for(U=0;8>U;++U)ue[ge+32*U-1]=129,Le[Ye+32*U-1]=129;for(0<J?oe[Ae-1-32]=ue[ge-1-32]=Le[Ye-1-32]=129:(a(oe,Ae-32-1,127,21),a(ue,ge-32-1,127,9),a(Le,Ye-32-1,127,9)),D=0;D<p.za;++D){var xe=w.ya[w.aa+D];if(0<D){for(U=-1;16>U;++U)n(oe,Ae+32*U-4,oe,Ae+32*U+12,4);for(U=-1;8>U;++U)n(ue,ge+32*U-4,ue,ge+32*U+4,4),n(Le,Ye+32*U-4,Le,Ye+32*U+4,4)}var Re=p.Gd,Ge=p.Hd+D,ut=xe.ad,Ze=xe.Hc;if(0<J&&(n(oe,Ae-32,Re[Ge].y,0,16),n(ue,ge-32,Re[Ge].f,0,8),n(Le,Ye-32,Re[Ge].ea,0,8)),xe.Za){var ot=oe,ct=Ae-32+16;for(0<J&&(D>=p.za-1?a(ot,ct,Re[Ge].y[15],4):n(ot,ct,Re[Ge+1].y,0,4)),U=0;4>U;U++)ot[ct+128+U]=ot[ct+256+U]=ot[ct+384+U]=ot[ct+0+U];for(U=0;16>U;++U,Ze<<=2)ot=oe,ct=Ae+qu[U],gi[xe.Ob[U]](ot,ct),cc(Ze,ut,16*+U,ot,ct)}else if(ot=ei(D,J,xe.Ob[0]),pa[ot](oe,Ae),Ze!=0)for(U=0;16>U;++U,Ze<<=2)cc(Ze,ut,16*+U,oe,Ae+qu[U]);for(U=xe.Gc,ot=ei(D,J,xe.Dd),Ia[ot](ue,ge),Ia[ot](Le,Ye),Ze=ut,ot=ue,ct=ge,255&(xe=0|U)&&(170&xe?ea(Ze,256,ot,ct):Ar(Ze,256,ot,ct)),xe=Le,Ze=Ye,255&(U>>=8)&&(170&U?ea(ut,320,xe,Ze):Ar(ut,320,xe,Ze)),J<p.Ub-1&&(n(Re[Ge].y,0,oe,Ae+480,16),n(Re[Ge].f,0,ue,ge+224,8),n(Re[Ge].ea,0,Le,Ye+224,8)),U=8*ne*p.B,Re=p.sa,Ge=p.ta+16*D+16*ne*p.R,ut=p.qa,xe=p.ra+8*D+U,Ze=p.Ha,ot=p.Ia+8*D+U,U=0;16>U;++U)n(Re,Ge+U*p.R,oe,Ae+32*U,16);for(U=0;8>U;++U)n(ut,xe+U*p.B,ue,ge+32*U,8),n(Ze,ot+U*p.B,Le,Ye+32*U,8)}}function eo(p,w,U,D,J,ne,oe,Ae,ue){var ge=[0],Le=[0],Ye=0,xe=ue!=null?ue.kd:0,Re=ue??new vt;if(p==null||12>U)return 7;Re.data=p,Re.w=w,Re.ha=U,w=[w],U=[U],Re.gb=[Re.gb];e:{var Ge=w,ut=U,Ze=Re.gb;if(t(p!=null),t(ut!=null),t(Ze!=null),Ze[0]=0,12<=ut[0]&&!s(p,Ge[0],"RIFF")){if(s(p,Ge[0]+8,"WEBP")){Ze=3;break e}var ot=Se(p,Ge[0]+4);if(12>ot||4294967286<ot){Ze=3;break e}if(xe&&ot>ut[0]-8){Ze=7;break e}Ze[0]=ot,Ge[0]+=12,ut[0]-=12}Ze=0}if(Ze!=0)return Ze;for(ot=0<Re.gb[0],U=U[0];;){e:{var ct=p;ut=w,Ze=U;var pt=ge,xt=Le,cs=Ge=[0];if((ts=Ye=[Ye])[0]=0,8>Ze[0])Ze=7;else{if(!s(ct,ut[0],"VP8X")){if(Se(ct,ut[0]+4)!=10){Ze=3;break e}if(18>Ze[0]){Ze=7;break e}var Jt=Se(ct,ut[0]+8),_s=1+nt(ct,ut[0]+12);if(2147483648<=_s*(ct=1+nt(ct,ut[0]+15))){Ze=3;break e}cs!=null&&(cs[0]=Jt),pt!=null&&(pt[0]=_s),xt!=null&&(xt[0]=ct),ut[0]+=18,Ze[0]-=18,ts[0]=1}Ze=0}}if(Ye=Ye[0],Ge=Ge[0],Ze!=0)return Ze;if(ut=!!(2&Ge),!ot&&Ye)return 3;if(ne!=null&&(ne[0]=!!(16&Ge)),oe!=null&&(oe[0]=ut),Ae!=null&&(Ae[0]=0),oe=ge[0],Ge=Le[0],Ye&&ut&&ue==null){Ze=0;break}if(4>U){Ze=7;break}if(ot&&Ye||!ot&&!Ye&&!s(p,w[0],"ALPH")){U=[U],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{Jt=p,Ze=w,ot=U;var ts=Re.gb;pt=Re.na,xt=Re.P,cs=Re.Sa,_s=22,t(Jt!=null),t(ot!=null),ct=Ze[0];var Os=ot[0];for(t(pt!=null),t(cs!=null),pt[0]=null,xt[0]=null,cs[0]=0;;){if(Ze[0]=ct,ot[0]=Os,8>Os){Ze=7;break e}var Gr=Se(Jt,ct+4);if(4294967286<Gr){Ze=3;break e}var ks=8+Gr+1&-2;if(_s+=ks,0<ts&&_s>ts){Ze=3;break e}if(!s(Jt,ct,"VP8 ")||!s(Jt,ct,"VP8L")){Ze=0;break e}if(Os[0]<ks){Ze=7;break e}s(Jt,ct,"ALPH")||(pt[0]=Jt,xt[0]=ct+8,cs[0]=Gr),ct+=ks,Os-=ks}}if(U=U[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],Ze!=0)break}U=[U],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(ts=p,Ze=w,ot=U,pt=Re.gb[0],xt=Re.Ja,cs=Re.xa,Jt=Ze[0],ct=!s(ts,Jt,"VP8 "),_s=!s(ts,Jt,"VP8L"),t(ts!=null),t(ot!=null),t(xt!=null),t(cs!=null),8>ot[0])Ze=7;else{if(ct||_s){if(ts=Se(ts,Jt+4),12<=pt&&ts>pt-12){Ze=3;break e}if(xe&&ts>ot[0]-8){Ze=7;break e}xt[0]=ts,Ze[0]+=8,ot[0]-=8,cs[0]=_s}else cs[0]=5<=ot[0]&&ts[Jt+0]==47&&!(ts[Jt+4]>>5),xt[0]=ot[0];Ze=0}if(U=U[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],w=w[0],Ze!=0)break;if(4294967286<Re.Ja)return 3;if(Ae==null||ut||(Ae[0]=Re.xa?2:1),oe=[oe],Ge=[Ge],Re.xa){if(5>U){Ze=7;break}Ae=oe,xe=Ge,ut=ne,p==null||5>U?p=0:5<=U&&p[w+0]==47&&!(p[w+4]>>5)?(ot=[0],ts=[0],pt=[0],le(xt=new q,p,w,U),us(xt,ot,ts,pt)?(Ae!=null&&(Ae[0]=ot[0]),xe!=null&&(xe[0]=ts[0]),ut!=null&&(ut[0]=pt[0]),p=1):p=0):p=0}else{if(10>U){Ze=7;break}Ae=Ge,p==null||10>U||!Bo(p,w+3,U-3)?p=0:(xe=p[w+0]|p[w+1]<<8|p[w+2]<<16,ut=16383&(p[w+7]<<8|p[w+6]),p=16383&(p[w+9]<<8|p[w+8]),1&xe||3<(xe>>1&7)||!(xe>>4&1)||xe>>5>=Re.Ja||!ut||!p?p=0:(oe&&(oe[0]=ut),Ae&&(Ae[0]=p),p=1))}if(!p||(oe=oe[0],Ge=Ge[0],Ye&&(ge[0]!=oe||Le[0]!=Ge)))return 3;ue!=null&&(ue[0]=Re,ue.offset=w-ue.w,t(4294967286>w-ue.w),t(ue.offset==ue.ha-U));break}return Ze==0||Ze==7&&Ye&&ue==null?(ne!=null&&(ne[0]|=Re.na!=null&&0<Re.na.length),D!=null&&(D[0]=oe),J!=null&&(J[0]=Ge),0):Ze}function Mo(p,w,U){var D=w.width,J=w.height,ne=0,oe=0,Ae=D,ue=J;if(w.Da=p!=null&&0<p.Da,w.Da&&(Ae=p.cd,ue=p.bd,ne=p.v,oe=p.j,11>U||(ne&=-2,oe&=-2),0>ne||0>oe||0>=Ae||0>=ue||ne+Ae>D||oe+ue>J))return 0;if(w.v=ne,w.j=oe,w.va=ne+Ae,w.o=oe+ue,w.U=Ae,w.T=ue,w.da=p!=null&&0<p.da,w.da){if(!Ee(Ae,ue,U=[p.ib],ne=[p.hb]))return 0;w.ib=U[0],w.hb=ne[0]}return w.ob=p!=null&&p.ob,w.Kb=p==null||!p.Sd,w.da&&(w.ob=w.ib<3*D/4&&w.hb<3*J/4,w.Kb=0),1}function El(p){if(p==null)return 2;if(11>p.S){var w=p.f.RGBA;w.fb+=(p.height-1)*w.A,w.A=-w.A}else w=p.f.kb,p=p.height,w.O+=(p-1)*w.fa,w.fa=-w.fa,w.N+=(p-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(p-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(p-1)*w.lb,w.lb=-w.lb);return 0}function ki(p,w,U,D){if(D==null||0>=p||0>=w)return 2;if(U!=null){if(U.Da){var J=U.cd,ne=U.bd,oe=-2&U.v,Ae=-2&U.j;if(0>oe||0>Ae||0>=J||0>=ne||oe+J>p||Ae+ne>w)return 2;p=J,w=ne}if(U.da){if(!Ee(p,w,J=[U.ib],ne=[U.hb]))return 2;p=J[0],w=ne[0]}}D.width=p,D.height=w;e:{var ue=D.width,ge=D.height;if(p=D.S,0>=ue||0>=ge||!(p>=XA&&13>p))p=2;else{if(0>=D.Rd&&D.sd==null){oe=ne=J=w=0;var Le=(Ae=ue*sd[p])*ge;if(11>p||(ne=(ge+1)/2*(w=(ue+1)/2),p==12&&(oe=(J=ue)*ge)),(ge=i(Le+2*ne+oe))==null){p=1;break e}D.sd=ge,11>p?((ue=D.f.RGBA).eb=ge,ue.fb=0,ue.A=Ae,ue.size=Le):((ue=D.f.kb).y=ge,ue.O=0,ue.fa=Ae,ue.Fd=Le,ue.f=ge,ue.N=0+Le,ue.Ab=w,ue.Cd=ne,ue.ea=ge,ue.W=0+Le+ne,ue.Db=w,ue.Ed=ne,p==12&&(ue.F=ge,ue.J=0+Le+2*ne),ue.Tc=oe,ue.lb=J)}if(w=1,J=D.S,ne=D.width,oe=D.height,J>=XA&&13>J)if(11>J)p=D.f.RGBA,w&=(Ae=Math.abs(p.A))*(oe-1)+ne<=p.size,w&=Ae>=ne*sd[J],w&=p.eb!=null;else{p=D.f.kb,Ae=(ne+1)/2,Le=(oe+1)/2,ue=Math.abs(p.fa),ge=Math.abs(p.Ab);var Ye=Math.abs(p.Db),xe=Math.abs(p.lb),Re=xe*(oe-1)+ne;w&=ue*(oe-1)+ne<=p.Fd,w&=ge*(Le-1)+Ae<=p.Cd,w=(w&=Ye*(Le-1)+Ae<=p.Ed)&ue>=ne&ge>=Ae&Ye>=Ae,w&=p.y!=null,w&=p.f!=null,w&=p.ea!=null,J==12&&(w&=xe>=ne,w&=Re<=p.Tc,w&=p.F!=null)}else w=0;p=w?0:2}}return p!=0||U!=null&&U.fd&&(p=El(D)),p}var Ua=64,ma=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],fa=24,to=32,hi=8,Ui=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(p){return p},V.Predictor2=function(p,w,U){return w[U+0]},V.Predictor3=function(p,w,U){return w[U+1]},V.Predictor4=function(p,w,U){return w[U-1]},V.Predictor5=function(p,w,U){return et(et(p,w[U+1]),w[U+0])},V.Predictor6=function(p,w,U){return et(p,w[U-1])},V.Predictor7=function(p,w,U){return et(p,w[U+0])},V.Predictor8=function(p,w,U){return et(w[U-1],w[U+0])},V.Predictor9=function(p,w,U){return et(w[U+0],w[U+1])},V.Predictor10=function(p,w,U){return et(et(p,w[U-1]),et(w[U+0],w[U+1]))},V.Predictor11=function(p,w,U){var D=w[U+0];return 0>=We(D>>24&255,p>>24&255,(w=w[U-1])>>24&255)+We(D>>16&255,p>>16&255,w>>16&255)+We(D>>8&255,p>>8&255,w>>8&255)+We(255&D,255&p,255&w)?D:p},V.Predictor12=function(p,w,U){var D=w[U+0];return(it((p>>24&255)+(D>>24&255)-((w=w[U-1])>>24&255))<<24|it((p>>16&255)+(D>>16&255)-(w>>16&255))<<16|it((p>>8&255)+(D>>8&255)-(w>>8&255))<<8|it((255&p)+(255&D)-(255&w)))>>>0},V.Predictor13=function(p,w,U){var D=w[U-1];return(Ue((p=et(p,w[U+0]))>>24&255,D>>24&255)<<24|Ue(p>>16&255,D>>16&255)<<16|Ue(p>>8&255,D>>8&255)<<8|Ue(255&p,255&D))>>>0};var Ii=V.PredictorAdd0;V.PredictorAdd1=Bt,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var mi=V.PredictorAdd2;wt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),wt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Dr,Ho=V.ColorIndexInverseTransform,fi=V.MapARGB,ti=V.VP8LColorIndexInverseTransformAlpha,Ko=V.MapAlpha,Vo=V.VP8LPredictorsAdd=[];Vo.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var Fl,_l,Li,so,ro,zo,no,$o,Ir,ea,Gs,Ar,Or,tn,pi,Wc,Ac,ao,YA,dc,JA,kd,qc,kl,Ul,Ud,Yc,Id,Ld=i(511),Qd=i(2041),Td=i(225),Pd=i(767),Rd=0,Qi=Qd,uc=Td,ta=Pd,si=Ld,XA=0,Go=1,Ku=2,Jc=3,Xc=4,pr=5,ZA=6,hc=7,Il=8,Zc=9,eA=10,tA=[2,3,7],ed=[3,3,11],Ll=[280,256,256,256,40],Vu=[0,1,1,1,0],zu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],_=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],M=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Z=8,we=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],qe=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Kt=null,Wt=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ps=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sn=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Mr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ql=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],$u=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Gu=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],pa=[],gi=[],Ia=[],io=1,sA=2,sa=[],La=[];Fa("UpsampleRgbLinePair",Zi,3),Fa("UpsampleBgrLinePair",fn,3),Fa("UpsampleRgbaLinePair",en,4),Fa("UpsampleBgraLinePair",Sl,4),Fa("UpsampleArgbLinePair",Oo,4),Fa("UpsampleRgba4444LinePair",Za,2),Fa("UpsampleRgb565LinePair",_a,2);var Rp=V.UpsampleRgbLinePair,Dp=V.UpsampleBgrLinePair,Tl=V.UpsampleRgbaLinePair,rA=V.UpsampleBgraLinePair,mc=V.UpsampleArgbLinePair,td=V.UpsampleRgba4444LinePair,Wu=V.UpsampleRgb565LinePair,Wo=16,Ti=1<<Wo-1,dr=-227,gr=482,Pl=6,Rn=0,Qa=i(256),fc=i(256),nA=i(256),Ta=i(256),Dd=i(gr-dr),Yh=i(gr-dr);ka("YuvToRgbRow",Zi,3),ka("YuvToBgrRow",fn,3),ka("YuvToRgbaRow",en,4),ka("YuvToBgraRow",Sl,4),ka("YuvToArgbRow",Oo,4),ka("YuvToRgba4444Row",Za,2),ka("YuvToRgb565Row",_a,2);var qu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],pc=[0,2,8],Jh=[8,7,6,4,4,2,2,2,1,1,1,1],qo=1;this.WebPDecodeRGBA=function(p,w,U,D,J){var ne=Go,oe=new ht,Ae=new Yt;oe.ba=Ae,Ae.S=ne,Ae.width=[Ae.width],Ae.height=[Ae.height];var ue=Ae.width,ge=Ae.height,Le=new Ht;if(Le==null||p==null)var Ye=2;else t(Le!=null),Ye=eo(p,w,U,Le.width,Le.height,Le.Pd,Le.Qd,Le.format,null);if(Ye!=0?ue=0:(ue!=null&&(ue[0]=Le.width[0]),ge!=null&&(ge[0]=Le.height[0]),ue=1),ue){Ae.width=Ae.width[0],Ae.height=Ae.height[0],D!=null&&(D[0]=Ae.width),J!=null&&(J[0]=Ae.height);e:{if(D=new xl,(J=new vt).data=p,J.w=w,J.ha=U,J.kd=1,w=[0],t(J!=null),((p=eo(J.data,J.w,J.ha,null,null,null,w,null,J))==0||p==7)&&w[0]&&(p=4),(w=p)==0){if(t(oe!=null),D.data=J.data,D.w=J.w+J.offset,D.ha=J.ha-J.offset,D.put=yt,D.ac=Xs,D.bc=Fs,D.ma=oe,J.xa){if((p=Be())==null){oe=1;break e}if((function(xe,Re){var Ge=[0],ut=[0],Ze=[0];t:for(;;){if(xe==null)return 0;if(Re==null)return xe.a=2,0;if(xe.l=Re,xe.a=0,le(xe.m,Re.data,Re.w,Re.ha),!us(xe.m,Ge,ut,Ze)){xe.a=3;break t}if(xe.xb=sA,Re.width=Ge[0],Re.height=ut[0],!js(Ge[0],ut[0],1,xe,null))break t;return 1}return t(xe.a!=0),0})(p,D)){if(D=(w=ki(D.width,D.height,oe.Oa,oe.ba))==0){t:{D=p;s:for(;;){if(D==null){D=0;break t}if(t(D.s.yc!=null),t(D.s.Ya!=null),t(0<D.s.Wb),t((U=D.l)!=null),t((J=U.ma)!=null),D.xb!=0){if(D.ca=J.ba,D.tb=J.tb,t(D.ca!=null),!Mo(J.Oa,U,Jc)){D.a=2;break s}if(!rr(D,U.width)||U.da)break s;if((U.da||Lt(D.ca.S))&&Xn(),11>D.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),D.ca.f.kb.F!=null&&Xn()),D.Pb&&0<D.s.ua&&D.s.vb.X==null&&!X(D.s.vb,D.s.Wa.Xa)){D.a=1;break s}D.xb=0}if(!Cs(D,D.V,D.Ba,D.c,D.i,U.o,Na))break s;J.Dc=D.Ma,D=1;break t}t(D.a!=0),D=0}D=!D}D&&(w=p.a)}else w=p.a}else{if((p=new WA)==null){oe=1;break e}if(p.Fa=J.na,p.P=J.P,p.qc=J.Sa,qn(p,D)){if((w=ki(D.width,D.height,oe.Oa,oe.ba))==0){if(p.Aa=0,U=oe.Oa,t((J=p)!=null),U!=null){if(0<(ue=0>(ue=U.Md)?0:100<ue?255:255*ue/100)){for(ge=Le=0;4>ge;++ge)12>(Ye=J.pb[ge]).lc&&(Ye.ia=ue*Jh[0>Ye.lc?0:Ye.lc]>>3),Le|=Ye.ia;Le&&(alert("todo:VP8InitRandom"),J.ia=1)}J.Ga=U.Id,100<J.Ga?J.Ga=100:0>J.Ga&&(J.Ga=0)}(function(xe,Re){if(xe==null)return 0;if(Re==null)return $r(xe,2,"NULL VP8Io parameter in VP8Decode().");if(!xe.cb&&!qn(xe,Re))return 0;if(t(xe.cb),Re.ac==null||Re.ac(Re)){Re.ob&&(xe.L=0);var Ge=pc[xe.L];if(xe.L==2?(xe.yb=0,xe.zb=0):(xe.yb=Re.v-Ge>>4,xe.zb=Re.j-Ge>>4,0>xe.yb&&(xe.yb=0),0>xe.zb&&(xe.zb=0)),xe.Va=Re.o+15+Ge>>4,xe.Hb=Re.va+15+Ge>>4,xe.Hb>xe.za&&(xe.Hb=xe.za),xe.Va>xe.Ub&&(xe.Va=xe.Ub),0<xe.L){var ut=xe.ed;for(Ge=0;4>Ge;++Ge){var Ze;if(xe.Qa.Cb){var ot=xe.Qa.Lb[Ge];xe.Qa.Fb||(ot+=ut.Tb)}else ot=ut.Tb;for(Ze=0;1>=Ze;++Ze){var ct=xe.gd[Ge][Ze],pt=ot;if(ut.Pc&&(pt+=ut.vd[0],Ze&&(pt+=ut.od[0])),0<(pt=0>pt?0:63<pt?63:pt)){var xt=pt;0<ut.wb&&(xt=4<ut.wb?xt>>2:xt>>1)>9-ut.wb&&(xt=9-ut.wb),1>xt&&(xt=1),ct.dd=xt,ct.tc=2*pt+xt,ct.ld=40<=pt?2:15<=pt?1:0}else ct.tc=0;ct.La=Ze}}}Ge=0}else $r(xe,6,"Frame setup failed"),Ge=xe.a;if(Ge=Ge==0){if(Ge){xe.$c=0,0<xe.Aa||(xe.Ic=qo);t:{Ge=xe.Ic,ut=4*(xt=xe.za);var cs=32*xt,Jt=xt+1,_s=0<xe.L?xt*(0<xe.Aa?2:1):0,ts=(xe.Aa==2?2:1)*xt;if((ct=ut+832+(Ze=3*(16*Ge+pc[xe.L])/2*cs)+(ot=xe.Fa!=null&&0<xe.Fa.length?xe.Kc.c*xe.Kc.i:0))!=ct)Ge=0;else{if(ct>xe.Vb){if(xe.Vb=0,xe.Ec=i(ct),xe.Fc=0,xe.Ec==null){Ge=$r(xe,1,"no memory during frame initialization.");break t}xe.Vb=ct}ct=xe.Ec,pt=xe.Fc,xe.Ac=ct,xe.Bc=pt,pt+=ut,xe.Gd=c(cs,da),xe.Hd=0,xe.rb=c(Jt+1,Wi),xe.sb=1,xe.wa=_s?c(_s,Aa):null,xe.Y=0,xe.D.Nb=0,xe.D.wa=xe.wa,xe.D.Y=xe.Y,0<xe.Aa&&(xe.D.Y+=xt),t(!0),xe.oc=ct,xe.pc=pt,pt+=832,xe.ya=c(ts,gl),xe.aa=0,xe.D.ya=xe.ya,xe.D.aa=xe.aa,xe.Aa==2&&(xe.D.aa+=xt),xe.R=16*xt,xe.B=8*xt,xt=(cs=pc[xe.L])*xe.R,cs=cs/2*xe.B,xe.sa=ct,xe.ta=pt+xt,xe.qa=xe.sa,xe.ra=xe.ta+16*Ge*xe.R+cs,xe.Ha=xe.qa,xe.Ia=xe.ra+8*Ge*xe.B+cs,xe.$c=0,pt+=Ze,xe.mb=ot?ct:null,xe.nb=ot?pt:null,t(pt+ot<=xe.Fc+xe.Vb),Co(xe),a(xe.Ac,xe.Bc,0,ut),Ge=1}}if(Ge){if(Re.ka=0,Re.y=xe.sa,Re.O=xe.ta,Re.f=xe.qa,Re.N=xe.ra,Re.ea=xe.Ha,Re.Vd=xe.Ia,Re.fa=xe.R,Re.Rc=xe.B,Re.F=null,Re.J=0,!Rd){for(Ge=-255;255>=Ge;++Ge)Ld[255+Ge]=0>Ge?-Ge:Ge;for(Ge=-1020;1020>=Ge;++Ge)Qd[1020+Ge]=-128>Ge?-128:127<Ge?127:Ge;for(Ge=-112;112>=Ge;++Ge)Td[112+Ge]=-16>Ge?-16:15<Ge?15:Ge;for(Ge=-255;510>=Ge;++Ge)Pd[255+Ge]=0>Ge?0:255<Ge?255:Ge;Rd=1}no=Eo,$o=So,ea=Ja,Gs=wl,Ar=Ys,Ir=vl,Or=Bn,tn=Ea,pi=Y,Wc=ve,Ac=Bl,ao=C,YA=Fe,dc=Ke,JA=_i,kd=Yi,qc=lc,kl=Ro,gi[0]=$c,gi[1]=Fo,gi[2]=Ai,gi[3]=qA,gi[4]=ha,gi[5]=Gc,gi[6]=Fi,gi[7]=bl,gi[8]=oc,gi[9]=Io,pa[0]=ci,pa[1]=ic,pa[2]=_o,pa[3]=ko,pa[4]=Yn,pa[5]=ua,pa[6]=Uo,Ia[0]=yl,Ia[1]=zc,Ia[2]=Xa,Ia[3]=Lo,Ia[4]=Nl,Ia[5]=Qo,Ia[6]=jl,Ge=1}else Ge=0}Ge&&(Ge=(function(Os,Gr){for(Os.M=0;Os.M<Os.Va;++Os.M){var ks,Xt=Os.Jc[Os.M&Os.Xb],Dt=Os.m,rn=Os;for(ks=0;ks<rn.za;++ks){var bs=Dt,Rs=rn,Cr=Rs.Ac,Cn=Rs.Bc+4*ks,cn=Rs.zc,Hr=Rs.ya[Rs.aa+ks];if(Rs.Qa.Bb?Hr.$b=je(bs,Rs.Pa.jb[0])?2+je(bs,Rs.Pa.jb[2]):je(bs,Rs.Pa.jb[1]):Hr.$b=0,Rs.kc&&(Hr.Ad=je(bs,Rs.Bd)),Hr.Za=!je(bs,145)+0,Hr.Za){var pn=Hr.Ob,Sn=0;for(Rs=0;4>Rs;++Rs){var Lr,Ws=cn[0+Rs];for(Lr=0;4>Lr;++Lr){Ws=Ql[Cr[Cn+Lr]][Ws];for(var nr=sn[je(bs,Ws[0])];0<nr;)nr=sn[2*nr+je(bs,Ws[nr])];Ws=-nr,Cr[Cn+Lr]=Ws}n(pn,Sn,Cr,Cn,4),Sn+=4,cn[0+Rs]=Ws}}else Ws=je(bs,156)?je(bs,128)?1:3:je(bs,163)?2:0,Hr.Ob[0]=Ws,a(Cr,Cn,Ws,4),a(cn,0,Ws,4);Hr.Dd=je(bs,142)?je(bs,114)?je(bs,183)?1:3:2:0}if(rn.m.Ka)return $r(Os,7,"Premature end-of-partition0 encountered.");for(;Os.ja<Os.za;++Os.ja){if(rn=Xt,bs=(Dt=Os).rb[Dt.sb-1],Cr=Dt.rb[Dt.sb+Dt.ja],ks=Dt.ya[Dt.aa+Dt.ja],Cn=Dt.kc?ks.Ad:0)bs.la=Cr.la=0,ks.Za||(bs.Na=Cr.Na=0),ks.Hc=0,ks.Gc=0,ks.ia=0;else{var Qr,ar;if(bs=Cr,Cr=rn,Cn=Dt.Pa.Xc,cn=Dt.ya[Dt.aa+Dt.ja],Hr=Dt.pb[cn.$b],Rs=cn.ad,pn=0,Sn=Dt.rb[Dt.sb-1],Ws=Lr=0,a(Rs,pn,0,384),cn.Za)var Wr=0,qr=Cn[3];else{nr=i(16);var br=bs.Na+Sn.Na;if(br=Kt(Cr,Cn[1],br,Hr.Eb,0,nr,0),bs.Na=Sn.Na=(0<br)+0,1<br)no(nr,0,Rs,pn);else{var ra=nr[0]+3>>3;for(nr=0;256>nr;nr+=16)Rs[pn+nr]=ra}Wr=1,qr=Cn[0]}var xr=15&bs.la,yr=15&Sn.la;for(nr=0;4>nr;++nr){var An=1&yr;for(ra=ar=0;4>ra;++ra)xr=xr>>1|(An=(br=Kt(Cr,qr,br=An+(1&xr),Hr.Sc,Wr,Rs,pn))>Wr)<<7,ar=ar<<2|(3<br?3:1<br?2:Rs[pn+0]!=0),pn+=16;xr>>=4,yr=yr>>1|An<<7,Lr=(Lr<<8|ar)>>>0}for(qr=xr,Wr=yr>>4,Qr=0;4>Qr;Qr+=2){for(ar=0,xr=bs.la>>4+Qr,yr=Sn.la>>4+Qr,nr=0;2>nr;++nr){for(An=1&yr,ra=0;2>ra;++ra)br=An+(1&xr),xr=xr>>1|(An=0<(br=Kt(Cr,Cn[2],br,Hr.Qc,0,Rs,pn)))<<3,ar=ar<<2|(3<br?3:1<br?2:Rs[pn+0]!=0),pn+=16;xr>>=2,yr=yr>>1|An<<5}Ws|=ar<<4*Qr,qr|=xr<<4<<Qr,Wr|=(240&yr)<<Qr}bs.la=qr,Sn.la=Wr,cn.Hc=Lr,cn.Gc=Ws,cn.ia=43690&Ws?0:Hr.ia,Cn=!(Lr|Ws)}if(0<Dt.L&&(Dt.wa[Dt.Y+Dt.ja]=Dt.gd[ks.$b][ks.Za],Dt.wa[Dt.Y+Dt.ja].La|=!Cn),rn.Ka)return $r(Os,7,"Premature end-of-file encountered.")}if(Co(Os),Dt=Gr,rn=1,ks=(Xt=Os).D,bs=0<Xt.L&&Xt.M>=Xt.zb&&Xt.M<=Xt.Va,Xt.Aa==0)t:{if(ks.M=Xt.M,ks.uc=bs,Zn(Xt,ks),rn=1,ks=(ar=Xt.D).Nb,bs=(Ws=pc[Xt.L])*Xt.R,Cr=Ws/2*Xt.B,nr=16*ks*Xt.R,ra=8*ks*Xt.B,Cn=Xt.sa,cn=Xt.ta-bs+nr,Hr=Xt.qa,Rs=Xt.ra-Cr+ra,pn=Xt.Ha,Sn=Xt.Ia-Cr+ra,yr=(xr=ar.M)==0,Lr=xr>=Xt.Va-1,Xt.Aa==2&&Zn(Xt,ar),ar.uc)for(An=(br=Xt).D.M,t(br.D.uc),ar=br.yb;ar<br.Hb;++ar){Wr=ar,qr=An;var Dn=(Pa=(on=br).D).Nb;Qr=on.R;var Pa=Pa.wa[Pa.Y+Wr],nn=on.sa,an=on.ta+16*Dn*Qr+16*Wr,na=Pa.dd,Nr=Pa.tc;if(Nr!=0)if(t(3<=Nr),on.L==1)0<Wr&&kd(nn,an,Qr,Nr+4),Pa.La&&kl(nn,an,Qr,Nr),0<qr&&JA(nn,an,Qr,Nr+4),Pa.La&&qc(nn,an,Qr,Nr);else{var aa=on.B,xi=on.qa,Pi=on.ra+8*Dn*aa+8*Wr,En=on.Ha,on=on.Ia+8*Dn*aa+8*Wr;Dn=Pa.ld,0<Wr&&(tn(nn,an,Qr,Nr+4,na,Dn),Wc(xi,Pi,En,on,aa,Nr+4,na,Dn)),Pa.La&&(ao(nn,an,Qr,Nr,na,Dn),dc(xi,Pi,En,on,aa,Nr,na,Dn)),0<qr&&(Or(nn,an,Qr,Nr+4,na,Dn),pi(xi,Pi,En,on,aa,Nr+4,na,Dn)),Pa.La&&(Ac(nn,an,Qr,Nr,na,Dn),YA(xi,Pi,En,on,aa,Nr,na,Dn))}}if(Xt.ia&&alert("todo:DitherRow"),Dt.put!=null){if(ar=16*xr,xr=16*(xr+1),yr?(Dt.y=Xt.sa,Dt.O=Xt.ta+nr,Dt.f=Xt.qa,Dt.N=Xt.ra+ra,Dt.ea=Xt.Ha,Dt.W=Xt.Ia+ra):(ar-=Ws,Dt.y=Cn,Dt.O=cn,Dt.f=Hr,Dt.N=Rs,Dt.ea=pn,Dt.W=Sn),Lr||(xr-=Ws),xr>Dt.o&&(xr=Dt.o),Dt.F=null,Dt.J=null,Xt.Fa!=null&&0<Xt.Fa.length&&ar<xr&&(Dt.J=fr(Xt,Dt,ar,xr-ar),Dt.F=Xt.mb,Dt.F==null&&Dt.F.length==0)){rn=$r(Xt,3,"Could not decode alpha data.");break t}ar<Dt.j&&(Ws=Dt.j-ar,ar=Dt.j,t(!(1&Ws)),Dt.O+=Xt.R*Ws,Dt.N+=Xt.B*(Ws>>1),Dt.W+=Xt.B*(Ws>>1),Dt.F!=null&&(Dt.J+=Dt.width*Ws)),ar<xr&&(Dt.O+=Dt.v,Dt.N+=Dt.v>>1,Dt.W+=Dt.v>>1,Dt.F!=null&&(Dt.J+=Dt.v),Dt.ka=ar-Dt.j,Dt.U=Dt.va-Dt.v,Dt.T=xr-ar,rn=Dt.put(Dt))}ks+1!=Xt.Ic||Lr||(n(Xt.sa,Xt.ta-bs,Cn,cn+16*Xt.R,bs),n(Xt.qa,Xt.ra-Cr,Hr,Rs+8*Xt.B,Cr),n(Xt.Ha,Xt.Ia-Cr,pn,Sn+8*Xt.B,Cr))}if(!rn)return $r(Os,6,"Output aborted.")}return 1})(xe,Re)),Re.bc!=null&&Re.bc(Re),Ge&=1}return Ge?(xe.cb=0,Ge):0})(p,D)||(w=p.a)}}else w=p.a}w==0&&oe.Oa!=null&&oe.Oa.fd&&(w=El(oe.ba))}oe=w}ne=oe!=0?null:11>ne?Ae.f.RGBA.eb:Ae.f.kb.y}else ne=null;return ne};var sd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(V,G){for(var L="",F=0;F<4;F++)L+=String.fromCharCode(V[G++]);return L}function m(V,G){return V[G+0]|V[G+1]<<8}function f(V,G){return(V[G+0]|V[G+1]<<8|V[G+2]<<16)>>>0}function x(V,G){return(V[G+0]|V[G+1]<<8|V[G+2]<<16|V[G+3]<<24)>>>0}new d;var g=[0],y=[0],b=[],B=new d,N=r,E=(function(V,G){var L={},F=0,O=!1,P=0,ce=0;if(L.frames=[],!(function(R,q){for(var te=0;te<4;te++)if(R[q+te]!="RIFF".charCodeAt(te))return!0;return!1})(V,G)){for(x(V,G+=4),G+=8;G<V.length;){var W=u(V,G),ae=x(V,G+=4);G+=4;var K=ae+(1&ae);switch(W){case"VP8 ":case"VP8L":L.frames[F]===void 0&&(L.frames[F]={}),(se=L.frames[F]).src_off=O?ce:G-8,se.src_size=P+ae+8,F++,O&&(O=!1,P=0,ce=0);break;case"VP8X":(se=L.header={}).feature_flags=V[G];var le=G+4;se.canvas_width=1+f(V,le),le+=3,se.canvas_height=1+f(V,le),le+=3;break;case"ALPH":O=!0,P=K+8,ce=G-8;break;case"ANIM":(se=L.header).bgcolor=x(V,G),le=G+4,se.loop_count=m(V,le),le+=2;break;case"ANMF":var ie,se;(se=L.frames[F]={}).offset_x=2*f(V,G),G+=3,se.offset_y=2*f(V,G),G+=3,se.width=1+f(V,G),G+=3,se.height=1+f(V,G),G+=3,se.duration=f(V,G),G+=3,ie=V[G++],se.dispose=1&ie,se.blend=ie>>1&1}W!="ANMF"&&(G+=K)}return L}})(N,0);E.response=N,E.rgbaoutput=!0,E.dataurl=!1;var I=E.header?E.header:null,k=E.frames?E.frames:null;if(I){I.loop_counter=I.loop_count,g=[I.canvas_height],y=[I.canvas_width];for(var $=0;$<k.length&&k[$].blend!=0;$++);}var z=k[0],H=B.WebPDecodeRGBA(N,z.src_off,z.src_size,y,g);z.rgba=H,z.imgwidth=y[0],z.imgheight=g[0];for(var T=0;T<y[0]*g[0]*4;T++)b[T]=H[T];return this.width=y,this.height=g,this.data=b,this}(function(r){var t,s,n,a,i,c,A,d,u,m=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new d,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new c,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new c,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,s=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,c=this.internal.Point,A=this.internal.Rectangle,d=this.internal.Matrix,u=new m}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=R;Object.defineProperty(this,"pdf",{get:function(){return q}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(X){te=!!X}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(X){de=!!X}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(X){isNaN(X)||(fe=X)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(X){isNaN(X)||(me=X)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(X){var Ie;typeof X=="number"?Ie=[X,X,X,X]:((Ie=new Array(4))[0]=X[0],Ie[1]=X.length>=2?X[1]:Ie[0],Ie[2]=X.length>=3?X[2]:Ie[0],Ie[3]=X.length>=4?X[3]:Ie[1]),u.margin=Ie}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(X){pe=X}});var ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return ee},set:function(X){ee=X}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(X){je=X}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(X){X instanceof m&&(u=X)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(X){u.path=X}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(X){Pe=X}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(X){var Ie;Ie=x(X),this.ctx.fillStyle=Ie.style,this.ctx.isFillTransparent=Ie.a===0,this.ctx.fillOpacity=Ie.a,this.pdf.setFillColor(Ie.r,Ie.g,Ie.b,{a:Ie.a}),this.pdf.setTextColor(Ie.r,Ie.g,Ie.b,{a:Ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(X){var Ie=x(X);this.ctx.strokeStyle=Ie.style,this.ctx.isStrokeTransparent=Ie.a===0,this.ctx.strokeOpacity=Ie.a,Ie.a===0?this.pdf.setDrawColor(255,255,255):(Ie.a,this.pdf.setDrawColor(Ie.r,Ie.g,Ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(X){["butt","round","square"].indexOf(X)!==-1&&(this.ctx.lineCap=X,this.pdf.setLineCap(X))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(X){isNaN(X)||(this.ctx.lineWidth=X,this.pdf.setLineWidth(X))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(X){["bevel","round","miter"].indexOf(X)!==-1&&(this.ctx.lineJoin=X,this.pdf.setLineJoin(X))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(X){isNaN(X)||(this.ctx.miterLimit=X,this.pdf.setMiterLimit(X))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(X){this.ctx.textBaseline=X}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(X){["right","end","center","left","start"].indexOf(X)!==-1&&(this.ctx.textAlign=X)}});var De=null,nt=null,Se=null;Object.defineProperty(this,"fontFaces",{get:function(){return Se},set:function(X){De=null,nt=null,Se=X}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(X){var Ie;if(this.ctx.font=X,(Ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(X))!==null){var rt=Ie[1];Ie[2];var Ee=Ie[3],Te=Ie[4];Ie[5];var dt=Ie[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Te)[2];Te=Math.floor(st==="px"?parseFloat(Te)*this.pdf.internal.scaleFactor:st==="em"?parseFloat(Te)*this.pdf.getFontSize():parseFloat(Te)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Te);var ft=(function(wt){var As,_e,$e=[],gt=wt.trim();if(gt==="")return Bx;if(gt in xy)return[xy[gt]];for(;gt!=="";){switch(_e=null,As=(gt=wy(gt)).charAt(0)){case'"':case"'":_e=hD(gt.substring(1),As);break;default:_e=mD(gt)}if(_e===null||($e.push(_e[0]),(gt=wy(_e[1]))!==""&&gt.charAt(0)!==","))return Bx;gt=gt.replace(/^,/,"")}return $e})(dt);if(this.fontFaces){var et=(function(wt,As){var _e=wt.getFontList(),$e=JSON.stringify(_e);if(De===null||nt!==$e){var gt=(function(Ft){var bt=[];return Object.keys(Ft).forEach(function(Ot){Ft[Ot].forEach(function(Lt){var Vt=null;switch(Lt){case"bold":Vt={family:Ot,weight:"bold"};break;case"italic":Vt={family:Ot,style:"italic"};break;case"bolditalic":Vt={family:Ot,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:Ot}}Vt!==null&&(Vt.ref={name:Ot,style:Lt},bt.push(Vt))})}),bt})(_e);De=(function(Ft){for(var bt={},Ot=0;Ot<Ft.length;++Ot){var Lt=jx(Ft[Ot]),Vt=Lt.family,Ns=Lt.stretch,Yt=Lt.style,Ht=Lt.weight;bt[Vt]=bt[Vt]||{},bt[Vt][Ns]=bt[Vt][Ns]||{},bt[Vt][Ns][Yt]=bt[Vt][Ns][Yt]||{},bt[Vt][Ns][Yt][Ht]=Lt}return bt})(gt.concat(As)),nt=$e}return De})(this.pdf,this.fontFaces),it=ft.map(function(wt){return{family:wt,stretch:"normal",weight:Ee,style:rt}}),Ue=(function(wt,As,_e){for(var $e=(_e=_e||{}).defaultFontFamily||"times",gt=Object.assign({},uD,_e.genericFontFamilies||{}),Ft=null,bt=null,Ot=0;Ot<As.length;++Ot)if(gt[(Ft=jx(As[Ot])).family]&&(Ft.family=gt[Ft.family]),wt.hasOwnProperty(Ft.family)){bt=wt[Ft.family];break}if(!(bt=bt||wt[$e]))throw new Error("Could not find a font-family for the rule '"+vy(Ft)+"' and default family '"+$e+"'.");if(bt=(function(Lt,Vt){if(Vt[Lt])return Vt[Lt];var Ns=B0[Lt],Yt=Ns<=B0.normal?-1:1,Ht=gy(Vt,VB,Ns,Yt);if(!Ht)throw new Error("Could not find a matching font-stretch value for "+Lt);return Ht})(Ft.stretch,bt),bt=(function(Lt,Vt){if(Vt[Lt])return Vt[Lt];for(var Ns=KB[Lt],Yt=0;Yt<Ns.length;++Yt)if(Vt[Ns[Yt]])return Vt[Ns[Yt]];throw new Error("Could not find a matching font-style for "+Lt)})(Ft.style,bt),!(bt=(function(Lt,Vt){if(Vt[Lt])return Vt[Lt];if(Lt===400&&Vt[500])return Vt[500];if(Lt===500&&Vt[400])return Vt[400];var Ns=dD[Lt],Yt=gy(Vt,zB,Ns,Lt<400?-1:1);if(!Yt)throw new Error("Could not find a matching font-weight for value "+Lt);return Yt})(Ft.weight,bt)))throw new Error("Failed to resolve a font for the rule '"+vy(Ft)+"'.");return bt})(et,it);this.pdf.setFont(Ue.ref.name,Ue.ref.style)}else{var We="";(Ee==="bold"||parseInt(Ee,10)>=700||rt==="bold")&&(We="bold"),rt==="italic"&&(We+="italic"),We.length===0&&(We="normal");for(var Bt="",mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Me=0;Me<ft.length;Me++){if(this.pdf.internal.getFont(ft[Me],We,{noFallback:!0,disableWarning:!0})!==void 0){Bt=ft[Me];break}if(We==="bolditalic"&&this.pdf.internal.getFont(ft[Me],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Bt=ft[Me],We="bold";else if(this.pdf.internal.getFont(ft[Me],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Bt=ft[Me],We="normal";break}}if(Bt===""){for(var Ve=0;Ve<ft.length;Ve++)if(mt[ft[Ve]]){Bt=mt[ft[Ve]];break}}Bt=Bt===""?"Times":Bt,this.pdf.setFont(Bt,We)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(X){this.ctx.globalCompositeOperation=X}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(X){this.ctx.globalAlpha=X}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(X){this.ctx.lineDashOffset=X,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(X){this.ctx.lineDash=X,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(X){this.ctx.ignoreClearRect=!!X}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){k.call(this,"fill",!1)},f.prototype.stroke=function(){k.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,q){if(isNaN(R)||isNaN(q))throw _r.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new c(R,q));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new c(R,q)},f.prototype.closePath=function(){var R=new c(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&jr(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){R=new c(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(R.x,R.y)},f.prototype.lineTo=function(R,q){if(isNaN(R)||isNaN(q))throw _r.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new c(R,q));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new c(te.x,te.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,q,te,de){if(isNaN(te)||isNaN(de)||isNaN(R)||isNaN(q))throw _r.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new c(te,de)),me=this.ctx.transform.applyToPoint(new c(R,q));this.path.push({type:"qct",x1:me.x,y1:me.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(fe.x,fe.y)},f.prototype.bezierCurveTo=function(R,q,te,de,fe,me){if(isNaN(fe)||isNaN(me)||isNaN(R)||isNaN(q)||isNaN(te)||isNaN(de))throw _r.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new c(fe,me)),ee=this.ctx.transform.applyToPoint(new c(R,q)),je=this.ctx.transform.applyToPoint(new c(te,de));this.path.push({type:"bct",x1:ee.x,y1:ee.y,x2:je.x,y2:je.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new c(pe.x,pe.y)},f.prototype.arc=function(R,q,te,de,fe,me){if(isNaN(R)||isNaN(q)||isNaN(te)||isNaN(de)||isNaN(fe))throw _r.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new c(R,q));R=pe.x,q=pe.y;var ee=this.ctx.transform.applyToPoint(new c(0,te)),je=this.ctx.transform.applyToPoint(new c(0,0));te=Math.sqrt(Math.pow(ee.x-je.x,2)+Math.pow(ee.y-je.y,2))}Math.abs(fe-de)>=2*Math.PI&&(de=0,fe=2*Math.PI),this.path.push({type:"arc",x:R,y:q,radius:te,startAngle:de,endAngle:fe,counterclockwise:me})},f.prototype.arcTo=function(R,q,te,de,fe){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,q,te,de){if(isNaN(R)||isNaN(q)||isNaN(te)||isNaN(de))throw _r.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,q),this.lineTo(R+te,q),this.lineTo(R+te,q+de),this.lineTo(R,q+de),this.lineTo(R,q),this.lineTo(R+te,q),this.lineTo(R,q)},f.prototype.fillRect=function(R,q,te,de){if(isNaN(R)||isNaN(q)||isNaN(te)||isNaN(de))throw _r.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,q,te,de),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},f.prototype.strokeRect=function(R,q,te,de){if(isNaN(R)||isNaN(q)||isNaN(te)||isNaN(de))throw _r.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(R,q,te,de),this.stroke())},f.prototype.clearRect=function(R,q,te,de){if(isNaN(R)||isNaN(q)||isNaN(te)||isNaN(de))throw _r.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,q,te,de))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(q),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(R){var q,te,de,fe;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))q=0,te=0,de=0,fe=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(me!==null)q=parseInt(me[1]),te=parseInt(me[2]),de=parseInt(me[3]),fe=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)q=parseInt(me[1]),te=parseInt(me[2]),de=parseInt(me[3]),fe=parseFloat(me[4]);else{if(fe=1,typeof R=="string"&&R.charAt(0)!=="#"){var pe=new TB(R);R=pe.ok?pe.toHex():"#000000"}R.length===4?(q=R.substring(1,2),q+=q,te=R.substring(2,3),te+=te,de=R.substring(3,4),de+=de):(q=R.substring(1,3),te=R.substring(3,5),de=R.substring(5,7)),q=parseInt(q,16),te=parseInt(te,16),de=parseInt(de,16)}}return{r:q,g:te,b:de,a:fe,style:R}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,q,te,de){if(isNaN(q)||isNaN(te)||typeof R!="string")throw _r.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!g.call(this)){var fe=K(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;F.call(this,{text:R,x:q,y:te,scale:me,angle:fe,align:this.textAlign,maxWidth:de})}},f.prototype.strokeText=function(R,q,te,de){if(isNaN(q)||isNaN(te)||typeof R!="string")throw _r.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){de=isNaN(de)?void 0:de;var fe=K(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;F.call(this,{text:R,x:q,y:te,scale:me,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:de})}},f.prototype.measureText=function(R){if(typeof R!="string")throw _r.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,te=this.pdf.internal.scaleFactor,de=q.internal.getFontSize(),fe=q.getStringUnitWidth(R)*de/q.internal.scaleFactor;return new function(me){var pe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this}({width:fe*=Math.round(96*te/72*1e4)/1e4})},f.prototype.scale=function(R,q){if(isNaN(R)||isNaN(q))throw _r.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new d(R,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.rotate=function(R){if(isNaN(R))throw _r.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new d(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(R,q){if(isNaN(R)||isNaN(q))throw _r.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new d(1,0,0,1,R,q);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.transform=function(R,q,te,de,fe,me){if(isNaN(R)||isNaN(q)||isNaN(te)||isNaN(de)||isNaN(fe)||isNaN(me))throw _r.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new d(R,q,te,de,fe,me);this.ctx.transform=this.ctx.transform.multiply(pe)},f.prototype.setTransform=function(R,q,te,de,fe,me){R=isNaN(R)?1:R,q=isNaN(q)?0:q,te=isNaN(te)?0:te,de=isNaN(de)?1:de,fe=isNaN(fe)?0:fe,me=isNaN(me)?0:me,this.ctx.transform=new d(R,q,te,de,fe,me)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,q,te,de,fe,me,pe,ee,je){var Pe=this.pdf.getImageProperties(R),De=1,nt=1,Se=1,X=1;de!==void 0&&ee!==void 0&&(Se=ee/de,X=je/fe,De=Pe.width/de*ee/de,nt=Pe.height/fe*je/fe),me===void 0&&(me=q,pe=te,q=0,te=0),de!==void 0&&ee===void 0&&(ee=de,je=fe),de===void 0&&ee===void 0&&(ee=Pe.width,je=Pe.height);var Ie=this.ctx.transform.decompose(),rt=K(Ie.rotate.shx),Ee=new d,Te=(Ee=(Ee=(Ee=Ee.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new A(me-q*Se,pe-te*X,de*De,fe*nt));if(this.autoPaging){for(var dt,st=B.call(this,Te),ft=[],et=0;et<st.length;et+=1)ft.indexOf(st[et])===-1&&ft.push(st[et]);I(ft);for(var it=ft[0],Ue=ft[ft.length-1],We=it;We<Ue+1;We++){this.pdf.setPage(We);var Bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mt=We===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=We===1?0:Me+(We-2)*Ve;if(this.ctx.clip_path.length!==0){var As=this.path;dt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(dt,this.posX+this.margin[3],-wt+mt+this.ctx.prevPageLastElemOffset),$.call(this,"fill",!0),this.path=As}var _e=JSON.parse(JSON.stringify(Te));_e=E([_e],this.posX+this.margin[3],-wt+mt+this.ctx.prevPageLastElemOffset)[0];var $e=(We>it||We<Ue)&&b.call(this);$e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,Ve,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,rt),$e&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(R,"JPEG",Te.x,Te.y,Te.w,Te.h,null,null,rt)};var B=function(R,q,te){var de=[];q=q||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":de.push(Math.floor((R.y+fe)/te)+1);break;case"arc":de.push(Math.floor((R.y+fe-R.radius)/te)+1),de.push(Math.floor((R.y+fe+R.radius)/te)+1);break;case"qct":var me=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);de.push(Math.floor((me.y+fe)/te)+1),de.push(Math.floor((me.y+me.h+fe)/te)+1);break;case"bct":var pe=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);de.push(Math.floor((pe.y+fe)/te)+1),de.push(Math.floor((pe.y+pe.h+fe)/te)+1);break;case"rect":de.push(Math.floor((R.y+fe)/te)+1),de.push(Math.floor((R.y+R.h+fe)/te)+1)}for(var ee=0;ee<de.length;ee+=1)for(;this.pdf.internal.getNumberOfPages()<de[ee];)N.call(this);return de},N=function(){var R=this.fillStyle,q=this.strokeStyle,te=this.font,de=this.lineCap,fe=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=q,this.font=te,this.lineCap=de,this.lineWidth=fe,this.lineJoin=me},E=function(R,q,te){for(var de=0;de<R.length;de++)switch(R[de].type){case"bct":R[de].x2+=q,R[de].y2+=te;case"qct":R[de].x1+=q,R[de].y1+=te;default:R[de].x+=q,R[de].y+=te}return R},I=function(R){return R.sort(function(q,te){return q-te})},k=function(R,q){var te=this.fillStyle,de=this.strokeStyle,fe=this.lineCap,me=this.lineWidth,pe=Math.abs(me*this.ctx.transform.scaleX),ee=this.lineJoin;if(this.autoPaging){for(var je,Pe,De=JSON.parse(JSON.stringify(this.path)),nt=JSON.parse(JSON.stringify(this.path)),Se=[],X=0;X<nt.length;X++)if(nt[X].x!==void 0)for(var Ie=B.call(this,nt[X]),rt=0;rt<Ie.length;rt+=1)Se.indexOf(Ie[rt])===-1&&Se.push(Ie[rt]);for(var Ee=0;Ee<Se.length;Ee++)for(;this.pdf.internal.getNumberOfPages()<Se[Ee];)N.call(this);I(Se);for(var Te=Se[0],dt=Se[Se.length-1],st=Te;st<dt+1;st++){this.pdf.setPage(st),this.fillStyle=te,this.strokeStyle=de,this.lineCap=fe,this.lineWidth=pe,this.lineJoin=ee;var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],et=st===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=st===1?0:it+(st-2)*Ue;if(this.ctx.clip_path.length!==0){var Bt=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(je,this.posX+this.margin[3],-We+et+this.ctx.prevPageLastElemOffset),$.call(this,R,!0),this.path=Bt}if(Pe=JSON.parse(JSON.stringify(De)),this.path=E(Pe,this.posX+this.margin[3],-We+et+this.ctx.prevPageLastElemOffset),q===!1||st===0){var mt=(st>Te||st<dt)&&b.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Ue,null).clip().discardPath()),$.call(this,R,q),mt&&this.pdf.restoreGraphicsState()}this.lineWidth=me}this.path=De}else this.lineWidth=pe,$.call(this,R,q),this.lineWidth=me},$=function(R,q){if((R!=="stroke"||q||!y.call(this))&&(R==="stroke"||q||!g.call(this))){for(var te,de,fe=[],me=this.path,pe=0;pe<me.length;pe++){var ee=me[pe];switch(ee.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:ee,deltas:[],abs:[]});break;case"lt":var je=fe.length;if(me[pe-1]&&!isNaN(me[pe-1].x)&&(te=[ee.x-me[pe-1].x,ee.y-me[pe-1].y],je>0)){for(;je>=0;je--)if(fe[je-1].close!==!0&&fe[je-1].begin!==!0){fe[je-1].deltas.push(te),fe[je-1].abs.push(ee);break}}break;case"bct":te=[ee.x1-me[pe-1].x,ee.y1-me[pe-1].y,ee.x2-me[pe-1].x,ee.y2-me[pe-1].y,ee.x-me[pe-1].x,ee.y-me[pe-1].y],fe[fe.length-1].deltas.push(te);break;case"qct":var Pe=me[pe-1].x+2/3*(ee.x1-me[pe-1].x),De=me[pe-1].y+2/3*(ee.y1-me[pe-1].y),nt=ee.x+2/3*(ee.x1-ee.x),Se=ee.y+2/3*(ee.y1-ee.y),X=ee.x,Ie=ee.y;te=[Pe-me[pe-1].x,De-me[pe-1].y,nt-me[pe-1].x,Se-me[pe-1].y,X-me[pe-1].x,Ie-me[pe-1].y],fe[fe.length-1].deltas.push(te);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(ee)}}de=q?null:R==="stroke"?"stroke":"fill";for(var rt=!1,Ee=0;Ee<fe.length;Ee++)if(fe[Ee].arc)for(var Te=fe[Ee].abs,dt=0;dt<Te.length;dt++){var st=Te[dt];st.type==="arc"?T.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,q,!rt):O.call(this,st.x,st.y),rt=!0}else if(fe[Ee].close===!0)this.pdf.internal.out("h"),rt=!1;else if(fe[Ee].begin!==!0){var ft=fe[Ee].start.x,et=fe[Ee].start.y;P.call(this,fe[Ee].deltas,ft,et),rt=!0}de&&V.call(this,de),q&&G.call(this)}},z=function(R){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-te;case"top":return R+q-te;case"hanging":return R+q-2*te;case"middle":return R+q/2-te;default:return R}},H=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(q,te){this.colorStops.push([q,te])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(R,q,te,de,fe,me,pe,ee,je){for(var Pe=W.call(this,te,de,fe,me),De=0;De<Pe.length;De++){var nt=Pe[De];De===0&&(je?L.call(this,nt.x1+R,nt.y1+q):O.call(this,nt.x1+R,nt.y1+q)),ce.call(this,R,q,nt.x2,nt.y2,nt.x3,nt.y3,nt.x4,nt.y4)}ee?G.call(this):V.call(this,pe)},V=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},G=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(R,q){this.pdf.internal.out(s(R)+" "+n(q)+" m")},F=function(R){var q;switch(R.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var te,de,fe,me=this.pdf.getTextDimensions(R.text),pe=z.call(this,R.y),ee=H.call(this,pe)-me.h,je=this.ctx.transform.applyToPoint(new c(R.x,pe));if(this.autoPaging){var Pe=this.ctx.transform.decompose(),De=new d;De=(De=(De=De.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale);for(var nt=this.ctx.transform.applyToRectangle(new A(R.x,pe,me.w,me.h)),Se=De.applyToRectangle(new A(R.x,ee,me.w,me.h)),X=B.call(this,Se),Ie=[],rt=0;rt<X.length;rt+=1)Ie.indexOf(X[rt])===-1&&Ie.push(X[rt]);I(Ie);for(var Ee=Ie[0],Te=Ie[Ie.length-1],dt=Ee;dt<Te+1;dt++){this.pdf.setPage(dt);var st=dt===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[2],it=et-this.margin[0],Ue=this.pdf.internal.pageSize.width-this.margin[1],We=Ue-this.margin[3],Bt=dt===1?0:ft+(dt-2)*it;if(this.ctx.clip_path.length!==0){var mt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(te,this.posX+this.margin[3],-1*Bt+st),$.call(this,"fill",!0),this.path=mt}var Me=E([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-Bt+st+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*R.scale),fe=this.lineWidth,this.lineWidth=fe*R.scale);var Ve=this.autoPaging!=="text";if(Ve||Me.y+Me.h<=et){if(Ve||Me.y>=st&&Me.x<=Ue){var wt=Ve?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Ue-Me.x)[0],As=E([JSON.parse(JSON.stringify(nt))],this.posX+this.margin[3],-Bt+st+this.ctx.prevPageLastElemOffset)[0],_e=Ve&&(dt>Ee||dt<Te)&&b.call(this);_e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,it,null).clip().discardPath()),this.pdf.text(wt,As.x,As.y,{angle:R.angle,align:q,renderingMode:R.renderingMode}),_e&&this.pdf.restoreGraphicsState()}}else Me.y<et&&(this.ctx.prevPageLastElemOffset+=et-Me.y);R.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=fe)}}else R.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*R.scale),fe=this.lineWidth,this.lineWidth=fe*R.scale),this.pdf.text(R.text,je.x+this.posX,je.y+this.posY,{angle:R.angle,align:q,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=fe)},O=function(R,q,te,de){te=te||0,de=de||0,this.pdf.internal.out(s(R+te)+" "+n(q+de)+" l")},P=function(R,q,te){return this.pdf.lines(R,q,te,null,null)},ce=function(R,q,te,de,fe,me,pe,ee){this.pdf.internal.out([t(a(te+R)),t(i(de+q)),t(a(fe+R)),t(i(me+q)),t(a(pe+R)),t(i(ee+q)),"c"].join(" "))},W=function(R,q,te,de){for(var fe=2*Math.PI,me=Math.PI/2;q>te;)q-=fe;var pe=Math.abs(te-q);pe<fe&&de&&(pe=fe-pe);for(var ee=[],je=de?-1:1,Pe=q;pe>1e-5;){var De=Pe+je*Math.min(pe,me);ee.push(ae.call(this,R,Pe,De)),pe-=Math.abs(De-Pe),Pe=De}return ee},ae=function(R,q,te){var de=(te-q)/2,fe=R*Math.cos(de),me=R*Math.sin(de),pe=fe,ee=-me,je=pe*pe+ee*ee,Pe=je+pe*fe+ee*me,De=4/3*(Math.sqrt(2*je*Pe)-Pe)/(pe*me-ee*fe),nt=pe-De*ee,Se=ee+De*pe,X=nt,Ie=-Se,rt=de+q,Ee=Math.cos(rt),Te=Math.sin(rt);return{x1:R*Math.cos(q),y1:R*Math.sin(q),x2:nt*Ee-Se*Te,y2:nt*Te+Se*Ee,x3:X*Ee-Ie*Te,y3:X*Te+Ie*Ee,x4:R*Math.cos(te),y4:R*Math.sin(te)}},K=function(R){return 180*R/Math.PI},le=function(R,q,te,de,fe,me){var pe=R+.5*(te-R),ee=q+.5*(de-q),je=fe+.5*(te-fe),Pe=me+.5*(de-me),De=Math.min(R,fe,pe,je),nt=Math.max(R,fe,pe,je),Se=Math.min(q,me,ee,Pe),X=Math.max(q,me,ee,Pe);return new A(De,Se,nt-De,X-Se)},ie=function(R,q,te,de,fe,me,pe,ee){var je,Pe,De,nt,Se,X,Ie,rt,Ee,Te,dt,st,ft,et,it=te-R,Ue=de-q,We=fe-te,Bt=me-de,mt=pe-fe,Me=ee-me;for(Pe=0;Pe<41;Pe++)Ee=(Ie=(De=R+(je=Pe/40)*it)+je*((Se=te+je*We)-De))+je*(Se+je*(fe+je*mt-Se)-Ie),Te=(rt=(nt=q+je*Ue)+je*((X=de+je*Bt)-nt))+je*(X+je*(me+je*Me-X)-rt),Pe==0?(dt=Ee,st=Te,ft=Ee,et=Te):(dt=Math.min(dt,Ee),st=Math.min(st,Te),ft=Math.max(ft,Ee),et=Math.max(et,Te));return new A(Math.round(dt),Math.round(st),Math.round(ft-dt),Math.round(et-st))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,q,te=(R=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:q}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(hs.API),(function(r){var t=function(c){var A,d,u,m,f,x,g,y,b,B;for(d=[],u=0,m=(c+=A="\0\0\0\0".slice(c.length%4||4)).length;m>u;u+=4)(f=(c.charCodeAt(u)<<24)+(c.charCodeAt(u+1)<<16)+(c.charCodeAt(u+2)<<8)+c.charCodeAt(u+3))!==0?(x=(f=((f=((f=((f=(f-(B=f%85))/85)-(b=f%85))/85)-(y=f%85))/85)-(g=f%85))/85)%85,d.push(x+33,g+33,y+33,b+33,B+33)):d.push(122);return(function(N,E){for(var I=E;I>0;I--)N.pop()})(d,A.length),String.fromCharCode.apply(String,d)+"~>"},s=function(c){var A,d,u,m,f,x=String,g="length",y=255,b="charCodeAt",B="slice",N="replace";for(c[B](-2),c=c[B](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),u=[],m=0,f=(c+=A="uuuuu"[B](c[g]%5||5))[g];f>m;m+=5)d=52200625*(c[b](m)-33)+614125*(c[b](m+1)-33)+7225*(c[b](m+2)-33)+85*(c[b](m+3)-33)+(c[b](m+4)-33),u.push(y&d>>24,y&d>>16,y&d>>8,y&d);return(function(E,I){for(var k=I;k>0;k--)E.pop()})(u,A[g]),x.fromCharCode.apply(x,u)},n=function(c){return c.split("").map(function(A){return("0"+A.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(c){var A=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),A.test(c)===!1)return"";for(var d="",u=0;u<c.length;u+=2)d+=String.fromCharCode("0x"+(c[u]+c[u+1]));return d},i=function(c){for(var A=new Uint8Array(c.length),d=c.length;d--;)A[d]=c.charCodeAt(d);return(A=x0(A)).reduce(function(u,m){return u+String.fromCharCode(m)},"")};r.processDataByFilters=function(c,A){var d=0,u=c||"",m=[];for(typeof(A=A||[])=="string"&&(A=[A]),d=0;d<A.length;d+=1)switch(A[d]){case"ASCII85Decode":case"/ASCII85Decode":u=s(u),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+A[d]+'" is not implemented')}return{data:u,reverseChain:m.reverse().join(" ")}}})(hs.API),(function(r){r.loadFile=function(t,s,n){return(function(a,i,c){i=i!==!1,c=typeof c=="function"?c:function(){};var A=void 0;try{A=(function(d,u,m){var f=new XMLHttpRequest,x=0,g=function(y){var b=y.length,B=[],N=String.fromCharCode;for(x=0;x<b;x+=1)B.push(N(255&y.charCodeAt(x)));return B.join("")};if(f.open("GET",d,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?m(g(this.responseText)):m(void 0)}),f.send(null),u&&f.status===200)return g(f.responseText)})(a,i,c)}catch{}return A})(t,s,n)},r.loadImageFile=r.loadFile})(hs.API),(function(r){function t(){return(Es.html2canvas?Promise.resolve(Es.html2canvas):gf(()=>Promise.resolve().then(()=>zP),void 0,import.meta.url)).catch(function(A){return Promise.reject(new Error("Could not load html2canvas: "+A))}).then(function(A){return A.default?A.default:A})}function s(){return(Es.DOMPurify?Promise.resolve(Es.DOMPurify):gf(()=>import("./purify.es-B6FQ9oRL.js"),[],import.meta.url)).catch(function(A){return Promise.reject(new Error("Could not load dompurify: "+A))}).then(function(A){return A.default?A.default:A})}var n=function(A){var d=jr(A);return d==="undefined"?"undefined":d==="string"||A instanceof String?"string":d==="number"||A instanceof Number?"number":d==="function"||A instanceof Function?"function":A&&A.constructor===Array?"array":A&&A.nodeType===1?"element":d==="object"?"object":"unknown"},a=function(A,d){var u=document.createElement(A);for(var m in d.className&&(u.className=d.className),d.innerHTML&&d.dompurify&&(u.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)u.style[m]=d.style[m];return u},i=function A(d,u){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||m.appendChild(A(f,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m},c=function A(d){var u=Object.assign(A.convert(Promise.resolve()),JSON.parse(JSON.stringify(A.template))),m=A.convert(Promise.resolve(),u);return(m=m.setProgress(1,A,1,[A])).set(d)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(A,d){return A.__proto__=d||c.prototype,A},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(A,d){return this.then(function(){switch(d=d||(function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(A),d){case"string":return this.then(s).then(function(u){return this.set({src:a("div",{innerHTML:A,dompurify:u})})});case"element":return this.set({src:A});case"canvas":return this.set({canvas:A});case"img":return this.set({img:A});default:return this.error("Unknown source type.")}})},c.prototype.to=function(A){switch(A){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var A={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(A.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:A}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var A=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(A).then(t).then(function(d){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,d(this.prop.container,u)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var A=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(A).then(t).then(function(d){var u=this.opt.jsPDF,m=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=m,m)for(var g=0;g<m.length;++g){var y=m[g],b=y.src.find(function(B){return B.format==="truetype"});b&&u.addFont(b.url,y.ref.name,y.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,u.context2d.save(!0),d(this.prop.container,x)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var A=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=A})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(A,d,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(A,d):this.outputPdf(A,d)},c.prototype.outputPdf=function(A,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(A,d)})},c.prototype.outputImg=function(A){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(A){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+A+'" is not supported.'}})},c.prototype.save=function(A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(A?{filename:A}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(A){if(n(A)!=="object")return this;var d=Object.keys(A||{}).map(function(u){if(u in c.template.prop)return function(){this.prop[u]=A[u]};switch(u){case"margin":return this.setMargin.bind(this,A.margin);case"jsPDF":return function(){return this.opt.jsPDF=A.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,A.pageSize);default:return function(){this.opt[u]=A[u]}}},this);return this.then(function(){return this.thenList(d)})},c.prototype.get=function(A,d){return this.then(function(){var u=A in c.template.prop?this.prop[A]:this.opt[A];return d?d(u):u})},c.prototype.setMargin=function(A){return this.then(function(){switch(n(A)){case"number":A=[A,A,A,A];case"array":if(A.length===2&&(A=[A[0],A[1],A[0],A[1]]),A.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=A}).then(this.setPageSize)},c.prototype.setPageSize=function(A){function d(u,m){return Math.floor(u*m/72*96)}return this.then(function(){(A=A||hs.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(A.inner={width:A.width-this.opt.margin[1]-this.opt.margin[3],height:A.height-this.opt.margin[0]-this.opt.margin[2]},A.inner.px={width:d(A.inner.width,A.k),height:d(A.inner.height,A.k)},A.inner.ratio=A.inner.height/A.inner.width),this.prop.pageSize=A})},c.prototype.setProgress=function(A,d,u,m){return A!=null&&(this.progress.val=A),d!=null&&(this.progress.state=d),u!=null&&(this.progress.n=u),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(A,d,u,m){return this.setProgress(A?this.progress.val+A:null,d||null,u?this.progress.n+u:null,m?this.progress.stack.concat(m):null)},c.prototype.then=function(A,d){var u=this;return this.thenCore(A,d,function(m,f){return u.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(x){return u.updateProgress(null,m),x}).then(m,f).then(function(x){return u.updateProgress(1),x})})},c.prototype.thenCore=function(A,d,u){u=u||Promise.prototype.then;var m=this;A&&(A=A.bind(m)),d&&(d=d.bind(m));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:c.convert(Object.assign({},m),Promise.prototype),x=u.call(f,A,d);return c.convert(x,m.__proto__)},c.prototype.thenExternal=function(A,d){return Promise.prototype.then.call(this,A,d)},c.prototype.thenList=function(A){var d=this;return A.forEach(function(u){d=d.thenCore(u)}),d},c.prototype.catch=function(A){A&&(A=A.bind(this));var d=Promise.prototype.catch.call(this,A);return c.convert(d,this)},c.prototype.catchExternal=function(A){return Promise.prototype.catch.call(this,A)},c.prototype.error=function(A){return this.then(function(){throw new Error(A)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,hs.getPageSize=function(A,d,u){if(jr(A)==="object"){var m=A;A=m.orientation,d=m.unit||d,u=m.format||u}d=d||"mm",u=u||"a4",A=(""+(A||"P")).toLowerCase();var f,x=(""+u).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+d}var y,b=0,B=0;if(g.hasOwnProperty(x))b=g[x][1]/f,B=g[x][0]/f;else try{b=u[1],B=u[0]}catch{throw new Error("Invalid format: "+u)}if(A==="p"||A==="portrait")A="p",B>b&&(y=B,B=b,b=y);else{if(A!=="l"&&A!=="landscape")throw"Invalid orientation: "+A;A="l",b>B&&(y=B,B=b,b=y)}return{width:B,height:b,unit:d,k:f,orientation:A}},r.html=function(A,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(jx):null;var u=new c(d);return d.worker?u:u.from(A).doCallback()}})(hs.API),hs.API.addJS=function(r){return yy=r,this.internal.events.subscribe("postPutResources",function(){uf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(uf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),by=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+yy+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){uf!==void 0&&by!==void 0&&this.internal.out("/Names <</JavaScript "+uf+" 0 R>>")}),this},(function(r){var t;r.events.push(["postPutResources",function(){var s=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=s.outline.render().split(/\r\n/),i=0;i<a.length;i++){var c=a[i],A=n.exec(c);if(A!=null){var d=A[1];s.internal.newObjectDeferredBegin(d,!1)}s.internal.write(c)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,m=[];for(i=0;i<u;i++){var f=s.internal.newObject();m.push(f);var x=s.internal.getPageInfo(i+1);s.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var g=s.internal.newObject();for(s.internal.write("<< /Names [ "),i=0;i<m.length;i++)s.internal.write("(page_"+(i+1)+")"+m[i]+" 0 R");s.internal.write(" ] >>","endobj"),t=s.internal.newObject(),s.internal.write("<< /Dests "+g+" 0 R"),s.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var s=this;s.outline.root.children.length>0&&(s.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&s.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(n,a,i){var c={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(c),c},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(n){n.id=s.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},s.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},s.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var c=n.children[i];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var A=this.count=this.count_r({count:0},c);if(A>0&&this.line("/Count "+A),c.options&&c.options.pageNumber){var d=s.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},s.outline.line=function(n){this.ctx.val+=n+`\r
`},s.outline.makeRef=function(n){return n.id+" 0 R"},s.outline.makeString=function(n){return"("+s.internal.pdfEscape(n)+")"},s.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])})(hs.API),(function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(s,n,a,i,c,A){var d,u=this.decode.DCT_DECODE,m=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=c||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,d=(function(f){for(var x,g=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,b={width:0,height:0,numcomponents:1},B=4;B<y;B+=2){if(B+=g,t.indexOf(f.charCodeAt(B+1))!==-1){x=256*f.charCodeAt(B+5)+f.charCodeAt(B+6),b={width:256*f.charCodeAt(B+7)+f.charCodeAt(B+8),height:x,numcomponents:f.charCodeAt(B+9)};break}g=256*f.charCodeAt(B+2)+f.charCodeAt(B+3)}return b})(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s),d.numcomponents){case 1:A=this.color_spaces.DEVICE_GRAY;break;case 4:A=this.color_spaces.DEVICE_CMYK;break;case 3:A=this.color_spaces.DEVICE_RGB}m={data:s,width:d.width,height:d.height,colorSpace:A,bitsPerComponent:8,filter:u,index:n,alias:a}}return m}})(hs.API),hs.API.processPNG=function(r,t,s,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var a,i=JR(r,{checkCrc:!0}),c=i.width,A=i.height,d=i.channels,u=i.palette,m=i.depth;a=u&&d===1?(function(T){for(var V=T.width,G=T.height,L=T.data,F=T.palette,O=T.depth,P=!1,ce=[],W=[],ae=void 0,K=!1,le=0,ie=0;ie<F.length;ie++){var se=Cb(F[ie],4),R=se[0],q=se[1],te=se[2],de=se[3];ce.push(R,q,te),de!=null&&(de===0?(le++,W.length<1&&W.push(ie)):de<255&&(K=!0))}if(K||le>1){P=!0,W=void 0;var fe=V*G;ae=new Uint8Array(fe);for(var me=new DataView(L.buffer),pe=0;pe<fe;pe++){var ee=Cx(me,pe,O),je=Cb(F[ee],4)[3];ae[pe]=je}}else le===0&&(W=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:P?8:void 0,colorBytes:L,alphaBytes:ae,needSMask:P,palette:ce,mask:W}})(i):d===2||d===4?(function(T){for(var V=T.data,G=T.width,L=T.height,F=T.channels,O=T.depth,P=F===2?"DeviceGray":"DeviceRGB",ce=F-1,W=G*L,ae=ce,K=W*ae,le=1*W,ie=Math.ceil(K*O/8),se=Math.ceil(le*O/8),R=new Uint8Array(ie),q=new Uint8Array(se),te=new DataView(V.buffer),de=new DataView(R.buffer),fe=new DataView(q.buffer),me=!1,pe=0;pe<W;pe++){for(var ee=pe*F,je=0;je<ae;je++)ky(de,Cx(te,ee+je,O),pe*ae+je,O);var Pe=Cx(te,ee+ae,O);Pe<(1<<O)-1&&(me=!0),ky(fe,Pe,1*pe,O)}return{colorSpace:P,colorsPerPixel:ce,sMaskBitsPerComponent:me?O:void 0,colorBytes:R,alphaBytes:q,needSMask:me}})(i):(function(T){var V=T.data,G=T.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:G,colorsPerPixel:G==="DeviceGray"?1:3,colorBytes:V instanceof Uint16Array?(function(L){for(var F=L.length,O=new Uint8Array(2*F),P=new DataView(O.buffer,O.byteOffset,O.byteLength),ce=0;ce<F;ce++)P.setUint16(2*ce,L[ce],!1);return O})(V):V,needSMask:!1}})(i);var f,x,g,y=a,b=y.colorSpace,B=y.colorsPerPixel,N=y.sMaskBitsPerComponent,E=y.colorBytes,I=y.alphaBytes,k=y.needSMask,$=y.palette,z=y.mask,H=null;return n!==hs.API.image_compression.NONE&&typeof x0=="function"?(H=(function(T){var V;switch(T){case hs.API.image_compression.FAST:V=11;break;case hs.API.image_compression.MEDIUM:V=13;break;case hs.API.image_compression.SLOW:V=14;break;default:V=12}return V})(n),f=this.decode.FLATE_DECODE,x="/Predictor ".concat(H," /Colors ").concat(B," /BitsPerComponent ").concat(m," /Columns ").concat(c),r=Cy(E,Math.ceil(c*B*m/8),B,m,n),k&&(g=Cy(I,Math.ceil(c*N/8),1,N,n))):(f=void 0,x=void 0,r=E,k&&(g=I)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:s,data:r,index:t,filter:f,decodeParameters:x,transparency:z,palette:$,sMask:g,predictor:H,width:c,height:A,bitsPerComponent:m,sMaskBitsPerComponent:N,colorSpace:b}}},(function(r){r.processGIF89A=function(t,s,n,a){var i=new xD(t),c=i.width,A=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var u={data:d,width:c,height:A},m=new Sx(100).encode(u,100);return r.processJPEG.call(this,m,s,n,a)},r.processGIF87A=r.processGIF89A})(hs.API),rl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:s,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},rl.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[r]()}catch(s){_r.log("bit decode error:"+s)}},rl.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),s=t%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*a*4,A=0;A<8&&8*a+A<this.width;A++){var d=this.palette[i>>7-A&1];this.data[c+4*A]=d.blue,this.data[c+4*A+1]=d.green,this.data[c+4*A+2]=d.red,this.data[c+4*A+3]=255}s!==0&&(this.pos+=4-s)}},rl.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,a=0;a<r;a++){var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*a*4,A=i>>4,d=15&i,u=this.palette[A];if(this.data[c]=u.blue,this.data[c+1]=u.green,this.data[c+2]=u.red,this.data[c+3]=255,2*a+1>=this.width)break;u=this.palette[d],this.data[c+4]=u.blue,this.data[c+4+1]=u.green,this.data[c+4+2]=u.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},rl.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+4*n;if(a<this.palette.length){var c=this.palette[a];this.data[i]=c.red,this.data[i+1]=c.green,this.data[i+2]=c.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}r!==0&&(this.pos+=4-r)}},rl.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(i&t)/t*255|0,A=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,u=i>>15?255:0,m=n*this.width*4+4*a;this.data[m]=d,this.data[m+1]=A,this.data[m+2]=c,this.data[m+3]=u}this.pos+=r}},rl.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),s=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(c&t)/t*255|0,d=(c>>5&s)/s*255|0,u=(c>>11)/t*255|0,m=a*this.width*4+4*i;this.data[m]=u,this.data[m+1]=d,this.data[m+2]=A,this.data[m+3]=255}this.pos+=r}},rl.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*s;this.data[c]=i,this.data[c+1]=a,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},rl.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),A=t*this.width*4+4*s;this.data[A]=i,this.data[A+1]=a,this.data[A+2]=n,this.data[A+3]=c}},rl.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(t,s,n,a){var i=new rl(t,!1),c=i.width,A=i.height,d={data:i.getData(),width:c,height:A},u=new Sx(100).encode(d,100);return r.processJPEG.call(this,u,s,n,a)}})(hs.API),Iy.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(t,s,n,a){var i=new Iy(t),c=i.width,A=i.height,d={data:i.getData(),width:c,height:A},u=new Sx(100).encode(d,100);return r.processJPEG.call(this,u,s,n,a)}})(hs.API),hs.API.processRGBA=function(r,t,s){for(var n=r.data,a=n.length,i=new Uint8Array(a/4*3),c=new Uint8Array(a/4),A=0,d=0,u=0;u<a;u+=4){var m=n[u],f=n[u+1],x=n[u+2],g=n[u+3];i[A++]=m,i[A++]=f,i[A++]=x,c[d++]=g}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:y,index:t,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},hs.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},uu=hs.API,hf=uu.getCharWidthsArray=function(r,t){var s,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),A=t.widths?t.widths:a.metadata.Unicode.widths,d=A.fof?A.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,m=u.fof?u.fof:1,f=t.doKerning!==!1,x=0,g=r.length,y=0,b=A[0]||d,B=[];for(s=0;s<g;s++)n=r.charCodeAt(s),typeof a.metadata.widthOfString=="function"?B.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+c*(1e3/i)||0)/1e3):(x=f&&jr(u[n])==="object"&&!isNaN(parseInt(u[n][y],10))?u[n][y]/m:0,B.push((A[n]||b)/d+x)),y=n;return B},Ny=uu.getStringUnitWidth=function(r,t){var s=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return uu.processArabic&&(r=uu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,s,a)/s:hf.apply(this,arguments).reduce(function(i,c){return i+c},0)},jy=function(r,t,s,n){for(var a=[],i=0,c=r.length,A=0;i!==c&&A+t[i]<s;)A+=t[i],i++;a.push(r.slice(0,i));var d=i;for(A=0;i!==c;)A+t[i]>n&&(a.push(r.slice(d,i)),A=0,d=i),A+=t[i],i++;return d!==i&&a.push(r.slice(d,i)),a},By=function(r,t,s){s||(s={});var n,a,i,c,A,d,u,m=[],f=[m],x=s.textIndent||0,g=0,y=0,b=r.split(" "),B=hf.apply(this,[" ",s])[0];if(d=s.lineIndent===-1?b[0].length+2:s.lineIndent||0){var N=Array(d).join(" "),E=[];b.map(function(k){(k=k.split(/\s*\n/)).length>1?E=E.concat(k.map(function($,z){return(z&&$.length?`
`:"")+$})):E.push(k[0])}),b=E,d=Ny.apply(this,[N,s])}for(i=0,c=b.length;i<c;i++){var I=0;if(n=b[i],d&&n[0]==`
`&&(n=n.substr(1),I=1),x+g+(y=(a=hf.apply(this,[n,s])).reduce(function(k,$){return k+$},0))>t||I){if(y>t){for(A=jy.apply(this,[n,a,t-(x+g),t]),m.push(A.shift()),m=[A.pop()];A.length;)f.push([A.shift()]);y=a.slice(n.length-(m[0]?m[0].length:0)).reduce(function(k,$){return k+$},0)}else m=[n];f.push(m),x=y+d,g=B}else m.push(n),x+=g+y,g=B}return u=d?function(k,$){return($?N:"")+k.join(" ")}:function(k){return k.join(" ")},f.map(u)},uu.splitTextToSize=function(r,t,s){var n,a=(s=s||{}).fontSize||this.internal.getFontSize(),i=function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var f=this.internal.getFont(m.fontName,m.fontStyle),x="Unicode";return f.metadata[x]?{widths:f.metadata[x].widths||{0:1},kerning:f.metadata[x].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,s);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/a;i.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=s.lineIndent;var A,d,u=[];for(A=0,d=n.length;A<d;A++)u=u.concat(By.apply(this,[n[A],c,i]));return u},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="0123456789abcdef",s="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[s[i]]=t[i],a[t[i]]=s[i];var c=function(x){return"0x"+parseInt(x,10).toString(16)},A=r.__fontmetrics__.compress=function(x){var g,y,b,B,N=["{"];for(var E in x){if(g=x[E],isNaN(parseInt(E,10))?y="'"+E+"'":(E=parseInt(E,10),y=(y=c(E).slice(2)).slice(0,-1)+a[y.slice(-1)]),typeof g=="number")g<0?(b=c(g).slice(3),B="-"):(b=c(g).slice(2),B=""),b=B+b.slice(0,-1)+a[b.slice(-1)];else{if(jr(g)!=="object")throw new Error("Don't know what to do with value type "+jr(g)+".");b=A(g)}N.push(y+b)}return N.push("}"),N.join("")},d=r.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,y,b,B,N={},E=1,I=N,k=[],$="",z="",H=x.length-1,T=1;T<H;T+=1)(B=x[T])=="'"?g?(b=g.join(""),g=void 0):g=[]:g?g.push(B):B=="{"?(k.push([I,b]),I={},b=void 0):B=="}"?((y=k.pop())[0][y[1]]=I,b=void 0,I=y[0]):B=="-"?E=-1:b===void 0?n.hasOwnProperty(B)?($+=n[B],b=parseInt($,16)*E,E=1,$=""):$+=B:n.hasOwnProperty(B)?(z+=n[B],I[b]=parseInt(z,16)*E,E=1,b=void 0,z=""):z+=B;return N},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(x){var g=x.font,y=f.Unicode[g.postScriptName];y&&(g.metadata.Unicode={},g.metadata.Unicode.widths=y.widths,g.metadata.Unicode.kerning=y.kerning);var b=m.Unicode[g.postScriptName];b&&(g.metadata.Unicode.encoding=b,g.encoding=b.codePages[0])}])})(hs.API),(function(r){var t=function(s){for(var n=s.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=s.charCodeAt(i);return a};r.API.events.push(["addFont",function(s){var n=void 0,a=s.font,i=s.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(c,A){A=/^\x00\x01\x00\x00/.test(A)?t(A):t(Bf(A)),c.metadata=r.API.TTFFont.open(A),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(a,n)}}])})(hs),hs.API.addSvgAsImage=function(r,t,s,n,a,i,c,A){if(isNaN(t)||isNaN(s))throw _r.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw _r.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=n,d.height=a;var u=d.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Es.canvg?Promise.resolve(Es.canvg):gf(()=>import("./index.es-Cm96O-GT.js"),[],import.meta.url)).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(u,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(m)}).then(function(){f.addImage(d.toDataURL("image/jpeg",1),t,s,n,a,c,A)})},hs.API.putTotalPages=function(r){var t,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),s=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,s);return this},hs.API.viewerPreferences=function(r,t){var s;r=r||{},t=t||!1;var n,a,i,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},A=Object.keys(c),d=[],u=0,m=0,f=0;function x(y,b){var B,N=!1;for(B=0;B<y.length;B+=1)y[B]===b&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var g=A.length;for(f=0;f<g;f+=1)s[A[f]].value=s[A[f]].defaultValue,s[A[f]].explicitSet=!1}if(jr(r)==="object"){for(a in r)if(i=r[a],x(A,a)&&i!==void 0){if(s[a].type==="boolean"&&typeof i=="boolean")s[a].value=i;else if(s[a].type==="name"&&x(s[a].valueSet,i))s[a].value=i;else if(s[a].type==="integer"&&Number.isInteger(i))s[a].value=i;else if(s[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")d.push(String(i[u]-1));else if(i[u].length>1){for(m=0;m<i[u].length;m+=1)typeof i[u][m]!="number"&&(n=!1);n===!0&&d.push([i[u][0]-1,i[u][1]-1].join(" "))}s[a].value="["+d.join(" ")+"]"}else s[a].value=s[a].defaultValue;s[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,b=[];for(y in s)s[y].explicitSet===!0&&(s[y].type==="name"?b.push("/"+y+" /"+s[y].value):b.push("/"+y+" "+s[y].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},(function(r){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),A=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+c.length+A.length+a.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+c+A+d),this.internal.write("endstream"),this.internal.write("endobj")},s=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutResources",t)),this}})(hs.API),(function(r){var t=r.API,s=t.pdfEscape16=function(i,c){for(var A,d=c.metadata.Unicode.widths,u=["","0","00","000","0000"],m=[""],f=0,x=i.length;f<x;++f){if(A=c.metadata.characterToGlyph(i.charCodeAt(f)),c.metadata.glyIdsUsed.push(A),c.metadata.toUnicode[A]=i.charCodeAt(f),d.indexOf(A)==-1&&(d.push(A),d.push([parseInt(c.metadata.widthOfGlyph(A),10)])),A=="0")return m.join("");A=A.toString(16),m.push(u[4-A.length],A)}return m.join("")},n=function(i){var c,A,d,u,m,f,x;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],f=0,x=(A=Object.keys(i).sort(function(g,y){return g-y})).length;f<x;f++)c=A[f],d.length>=100&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[c]!==void 0&&i[c]!==null&&typeof i[c].toString=="function"&&(u=("0000"+i[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),d.push("<"+c+"><"+u+">"));return d.length&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(c){var A=c.font,d=c.out,u=c.newObject,m=c.putStream;if(A.metadata instanceof r.API.TTFFont&&A.encoding==="Identity-H"){for(var f=A.metadata.Unicode.widths,x=A.metadata.subset.encode(A.metadata.glyIdsUsed,1),g="",y=0;y<x.length;y++)g+=String.fromCharCode(x[y]);var b=u();m({data:g,addLength1:!0,objectId:b}),d("endobj");var B=u();m({data:n(A.metadata.toUnicode),addLength1:!0,objectId:B}),d("endobj");var N=u();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+pu(A.fontName)),d("/FontFile2 "+b+" 0 R"),d("/FontBBox "+r.API.PDFObject.convert(A.metadata.bbox)),d("/Flags "+A.metadata.flags),d("/StemV "+A.metadata.stemV),d("/ItalicAngle "+A.metadata.italicAngle),d("/Ascent "+A.metadata.ascender),d("/Descent "+A.metadata.decender),d("/CapHeight "+A.metadata.capHeight),d(">>"),d("endobj");var E=u();d("<<"),d("/Type /Font"),d("/BaseFont /"+pu(A.fontName)),d("/FontDescriptor "+N+" 0 R"),d("/W "+r.API.PDFObject.convert(f)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+A.encoding+")"),d(">>"),d(">>"),d("endobj"),A.objectNumber=u(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+B+" 0 R"),d("/BaseFont /"+pu(A.fontName)),d("/Encoding /"+A.encoding),d("/DescendantFonts ["+E+" 0 R]"),d(">>"),d("endobj"),A.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(c){var A=c.font,d=c.out,u=c.newObject,m=c.putStream;if(A.metadata instanceof r.API.TTFFont&&A.encoding==="WinAnsiEncoding"){for(var f=A.metadata.rawData,x="",g=0;g<f.length;g++)x+=String.fromCharCode(f[g]);var y=u();m({data:x,addLength1:!0,objectId:y}),d("endobj");var b=u();m({data:n(A.metadata.toUnicode),addLength1:!0,objectId:b}),d("endobj");var B=u();d("<<"),d("/Descent "+A.metadata.decender),d("/CapHeight "+A.metadata.capHeight),d("/StemV "+A.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+y+" 0 R"),d("/Flags 96"),d("/FontBBox "+r.API.PDFObject.convert(A.metadata.bbox)),d("/FontName /"+pu(A.fontName)),d("/ItalicAngle "+A.metadata.italicAngle),d("/Ascent "+A.metadata.ascender),d(">>"),d("endobj"),A.objectNumber=u();for(var N=0;N<A.metadata.hmtx.widths.length;N++)A.metadata.hmtx.widths[N]=parseInt(A.metadata.hmtx.widths[N]*(1e3/A.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+pu(A.fontName)+"/FontDescriptor "+B+" 0 R/Encoding/"+A.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(A.metadata.hmtx.widths)+">>"),d("endobj"),A.isAlreadyPutted=!0}})(i)}]);var a=function(i){var c,A=i.text||"",d=i.x,u=i.y,m=i.options||{},f=i.mutex||{},x=f.pdfEscape,g=f.activeFontKey,y=f.fonts,b=g,B="",N=0,E="",I=y[b].encoding;if(y[b].encoding!=="Identity-H")return{text:A,x:d,y:u,options:m,mutex:f};for(E=A,b=g,Array.isArray(A)&&(E=A[0]),N=0;N<E.length;N+=1)y[b].metadata.hasOwnProperty("cmap")&&(c=y[b].metadata.cmap.unicode.codeMap[E[N].charCodeAt(0)]),c||E[N].charCodeAt(0)<256&&y[b].metadata.hasOwnProperty("Unicode")?B+=E[N]:B+="";var k="";return parseInt(b.slice(1))<14||I==="WinAnsiEncoding"?k=x(B,b).split("").map(function($){return $.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(k=s(B,y[b])),f.isHex=!0,{text:k,x:d,y:u,options:m,mutex:f}};t.events.push(["postProcessText",function(i){var c=i.text||"",A=[],d={text:c,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(c)){var u=0;for(u=0;u<c.length;u+=1)Array.isArray(c[u])&&c[u].length===3?A.push([a(Object.assign({},d,{text:c[u][0]})).text,c[u][1],c[u][2]]):A.push(a(Object.assign({},d,{text:c[u]})).text);i.text=A}else i.text=a(Object.assign({},d,{text:c})).text}])})(hs),(function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(s){return t.call(this),this.internal.vFS[s]!==void 0},r.addFileToVFS=function(s,n){return t.call(this),this.internal.vFS[s]=n,this},r.getFileFromVFS=function(s){return t.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}})(hs.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var a,i,c,A,d,u,m,f=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},B=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,I=0;this.__bidiEngine__={};var k=function(L){var F=L.charCodeAt(),O=F>>8,P=b[O];return P!==void 0?f[256*P+(255&F)]:O===252||O===253?"AL":N.test(O)?"L":O===8?"R":"N"},$=function(L){for(var F,O=0;O<L.length;O++){if((F=k(L.charAt(O)))==="L")return!1;if(F==="R")return!0}return!1},z=function(L,F,O,P){var ce,W,ae,K,le=F[P];switch(le){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(le="AN");break;case"AL":E=!0,le="R";break;case"WS":case"BN":le="N";break;case"CS":P<1||P+1>=F.length||(ce=O[P-1])!=="EN"&&ce!=="AN"||(W=F[P+1])!=="EN"&&W!=="AN"?le="N":E&&(W="AN"),le=W===ce?W:"N";break;case"ES":le=(ce=P>0?O[P-1]:"B")==="EN"&&P+1<F.length&&F[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&O[P-1]==="EN"){le="EN";break}if(E){le="N";break}for(ae=P+1,K=F.length;ae<K&&F[ae]==="ET";)ae++;le=ae<K&&F[ae]==="EN"?"EN":"N";break;case"NSM":if(c&&!A){for(K=F.length,ae=P+1;ae<K&&F[ae]==="NSM";)ae++;if(ae<K){var ie=L[P],se=ie>=1425&&ie<=2303||ie===64286;if(ce=F[ae],se&&(ce==="R"||ce==="AL")){le="R";break}}}le=P<1||(ce=F[P-1])==="B"?"N":O[P-1];break;case"B":E=!1,a=!0,le=I;break;case"S":i=!0,le="N"}return le},H=function(L,F,O){var P=L.split("");return O&&T(P,O,{hiLevel:I}),P.reverse(),F&&F.reverse(),P.join("")},T=function(L,F,O){var P,ce,W,ae,K,le=-1,ie=L.length,se=0,R=[],q=I?g:x,te=[];for(E=!1,a=!1,i=!1,ce=0;ce<ie;ce++)te[ce]=k(L[ce]);for(W=0;W<ie;W++){if(K=se,R[W]=z(L,te,R,W),P=240&(se=q[K][y[R[W]]]),se&=15,F[W]=ae=q[se][5],P>0)if(P===16){for(ce=le;ce<W;ce++)F[ce]=1;le=-1}else le=-1;if(q[se][6])le===-1&&(le=W);else if(le>-1){for(ce=le;ce<W;ce++)F[ce]=ae;le=-1}te[W]==="B"&&(F[W]=0),O.hiLevel|=ae}i&&(function(de,fe,me){for(var pe=0;pe<me;pe++)if(de[pe]==="S"){fe[pe]=I;for(var ee=pe-1;ee>=0&&de[ee]==="WS";ee--)fe[ee]=I}})(te,F,ie)},V=function(L,F,O,P,ce){if(!(ce.hiLevel<L)){if(L===1&&I===1&&!a)return F.reverse(),void(O&&O.reverse());for(var W,ae,K,le,ie=F.length,se=0;se<ie;){if(P[se]>=L){for(K=se+1;K<ie&&P[K]>=L;)K++;for(le=se,ae=K-1;le<ae;le++,ae--)W=F[le],F[le]=F[ae],F[ae]=W,O&&(W=O[le],O[le]=O[ae],O[ae]=W);se=K}se++}}},G=function(L,F,O){var P=L.split(""),ce={hiLevel:I};return O||(O=[]),T(P,O,ce),(function(W,ae,K){if(K.hiLevel!==0&&m)for(var le,ie=0;ie<W.length;ie++)ae[ie]===1&&(le=B.indexOf(W[ie]))>=0&&(W[ie]=B[le+1])})(P,O,ce),V(2,P,F,O,ce),V(1,P,F,O,ce),P.join("")};return this.__bidiEngine__.doBidiReorder=function(L,F,O){if((function(ce,W){if(W)for(var ae=0;ae<ce.length;ae++)W[ae]=ae;A===void 0&&(A=$(ce)),u===void 0&&(u=$(ce))})(L,F),c||!d||u)if(c&&d&&A^u)I=A?1:0,L=H(L,F,O);else if(!c&&d&&u)I=A?1:0,L=G(L,F,O),L=H(L,F);else if(!c||A||d||u){if(c&&!d&&A^u)L=H(L,F),A?(I=0,L=G(L,F,O)):(I=1,L=G(L,F,O),L=H(L,F));else if(c&&A&&!d&&u)I=1,L=G(L,F,O),L=H(L,F);else if(!c&&!d&&A^u){var P=m;A?(I=1,L=G(L,F,O),I=0,m=!1,L=G(L,F,O),m=P):(I=0,L=G(L,F,O),L=H(L,F),I=1,m=!1,L=G(L,F,O),m=P,L=H(L,F))}}else I=0,L=G(L,F,O);else I=A?1:0,L=G(L,F,O);return L},this.__bidiEngine__.setOptions=function(L){L&&(c=L.isInputVisual,d=L.isOutputVisual,A=L.isInputRtl,u=L.isOutputRtl,m=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var c=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,s.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var A=0;for(c=[],A=0;A<a.length;A+=1)Object.prototype.toString.call(a[A])==="[object Array]"?c.push([s.doBidiReorder(a[A][0]),a[A][1],a[A][2]]):c.push([s.doBidiReorder(a[A])]);n.text=c}else n.text=s.doBidiReorder(a);s.setOptions({isInputVisual:!0})}])})(hs),hs.API.TTFFont=(function(){function r(t){var s;if(this.rawData=t,s=this.contents=new zA(t),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new ID(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new vD(this.contents),this.head=new bD(this),this.name=new CD(this),this.cmap=new GB(this),this.toUnicode={},this.hhea=new yD(this),this.maxp=new SD(this),this.hmtx=new ED(this),this.post=new jD(this),this.os2=new ND(this),this.loca=new UD(this),this.glyf=new FD(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,s,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var c,A,d,u;for(u=[],c=0,A=(d=this.bbox).length;c<A;c++)t=d[c],u.push(Math.round(t*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(s=a>>16)&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var s;return((s=this.cmap.unicode)!=null?s.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*s},r.prototype.widthOfString=function(t,s,n){var a,i,c,A;for(c=0,i=0,A=(t=""+t).length;0<=A?i<A:i>A;i=0<=A?++i:--i)a=t.charCodeAt(i),c+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/s)||0;return c*(s/1e3)},r.prototype.lineHeight=function(t,s){var n;return s==null&&(s=!1),n=s?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},r})();var fl,zA=(function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var s,n;for(n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n[s]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(t){var s,n,a;for(a=[],s=0,n=t.length;0<=n?s<n:s>n;s=0<=n?++s:--s)a.push(this.writeByte(t.charCodeAt(s)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,s,n,a,i,c,A,d;return t=this.readByte(),s=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),c=this.readByte(),A=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^s)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^c)+256*(255^A)+(255^d)+1):72057594037927940*t+281474976710656*s+1099511627776*n+4294967296*a+16777216*i+65536*c+256*A+d},r.prototype.writeLongLong=function(t){var s,n;return s=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var s,n;for(s=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)s.push(this.readByte());return s},r.prototype.write=function(t){var s,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)s=t[n],i.push(this.writeByte(s));return i},r})(),vD=(function(){var r;function t(s){var n,a,i;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(s){var n,a,i,c,A,d,u,m,f,x,g,y,b;for(b in g=Object.keys(s).length,d=Math.log(2),f=16*Math.floor(Math.log(g)/d),c=Math.floor(f/d),m=16*g-f,(a=new zA).writeInt(this.scalarType),a.writeShort(g),a.writeShort(f),a.writeShort(c),a.writeShort(m),i=16*g,u=a.pos+i,A=null,y=[],s)for(x=s[b],a.writeString(b),a.writeInt(r(x)),a.writeInt(u),a.writeInt(x.length),y=y.concat(x),b==="head"&&(A=u),u+=x.length;u%4;)y.push(0),u++;return a.write(y),n=2981146554-r(a.data),a.pos=A+8,a.writeUInt32(n),a.data},r=function(s){var n,a,i,c;for(s=WB.call(s);s.length%4;)s.push(0);for(i=new zA(s),a=0,n=0,c=s.length;n<c;n=n+=4)a+=i.readUInt32();return 4294967295&a},t})(),wD={}.hasOwnProperty,nc=function(r,t){for(var s in t)wD.call(t,s)&&(r[s]=t[s]);function n(){this.constructor=r}return n.prototype=t.prototype,r.prototype=new n,r.__super__=t.prototype,r};fl=(function(){function r(t){var s;this.file=t,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var bD=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="head",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},r.prototype.encode=function(t){var s;return(s=new zA).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(t),s.writeShort(this.glyphDataFormat),s.data},r})(),Ly=(function(){function r(t,s){var n,a,i,c,A,d,u,m,f,x,g,y,b,B,N,E,I;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=s+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(g=t.readUInt16(),x=g/2,t.pos+=6,i=(function(){var k,$;for($=[],d=k=0;0<=x?k<x:k>x;d=0<=x?++k:--k)$.push(t.readUInt16());return $})(),t.pos+=2,b=(function(){var k,$;for($=[],d=k=0;0<=x?k<x:k>x;d=0<=x?++k:--k)$.push(t.readUInt16());return $})(),u=(function(){var k,$;for($=[],d=k=0;0<=x?k<x:k>x;d=0<=x?++k:--k)$.push(t.readUInt16());return $})(),m=(function(){var k,$;for($=[],d=k=0;0<=x?k<x:k>x;d=0<=x?++k:--k)$.push(t.readUInt16());return $})(),a=(this.length-t.pos+this.offset)/2,A=(function(){var k,$;for($=[],d=k=0;0<=a?k<a:k>a;d=0<=a?++k:--k)$.push(t.readUInt16());return $})(),d=N=0,I=i.length;N<I;d=++N)for(B=i[d],n=E=y=b[d];y<=B?E<=B:E>=B;n=y<=B?++E:--E)m[d]===0?c=n+u[d]:(c=A[m[d]/2+(n-y)-(x-d)]||0)!==0&&(c+=u[d]),this.codeMap[n]=65535&c}t.pos=f}return r.encode=function(t,s){var n,a,i,c,A,d,u,m,f,x,g,y,b,B,N,E,I,k,$,z,H,T,V,G,L,F,O,P,ce,W,ae,K,le,ie,se,R,q,te,de,fe,me,pe,ee,je,Pe,De;switch(P=new zA,c=Object.keys(t).sort(function(nt,Se){return nt-Se}),s){case"macroman":for(b=0,B=(function(){var nt=[];for(y=0;y<256;++y)nt.push(0);return nt})(),E={0:0},i={},ce=0,le=c.length;ce<le;ce++)E[ee=t[a=c[ce]]]==null&&(E[ee]=++b),i[a]={old:t[a],new:E[t[a]]},B[a]=E[t[a]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(B),{charMap:i,subtable:P.data,maxGlyphID:b+1};case"unicode":for(F=[],f=[],I=0,E={},n={},N=u=null,W=0,ie=c.length;W<ie;W++)E[$=t[a=c[W]]]==null&&(E[$]=++I),n[a]={old:$,new:E[$]},A=E[$]-a,N!=null&&A===u||(N&&f.push(N),F.push(a),u=A),N=a;for(N&&f.push(N),f.push(65535),F.push(65535),G=2*(V=F.length),T=2*Math.pow(Math.log(V)/Math.LN2,2),x=Math.log(T/2)/Math.LN2,H=2*V-T,d=[],z=[],g=[],y=ae=0,se=F.length;ae<se;y=++ae){if(L=F[y],m=f[y],L===65535){d.push(0),z.push(0);break}if(L-(O=n[L].new)>=32768)for(d.push(0),z.push(2*(g.length+V-y)),a=K=L;L<=m?K<=m:K>=m;a=L<=m?++K:--K)g.push(n[a].new);else d.push(O-L),z.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*V+2*g.length),P.writeUInt16(0),P.writeUInt16(G),P.writeUInt16(T),P.writeUInt16(x),P.writeUInt16(H),me=0,R=f.length;me<R;me++)a=f[me],P.writeUInt16(a);for(P.writeUInt16(0),pe=0,q=F.length;pe<q;pe++)a=F[pe],P.writeUInt16(a);for(je=0,te=d.length;je<te;je++)A=d[je],P.writeUInt16(A);for(Pe=0,de=z.length;Pe<de;Pe++)k=z[Pe],P.writeUInt16(k);for(De=0,fe=g.length;De<fe;De++)b=g[De],P.writeUInt16(b);return{charMap:n,subtable:P.data,maxGlyphID:I+1}}},r})(),GB=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="cmap",r.prototype.parse=function(t){var s,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)s=new Ly(t,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},r.encode=function(t,s){var n,a;return s==null&&(s="macroman"),n=Ly.encode(t,s),(a=new zA).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},r})(),yD=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="hhea",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},r})(),ND=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="OS/2",r.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var s,n;for(n=[],s=0;s<10;++s)n.push(t.readByte());return n})(),this.charRange=(function(){var s,n;for(n=[],s=0;s<4;++s)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var s,n;for(n=[],s=0;s<2;s=++s)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},r})(),jD=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="post",r.prototype.parse=function(t){var s,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)s=t.readByte(),a.push(this.names.push(t.readString(s)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=function(){var c,A,d;for(d=[],i=c=0,A=this.file.maxp.numGlyphs;0<=A?c<A:c>A;i=0<=A?++c:--c)d.push(t.readUInt32());return d}.call(this)}},r})(),BD=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},CD=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="name",r.prototype.parse=function(t){var s,n,a,i,c,A,d,u,m,f,x;for(t.pos=this.offset,t.readShort(),s=t.readShort(),A=t.readShort(),n=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+A+t.readShort()});for(d={},i=m=0,f=n.length;m<f;i=++m)a=n[i],t.pos=a.offset,u=t.readString(a.length),c=new BD(u,a),d[x=a.nameID]==null&&(d[x]=[]),d[a.nameID].push(c);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},r})(),SD=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="maxp",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},r})(),ED=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="hmtx",r.prototype.parse=function(t){var s,n,a,i,c,A,d;for(t.pos=this.offset,this.metrics=[],s=0,A=this.file.hhea.numberOfMetrics;0<=A?s<A:s>A;s=0<=A?++s:--s)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,m;for(m=[],s=u=0;0<=a?u<a:u>a;s=0<=a?++u:--u)m.push(t.readInt16());return m})(),this.widths=function(){var u,m,f,x;for(x=[],u=0,m=(f=this.metrics).length;u<m;u++)i=f[u],x.push(i.advance);return x}.call(this),n=this.widths[this.widths.length-1],d=[],s=c=0;0<=a?c<a:c>a;s=0<=a?++c:--c)d.push(this.widths.push(n));return d},r.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},r})(),WB=[].slice,FD=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(t){var s,n,a,i,c,A,d,u,m,f;return t in this.cache?this.cache[t]:(i=this.file.loca,s=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(s.pos=this.offset+n,c=(A=new zA(s.read(a))).readShort(),u=A.readShort(),f=A.readShort(),d=A.readShort(),m=A.readShort(),this.cache[t]=c===-1?new kD(A,u,f,d,m):new _D(A,c,u,f,d,m),this.cache[t]))},r.prototype.encode=function(t,s,n){var a,i,c,A,d;for(c=[],i=[],A=0,d=s.length;A<d;A++)a=t[s[A]],i.push(c.length),a&&(c=c.concat(a.encode(n)));return i.push(c.length),{table:c,offsets:i}},r})(),_D=(function(){function r(t,s,n,a,i,c){this.raw=t,this.numberOfContours=s,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=c,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),kD=(function(){function r(t,s,n,a,i){var c,A;for(this.raw=t,this.xMin=s,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;A=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&A;)c.pos+=1&A?4:2,128&A?c.pos+=8:64&A?c.pos+=4:8&A&&(c.pos+=2)}return r.prototype.encode=function(){var t,s,n;for(s=new zA(WB.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)s.pos=this.glyphOffsets[t];return s.data},r})(),UD=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return nc(r,fl),r.prototype.tag="loca",r.prototype.parse=function(t){var s,n;return t.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}.call(this):function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}.call(this)},r.prototype.indexOf=function(t){return this.offsets[t]},r.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},r.prototype.encode=function(t,s){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,c=0;c<n.length;++c)if(n[c]=a,i<s.length&&s[i]==c){++i,n[c]=a;var A=this.offsets[c],d=this.offsets[c+1]-A;d>0&&(a+=d)}for(var u=new Array(4*n.length),m=0;m<n.length;++m)u[4*m+3]=255&n[m],u[4*m+2]=(65280&n[m])>>8,u[4*m+1]=(16711680&n[m])>>16,u[4*m]=(4278190080&n[m])>>24;return u},r})(),ID=(function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,s,n,a,i;for(s in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[s],t[s]=a[n];return t},r.prototype.glyphsFor=function(t){var s,n,a,i,c,A,d;for(a={},c=0,A=t.length;c<A;c++)a[i=t[c]]=this.font.glyf.glyphFor(i);for(i in s=[],a)(n=a[i])!=null&&n.compound&&s.push.apply(s,n.glyphIDs);if(s.length>0)for(i in d=this.glyphsFor(s))n=d[i],a[i]=n;return a},r.prototype.encode=function(t,s){var n,a,i,c,A,d,u,m,f,x,g,y,b,B,N;for(a in n=GB.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),g={0:0},N=n.charMap)g[(d=N[a]).old]=d.new;for(y in x=n.maxGlyphID,c)y in g||(g[y]=x++);return m=(function(E){var I,k;for(I in k={},E)k[E[I]]=I;return k})(g),f=Object.keys(m).sort(function(E,I){return E-I}),b=(function(){var E,I,k;for(k=[],E=0,I=f.length;E<I;E++)A=f[E],k.push(m[A]);return k})(),i=this.font.glyf.encode(c,b,g),u=this.font.loca.encode(i.offsets,b),B={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(B["OS/2"]=this.font.os2.raw()),this.font.directory.encode(B)},r})();hs.API.PDFObject=(function(){var r;function t(){}return r=function(s,n){return(Array(n+1).join("0")+s).slice(-n)},t.convert=function(s){var n,a,i,c;if(Array.isArray(s))return"["+(function(){var A,d,u;for(u=[],A=0,d=s.length;A<d;A++)n=s[A],u.push(t.convert(n));return u})().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s?.isString)return"("+s+")";if(s instanceof Date)return"(D:"+r(s.getUTCFullYear(),4)+r(s.getUTCMonth(),2)+r(s.getUTCDate(),2)+r(s.getUTCHours(),2)+r(s.getUTCMinutes(),2)+r(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(a in i=["<<"],s)c=s[a],i.push("/"+a+" "+t.convert(c));return i.push(">>"),i.join(`
`)}return""+s},t})();const LD=async r=>{const t=document.getElementById(r);if(!t){console.error("Element not found");return}const s=window.open("","_blank");if(!s){console.error("Could not open print window");return}const n=t.cloneNode(!0);s.document.write(`
    <!DOCTYPE html>
    <html>
      <head>
        <title>Student Result Sheet</title>
        
    <style>
      @page {
        size: A4;
        margin: 0.5in;
      }
      body {
        font-family: Arial, sans-serif;
        font-size: 12px;
        margin: 0;
        padding: 0;
      }
      .no-print {
        display: none !important;
      }
      table {
        page-break-inside: avoid;
        border-collapse: collapse;
      }
      tr {
        page-break-inside: avoid;
      }
      td, th {
        border: 1px solid black;
      }
      .signature-section {
        page-break-inside: avoid;
      }
    </style>
  
      </head>
      <body>
        ${n.innerHTML}
      </body>
    </html>
  `),s.document.close(),setTimeout(()=>{s.print(),s.close()},500)},QD=async(r,t="result-sheet.pdf")=>{const s=document.getElementById(r);if(!s){console.error("Element not found");return}try{const n=s.querySelector(".flex.justify-center.space-x-4");n&&(n.style.display="none");const a=await rB(s,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:s.scrollWidth,height:s.scrollHeight});n&&(n.style.display="flex");const i=a.toDataURL("image/png"),c=new hs("p","mm","a4"),A=210,d=297,u=a.height*A/a.width;let m=u,f=0;for(c.addImage(i,"PNG",0,f,A,u),m-=d;m>=0;)f=m-u,c.addPage(),c.addImage(i,"PNG",0,f,A,u),m-=d;c.save(t)}catch(n){console.error("Error generating PDF:",n)}},TD=(r,t,s)=>`${r.replace(/[^a-zA-Z0-9]/g,"_")}_${t}_${s}_result_sheet.pdf`;function PD({studentId:r,classId:t,term:s,academicYear:n}){const[a,i]=j.useState(!1),{students:c,classes:A,compiledResults:d,currentUser:u,loadCompiledResultsFromAPI:m}=ys(),[f,x]=j.useState(!1),[g,y]=j.useState(null);j.useEffect(()=>{d.length===0&&m()},[]),j.useEffect(()=>{a&&r&&t&&s&&n&&b()},[a,r,t,s,n,d]);const b=async()=>{x(!0);try{const E=d.find(I=>I.student_id===r&&I.class_id===t&&I.term===s&&I.academic_year===n);if(E)y(E);else{const I=c.find($=>$.id===r);y({id:0,student_id:r,class_id:t,term:s,academic_year:n,scores:[],affective:{attentiveness:4,honesty:3,neatness:4,obedience:2,responsibility:3},psychomotor:{attention_direction:4,considerate_others:2,handwriting:4,sports:3,verbal_fluency:4,independent_work:5},class_teacher_name:"CHRIS RHEMA",class_teacher_comment:"A very good result. Put more effort.",principal_name:"OROGUN GLORY EJIRO",principal_comment:"A very good result. Release your potentials cause you can do more dear.",status:"Draft",print_approved:!1,total_score:0,average_score:0,class_average:0,position:null})}}catch(E){console.error("Error fetching student result data:",E),y(null)}finally{x(!1)}},B=()=>{LD("student-result-card")},N=()=>{const E=c.find(I=>I.id===r);if(E){const I=TD(`${E.firstName} ${E.lastName}`,s,n);QD("student-result-card",I)}};return e.jsxs(Zs,{open:a,onOpenChange:i,children:[e.jsx(Rh,{asChild:!0,children:e.jsxs(Ce,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"View Result Sheet"]})}),e.jsxs(er,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ur,{children:e.jsx(hr,{children:"Student Result Sheet"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(Ce,{onClick:B,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Print"]}),e.jsxs(Ce,{onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",id:"student-result-card",children:f?e.jsxs("div",{className:"flex justify-center items-center py-20",children:[e.jsx(oS,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading result data..."})]}):g?e.jsx(Zj,{result:g,currentUser:u,showActions:!0,onDownload:N,onPrint:B}):e.jsxs("div",{className:"text-center py-20 text-gray-500",children:[e.jsx("p",{children:"No result data found for this student."}),e.jsx("p",{className:"text-sm mt-2",children:"Please ensure the result has been compiled."})]})})]})]})]})}function RD(){const{currentUser:r,students:t,classes:s,compiledResults:n,updateCompiledResult:a,deleteCompiledResult:i,currentTerm:c,currentAcademicYear:A,parents:d,teachers:u,loadCompiledResultsFromAPI:m,addNotification:f,getAllAcademicYears:x,getCompiledResultsByYearAndTerm:g}=ys(),[y,b]=j.useState([]),[B,N]=j.useState(!1),[E,I]=j.useState(""),[k,$]=j.useState(""),[z,H]=j.useState(!1),[T,V]=j.useState(!1),[G,L]=j.useState("management"),[F,O]=j.useState("pending"),[P,ce]=j.useState("all"),[W,ae]=j.useState(c),[K,le]=j.useState(A),[ie,se]=j.useState([]),[R,q]=j.useState(""),[te,de]=j.useState(null),[fe,me]=j.useState(""),[pe,ee]=j.useState(""),je=j.useRef(null);j.useEffect(()=>{m(),Pe()},[]);const Pe=async()=>{try{const Ue=await x();se(Ue)}catch(Ue){console.error("Error loading academic years:",Ue)}};j.useEffect(()=>{K&&W&&De()},[K,W]);const De=async()=>{if(K===A&&W===c)m();else try{const Ue=await g(K,W);console.log("Loaded historical results:",Ue)}catch(Ue){console.error("Error loading historical results:",Ue)}},nt=j.useMemo(()=>{let Ue=n.filter(We=>We.term===W&&We.academic_year===K&&(P==="all"||We.class_id===Number(P)));return F==="pending"?Ue=Ue.filter(We=>We.status==="Submitted"):F==="approved"?Ue=Ue.filter(We=>We.status==="Approved"):F==="rejected"?Ue=Ue.filter(We=>We.status==="Rejected"):F==="all"&&(Ue=Ue.filter(We=>We.status!=="Rejected")),R&&(Ue=Ue.filter(We=>{const Bt=t.find(Me=>Me.id===We.student_id);if(!Bt)return!1;const mt=R.toLowerCase();return Bt.firstName&&Bt.firstName.toLowerCase().includes(mt)||Bt.lastName&&Bt.lastName.toLowerCase().includes(mt)||Bt.admissionNumber&&Bt.admissionNumber.toLowerCase().includes(mt)})),Ue},[n,W,K,P,F,R,t]),Se=j.useMemo(()=>nt.map(Ue=>{const We=t.find(Bt=>Bt.id===Ue.student_id);return We?{...We,result:Ue}:null}).filter(Boolean),[nt,t]),X=j.useMemo(()=>te?n.find(Ue=>Ue.id===te):null,[te,n]);if(j.useMemo(()=>X?t.find(Ue=>Ue.id===X.student_id):null,[X,t]),G==="viewAll")return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>L("management"),className:"rounded-xl",children:[e.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back to Management"]}),e.jsx("h1",{className:"text-[#0A2540]",children:"View All Results"})]}),e.jsx(DD,{onBack:()=>L("management")})]});if(G==="viewSheets")return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Ce,{variant:"outline",onClick:()=>L("management"),className:"rounded-xl",children:[e.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back to Management"]}),e.jsx("h1",{className:"text-[#0A2540]",children:"View Result Sheets"})]}),e.jsx(OD,{onBack:()=>L("management")})]});const Ie=Ue=>{const We=n.find(mt=>mt.id===Ue);if(!We)return;if(!fe.trim()){he.error("Please enter a principal comment");return}a(Ue,{status:"Approved",approved_by:r?.id||null,approved_date:new Date().toISOString(),principal_comment:fe,principal_signature:""});const Bt=t.find(mt=>mt.id===We.student_id);if(Bt){Bt.parent_id&&d.find(Me=>Me.id===Bt.parent_id);const mt=s.find(Me=>Me.id===We.class_id);mt?.classTeacherId&&u.find(Me=>Me.id===mt.classTeacherId)}he.success("Result approved successfully!"),me(""),de(null)},rt=async Ue=>{if(!pe.trim()){he.error("Please provide a reason for rejection");return}a(Ue,{status:"Rejected",rejection_reason:pe});const We=n.find(mt=>mt.id===Ue),Bt=t.find(mt=>mt.id===We?.student_id);if(Bt&&We){const mt={title:"Result Rejected ",message:`${Bt.firstName} ${Bt.lastName}'s result for ${We.term} has been rejected. Reason: ${pe}`,type:"warning",targetAudience:"all",sentBy:r.id};await f({title:mt.title,message:mt.message,type:mt.type,targetAudience:mt.targetAudience,sentBy:mt.sentBy,sentDate:new Date().toISOString(),isRead:!1,readBy:[]});const Me=s.find(Ve=>Ve.id===We.class_id);if(Me?.classTeacherId){const Ve=u.find(wt=>wt.id===Me.classTeacherId);if(Ve){const wt={title:"Result Rejected - Action Required",message:`Result for ${Bt.firstName} ${Bt.lastName} (${Me.name}) was rejected. Reason: ${pe}. Please review and resubmit.`,type:"warning",targetAudience:"teachers",sentBy:r.id};await f({title:wt.title,message:wt.message,type:wt.type,targetAudience:wt.targetAudience,sentBy:wt.sentBy,sentDate:new Date().toISOString(),isRead:!1,readBy:[]}),he.info(`Notification sent to ${Ve.firstName} ${Ve.lastName}`)}}}he.warning("Result rejected"),ee(""),de(null)},Ee=Ue=>{window.confirm("Are you sure you want to delete this result? This action cannot be undone.")&&(i(Ue),he.success("Result deleted successfully"),de(null))},Te=()=>{if(je.current){const Ue=window.open("","_blank");Ue&&(Ue.document.write("<html><head><title>Result Sheet</title>"),Ue.document.write("<style>@media print { body { margin: 0; } }</style>"),Ue.document.write("</head><body>"),Ue.document.write(je.current.innerHTML),Ue.document.write("</body></html>"),Ue.document.close(),Ue.focus(),setTimeout(()=>{Ue.print(),Ue.close(),he.success("Result sheet printed successfully")},250))}},dt=()=>{Te(),he.info("Use your browser's 'Save as PDF' option in the print dialog")},st=Ue=>{b(We=>We.includes(Ue)?We.filter(Bt=>Bt!==Ue):[...We,Ue])},ft=()=>{y.length===nt.length?b([]):b(nt.map(Ue=>Ue.id))},et=()=>{if(!E.trim()){he.error("Please provide a comment for bulk approval");return}y.forEach(Ue=>{a(Ue,{status:"Approved",principal_comment:E,approved_by:r?.id,approved_date:new Date().toISOString()})}),he.success(`Approved ${y.length} results successfully!`),b([]),I(""),H(!1)},it=async()=>{if(!k.trim()){he.error("Please provide a reason for bulk rejection");return}for(const Ue of y){const We=n.find(mt=>mt.id===Ue),Bt=t.find(mt=>mt.id===We?.student_id);if(a(Ue,{status:"Rejected",rejection_reason:k}),Bt&&We){const mt=s.find(Me=>Me.id===We.class_id);if(mt?.classTeacherId){const Me=u.find(Ve=>Ve.id===mt.classTeacherId);if(Me){const Ve={title:"Result Rejected - Action Required",message:`Result for ${Bt.firstName} ${Bt.lastName} (${mt.name}) was rejected. Reason: ${k}. Please review and resubmit.`,type:"warning",targetAudience:"teachers",sentBy:r.id,sentDate:new Date().toISOString()};await f({title:Ve.title,message:Ve.message,type:Ve.type,targetAudience:Ve.targetAudience,sentBy:Ve.sentBy,sentDate:Ve.sentDate,isRead:!1,readBy:[]}),he.info(`Notification sent to ${Me.firstName} ${Me.lastName}`)}}}}he.warning(`Rejected ${y.length} results! Teachers notified for corrections.`),b([]),$(""),V(!1)};return j.useMemo(()=>!P||P==="all"?nt:nt.filter(Ue=>Ue.class_id===parseInt(P)),[nt,P]),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg border border-gray-200 p-4 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Results Management"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Approve and manage student results"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>L("viewAll"),className:"border-blue-200 text-blue-700 hover:bg-blue-50",children:[e.jsx(_f,{className:"w-4 h-4 mr-1"}),"All Results"]}),e.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>L("viewSheets"),className:"border-green-200 text-green-700 hover:bg-green-50",children:[e.jsx(Vn,{className:"w-4 h-4 mr-1"}),"Sheets"]})]})]}),e.jsx(ye,{className:"border-gray-200 shadow-sm",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(op,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-xs text-gray-600 mb-1 block",children:"Year"}),e.jsxs(Qt,{value:K,onValueChange:le,children:[e.jsx(Pt,{className:"h-9 rounded-lg border-gray-200 text-sm",children:e.jsx(Tt,{placeholder:"Year"})}),e.jsx(Rt,{children:ie.map(Ue=>e.jsx(be,{value:Ue,children:Ue},Ue))})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-xs text-gray-600 mb-1 block",children:"Term"}),e.jsxs(Qt,{value:W,onValueChange:ae,children:[e.jsx(Pt,{className:"h-9 rounded-lg border-gray-200 text-sm",children:e.jsx(Tt,{placeholder:"Term"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"First Term",children:"First"}),e.jsx(be,{value:"Second Term",children:"Second"}),e.jsx(be,{value:"Third Term",children:"Third"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-xs text-gray-600 mb-1 block",children:"Class"}),e.jsxs(Qt,{value:P,onValueChange:ce,children:[e.jsx(Pt,{className:"h-9 rounded-lg border-gray-200 text-sm",children:e.jsx(Tt,{placeholder:"All Classes"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Classes"}),s.map(Ue=>e.jsx(be,{value:Ue.id.toString(),children:Ue.name},Ue.id))]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-xs text-gray-600 mb-1 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-3 h-3"}),e.jsx(Et,{placeholder:"Student name...",value:R,onChange:Ue=>q(Ue.target.value),className:"pl-7 h-9 rounded-lg border-gray-200 text-sm"})]})]}),e.jsx("div",{className:"flex items-end",children:K!==A||W!==c?e.jsxs("div",{className:"flex items-center gap-1 text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded-md",children:[e.jsx(jn,{className:"w-3 h-3"}),e.jsx("span",{children:"Historical"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 bg-green-50 px-2 py-1 rounded-md",children:[e.jsx(jn,{className:"w-3 h-3"}),e.jsx("span",{children:"Current"})]})})]})]})}),e.jsxs(zj,{value:F,onValueChange:O,children:[e.jsxs($j,{className:"grid w-full grid-cols-4 bg-gray-50 rounded-lg p-1 h-9",children:[e.jsxs(jA,{value:"pending",className:"rounded-md text-xs data-[state=active]:bg-yellow-100 data-[state=active]:text-yellow-800",children:["Pending (",n.filter(Ue=>Ue.status==="Submitted"&&Ue.term===W&&Ue.academic_year===K).length,")"]}),e.jsxs(jA,{value:"approved",className:"rounded-md text-xs data-[state=active]:bg-green-100 data-[state=active]:text-green-800",children:["Approved (",n.filter(Ue=>Ue.status==="Approved"&&Ue.term===W&&Ue.academic_year===K).length,")"]}),e.jsxs(jA,{value:"rejected",className:"rounded-md text-xs data-[state=active]:bg-red-100 data-[state=active]:text-red-800",children:["Rejected (",n.filter(Ue=>Ue.status==="Rejected"&&Ue.term===W&&Ue.academic_year===K).length,")"]}),e.jsxs(jA,{value:"all",className:"rounded-md text-xs data-[state=active]:bg-blue-100 data-[state=active]:text-blue-800",children:["All (",n.filter(Ue=>Ue.status!=="Rejected"&&Ue.term===W&&Ue.academic_year===K).length,")"]})]}),e.jsxs(ph,{value:F,className:"mt-4",children:[F==="pending"&&nt.length>0&&e.jsx(ye,{className:"border-gray-200 shadow-sm mb-3",children:e.jsx(ke,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:y.length===nt.length&&nt.length>0,onChange:ft,className:"w-4 h-4 text-blue-600 rounded border-gray-300"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[y.length," of ",nt.length," selected"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{size:"sm",onClick:()=>H(!0),disabled:y.length===0,className:"bg-green-600 hover:bg-green-700 text-white h-8",children:[e.jsx(kr,{className:"w-3 h-3 mr-1"}),"Approve (",y.length,")"]}),e.jsxs(Ce,{size:"sm",onClick:()=>V(!0),disabled:y.length===0,variant:"destructive",className:"h-8",children:[e.jsx(ba,{className:"w-3 h-3 mr-1"}),"Reject (",y.length,")"]})]})]})})}),e.jsxs(ye,{className:"border-gray-200 shadow-sm",children:[e.jsx(It,{className:"bg-gray-50 border-b border-gray-200 px-4 py-3",children:e.jsxs(Hs,{className:"text-sm font-medium text-gray-700",children:[F==="pending"&&"Pending Approval",F==="approved"&&"Approved Results",F==="rejected"&&"Rejected Results",F==="all"&&"All Results",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",nt.length,")"]})]})}),e.jsx(ke,{className:"p-4",children:Se.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Vn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No results found"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[F==="pending"&&"No results pending approval",F==="approved"&&"No approved results",F==="rejected"&&"No rejected results",F==="all"&&"No results available"]})]}):e.jsx("div",{className:"space-y-2",children:Se.map(Ue=>e.jsx("div",{className:"p-3 border border-gray-200 rounded-lg hover:border-gray-300 hover:bg-gray-50 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[F==="pending"&&e.jsx("input",{type:"checkbox",checked:y.includes(Ue.result.id),onChange:()=>st(Ue.result.id),className:"w-4 h-4 text-blue-600 rounded border-gray-300"}),e.jsxs("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-xs font-medium",children:[Ue.firstName[0],Ue.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-base font-semibold text-gray-800 leading-tight",children:[Ue.firstName," ",Ue.lastName]}),e.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:[Ue.admissionNumber,"  ",Ue.className]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Average"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800",children:[Ue.result.average_score,"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Position"}),e.jsxs(Ct,{className:"bg-green-50 text-green-700 border-green-200 rounded-lg text-xs font-medium px-2 py-1",children:[Ue.result.position,"/",Ue.result.total_students]})]}),e.jsx("div",{children:e.jsx(Ct,{className:`rounded-lg text-xs font-medium px-2 py-1 ${Ue.result.status==="Submitted"?"bg-yellow-50 text-yellow-700 border-yellow-200":Ue.result.status==="Approved"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:Ue.result.status})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Zs,{children:[e.jsx(Rh,{asChild:!0,children:e.jsxs(Ce,{size:"sm",className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",onClick:()=>de(Ue.result.id),children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"Review"]})}),e.jsxs(er,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ur,{children:[e.jsxs(hr,{children:["Review Result - ",Ue.firstName," ",Ue.lastName]}),e.jsx(Hn,{children:"Review and approve or reject student results"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Zj,{result:Ue.result,currentUser:r,showActions:!1}),Ue.result.status==="Submitted"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-[#0A2540] font-medium mb-4",children:"Principal's Review"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Principal's Comment *"}),e.jsx($a,{value:fe,onChange:We=>me(We.target.value),placeholder:"Enter your comment for this student...",className:"min-h-24 rounded-xl border-[#0A2540]/20"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ce,{onClick:()=>Ie(Ue.result.id),className:"flex-1 bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(kr,{className:"w-4 h-4 mr-2"}),"Approve Result"]}),e.jsxs(Zs,{children:[e.jsx(Rh,{asChild:!0,children:e.jsxs(Ce,{variant:"outline",className:"flex-1 rounded-xl border-red-300 text-red-600 hover:bg-red-50",children:[e.jsx(ba,{className:"w-4 h-4 mr-2"}),"Reject Result"]})}),e.jsxs(er,{children:[e.jsx(ur,{children:e.jsx(hr,{children:"Reject Result"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(He,{children:"Reason for Rejection *"}),e.jsx($a,{value:pe,onChange:We=>ee(We.target.value),placeholder:"Please provide a detailed reason...",className:"min-h-24 mt-2"})]}),e.jsx(Ce,{onClick:()=>rt(Ue.result.id),className:"w-full bg-red-600 hover:bg-red-700 text-white",children:"Confirm Rejection"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 border-t pt-4",children:[e.jsxs(Ce,{onClick:Te,variant:"outline",className:"rounded-xl flex-1",children:[e.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Print"]}),e.jsxs(Ce,{onClick:dt,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl flex-1",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),Ue.result.status!=="Approved"&&e.jsxs(Ce,{onClick:()=>Ee(Ue.result.id),variant:"outline",className:"rounded-xl border-red-300 text-red-600 hover:bg-red-50",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})]}),e.jsx(PD,{studentId:Ue.id,classId:Ue.result.class_id,term:W,academicYear:K})]})]})]})},Ue.id))})})]})]})]}),e.jsx(Zs,{open:z,onOpenChange:H,children:e.jsxs(er,{className:"sm:max-w-md",children:[e.jsx(ur,{children:e.jsx(hr,{className:"text-green-600",children:"Bulk Approve Results"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["You are about to approve ",y.length," result(s). This action cannot be undone."]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium",children:"Principal's Comment"}),e.jsx($a,{value:E,onChange:Ue=>I(Ue.target.value),placeholder:"Enter comment for all approved results...",className:"mt-1",rows:3})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(Ce,{onClick:et,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(kr,{className:"w-4 h-4 mr-2"}),"Approve ",y.length," Results"]}),e.jsx(Ce,{variant:"outline",onClick:()=>H(!1),children:"Cancel"})]})]})]})}),e.jsx(Zs,{open:T,onOpenChange:V,children:e.jsxs(er,{className:"sm:max-w-md",children:[e.jsx(ur,{children:e.jsx(hr,{className:"text-red-600",children:"Bulk Reject Results"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["You are about to reject ",y.length," result(s). This action cannot be undone."]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium",children:"Rejection Reason"}),e.jsx($a,{value:k,onChange:Ue=>$(Ue.target.value),placeholder:"Enter reason for rejection...",className:"mt-1",rows:3})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(Ce,{onClick:it,className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ba,{className:"w-4 h-4 mr-2"}),"Reject ",y.length," Results"]}),e.jsx(Ce,{variant:"outline",onClick:()=>V(!1),children:"Cancel"})]})]})]})})]})}function DD({onBack:r}){return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs(Ce,{onClick:r||(()=>{}),variant:"outline",className:"mr-4",children:[e.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back to Management"]}),e.jsx("h2",{className:"text-2xl font-bold",children:"All Results"})]}),e.jsx(ye,{children:e.jsx(ke,{className:"p-6",children:e.jsx("p",{className:"text-gray-600",children:"View all results functionality coming soon..."})})})]})}function OD({onBack:r}){return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs(Ce,{onClick:r||(()=>{}),variant:"outline",className:"mr-4",children:[e.jsx(Fu,{className:"w-4 h-4 mr-2"}),"Back to Management"]}),e.jsx("h2",{className:"text-2xl font-bold",children:"Result Sheets"})]}),e.jsx(ye,{children:e.jsx(ke,{className:"p-6",children:e.jsx("p",{className:"text-gray-600",children:"View result sheets functionality coming soon..."})})})]})}function MD(){const{classes:r,students:t,getStudentsByClass:s,getAttendancesByClass:n,getAttendancesByDate:a,attendances:i,currentTerm:c,currentAcademicYear:A}=ys(),[d,u]=j.useState(0),[m,f]=j.useState(""),[x,g]=j.useState(new Date().toISOString().split("T")[0]),[y,b]=j.useState("class"),B=i.filter(G=>{const L=d===0||G.classId===d,F=(!m||G.date>=m)&&(!x||G.date<=x),O=G.term===c&&G.academicYear===A;return L&&F&&O}),N=B.length,E=B.filter(G=>G.status==="Present").length,I=B.filter(G=>G.status==="Absent").length,k=B.filter(G=>G.status==="Late").length;B.filter(G=>G.status==="Excused").length;const $=N>0?((E+k)/N*100).toFixed(1):0,z=()=>(d?s(d):t).map(L=>{const F=B.filter(le=>le.studentId===L.id),O=F.filter(le=>le.status==="Present").length,P=F.filter(le=>le.status==="Absent").length,ce=F.filter(le=>le.status==="Late").length,W=F.filter(le=>le.status==="Excused").length,ae=F.length,K=ae>0?((O+ce)/ae*100).toFixed(1):0;return{student:L,present:O,absent:P,late:ce,excused:W,total:ae,rate:Number(K)}}).sort((L,F)=>F.rate-L.rate),H=()=>[...new Set(B.map(L=>L.date))].sort().reverse().map(L=>{const F=B.filter(le=>le.date===L),O=F.filter(le=>le.status==="Present").length,P=F.filter(le=>le.status==="Absent").length,ce=F.filter(le=>le.status==="Late").length,W=F.filter(le=>le.status==="Excused").length,ae=F.length,K=ae>0?((O+ce)/ae*100).toFixed(1):0;return{date:L,present:O,absent:P,late:ce,excused:W,total:ae,rate:Number(K)}}),T=()=>r.map(G=>{const L=B.filter(K=>K.classId===G.id),F=L.filter(K=>K.status==="Present").length,O=L.filter(K=>K.status==="Absent").length,P=L.filter(K=>K.status==="Late").length,ce=L.filter(K=>K.status==="Excused").length,W=L.length,ae=W>0?((F+P)/W*100).toFixed(1):0;return{class:G,present:F,absent:O,late:P,excused:ce,total:W,rate:Number(ae)}}).filter(G=>G.total>0).sort((G,L)=>L.rate-G.rate),V=()=>{let G="",L="";if(y==="student"){const ce=z();G=`Student Name,Admission Number,Class,Present,Absent,Late,Excused,Total Days,Attendance Rate
`,ce.forEach(W=>{G+=`${W.student.firstName} ${W.student.lastName},${W.student.admissionNumber},${W.student.className},${W.present},${W.absent},${W.late},${W.excused},${W.total},${W.rate}%
`}),L=`student-attendance-report-${x}.csv`}else if(y==="daily"){const ce=H();G=`Date,Present,Absent,Late,Excused,Total,Attendance Rate
`,ce.forEach(W=>{G+=`${W.date},${W.present},${W.absent},${W.late},${W.excused},${W.total},${W.rate}%
`}),L=`daily-attendance-report-${x}.csv`}else{const ce=T();G=`Class,Present,Absent,Late,Excused,Total,Attendance Rate
`,ce.forEach(W=>{G+=`${W.class.name},${W.present},${W.absent},${W.late},${W.excused},${W.total},${W.rate}%
`}),L=`class-attendance-report-${x}.csv`}const F=new Blob([G],{type:"text/csv"}),O=window.URL.createObjectURL(F),P=document.createElement("a");P.href=O,P.download=L,P.click()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-slate-900 mb-2",children:"Attendance Reports"}),e.jsx("p",{className:"text-slate-600",children:"View and analyze student attendance data"})]}),e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(op,{className:"w-5 h-5 text-slate-600"}),e.jsx("h3",{className:"text-slate-800",children:"Filter Reports"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-slate-700 text-sm",children:"Report Type"}),e.jsxs("select",{value:y,onChange:G=>b(G.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"class",children:"By Class"}),e.jsx("option",{value:"student",children:"By Student"}),e.jsx("option",{value:"daily",children:"By Date"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-slate-700 text-sm",children:"Class"}),e.jsxs("select",{value:d,onChange:G=>u(Number(G.target.value)),className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"All Classes"}),r.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-slate-700 text-sm",children:"Start Date"}),e.jsx("input",{type:"date",value:m,onChange:G=>f(G.target.value),max:x,className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-slate-700 text-sm",children:"End Date"}),e.jsx("input",{type:"date",value:x,onChange:G=>g(G.target.value),max:new Date().toISOString().split("T")[0],className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(Ce,{onClick:V,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export to CSV"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(ye,{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Qs,{className:"w-8 h-8 text-blue-600"})}),e.jsx("p",{className:"text-blue-600 text-sm mb-1",children:"Total Records"}),e.jsx("p",{className:"text-3xl text-blue-900",children:N})]}),e.jsxs(ye,{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Cc,{className:"w-8 h-8 text-green-600"})}),e.jsx("p",{className:"text-green-600 text-sm mb-1",children:"Present"}),e.jsx("p",{className:"text-3xl text-green-900",children:E})]}),e.jsxs(ye,{className:"p-6 bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ba,{className:"w-8 h-8 text-red-600"})}),e.jsx("p",{className:"text-red-600 text-sm mb-1",children:"Absent"}),e.jsx("p",{className:"text-3xl text-red-900",children:I})]}),e.jsxs(ye,{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl border border-yellow-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Ci,{className:"w-8 h-8 text-yellow-600"})}),e.jsx("p",{className:"text-yellow-600 text-sm mb-1",children:"Late"}),e.jsx("p",{className:"text-3xl text-yellow-900",children:k})]}),e.jsxs(ye,{className:"p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Ed,{className:"w-8 h-8 text-purple-600"})}),e.jsx("p",{className:"text-purple-600 text-sm mb-1",children:"Attendance Rate"}),e.jsxs("p",{className:"text-3xl text-purple-900",children:[$,"%"]})]})]}),y==="student"&&e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"text-slate-800 mb-4",children:"Student Attendance Summary"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200",children:[e.jsx("th",{className:"text-left p-3 text-slate-700",children:"Student Name"}),e.jsx("th",{className:"text-left p-3 text-slate-700",children:"Admission No."}),e.jsx("th",{className:"text-left p-3 text-slate-700",children:"Class"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Present"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Absent"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Late"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Excused"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Total Days"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Rate"})]})}),e.jsx("tbody",{children:z().map(G=>e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsxs("td",{className:"p-3",children:[G.student.firstName," ",G.student.lastName]}),e.jsx("td",{className:"p-3 text-slate-600",children:G.student.admissionNumber}),e.jsx("td",{className:"p-3 text-slate-600",children:G.student.className}),e.jsx("td",{className:"p-3 text-center text-green-600",children:G.present}),e.jsx("td",{className:"p-3 text-center text-red-600",children:G.absent}),e.jsx("td",{className:"p-3 text-center text-yellow-600",children:G.late}),e.jsx("td",{className:"p-3 text-center text-blue-600",children:G.excused}),e.jsx("td",{className:"p-3 text-center",children:G.total}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm ${G.rate>=90?"bg-green-100 text-green-700":G.rate>=75?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[G.rate,"%"]})})]},G.student.id))})]})})]}),y==="daily"&&e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"text-slate-800 mb-4",children:"Daily Attendance Summary"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200",children:[e.jsx("th",{className:"text-left p-3 text-slate-700",children:"Date"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Present"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Absent"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Late"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Excused"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Total"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Rate"})]})}),e.jsx("tbody",{children:H().map(G=>e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsx("td",{className:"p-3",children:new Date(G.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),e.jsx("td",{className:"p-3 text-center text-green-600",children:G.present}),e.jsx("td",{className:"p-3 text-center text-red-600",children:G.absent}),e.jsx("td",{className:"p-3 text-center text-yellow-600",children:G.late}),e.jsx("td",{className:"p-3 text-center text-blue-600",children:G.excused}),e.jsx("td",{className:"p-3 text-center",children:G.total}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm ${G.rate>=90?"bg-green-100 text-green-700":G.rate>=75?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[G.rate,"%"]})})]},G.date))})]})})]}),y==="class"&&e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"text-slate-800 mb-4",children:"Class Attendance Summary"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200",children:[e.jsx("th",{className:"text-left p-3 text-slate-700",children:"Class"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Present"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Absent"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Late"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Excused"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Total Records"}),e.jsx("th",{className:"text-center p-3 text-slate-700",children:"Rate"})]})}),e.jsx("tbody",{children:T().map(G=>e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsx("td",{className:"p-3",children:G.class.name}),e.jsx("td",{className:"p-3 text-center text-green-600",children:G.present}),e.jsx("td",{className:"p-3 text-center text-red-600",children:G.absent}),e.jsx("td",{className:"p-3 text-center text-yellow-600",children:G.late}),e.jsx("td",{className:"p-3 text-center text-blue-600",children:G.excused}),e.jsx("td",{className:"p-3 text-center",children:G.total}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm ${G.rate>=90?"bg-green-100 text-green-700":G.rate>=75?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[G.rate,"%"]})})]},G.class.id))})]})})]})]})}function HD(){const{classes:r,subjects:t,examTimetables:s,addExamTimetable:n,updateExamTimetable:a,deleteExamTimetable:i,getExamTimetablesByClass:c,currentUser:A,currentTerm:d,currentAcademicYear:u}=ys(),[m,f]=j.useState(!1),[x,g]=j.useState(null),[y,b]=j.useState(0),[B,N]=j.useState({classId:0,subjectId:0,examType:"Exam",examDate:"",startTime:"",endTime:"",venue:"",instructions:""}),E=L=>{N({...B,[L.target.name]:L.target.value})},I=(L,F)=>{if(!L||!F)return 0;const O=new Date(`2000-01-01T${L}`),P=new Date(`2000-01-01T${F}`);return Math.round((P.getTime()-O.getTime())/6e4)},k=()=>{if(!B.classId||!B.subjectId||!B.examType||!B.examDate||!B.startTime||!B.endTime){he.error("Please fill all required fields");return}const L=r.find(ce=>ce.id===B.classId),F=t.find(ce=>ce.id===B.subjectId);if(!L||!F){he.error("Invalid class or subject selection");return}const O=I(B.startTime,B.endTime);if(O<=0){he.error("End time must be after start time");return}const P={class_id:B.classId,class_name:L.name,subject_id:B.subjectId,subject_name:F.name,exam_type:B.examType,exam_date:B.examDate,start_time:B.startTime,end_time:B.endTime,duration_minutes:O,venue:B.venue||void 0,supervisor_id:void 0,term:d,academic_year:u,instructions:B.instructions||void 0,created_by:A?.id||void 0,created_at:new Date().toISOString()};x?(a(x,P),he.success("Exam timetable updated successfully")):(n(P),he.success("Exam timetable created successfully")),$()},$=()=>{N({classId:0,subjectId:0,examType:"Exam",examDate:"",startTime:"",endTime:"",venue:"",instructions:""}),f(!1),g(null)},z=L=>{N({classId:L.class_id,subjectId:L.subject_id,examType:L.exam_type,examDate:L.exam_date,startTime:L.start_time,endTime:L.end_time,venue:L.venue||"",instructions:L.instructions||""}),g(L.id),f(!0)},H=L=>{confirm("Are you sure you want to delete this exam schedule?")&&(i(L),he.success("Exam timetable deleted successfully"))},T=()=>{he.info("PDF export functionality will be available with backend integration")},V=y===0?s.filter(L=>L.term===d&&L.academic_year===u):s.filter(L=>L.class_id===y&&L.term===d&&L.academic_year===u),G=V.reduce((L,F)=>{const O=F.class_name||"Unknown Class";return L[O]||(L[O]=[]),L[O].push(F),L},{});return Object.keys(G).forEach(L=>{G[L].sort((F,O)=>F.exam_date!==O.exam_date?F.exam_date.localeCompare(O.exam_date):F.start_time.localeCompare(O.start_time))}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-slate-900 mb-2",children:"Exam Timetable Management"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage examination schedules"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ce,{onClick:T,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),e.jsxs(Ce,{onClick:()=>f(!m),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(il,{className:"w-4 h-4 mr-2"}),m?"Cancel":"Add Exam"]})]})]}),m&&e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-slate-800 mb-4",children:[x?"Edit":"Create"," Exam Schedule"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-slate-700 text-sm",children:["Class ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"classId",value:B.classId,onChange:E,className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"Select Class"}),r.filter(L=>L.status==="Active").map(L=>e.jsx("option",{value:L.id,children:L.name},L.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-slate-700 text-sm",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"subjectId",value:B.subjectId,onChange:E,className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"Select Subject"}),t.filter(L=>L.status==="Active").map(L=>e.jsx("option",{value:L.id,children:L.name},L.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-slate-700 text-sm",children:["Exam Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"examType",value:B.examType,onChange:E,className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"CA1",children:"CA1"}),e.jsx("option",{value:"CA2",children:"CA2"}),e.jsx("option",{value:"Exam",children:"Main Exam"}),e.jsx("option",{value:"Practical",children:"Practical"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-slate-700 text-sm",children:["Exam Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"examDate",value:B.examDate,onChange:E,className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-slate-700 text-sm",children:["Venue ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"venue",value:B.venue,onChange:E,placeholder:"e.g., Exam Hall A, Classroom 201",className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-slate-700 text-sm",children:["Start Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",name:"startTime",value:B.startTime,onChange:E,className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-slate-700 text-sm",children:["End Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",name:"endTime",value:B.endTime,onChange:E,className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block mb-2 text-slate-700 text-sm",children:"Special Instructions"}),e.jsx("textarea",{name:"instructions",value:B.instructions,onChange:E,placeholder:"Add any special instructions for the exam...",rows:3,className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),B.startTime&&B.endTime&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:["Duration: ",I(B.startTime,B.endTime)," minutes"]})}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(Ce,{onClick:$,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsxs(Ce,{onClick:k,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[x?"Update":"Create"," Exam Schedule"]})]})]}),e.jsx(ye,{className:"p-4 bg-white rounded-xl shadow-sm border border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-slate-700",children:"Filter by Class:"}),e.jsxs("select",{value:y,onChange:L=>b(Number(L.target.value)),className:"p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"All Classes"}),r.filter(L=>L.status==="Active").map(L=>e.jsx("option",{value:L.id,children:L.name},L.id))]}),e.jsxs("span",{className:"text-slate-600 ml-auto",children:[V.length," exam",V.length!==1?"s":""," scheduled"]})]})}),Object.keys(G).length===0?e.jsxs(ye,{className:"p-12 bg-white rounded-xl shadow-sm border border-slate-200 text-center",children:[e.jsx(jn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-slate-900 mb-2",children:"No Exams Scheduled"}),e.jsx("p",{className:"text-slate-600",children:'Click "Add Exam" to create an examination schedule'})]}):e.jsx("div",{className:"space-y-6",children:Object.keys(G).sort().map(L=>e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"text-slate-800 mb-4",children:L}),e.jsx("div",{className:"space-y-3",children:G[L].map(F=>e.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-blue-300 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"text-slate-900",children:F.subject_name}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:F.exam_type}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[F.duration_minutes," mins"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(jn,{className:"w-4 h-4"}),new Date(F.exam_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(Ci,{className:"w-4 h-4"}),F.start_time," - ",F.end_time]}),e.jsxs("div",{className:"text-slate-600",children:[" ",F.venue]})]}),F.instructions&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-yellow-800 text-sm",children:F.instructions})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{onClick:()=>z(F),className:"p-2 bg-gray-100 hover:bg-gray-200 text-gray-700",children:e.jsx(gS,{className:"w-4 h-4"})}),e.jsx(Ce,{onClick:()=>H(F.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700",children:e.jsx(Bi,{className:"w-4 h-4"})})]})]})},F.id))})]},L))})]})}const qB="graceland_school_data";function KD(){try{return localStorage.removeItem(qB),!0}catch{return!1}}function VD(){try{const r=localStorage.getItem(qB);return r?new Blob([r]).size/1024:0}catch{return 0}}function zD(r,t){const s=JSON.stringify(r,null,2),n=new Blob([s],{type:"application/json"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=`graceland_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}function $D(r){return new Promise((t,s)=>{const n=new FileReader;n.onload=a=>{try{const i=JSON.parse(a.target?.result);t(i)}catch{s(new Error("Invalid JSON file"))}},n.onerror=()=>{s(new Error("Failed to read file"))},n.readAsText(r)})}function GD(){const{students:r,teachers:t,parents:s,accountants:n,classes:a,subjects:i,subjectAssignments:c,scores:A,affectiveDomains:d,psychomotorDomains:u,compiledResults:m,feeStructures:f,studentFeeBalances:x,payments:g,users:y,notifications:b,activityLogs:B,attendances:N,examTimetables:E,classTimetables:I,departments:k,scholarships:$,assignments:z,schoolSettings:H,bankAccountSettings:T,currentTerm:V,currentAcademicYear:G}=ys(),[L,F]=j.useState(!1),[O,P]=j.useState(0),[ce,W]=j.useState(!1),[ae,K]=j.useState(0),le=j.useRef(null);j.useState(()=>{K(VD())});const ie=(Ee,Te)=>{const dt=Ee.map(st=>Te.map(ft=>{const et=st[ft];return Array.isArray(et)?`"${et.join(", ")}"`:typeof et=="object"&&et!==null?`"${JSON.stringify(et)}"`:typeof et=="string"?`"${et.replace(/"/g,'""')}"`:et||""}).join(","));return[Te.join(","),...dt].join(`
`)},se=(Ee,Te)=>{const dt=new Blob([Ee],{type:"text/csv;charset=utf-8;"}),st=URL.createObjectURL(dt),ft=document.createElement("a");ft.href=st,ft.download=Te,ft.click(),URL.revokeObjectURL(st)},R=async()=>{await wj(),he.success(`Exported ${r.length} students`)},q=async()=>{await rU(),he.success(`Exported ${t.length} teachers`)},te=async()=>{await nU(),he.success(`Exported ${s.length} parents`)},de=async()=>{await bj(),he.success(`Exported ${a.length} classes`)},fe=async()=>{await yj(),he.success(`Exported ${i.length} subjects`)},me=()=>{aU(A,r),he.success(`Exported ${A.length} scores`)},pe=()=>{iU(m,r),he.success(`Exported ${m.length} results`)},ee=()=>{oU(g,r),he.success(`Exported ${g.length} payments`)},je=()=>{lU(x,r),he.success(`Exported ${x.length} fee balances`)},Pe=()=>{exportAttendanceToCSV(N,r),he.success(`Exported ${N.length} attendance records`)},De=()=>{exportActivityLogsToCSV(B),he.success(`Exported ${B.length} activity logs`)},nt=()=>{const Ee={version:"1.0.0",lastUpdated:new Date().toISOString(),currentTerm:V,currentAcademicYear:G,schoolSettings:H,bankAccountSettings:T,classes:a,teachers:t,subjects:i,students:r,parents:s,accountants:n,subjectAssignments:c,scores:A,affectiveDomains:d,psychomotorDomains:u,compiledResults:m,feeStructures:f,studentFeeBalances:x,payments:g,notifications:b,activityLogs:B,attendances:N,examTimetables:E,classTimetables:I,departments:k,scholarships:$,assignments:z,users:y};zD(Ee),he.success("Complete system backup downloaded successfully!")},Se=async Ee=>{const Te=Ee.target.files?.[0];if(Te)try{const dt=await $D(Te);he.success("Data imported successfully! Please refresh to see changes.")}catch{he.error("Failed to import data. Please check the file format.")}},X=()=>{KD(),he.success("Local storage cleared successfully!"),W(!1),setTimeout(()=>{window.location.reload()},1e3)},Ie=[{title:"Student Data",icon:e.jsx(Yl,{className:"w-5 h-5"}),items:[{name:"Students",count:r.length,export:R,color:"bg-blue-50 text-blue-600"},{name:"Student Fee Balances",count:x.length,export:je,color:"bg-blue-50 text-blue-600"},{name:"Attendance",count:N.length,export:Pe,color:"bg-blue-50 text-blue-600"}]},{title:"Staff Data",icon:e.jsx(Qs,{className:"w-5 h-5"}),items:[{name:"Teachers",count:t.length,export:q,color:"bg-green-50 text-green-600"},{name:"Parents",count:s.length,export:te,color:"bg-green-50 text-green-600"},{name:"Accountants",count:n.length,export:()=>{const Te=ie(n,["id","firstName","lastName","employeeId","email","phone","department","status"]);se(Te,`accountants_${new Date().toISOString().split("T")[0]}.csv`),he.success(`Exported ${n.length} accountants`)},color:"bg-green-50 text-green-600"}]},{title:"Academic Data",icon:e.jsx(Vn,{className:"w-5 h-5"}),items:[{name:"Classes",count:a.length,export:de,color:"bg-purple-50 text-purple-600"},{name:"Subjects",count:i.length,export:fe,color:"bg-purple-50 text-purple-600"},{name:"Scores",count:A.length,export:me,color:"bg-purple-50 text-purple-600"},{name:"Compiled Results",count:m.length,export:pe,color:"bg-purple-50 text-purple-600"}]},{title:"Financial Data",icon:e.jsx(bo,{className:"w-5 h-5"}),items:[{name:"Payments",count:g.length,export:ee,color:"bg-yellow-50 text-yellow-600"},{name:"Fee Balances",count:x.length,export:je,color:"bg-yellow-50 text-yellow-600"}]},{title:"System Data",icon:e.jsx(jh,{className:"w-5 h-5"}),items:[{name:"Activity Logs",count:B.length,export:De,color:"bg-gray-50 text-gray-600"},{name:"Notifications",count:b.length,export:()=>{const Te=ie(b,["id","title","message","type","targetAudience","sentBy","sentDate","isRead"]);se(Te,`notifications_${new Date().toISOString().split("T")[0]}.csv`),he.success(`Exported ${b.length} notifications`)},color:"bg-gray-50 text-gray-600"}]}],rt=r.length+t.length+s.length+a.length+i.length+A.length+m.length+g.length+f.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Data Backup & Export"}),e.jsx("p",{className:"text-[#6B7280]",children:"Download all system data for backup and archival purposes"})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-sm",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(z4,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(Hs,{className:"text-lg text-[#1F2937]",children:"Local Storage Manager"}),e.jsx(HE,{className:"text-sm text-[#6B7280]",children:"Manage your browser's local data storage"})]})]}),e.jsxs(Ct,{variant:"outline",className:"text-sm",children:[ae.toFixed(2)," KB Used"]})]})}),e.jsx(ke,{className:"p-5",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(Ce,{onClick:nt,className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl h-auto py-4 flex-col gap-2",children:[e.jsx(Ur,{className:"w-6 h-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:"Backup All Data"}),e.jsx("div",{className:"text-xs opacity-90",children:"Download as JSON"})]})]}),e.jsxs(Ce,{onClick:()=>le.current?.click(),variant:"outline",className:"rounded-xl h-auto py-4 flex-col gap-2 border-2 hover:border-[#3B82F6] hover:bg-blue-50",children:[e.jsx(yo,{className:"w-6 h-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:"Import Data"}),e.jsx("div",{className:"text-xs opacity-70",children:"Restore from JSON"})]})]}),e.jsx("input",{ref:le,type:"file",accept:".json",onChange:Se,className:"hidden"}),e.jsxs(Ce,{onClick:()=>W(!0),variant:"outline",className:"rounded-xl h-auto py-4 flex-col gap-2 border-2 border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300",children:[e.jsx(Bi,{className:"w-6 h-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:"Clear Storage"}),e.jsx("div",{className:"text-xs opacity-70",children:"Reset all data"})]})]})]})})]}),e.jsx(ye,{className:"rounded-xl bg-gradient-to-r from-[#2563EB] to-[#3B82F6] border-0 shadow-lg",children:e.jsx(ke,{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(jh,{className:"w-6 h-6 text-white"}),e.jsx("h3",{className:"text-white text-xl",children:"CSV Export Center"})]}),e.jsx("p",{className:"text-white/90 mb-4",children:"Export individual data tables as CSV files for external use"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs(Ct,{className:"bg-white/20 text-white border-0 text-sm",children:[e.jsx(kr,{className:"w-4 h-4 mr-1"}),rt.toLocaleString()," Total Records"]}),e.jsx(Ct,{className:"bg-white/20 text-white border-0 text-sm",children:"Multiple Formats"})]})]})})})}),e.jsxs(Si,{className:"bg-blue-50 border-blue-200 rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Ga,{className:"text-[#1F2937]",children:[e.jsx("strong",{children:"Backup Best Practices:"})," Download regular backups to prevent data loss. Store backups in a secure location. Complete backup includes all system data in JSON format for easy restoration. Individual CSV exports are provided for specific data tables."]})]}),Ie.map((Ee,Te)=>e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-sm",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-[#F3F4F6] rounded-lg",children:Ee.icon}),e.jsx("h3",{className:"text-[#1F2937]",children:Ee.title})]})}),e.jsx(ke,{className:"p-5",children:e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:Ee.items.map((dt,st)=>e.jsxs("div",{className:`${dt.color} p-4 rounded-xl flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-80 mb-1",children:dt.name}),e.jsxs("p",{className:"font-semibold text-lg",children:[dt.count.toLocaleString()," records"]})]}),e.jsxs(Ce,{onClick:dt.export,size:"sm",variant:"ghost",className:"hover:bg-white/50 rounded-lg",children:[e.jsx(Ur,{className:"w-4 h-4 mr-1"}),"CSV"]})]},st))})})]},Te)),e.jsx(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-sm",children:e.jsx(ke,{className:"p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Is,{className:"w-5 h-5 text-[#6B7280] mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1F2937] mb-2",children:e.jsx("strong",{children:"About Data Export:"})}),e.jsxs("ul",{className:"text-[#6B7280] text-sm space-y-1",children:[e.jsx("li",{children:" CSV files can be opened in Excel, Google Sheets, or any spreadsheet software"}),e.jsx("li",{children:" JSON backup contains all data and can be used for system restoration"}),e.jsx("li",{children:" User passwords are excluded from exports for security"}),e.jsx("li",{children:" Backup files are named with today's date for easy identification"}),e.jsx("li",{children:" Store backups securely and regularly (recommended: weekly backups)"})]})]})]})})}),e.jsx(Zs,{open:ce,onOpenChange:W,children:e.jsxs(er,{className:"rounded-xl",children:[e.jsxs(ur,{children:[e.jsxs(hr,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Is,{className:"w-5 h-5"}),"Clear Local Storage?"]}),e.jsx(Hn,{children:"This will permanently delete all data stored in your browser. This action cannot be undone. Make sure you have downloaded a backup before proceeding."})]}),e.jsxs(po,{className:"gap-2",children:[e.jsx(Ce,{variant:"outline",onClick:()=>W(!1),className:"rounded-xl",children:"Cancel"}),e.jsxs(Ce,{variant:"destructive",onClick:X,className:"rounded-xl bg-red-600 hover:bg-red-700",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Clear All Data"]})]})]})})]})}function WD(){const{activityLogs:r,getActivityLogs:t}=ys(),[s,n]=j.useState(""),[a,i]=j.useState("all"),[c,A]=j.useState("all"),u=t(void 0,a).filter(N=>N.actor.toLowerCase().includes(s.toLowerCase())||N.target.toLowerCase().includes(s.toLowerCase())||N.action.toLowerCase().includes(s.toLowerCase())),m=N=>N.includes("User")||N.includes("Create")?e.jsx(Bh,{className:"w-4 h-4"}):N.includes("Password")?e.jsx(qy,{className:"w-4 h-4"}):N.includes("Link")||N.includes("Unlink")?e.jsx(kf,{className:"w-4 h-4"}):N.includes("Deactivate")||N.includes("Activate")?e.jsx(Ux,{className:"w-4 h-4"}):e.jsx(Bh,{className:"w-4 h-4"}),f=N=>N.includes("Create")||N.includes("Add")?"bg-[#28A745]":N.includes("Password")||N.includes("Reset")?"bg-[#FFC107]":N.includes("Link")&&!N.includes("Unlink")?"bg-[#1E90FF]":N.includes("Delete")||N.includes("Unlink")||N.includes("Deactivate")?"bg-[#DC3545]":N.includes("Activate")||N.includes("Approve")?"bg-[#28A745]":"bg-[#C0C8D3]",x=()=>{const N=["Timestamp","Actor","Role","Action","Target","IP Address","Status"],E=u.map(H=>[new Date(H.timestamp).toLocaleString(),H.actor,H.actor_role,H.action,H.target,H.ip_address,H.status]),I=[N,...E].map(H=>H.join(",")).join(`
`),k=new Blob([I],{type:"text/csv"}),$=URL.createObjectURL(k),z=document.createElement("a");z.href=$,z.download=`activity-logs-${new Date().toISOString().split("T")[0]}.csv`,z.click(),he.success("Activity log exported successfully")},g=r.length,y=r.filter(N=>N.action.includes("Create User")||N.action.includes("Add")).length,b=r.filter(N=>N.action.includes("Link")).length,B=r.filter(N=>N.status==="Failed").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-white mb-2",children:"Activity Logs"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"Audit trail of all administrative actions"})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md w-full",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#C0C8D3]"}),e.jsx(Et,{value:s,onChange:N=>n(N.target.value),placeholder:"Search by actor, action, or target...",className:"h-12 pl-10 rounded-xl border border-white/10 bg-[#0F243E] text-white"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 w-full lg:w-auto",children:[e.jsxs(Qt,{value:a,onValueChange:i,children:[e.jsx(Pt,{className:"h-12 w-full sm:w-48 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{placeholder:"Filter by action"})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"all",className:"text-white hover:bg-[#1E90FF]",children:"All Actions"}),e.jsx(be,{value:"Create User",className:"text-white hover:bg-[#1E90FF]",children:"Create User"}),e.jsx(be,{value:"Reset Password",className:"text-white hover:bg-[#1E90FF]",children:"Reset Password"}),e.jsx(be,{value:"Link Student-Parent",className:"text-white hover:bg-[#1E90FF]",children:"Link Student-Parent"}),e.jsx(be,{value:"Unlink Student-Parent",className:"text-white hover:bg-[#1E90FF]",children:"Unlink Student-Parent"}),e.jsx(be,{value:"Deactivate User",className:"text-white hover:bg-[#1E90FF]",children:"Deactivate User"})]})]}),e.jsxs(Qt,{value:c,onValueChange:A,children:[e.jsx(Pt,{className:"h-12 w-full sm:w-36 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{placeholder:"Date range"})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"all",className:"text-white hover:bg-[#1E90FF]",children:"All Time"}),e.jsx(be,{value:"today",className:"text-white hover:bg-[#1E90FF]",children:"Today"}),e.jsx(be,{value:"week",className:"text-white hover:bg-[#1E90FF]",children:"This Week"}),e.jsx(be,{value:"month",className:"text-white hover:bg-[#1E90FF]",children:"This Month"})]})]}),e.jsxs(Ce,{onClick:x,className:"h-12 bg-[#1E90FF] hover:bg-[#00BFFF] text-white rounded-xl shadow-md hover:scale-105 transition-all whitespace-nowrap",children:[e.jsx(Ur,{className:"w-5 h-5 mr-2"}),"Export Log"]})]})]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gradient-to-r from-[#1E90FF] to-[#00BFFF] border-none hover:bg-gradient-to-r",children:[e.jsx(lt,{className:"text-white",children:"Timestamp"}),e.jsx(lt,{className:"text-white",children:"Actor"}),e.jsx(lt,{className:"text-white",children:"Action"}),e.jsx(lt,{className:"text-white",children:"Target"}),e.jsx(lt,{className:"text-white",children:"IP Address"}),e.jsx(lt,{className:"text-white",children:"Status"})]})}),e.jsx(Ln,{children:u.length===0?e.jsx(os,{className:"bg-[#0F243E] border-b border-white/5",children:e.jsxs(Je,{colSpan:6,className:"text-center py-12",children:[e.jsx("p",{className:"text-white mb-2",children:"No activity logs found"}),e.jsx("p",{className:"text-[#C0C8D3] text-sm",children:"Activity will be logged here automatically"})]})}):u.map(N=>e.jsxs(os,{className:"bg-[#0F243E] border-b border-white/5 hover:bg-[#132C4A]",children:[e.jsx(Je,{className:"text-[#C0C8D3] text-sm font-mono",children:new Date(N.timestamp).toLocaleString()}),e.jsx(Je,{children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:N.actor}),e.jsx("p",{className:"text-xs text-[#C0C8D3]",children:N.actor_role})]})}),e.jsx(Je,{children:e.jsxs(Ct,{className:`${f(N.action)} text-white border-0 flex items-center gap-1 w-fit`,children:[m(N.action),N.action]})}),e.jsx(Je,{className:"text-white",children:N.target}),e.jsx(Je,{className:"text-[#C0C8D3] text-sm font-mono",children:N.ip_address}),e.jsx(Je,{children:e.jsx(Ct,{className:N.status==="Success"?"bg-[#28A745] text-white border-0":"bg-[#DC3545] text-white border-0",children:N.status})})]},N.id))})]})})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ux,{className:"w-4 h-4 text-[#1E90FF]"}),e.jsx("p",{className:"text-[#C0C8D3] text-sm",children:"Total Actions"})]}),e.jsx("p",{className:"text-white text-xl",children:g})]})}),e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-4",children:[e.jsx("p",{className:"text-[#C0C8D3] mb-1 text-sm",children:"Users Created"}),e.jsx("p",{className:"text-[#28A745] text-xl",children:y})]})}),e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-4",children:[e.jsx("p",{className:"text-[#C0C8D3] mb-1 text-sm",children:"Links Created"}),e.jsx("p",{className:"text-[#1E90FF] text-xl",children:b})]})}),e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-4",children:[e.jsx("p",{className:"text-[#C0C8D3] mb-1 text-sm",children:"Failed Actions"}),e.jsx("p",{className:"text-[#DC3545] text-xl",children:B})]})})]})]})}function qD(){const{feeStructures:r,classes:t,students:s,studentFeeBalances:n,payments:a}=ys(),[i,c]=j.useState("overview"),A=r.reduce((f,x)=>f+(x.totalFee*t.find(g=>g.id===x.classId)?.currentStudents||0),0),d=a.filter(f=>f.status==="Verified").reduce((f,x)=>f+x.amount,0),u=n.reduce((f,x)=>f+x.balance,0),m=n.filter(f=>f.balance>0).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Fee Management"}),e.jsx("p",{className:"text-[#6B7280]",children:"Oversee fee structures and student payment status"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Expected Revenue"}),e.jsx(Ed,{className:"w-5 h-5 text-[#3B82F6]"})]}),e.jsxs("p",{className:"text-[#1F2937] mb-1 font-semibold",children:["",A.toLocaleString()]}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"This term"})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Total Collected"}),e.jsx(bo,{className:"w-5 h-5 text-[#10B981]"})]}),e.jsxs("p",{className:"text-[#1F2937] mb-1 font-semibold",children:["",d.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-[#10B981]",children:[A>0?(d/A*100).toFixed(1):0,"% collected"]})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Outstanding"}),e.jsx(Is,{className:"w-5 h-5 text-[#F59E0B]"})]}),e.jsxs("p",{className:"text-[#1F2937] mb-1 font-semibold",children:["",u.toLocaleString()]}),e.jsx("p",{className:"text-xs text-[#F59E0B]",children:"Unpaid balances"})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Students w/ Balance"}),e.jsx(Qs,{className:"w-5 h-5 text-[#EF4444]"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:m}),e.jsxs("p",{className:"text-xs text-[#6B7280]",children:["Out of ",s.length," students"]})]})})]}),e.jsxs("div",{className:"flex gap-2 border-b border-[#E5E7EB]",children:[e.jsx("button",{onClick:()=>c("overview"),className:`px-4 py-2 rounded-t-lg transition-all ${i==="overview"?"bg-[#3B82F6] text-white":"text-[#6B7280] hover:bg-[#F3F4F6]"}`,children:"Overview"}),e.jsx("button",{onClick:()=>c("structures"),className:`px-4 py-2 rounded-t-lg transition-all ${i==="structures"?"bg-[#3B82F6] text-white":"text-[#6B7280] hover:bg-[#F3F4F6]"}`,children:"Fee Structures"}),e.jsx("button",{onClick:()=>c("balances"),className:`px-4 py-2 rounded-t-lg transition-all ${i==="balances"?"bg-[#3B82F6] text-white":"text-[#6B7280] hover:bg-[#F3F4F6]"}`,children:"Student Balances"})]}),i==="structures"&&e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-4 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937] font-semibold",children:"Fee Structures by Class"})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#F9FAFB]",children:[e.jsx(lt,{className:"text-[#1F2937]",children:"Class"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Tuition"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Development"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Exam"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Books"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Transport"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Total Fee"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Actions"})]})}),e.jsx(Ln,{children:r.map(f=>e.jsxs(os,{className:"border-b border-[#E5E7EB]",children:[e.jsx(Je,{className:"text-[#1F2937] font-medium",children:f.className}),e.jsxs(Je,{className:"text-[#1F2937]",children:["",f.tuitionFee.toLocaleString()]}),e.jsxs(Je,{className:"text-[#1F2937]",children:["",f.developmentLevy.toLocaleString()]}),e.jsxs(Je,{className:"text-[#1F2937]",children:["",f.examFee.toLocaleString()]}),e.jsxs(Je,{className:"text-[#1F2937]",children:["",f.booksFee.toLocaleString()]}),e.jsxs(Je,{className:"text-[#1F2937]",children:["",f.transportFee.toLocaleString()]}),e.jsxs(Je,{className:"text-[#1F2937] font-semibold",children:["",f.totalFee.toLocaleString()]}),e.jsx(Je,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{className:"h-8 px-3 bg-[#3B82F6] text-white hover:bg-[#2563EB] rounded-lg",children:e.jsx(Gl,{className:"w-4 h-4"})}),e.jsx(Ce,{className:"h-8 px-3 bg-[#10B981] text-white hover:bg-[#059669] rounded-lg",children:e.jsx(kn,{className:"w-4 h-4"})})]})})]},f.id))})]})})})]}),i==="balances"&&e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-4 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937] font-semibold",children:"Student Fee Balances"})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#F9FAFB]",children:[e.jsx(lt,{className:"text-[#1F2937]",children:"Student ID"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Student Name"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Class"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Total Fee"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Paid"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Balance"}),e.jsx(lt,{className:"text-[#1F2937]",children:"Status"})]})}),e.jsx(Ln,{children:n.map(f=>{const x=s.find(g=>g.id===f.studentId);return e.jsxs(os,{className:"border-b border-[#E5E7EB]",children:[e.jsx(Je,{className:"text-[#1F2937]",children:x?.admissionNumber}),e.jsx(Je,{className:"text-[#1F2937] font-medium",children:x?`${x.firstName} ${x.lastName}`:"Unknown"}),e.jsx(Je,{className:"text-[#1F2937]",children:x?.className}),e.jsxs(Je,{className:"text-[#1F2937]",children:["",f.totalFeeRequired.toLocaleString()]}),e.jsxs(Je,{className:"text-[#10B981]",children:["",f.totalPaid.toLocaleString()]}),e.jsxs(Je,{className:"text-[#EF4444] font-medium",children:["",f.balance.toLocaleString()]}),e.jsx(Je,{children:e.jsx(Ct,{className:`${f.status==="Paid"?"bg-[#10B981] text-white":f.status==="Partial"?"bg-[#F59E0B] text-white":"bg-[#EF4444] text-white"} border-0`,children:f.status})})]},f.id)})})]})})})]}),i==="overview"&&e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-4 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937] font-semibold",children:"Collection Rate by Class"})}),e.jsx(ke,{className:"p-4 space-y-3",children:t.slice(0,5).map(f=>{const x=r.find(E=>E.classId===f.id),g=s.filter(E=>E.classId===f.id),y=n.filter(E=>E.classId===f.id),b=x?x.totalFee*g.length:0,B=y.reduce((E,I)=>E+I.totalPaid,0),N=b>0?B/b*100:0;return e.jsxs("div",{className:"p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[#1F2937] font-medium",children:f.name}),e.jsxs("span",{className:"text-[#3B82F6] font-medium",children:[N.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-[#E5E7EB] rounded-full h-2",children:e.jsx("div",{className:"bg-[#3B82F6] h-2 rounded-full transition-all",style:{width:`${N}%`}})})]},f.id)})})]}),e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-4 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937] font-semibold",children:"Recent Payment Activity"})}),e.jsx(ke,{className:"p-4 space-y-3",children:a.slice(-5).reverse().map(f=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1F2937] font-medium",children:f.studentName}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:f.recordedDate})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[#10B981] font-medium",children:["",f.amount.toLocaleString()]}),e.jsx(Ct,{className:`${f.status==="Verified"?"bg-[#10B981]":"bg-[#F59E0B]"} text-white border-0 text-xs`,children:f.status})]})]},f.id))})]})]})]})}const YB=j.createContext(null);function YD({children:r}){const[t,s]=j.useState([]),[n,a]=j.useState([]),i=j.useCallback(A=>(s(d=>[...d,A]),()=>{s(d=>d.filter(u=>u!==A))}),[]),c=j.useCallback(A=>{a(d=>[...d,A]),t.forEach(d=>{try{d(A)}catch{}})},[t]);return e.jsx(YB.Provider,{value:{subscribe:i,broadcast:c,pendingNotifications:n},children:r})}function JB(){const r=j.useContext(YB);if(!r)throw new Error("useNotificationService must be used within NotificationServiceProvider");return r}function XB(r,t){const{subscribe:s}=JB(),{markNotificationAsRead:n,currentUser:a}=ys();j.useEffect(()=>!r||!t?void 0:s(c=>{if(c.targetAudience==="all"||r&&c.targetAudience===r.toLowerCase()+"s"||r==="Teacher"&&c.targetAudience==="teachers"||r==="Parent"&&c.targetAudience==="parents"||r==="Accountant"&&c.targetAudience==="accountants"||r==="Admin"&&c.targetAudience==="all"){(c.type==="error"?he.error:c.type==="warning"?he.warning:c.type==="success"?he.success:he.info)(c.title,{description:c.message,icon:e.jsx(zi,{className:"w-5 h-5"}),duration:5e3});try{const u=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSl+zPLTgjMGHm7A7+OZRQ4PVqzm7KRXEwxNpOPwwmkgBTGJ0fPPfS0GI3fJ8NyPPwoTYbnq7KdUFAtBmeHyu2shBSh9y/LSgzcGHWvA7+OYRg0PVq7m6qNXFAxNo+PvwmogBDCH0fLPfiwGInXH8N+PPQkSX7nr7KhUEwpBmN/yuWsgBSh8y/LTgjYGHGq/7+OZSQ4OVKzl66JXFAxOouHuwmwhBDKH0PHPfywFIHLH8N+PPQsRXbfr7KlXFQlAnN7wtmwfBS1+zPHSgjcGHGu97+OaShAOVK3l66FYFAtOoN/twm0hBDKF0PHPgC4GIHLHb9+RQAsRXbbq66pYFApAnN3vtWwfBSx9y/DSgzcFHGm87eOaSxENVK7j66FZFAxNnuDuwm4hBDKE0fHOgC8FHnGHb9+RQAwPXLbp66pZFQlBnNzvtWwfBSx9yvDRgzcGG2m77OKbSxINUqzj66JaFAxNnd/tw28gBDKD0fDNfzAGHXDHbd6RQQwPW7Xo66pZFAlAnNvutmwhBSt8ye/Rgz4FHGW7a96aTBAOU6rj66NbFAxMm93tzG8gBDGB0O/Nfy8FHHDHX96RPQsQWrTn66pbFQhBm9rutmwfBSp7yO/SgDwGGmi7bN+bTxEMUqjh6qRcEwtOmtzsznAgAy+Az+/MgC0GGm/AW96SPQ0OWbPm6qxcFQdBmtrutWsfBSl5xe7Tgj4GGWe4aN+dUBIMUKfh66RdEwpNmNvrz3IgAy19z+3LgS0FGW2/Vt2RPgwNWLHl6qxdFgZAltnpt2weByhxxe3TgT4FGGi4Vt+fURELT6Pf66VgFA1Oltfrz3AfAyp7yu7KgywFFW/AVd2QQQ4MV6/k6axdFgVBltjpt2wfBCh3w+3SgTwGGGq4XOGgURQKTqLe6qZgEw1Nldbrz3AfAyt7yu3Kgyy+FFu/B+rHCkE=");u.volume=.3,u.play().catch(()=>{})}catch{}}}),[r,t,s,a])}function JD({onLogout:r}){const{students:t,teachers:s,getPendingApprovals:n,currentUser:a,getUnreadNotifications:i,checkUserPermissionAPI:c,currentAcademicYear:A,currentTerm:d}=ys(),[u,m]=j.useState("dashboard");XB(a?.role,a?.id);const f=t.filter(I=>I&&I.status&&I.status==="Active").length,x=s.filter(I=>I&&I.status&&I.status==="Active").length,g=n().length,y=i();a&&c(a.role,"create_users"),a&&c(a.role,"create_students"),a&&c(a.role,"manage_classes"),a&&c(a.role,"manage_fees"),a&&c(a.role,"view_student_reports"),a&&c(a.role,"manage_settings");const[b,B]=j.useState(!1),N=[{icon:e.jsx(lp,{className:"w-5 h-5"}),label:"Dashboard",id:"dashboard",permission:null},{icon:e.jsx(MA,{className:"w-5 h-5"}),label:"Register User",id:"register-user",permission:"create_users"},{icon:e.jsx(Qs,{className:"w-5 h-5"}),label:"Manage Users",id:"manage-users",permission:"read_users"},{icon:e.jsx(Qs,{className:"w-5 h-5"}),label:"Manage Students",id:"manage-students",permission:"read_students"},{icon:e.jsx(kf,{className:"w-5 h-5"}),label:"Link Student-Parent",id:"link-student-parent",permission:"link_students"},{icon:e.jsx(Kr,{className:"w-5 h-5"}),label:"Manage Classes",id:"manage-classes",permission:"manage_classes"},{icon:e.jsx(Yy,{className:"w-5 h-5"}),label:"Manage Subjects",id:"manage-subjects",permission:"manage_subjects"},{icon:e.jsx(kc,{className:"w-5 h-5"}),label:"Teacher Assignments",id:"teacher-assignments",permission:"assign_subjects"},{icon:e.jsx(_f,{className:"w-5 h-5"}),label:"Promotion System",id:"promotion-system",permission:"manage_students"},{icon:e.jsx(jh,{className:"w-5 h-5"}),label:"Results Management",id:"results-management",permission:"manage_exams"},{icon:e.jsx(Vn,{className:"w-5 h-5"}),label:"Signature Settings",id:"signature-settings",permission:"manage_settings"},{icon:e.jsx(Ci,{className:"w-5 h-5"}),label:"Attendance Reports",id:"attendance-reports",permission:"view_reports"},{icon:e.jsx(jn,{className:"w-5 h-5"}),label:"Exam Timetable",id:"exam-timetable",permission:"manage_timetable"},{icon:e.jsx(bo,{className:"w-5 h-5"}),label:"Fee Management",id:"fee-management",permission:"manage_fees"},{icon:e.jsx(xo,{className:"w-5 h-5"}),label:"Send Notifications",id:"send-notifications",permission:"manage_notifications"},{icon:e.jsx(A4,{className:"w-5 h-5"}),label:"View Messages",id:"view-messages",permission:"manage_notifications"},{icon:e.jsx(jh,{className:"w-5 h-5"}),label:"Data Backup",id:"data-backup",permission:"manage_settings"},{icon:e.jsx(e2,{className:"w-5 h-5"}),label:"Settings",id:"settings",permission:"manage_settings"}].filter(I=>!I.permission||a&&c(a.role,I.permission)),E=I=>{I==="logout"?r():m(I)};return e.jsxs("div",{className:"min-h-screen bg-[#F4F6F9]",children:[e.jsx(xp,{items:N,activeItem:u,onItemClick:E}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx(vp,{userName:"Administrator",userRole:"System Admin",notificationCount:y.length,onLogout:r,onNotificationClick:()=>B(!0)}),e.jsxs("main",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:[u==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-[#6B7280]",children:"System Overview & Management"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all hover-lift group cursor-pointer",onClick:()=>m("manage-students"),children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Total Students"}),e.jsx(Qs,{className:"w-5 h-5 text-[#3B82F6] group-hover:scale-110 transition-transform"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:f}),e.jsx("p",{className:"text-xs text-[#10B981]",children:"Active students"})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all hover-lift group cursor-pointer",onClick:()=>m("manage-users"),children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Teaching Staff"}),e.jsx(Yl,{className:"w-5 h-5 text-[#10B981] group-hover:scale-110 transition-transform"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:x}),e.jsx("p",{className:"text-xs text-[#10B981]",children:"Active teachers"})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all hover-lift group cursor-pointer",onClick:()=>m("results-management"),children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Pending Results"}),e.jsx(Vn,{className:"w-5 h-5 text-[#F59E0B] group-hover:scale-110 transition-transform"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:g}),e.jsx("p",{className:"text-xs text-[#F59E0B]",children:g>0?"Awaiting approval":"All approved"})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all hover-lift group cursor-pointer",onClick:()=>m("notifications"),children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Notifications"}),e.jsx(zi,{className:"w-5 h-5 text-[#3B82F6] group-hover:scale-110 transition-transform"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:y.length}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"Unread messages"})]})})]}),e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"bg-[#3B82F6] rounded-t-lg p-4 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Active Session & Term"}),e.jsx(Ct,{className:"bg-[#10B981] text-white border-0 text-xs",children:"Active"})]})}),e.jsx(ke,{className:"p-4",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] mb-1 text-sm",children:"Academic Session"}),e.jsx("p",{className:"text-[#1F2937] font-medium",children:A})]}),e.jsxs("div",{className:"p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] mb-1 text-sm",children:"Current Term"}),e.jsx("p",{className:"text-[#1F2937] font-medium",children:d})]}),e.jsxs("div",{className:"p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] mb-1 text-sm",children:"Status"}),e.jsx("p",{className:"text-[#10B981] font-medium",children:"In Progress"})]})]})})]}),e.jsx(ye,{className:"rounded-lg bg-gradient-to-r from-[#3B82F6]/10 to-[#2563EB]/5 border border-[#3B82F6]/20",children:e.jsx(ke,{className:"p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(kr,{className:"w-6 h-6 text-[#3B82F6] mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1F2937] font-medium mb-2",children:"Quick Actions Available"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Use floating buttons (bottom right) for quick access to:"}),e.jsxs("ul",{className:"text-xs text-[#1F2937] mt-2 space-y-1",children:[e.jsx("li",{children:" Register New User"}),e.jsx("li",{children:" Add Student"}),e.jsx("li",{children:" Results Management"})]})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Use sidebar menu to:"}),e.jsxs("ul",{className:"text-xs text-[#1F2937] mt-2 space-y-1",children:[e.jsx("li",{children:" Manage all users"}),e.jsx("li",{children:" Configure classes & subjects"}),e.jsx("li",{children:" Set teacher assignments"})]})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"System features:"}),e.jsxs("ul",{className:"text-xs text-[#1F2937] mt-2 space-y-1",children:[e.jsx("li",{children:" Real-time notifications"}),e.jsx("li",{children:" Student promotion"}),e.jsx("li",{children:" Results approval workflow"})]})]})]})]})]})})}),e.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col gap-3 z-30",children:[e.jsx(Ce,{onClick:()=>m("register-user"),className:"w-12 h-12 rounded-lg bg-[#F59E0B] hover:bg-[#D97706] shadow-lg hover:shadow-xl transition-all hover-lift",title:"Register User",children:e.jsx(MA,{className:"w-5 h-5 text-white"})}),e.jsx(Ce,{onClick:()=>m("results-management"),className:"w-12 h-12 rounded-lg bg-[#10B981] hover:bg-[#059669] shadow-lg hover:shadow-xl transition-all hover-lift",title:"Results Management",children:e.jsx(jh,{className:"w-5 h-5 text-white"})})]})]}),u==="register-user"&&e.jsx(mk,{}),u==="manage-students"&&e.jsx(wU,{onNavigateToLink:()=>m("link-student-parent")}),u==="manage-users"&&e.jsx(zU,{}),u==="manage-classes"&&e.jsx(gI,{}),u==="manage-subjects"&&e.jsx(xI,{}),u==="teacher-assignments"&&e.jsx(vI,{}),u==="promotion-system"&&e.jsx(wI,{}),u==="link-student-parent"&&e.jsx(pI,{}),u==="fee-management"&&e.jsx(qD,{}),u==="send-notifications"&&e.jsx($U,{}),u==="view-messages"&&e.jsx(GU,{}),u==="activity-logs"&&e.jsx(WD,{}),u==="data-backup"&&e.jsx(GD,{}),u==="settings"&&e.jsx(tI,{}),u==="attendance-reports"&&e.jsx(MD,{}),u==="exam-timetable"&&e.jsx(HD,{}),u==="results-management"&&e.jsx(RD,{}),!["dashboard","register-user","manage-students","manage-users","manage-classes","manage-subjects","teacher-assignments","promotion-system","link-student-parent","fee-management","send-notifications","view-messages","activity-logs","data-backup","settings","attendance-reports","exam-timetable","results-management"].includes(u)&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical max-w-md w-full",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-[#3B82F6] flex items-center justify-center mx-auto mb-4",children:N.find(I=>I.id===u)?.icon}),e.jsx("h3",{className:"text-[#1F2937] mb-3 font-semibold",children:N.find(I=>I.id===u)?.label}),e.jsxs("p",{className:"text-[#6B7280]",children:["This section contains the functionality for ",N.find(I=>I.id===u)?.label.toLowerCase(),"."]})]})})})})]})]}),e.jsx(Zs,{open:b,onOpenChange:B,children:e.jsx(er,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:e.jsx(jp,{})})})]})}function XD(){const{currentUser:r,teachers:t,students:s,classes:n,getTeacherAssignments:a,scores:i,addScore:c,updateScore:A,approveScore:d,loadScoresFromAPI:u,currentTerm:m,currentAcademicYear:f,subjectAssignments:x,addNotification:g}=ys(),[y,b]=j.useState(""),[B,N]=j.useState(""),[E,I]=j.useState({}),[k,$]=j.useState(!1),[z,H]=j.useState(""),[T,V]=j.useState({}),[G,L]=j.useState(m),[F,O]=j.useState(f),P=r?t.find(Se=>Se.id===r.linked_id):null,ce=P?a(P.id):[],W=j.useMemo(()=>{const Se=new Map;ce.forEach(Ie=>{Se.has(Ie.class_id)||Se.set(Ie.class_id,{id:Ie.class_id,name:Ie.class_name||"Unknown Class"})});const X=Array.from(Se.values());return console.log(`Assigned classes for teacher ${P?.id}:`,X),X},[ce,P]),ae=j.useMemo(()=>{if(!y)return[];const Se=ce.filter(rt=>rt.class_id===Number(y));if(Se.length===0)return console.warn(`No subject assignments found for teacher ${P?.id} in class ${y}`),[];const X=new Map;Se.forEach(rt=>{const Ee=rt.subject_id;X.has(Ee)||X.set(Ee,{id:rt.id,subject_id:rt.subject_id,subject_name:rt.subject_name||"Unknown Subject"})});const Ie=Array.from(X.values());return console.log(`Available subjects for class ${y}:`,Ie),Ie},[y,ce,P]),K=j.useMemo(()=>y?s.filter(Se=>Se.class_id===Number(y)&&Se.status==="Active").sort((Se,X)=>{const Ie=(Se.firstName||"").toLowerCase(),rt=(X.firstName||"").toLowerCase();if(Ie!==rt)return Ie.localeCompare(rt);const Ee=(Se.lastName||"").toLowerCase(),Te=(X.lastName||"").toLowerCase();return Ee.localeCompare(Te)}):[],[y,s]),le=j.useMemo(()=>{if(!B||!y||!ce.length)return[];const Se=ce.find(Ie=>Ie.subject_id===Number(B)&&Ie.class_id===Number(y));return Se?i.filter(Ie=>Ie.subject_assignment_id===Se.id&&Ie.term===G&&Ie.academic_year===F).map(Ie=>({...Ie,student:s.find(rt=>rt.id===Ie.student_id)})):[]},[B,y,ce,i,G,F]);j.useEffect(()=>{const Se=le.some(X=>X.status==="Rejected");if(Se&&!k&&($(!0),he.info("Edit mode enabled. Some scores were rejected and need correction.")),Se){const X={};le.forEach(Ie=>{Ie.status==="Rejected"&&(X[Ie.student_id]={ca1:Ie.ca1.toString(),ca2:Ie.ca2.toString(),exam:Ie.exam.toString()})}),I(Ie=>({...Ie,...X}))}},[le,k]);const ie=j.useCallback(async()=>{if(!y||!B||!P||!(JSON.stringify(E)!==JSON.stringify(T)))return;const X=ce.find(Ee=>Ee.subject_id===Number(B)&&Ee.class_id===Number(y));if(!X)return;const Ie={};let rt=!1;if(Object.entries(E).forEach(([Ee,Te])=>{(Te.ca1||Te.ca2||Te.exam)&&(Ie[Number(Ee)]=Te,rt=!0)}),!!rt)try{H("Saving...");const Ee=[];Object.entries(Ie).forEach(([Te,dt])=>{const st=Number(Te),ft=le.find(et=>et.student_id===st);if(!ft||ft.status==="Draft"){const et=parseFloat(me(dt.ca1,dt.ca2,dt.exam).total)||0,it=pe(et),Ue=ee(et),We={student_id:st,subject_assignment_id:X.id,subject_name:X.subject_name,ca1:parseFloat(dt.ca1)||0,ca2:parseFloat(dt.ca2)||0,exam:parseFloat(dt.exam)||0,total:et,class_average:0,class_min:0,class_max:0,grade:it,remark:Ue,subject_teacher:P?`${P.firstName} ${P.lastName}`:"Unknown",entered_by:r?.id||0,entered_date:new Date().toISOString(),term:G,academic_year:F,status:"Draft"};ft?Ee.push(A(ft.id,We)):Ee.push(c(We))}}),await Promise.all(Ee),V({...E}),H("All changes saved"),setTimeout(()=>H(""),2e3)}catch{H("Auto-save failed"),setTimeout(()=>H(""),3e3)}},[E,T,y,B,G,F,P,ce,le,viewMode,r]);j.useEffect(()=>{const Se=setTimeout(()=>{ie()},3e3);return()=>clearTimeout(Se)},[ie]);const se=n.find(Se=>Se.id===Number(y)),R=ce.find(Se=>Se.subject_id===Number(B)&&Se.class_id===Number(y)),q=j.useMemo(()=>{const Se=K.map(Ie=>{const rt=E[Ie.id];return!rt||!rt.ca1||!rt.ca2||!rt.exam?0:(parseFloat(rt.ca1)||0)+(parseFloat(rt.ca2)||0)+(parseFloat(rt.exam)||0)}).filter(Ie=>Ie>0),X=K.reduce((Ie,rt)=>{const Ee=(parseFloat(E[rt.id]?.ca1)||0)+(parseFloat(E[rt.id]?.ca2)||0)+(parseFloat(E[rt.id]?.exam)||0),Te=Ie?(parseFloat(E[Ie.id]?.ca1)||0)+(parseFloat(E[Ie.id]?.ca2)||0)+(parseFloat(E[Ie.id]?.exam)||0):0;return Ee>Te?rt:Ie},null);return Se.length===0?{average:0,max:0,min:0,highestScorer:null}:{average:(Se||[]).length>0?(Se.reduce((Ie,rt)=>Ie+rt,0)/(Se||[]).length).toFixed(2):"0.00",max:Math.max(...Se).toFixed(2),min:Math.min(...Se).toFixed(2),highestScorer:X}},[E,K]),te=j.useMemo(()=>k?!1:le.filter(X=>X.status==="Submitted").length>0,[le,k]),de=j.useMemo(()=>le.some(Se=>Se.status==="Submitted"),[le]);j.useEffect(()=>{const Se={};K.forEach(X=>{const Ie=le.find(rt=>rt.student_id===X.id);Se[X.id]={ca1:Ie?.ca1?.toString()||"",ca2:Ie?.ca2?.toString()||"",exam:Ie?.exam?.toString()||""}}),I(Se),$(!1)},[y,B,G,F]),j.useEffect(()=>{le.length>0&&I(Se=>{const X={...Se};return le.forEach(Ie=>{X[Ie.student_id]={ca1:Ie.ca1?.toString()||"",ca2:Ie.ca2?.toString()||"",exam:Ie.exam?.toString()||""}}),console.log("Updated scoresData:",X),X})},[le]),j.useEffect(()=>{console.log("ScoreEntryPage mounted, reloading scores from database..."),(async()=>{try{await u()}catch(X){console.error("Failed to reload scores:",X)}})()},[]);const fe=(Se,X,Ie)=>{const rt=parseFloat(Ie),Ee=X==="exam"?60:20;if(Ie&&(isNaN(rt)||rt<0||rt>Ee)){he.error(`${X.toUpperCase()} must be between 0 and ${Ee}`);return}I(Te=>({...Te,[Se]:{...Te[Se],[X]:Ie}}))},me=(Se,X,Ie)=>{const rt=parseFloat(Se)||0,Ee=parseFloat(X)||0,Te=parseFloat(Ie)||0;return{total:(rt+Ee+Te).toFixed(2)}},pe=Se=>{const X=parseFloat(Se.toString())||0;return X>=70?"A":X>=60?"B":X>=50?"C":X>=40?"D":X>=30?"E":"F"},ee=Se=>{const X=parseFloat(Se.toString())||0;return X>=70?"Excellent":X>=60?"Very Good":X>=50?"Good":X>=40?"Pass":X>=30?"Fair":"Fail"},je=async()=>{if(!y||!B||!P){he.error("Please select class and subject");return}if(!K.some(et=>{const it=E[et.id];return it&&(it.ca1||it.ca2||it.exam)})){he.error("Please enter scores for at least one student");return}const X=ce.find(et=>et.subject_id===Number(B)&&et.class_id===Number(y));if(!X){he.error("Assignment not found");return}const Ie=K.filter(et=>{const it=E[et.id];return it&&(it.ca1||it.ca2||it.exam)});if(Ie.length===0){he.error("Please enter scores for at least one student");return}const rt=Ie.map(et=>{const it=E[et.id];return it&&parseFloat(me(it.ca1,it.ca2,it.exam).total)||0}),Ee=Math.max(...rt),Te=Math.min(...rt),dt=rt.reduce((et,it)=>et+it,0)/rt.length;let st=0;const ft=[];K.forEach(et=>{const it=E[et.id];if(!it||!it.ca1&&!it.ca2&&!it.exam)return;const Ue=parseFloat(me(it.ca1,it.ca2,it.exam).total)||0,We=pe(Ue),Bt=ee(Ue),mt=le.find(Ve=>Ve.student_id===et.id),Me={student_id:et.id,subject_assignment_id:X.id,subject_name:X.subject_name,ca1:parseFloat(it.ca1)||0,ca2:parseFloat(it.ca2)||0,exam:parseFloat(it.exam)||0,total:Ue,class_average:Math.round(dt*100)/100,class_min:Te,class_max:Ee,grade:We,remark:Bt,subject_teacher:P?`${P.firstName} ${P.lastName}`:"Unknown",entered_by:r?.id||0,entered_date:new Date().toISOString(),term:G,academic_year:F,status:"Submitted"};mt?ft.push(A(mt.id,Me)):ft.push(c(Me)),st++});try{console.log("Attempting to save",st,"scores...");const et=await Promise.all(ft);console.log("All scores saved successfully:",et),k?(he.success(`Scores updated successfully! ${st} student(s) updated.`),$(!1)):he.success(`Scores submitted successfully! ${st} student(s) recorded.`),console.log("Creating notification for class teacher...");const it=n.find(Ue=>Ue.id===Number(y));if(it?.classTeacherId){const Ue=t.find(We=>We.id===it.classTeacherId);Ue?(console.log("Found class teacher:",Ue.firstName,Ue.lastName),await g({title:`Scores Submitted for Review - ${X.subject_name}`,message:`${P.firstName} ${P.lastName} has submitted scores for ${se?.name} - ${X.subject_name}. Please review and approve or reject.`,type:"info",targetAudience:"teachers",sentBy:r?.id||0,sentDate:new Date().toISOString(),isRead:!1,readBy:[]}),he.success(`Scores submitted! ${Ue.firstName} ${Ue.lastName} notified for review.`)):he.success(`Scores submitted! ${st} student(s) recorded.`)}else he.success(`Scores submitted! ${st} student(s) recorded.`)}catch(et){console.error("Error saving scores:",et);const it=et instanceof Error?et.message:"Unknown error";he.error(`Failed to save scores: ${it}`)}},Pe=()=>{let Se=`S/No,Reg ID,Student Name,1st CA[20],2nd CA[20],Exams[60],Total [100]
`;K.forEach((Ee,Te)=>{const dt=E[Ee.id]||{ca1:"",ca2:"",exam:""},st=dt.ca1&&dt.ca2&&dt.exam?me(dt.ca1,dt.ca2,dt.exam).total:0;Se+=`${Te+1},${Ee.admissionNumber},"${Ee.firstName} ${Ee.lastName}",${dt.ca1},${dt.ca2},${dt.exam},${st}
`});const X=new Blob([Se],{type:"text/csv"}),Ie=window.URL.createObjectURL(X),rt=document.createElement("a");rt.href=Ie,rt.download=`${R?.class_name||"-"} - ${R?.subject_name||"-"}_${m}_${f}.csv`,rt.click(),he.success("Excel file exported successfully!")},De=async()=>{if(!y||!B||!P){he.error("Please select class and subject");return}if(!ce.find(et=>et.subject_id===Number(B)&&et.class_id===Number(y))){he.error("Assignment not found");return}const Ie=le.filter(et=>et.status==="Rejected").filter(et=>{const it=E[et.student_id];if(!it)return!1;const Ue=et.total,We=parseFloat(me(it.ca1,it.ca2,it.exam).total)||0;return it.ca1&&parseFloat(it.ca1)!==et.ca1||it.ca2&&parseFloat(it.ca2)!==et.ca2||it.exam&&parseFloat(it.exam)!==et.exam||We!==Ue});if(Ie.length===0){he.error("Please make corrections to at least one rejected score");return}const rt=Ie.map(et=>{const it=E[et.student_id];return it&&parseFloat(me(it.ca1,it.ca2,it.exam).total)||0}),Ee=Math.max(...rt),Te=Math.min(...rt),dt=rt.reduce((et,it)=>et+it,0)/rt.length;let st=0;const ft=[];for(const et of Ie){const it=E[et.student_id];if(!it)continue;const Ue=parseFloat(me(it.ca1,it.ca2,it.exam).total)||0,We=pe(Ue),Bt=ee(Ue),mt={...et,ca1:parseFloat(it.ca1)||0,ca2:parseFloat(it.ca2)||0,exam:parseFloat(it.exam)||0,total:Ue,class_average:Math.round(dt*100)/100,class_min:Te,class_max:Ee,grade:We,remark:Bt,entered_date:new Date().toISOString(),status:"Submitted",rejection_reason:void 0,rejected_by:void 0,rejected_date:void 0};ft.push(A(et.id,mt)),st++}try{console.log("Attempting to resubmit",st,"rejected scores..."),await Promise.all(ft),console.log("All rejected scores resubmitted successfully"),he.success(`Rejected scores resubmitted successfully! ${st} score(s) corrected and sent for review.`);const et={...E};Ie.forEach(it=>{delete et[it.student_id]}),I(et),$(!1)}catch(et){console.error("Error resubmitting scores:",et);const it=et instanceof Error?et.message:"Unknown error";he.error(`Failed to resubmit scores: ${it}`)}},nt=Se=>{const X=Se.target.files?.[0];if(!X)return;const Ie=new FileReader;Ie.onload=rt=>{const Te=(rt.target?.result).split(`
`).filter(et=>et.trim());if(Te.length<2){he.error("Invalid Excel/CSV file");return}const dt=Te.slice(1);let st=0,ft=0;dt.forEach(et=>{const it=et.match(/(".*?"|[^,]+)(?=\s*,|\s*$)/g)||[];if(it.length<7)return;const[Ue,We,Bt,mt,Me,Ve,wt]=it.map(Ft=>Ft.replace(/^"|"$/g,"").trim()),As=K.find(Ft=>Ft.admissionNumber===We);if(!As){ft++;return}const _e=parseFloat(mt),$e=parseFloat(Me),gt=parseFloat(Ve);if(mt&&(isNaN(_e)||_e<0||_e>20)||Me&&(isNaN($e)||$e<0||$e>20)||Ve&&(isNaN(gt)||gt<0||gt>60)){ft++;return}I(Ft=>({...Ft,[As.id]:{ca1:mt||"",ca2:Me||"",exam:Ve||""}})),st++}),st>0&&he.success(`Imported ${st} student scores`),ft>0&&he.warning(`${ft} entries had errors and were skipped`)},Ie.readAsText(X),Se.target.value=""};return e.jsxs("div",{className:"min-h-screen bg-[#F4F6F9] p-6",children:[e.jsxs("div",{className:"mb-6",children:[k&&e.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fS,{className:"w-4 h-4 mr-2 text-amber-600"}),e.jsx("span",{className:"text-amber-800 font-medium",children:"Edit Mode Enabled"}),e.jsx("span",{className:"ml-2 text-amber-600 text-sm",children:"- You can modify submitted scores"})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[#2563EB] mb-1",children:" STUDENTS ASSESSMENT SCORE"}),e.jsxs("p",{className:"text-[#6B7280]",children:[m.toUpperCase()," - ",f]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ce,{onClick:Pe,className:"bg-[#06B6D4] hover:bg-[#0891B2] text-white rounded-lg",disabled:!y||!B,children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export to Excel"]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:nt,className:"hidden",disabled:!y||!B,id:"excel-upload-input"}),e.jsxs(Ce,{type:"button",className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-lg",disabled:!y||!B,onClick:()=>document.getElementById("excel-upload-input")?.click(),children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),"Upload Excel File"]})]})]})]})]}),e.jsx(ye,{className:"mb-6 rounded-xl bg-white border border-[#E5E7EB]",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Select Class"}),e.jsxs(Qt,{value:y,onValueChange:Se=>{b(Se),N("")},children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB]",children:e.jsx(Tt,{placeholder:"Choose a class"})}),e.jsx(Rt,{children:W.map(Se=>e.jsx(be,{value:Se.id.toString(),children:Se.name},Se.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Select Subject"}),e.jsxs(Qt,{value:B,onValueChange:N,disabled:!y,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB]",children:e.jsx(Tt,{placeholder:"Choose a subject"})}),e.jsx(Rt,{children:ae.map(Se=>e.jsx(be,{value:Se.subject_id.toString(),children:Se.subject_name},Se.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Select Term"}),e.jsxs(Qt,{value:G,onValueChange:L,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB]",children:e.jsx(Tt,{placeholder:"Choose term"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"First Term",children:"First Term"}),e.jsx(be,{value:"Second Term",children:"Second Term"}),e.jsx(be,{value:"Third Term",children:"Third Term"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Academic Year"}),e.jsxs(Qt,{value:F,onValueChange:O,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB]",children:e.jsx(Tt,{placeholder:"Choose year"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"2023/2024",children:"2023/2024"}),e.jsx(be,{value:"2024/2025",children:"2024/2025"}),e.jsx(be,{value:"2025/2026",children:"2025/2026"}),e.jsx(be,{value:"2026/2027",children:"2026/2027"}),e.jsx(be,{value:"2027/2028",children:"2027/2028"}),e.jsx(be,{value:"2028/2029",children:"2028/2029"}),e.jsx(be,{value:"2029/2030",children:"2029/2030"})]})]})]})]})})}),y&&B&&K.length>0?e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-lg",children:[e.jsxs(It,{className:"border-b border-[#E5E7EB] bg-white p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mx-auto mb-3 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:"GRA"})}),e.jsx("h1",{className:"text-[#1F2937] mb-1",children:"Graceland Royal Academy"}),e.jsxs("p",{className:"text-[#6B7280] text-sm",children:["Student's Assessment Score - ",G.toUpperCase()," - ",F]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 bg-[#F9FAFB] p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Class Name"}),e.jsx("p",{className:"text-sm text-[#1F2937]",children:se?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Subject"}),e.jsx("p",{className:"text-sm text-[#1F2937]",children:R?.subject_name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Average Score"}),e.jsx("p",{className:"text-sm text-[#1F2937]",children:q.average})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Max:"}),e.jsx("p",{className:"text-sm text-[#1F2937]",children:q.max})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Min:"}),e.jsx("p",{className:"text-sm text-[#1F2937]",children:q.min})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Highest Scorer"}),e.jsx("p",{className:"text-sm text-[#1F2937] font-semibold text-green-600",children:q.highestScorer?`${q.highestScorer.firstName} ${q.highestScorer.lastName}`:"-"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Teacher"}),e.jsx("p",{className:"text-sm text-[#1F2937]",children:P?`${P.firstName||""} ${P.lastName||""}`.toUpperCase():"TEACHER"})]})]}),z&&e.jsx("div",{className:"mt-4 flex items-center justify-center",children:e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm ${z==="All changes saved"?"bg-green-100 text-green-700":z==="Saving..."?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:[e.jsx(Ci,{className:"w-4 h-4"}),z]})}),de&&e.jsx("div",{className:"mt-4 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-sm bg-amber-100 text-amber-700",children:[e.jsx(Is,{className:"w-4 h-4"}),"Scores are frozen - submitted for review"]})})]}),e.jsxs(ke,{className:"p-0",children:[le.some(Se=>Se.status==="Rejected")&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 m-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Is,{className:"h-5 w-5 text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Rejected Scores Found"}),e.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[e.jsxs("p",{children:["You have ",le.filter(Se=>Se.status==="Rejected").length,' rejected score(s) that need correction. Make the necessary changes and click "Resubmit Corrected Scores".']}),le.filter(Se=>Se.status==="Rejected").map(Se=>e.jsxs("div",{className:"mt-2 p-2 bg-white rounded border border-red-200",children:[e.jsxs("p",{className:"font-medium",children:[s.find(X=>X.id===Se.student_id)?.firstName," ",s.find(X=>X.id===Se.student_id)?.lastName]}),Se.rejection_reason&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Reason: ",Se.rejection_reason]})]},Se.id))]})]})]})}),viewMode==="rejected"&&le.length===0&&y&&B&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 m-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(kr,{className:"h-5 w-5 text-green-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"No Rejected Scores"}),e.jsx("div",{className:"mt-2 text-sm text-green-700",children:e.jsx("p",{children:"Great! All your scores for this class and subject have been approved."})})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#F9FAFB] border-b border-[#E5E7EB]",children:[e.jsx("th",{className:"text-left p-3 text-sm text-[#1F2937]",children:"S/No."}),e.jsx("th",{className:"text-left p-3 text-sm text-[#1F2937]",children:"Reg ID"}),e.jsx("th",{className:"text-left p-3 text-sm text-[#1F2937]",children:"Student Name"}),e.jsx("th",{className:"text-center p-3 text-sm text-[#1F2937]",children:"1st CA[20]"}),e.jsx("th",{className:"text-center p-3 text-sm text-[#1F2937]",children:"2nd CA[20]"}),e.jsx("th",{className:"text-center p-3 text-sm text-[#1F2937]",children:"Exams[60]"}),e.jsx("th",{className:"text-center p-3 text-sm text-[#1F2937]",children:"Total [100]"}),e.jsx("th",{className:"text-center p-3 text-sm text-[#1F2937]",children:"Grade"})]})}),e.jsx("tbody",{children:K.map((Se,X)=>{const Ie=E[Se.id]||{ca1:"",ca2:"",exam:""},{total:rt}=me(Ie.ca1,Ie.ca2,Ie.exam),Ee=Ie.ca1||Ie.ca2||Ie.exam,dt=le.find(st=>st.student_id===Se.id)?.status==="Submitted"&&!k;return e.jsxs("tr",{className:"border-b border-[#E5E7EB] hover:bg-[#F9FAFB]",children:[e.jsx("td",{className:"p-3 text-sm text-[#6B7280]",children:X+1}),e.jsx("td",{className:"p-3 text-sm text-[#1F2937]",children:Se.admissionNumber}),e.jsxs("td",{className:"p-3 text-sm text-[#2563EB]",children:[Se.firstName," ",Se.lastName," ",Se.otherName||""]}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(Et,{type:"number",min:"0",max:"20",value:Ie.ca1,onChange:st=>fe(Se.id,"ca1",st.target.value),className:"w-20 mx-auto text-center rounded-lg border-[#E5E7EB] text-sm",disabled:dt,placeholder:"0"})}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(Et,{type:"number",min:"0",max:"20",value:Ie.ca2,onChange:st=>fe(Se.id,"ca2",st.target.value),className:"w-20 mx-auto text-center rounded-lg border-[#E5E7EB] text-sm",disabled:dt,placeholder:"0"})}),e.jsx("td",{className:"p-2 text-center",children:e.jsx(Et,{type:"number",min:"0",max:"60",value:Ie.exam,onChange:st=>fe(Se.id,"exam",st.target.value),className:"w-20 mx-auto text-center rounded-lg border-[#E5E7EB] text-sm",disabled:dt,placeholder:"0"})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:`text-sm ${Ee?"text-[#1F2937]":"text-[#9CA3AF]"}`,children:Ee?rt:"0"})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:`text-sm font-bold ${parseFloat(rt)>=70?"text-green-600":parseFloat(rt)>=60?"text-blue-600":parseFloat(rt)>=50?"text-yellow-600":parseFloat(rt)>=40?"text-orange-600":"text-red-600"}`,children:pe(rt)})})]},Se.id)})})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-[#E5E7EB] bg-[#F9FAFB]",children:[e.jsx(Ce,{variant:"outline",className:"rounded-lg border-[#E5E7EB] text-[#6B7280]",onClick:()=>{I({}),$(!1)},children:"Cancel"}),le.some(Se=>Se.status==="Rejected")?e.jsxs(Ce,{onClick:De,className:"bg-orange-600 hover:bg-orange-700 text-white rounded-lg",disabled:te,children:[e.jsx(vu,{className:"w-4 h-4 mr-2"}),"Resubmit Corrected Scores"]}):e.jsxs(Ce,{onClick:je,className:"bg-[#2563EB] hover:bg-[#1D4ED8] text-white rounded-lg",disabled:te,children:[k?e.jsx(ol,{className:"w-4 h-4 mr-2"}):e.jsx(Uc,{className:"w-4 h-4 mr-2"}),k?"Update Scores":"Submit"]})]})]})]}):e.jsx(ye,{className:"rounded-xl bg-white border border-[#E5E7EB]",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx("p",{className:"text-[#6B7280] mb-2",children:"Please select a class and subject to begin"}),e.jsx("p",{className:"text-sm text-[#9CA3AF]",children:"Your assigned classes and subjects will appear in the dropdowns above"})]})}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-sm text-[#6B7280]",children:"Graceland Royal Academy"}),e.jsx("p",{className:"text-xs text-[#9CA3AF] mt-1",children:"Techvibes International Limited  - 2025"})]})]})}const ho={excellent:["Outstanding performance! Shows exceptional understanding and mastery of all subjects.","Brilliant academic achievement. Maintains excellent standards across all areas.","Exceptional student who demonstrates outstanding intellectual capacity and diligence.","Remarkable performance! A true academic star with exemplary conduct.","Outstanding achievement! Consistently exceeds expectations in all subjects.","Exceptional work! Demonstrates superior analytical thinking and problem-solving skills.","Brilliant results! Shows remarkable dedication to academic excellence.","Outstanding scholar! Maintains highest standards in all academic pursuits.","Exceptional performance! A model student with outstanding intellectual abilities.","Brilliant achievement! Demonstrates exceptional mastery of course material."],veryGood:["Very good performance. Shows strong understanding and consistent effort.","Commendable academic achievement with room for further improvement.","Impressive performance! Demonstrates strong analytical skills and dedication.","Very good result! Shows promise and potential for continued excellence.","Strong academic performance with consistent effort and good understanding.","Excellent work! Displays solid grasp of concepts and good analytical abilities.","Commendable results! Shows strong academic capabilities and dedication.","Very good achievement! Demonstrates consistent effort and understanding.","Strong performance! Shows good command of subject matter and analytical skills.","Impressive work! Displays academic potential and consistent dedication."],good:["Good performance. Shows satisfactory understanding and steady progress.","Satisfactory academic achievement with areas for improvement.","Good effort shown. Consistent progress noted throughout the term.","Decent performance! With more effort, could achieve much higher results.","Fair performance showing understanding of core concepts.","Good work! Demonstrates adequate understanding and room for growth.","Satisfactory results! Shows steady progress and basic comprehension.","Decent achievement! Could benefit from additional study and practice.","Fair performance! Shows understanding of fundamental concepts.","Good effort! Demonstrates potential for improvement with dedicated work."],average:["Average performance. Needs to put in more effort to improve.","Satisfactory but needs improvement in several areas.","Fair performance. Could benefit from additional study and practice.","Average result. More dedication needed for better performance.","Moderate performance showing need for increased effort.","Fair work! Requires more dedication and consistent study habits.","Average results! Needs to focus more on academic responsibilities.","Satisfactory performance! Could improve with better study methods.","Moderate achievement! Requires increased effort and attention.","Fair work! Needs to develop better study habits and consistency."],belowAverage:["Below average performance. Requires significant improvement and attention.","Needs considerable improvement in academic performance and attitude.","Poor performance. Must show more commitment to studies.","Below expected standards. Immediate improvement required.","Unsatisfactory performance requiring urgent attention and support.","Weak performance! Needs serious attention to academic responsibilities.","Below average results! Requires immediate intervention and support.","Poor work! Must demonstrate greater commitment to learning.","Unsatisfactory achievement! Needs comprehensive academic support.","Weak performance! Requires urgent attention to study habits."],poor:["Poor performance. Requires immediate intervention and support.","Very poor academic result. Needs serious attention to studies.","Unsatisfactory performance in all aspects. Major improvement needed.","Extremely poor result. Requires comprehensive academic support.","Failing performance. Must seek help and show dramatic improvement.","Very weak performance! Needs immediate academic intervention.","Extremely poor results! Requires comprehensive support and guidance.","Failing work! Must demonstrate complete commitment to improvement.","Very poor achievement! Needs urgent and sustained academic support.","Extremely weak performance! Requires immediate intervention and dedication."]},vA={top:["Outstanding class position! Shows exceptional academic ability.","Excellent class ranking! Among the best performers in class.","Brilliant class position! Demonstrates superior academic excellence.","Exceptional ranking! A true academic leader in the class.","Outstanding achievement! Maintains highest academic standards.","Excellent class standing! Shows remarkable intellectual capabilities.","Top position! Demonstrates exceptional mastery of all subjects.","Brilliant ranking! An exemplary student with outstanding abilities."],upper:["Good class position. Shows strong academic performance.","Commendable class ranking. Above average performance.","Strong class position! Demonstrates solid academic abilities.","Good ranking! Shows consistent effort and understanding.","Commendable standing! Above average academic achievement.","Strong performance! Well-positioned among high achievers.","Good class ranking! Displays solid academic capabilities.","Commendable position! Shows promise for continued excellence."],middle:["Average class position. Room for improvement in ranking.","Fair class position. Could work towards higher ranking.","Moderate class standing. Needs more effort to improve position.","Average ranking! Potential for better academic performance.","Fair position! Could benefit from increased dedication.","Middle ranking! Room for improvement with consistent effort.","Average standing! Needs focus to achieve higher position.","Moderate position! Can improve with better study habits."],lower:["Below average class position. Needs significant improvement.","Poor class ranking. Must work harder to improve position.","Low class position. Requires immediate attention to studies.","Weak ranking! Needs substantial improvement in performance.","Poor standing! Must demonstrate greater academic commitment.","Low position! Requires urgent intervention and support.","Weak ranking! Needs comprehensive academic improvement.","Poor position! Must show dramatic improvement in studies."]},ZD={excellent:["Continue maintaining excellent standards. Consider advanced studies.","Outstanding work! Explore leadership roles and academic competitions.","Exceptional performance! Consider mentoring other students.","Brilliant achievement! Pursue advanced academic challenges.","Excellent results! Consider participating in academic enrichment programs."],veryGood:["Strong performance! With extra effort, could reach excellence.","Very good work! Focus on weak areas to achieve outstanding results.","Commendable achievement! Additional practice could lead to excellence.","Strong results! Target specific areas for improvement.","Very good performance! Consistent effort will lead to top ranking."],good:["Good effort! Increase study time for better results.","Satisfactory work! Focus on understanding concepts deeply.","Good performance! Develop better study habits and consistency.","Decent achievement! Seek help in challenging subjects.","Fair work! More dedication will lead to significant improvement."],average:["Needs improvement! Develop consistent study routine.","Fair performance! Seek additional help from teachers.","Average work! Focus on fundamentals and practice regularly.","Satisfactory results! Increase study time and concentration.","Moderate achievement! Join study groups and seek tutoring."],belowAverage:["Requires immediate attention! Seek help from teachers and tutors.","Poor performance! Develop basic study skills and habits.","Below average work! Attend extra classes and seek counseling.","Weak achievement! Requires comprehensive academic support.","Unsatisfactory results! Must change study approach completely."],poor:["Critical situation! Requires intensive academic intervention.","Very poor work! Must seek comprehensive support immediately.","Failing performance! Requires one-on-one tutoring and counseling.","Extremely weak results! Must consider academic probation.","Critical achievement! Requires complete academic rehabilitation."]};function rp(r,t,s){let n=[],a="",i="";r>=80?(a=ho.excellent[Math.floor(Math.random()*ho.excellent.length)],i="excellent"):r>=70?(a=ho.veryGood[Math.floor(Math.random()*ho.veryGood.length)],i="veryGood"):r>=60?(a=ho.good[Math.floor(Math.random()*ho.good.length)],i="good"):r>=50?(a=ho.average[Math.floor(Math.random()*ho.average.length)],i="average"):r>=40?(a=ho.belowAverage[Math.floor(Math.random()*ho.belowAverage.length)],i="belowAverage"):(a=ho.poor[Math.floor(Math.random()*ho.poor.length)],i="poor"),n.push(a);const c=t/s*100;let A="";c<=10?A=vA.top[Math.floor(Math.random()*vA.top.length)]:c<=30?A=vA.upper[Math.floor(Math.random()*vA.upper.length)]:c<=70?A=vA.middle[Math.floor(Math.random()*vA.middle.length)]:A=vA.lower[Math.floor(Math.random()*vA.lower.length)],A&&n.push(A);const d=ZD[i];if(d&&d.length>0){const u=d[Math.floor(Math.random()*d.length)];n.push(u)}return n.join(" ")}function Qy(r,t,s){const n=[];for(let i=0;i<5;i++)n.push(rp(r,t,s));const a=[...new Set(n)];for(;a.length<3;)a.push(rp(r,t,s));return a.slice(0,5)}function eO(r){return r>=80?"Exceptional performance! Keep up the excellent work. You are a role model for others.":r>=70?"Very good performance! Continue to work hard and aim for excellence.":r>=60?"Good performance! There is room for improvement. Stay focused and dedicated.":r>=50?"Fair performance. More effort and dedication needed for better results.":"Poor performance. Requires immediate attention and significant improvement."}function tO(){const{currentUser:r,teachers:t,students:s,classes:n,scores:a,affectiveDomains:i,psychomotorDomains:c,compiledResults:A,addCompiledResult:d,updateCompiledResult:u,currentTerm:m,currentAcademicYear:f,subjectAssignments:x,subjectRegistrations:g,attendances:y,loadScoresFromAPI:b,loadAffectiveDomainsFromAPI:B,loadPsychomotorDomainsFromAPI:N,loadAttendancesFromAPI:E,loadCompiledResultsFromAPI:I,refreshClassData:k,canViewResults:$,canManageScores:z,updateAffectiveDomain:H,updatePsychomotorDomain:T,createAffectiveDomain:V,createPsychomotorDomain:G,getAttendanceByStudent:L,getAttendanceRequirements:F,addNotification:O}=ys(),[P,ce]=j.useState(""),[W,ae]=j.useState(null),[K,le]=j.useState(""),[ie,se]=j.useState(!1),[R,q]=j.useState(!1),[te,de]=j.useState([]),[fe,me]=j.useState(new Date),[pe,ee]=j.useState(!1),[je,Pe]=j.useState({}),[De,nt]=j.useState({attentiveness:3,honesty:3,punctuality:3,neatness:3,attentiveness_remark:"",honesty_remark:"",punctuality_remark:"",neatness_remark:""}),[Se,X]=j.useState({sports:3,handwork:3,drawing:3,music:3,sports_remark:"",handwork_remark:"",drawing_remark:"",music_remark:""}),Ie=async()=>{if(!We){he.error("No student selected");return}try{const _e={student_id:We.id,class_id:Number(P),term:m,academic_year:f,...De,entered_by:r?.id},$e=Me?.affective?.id;$e?await H($e,_e):await V(_e),he.success("Affective domain assessment saved")}catch{he.error("Failed to save affective domain assessment")}},rt=async()=>{if(!We){he.error("No student selected");return}try{const _e={student_id:We.id,class_id:Number(P),term:m,academic_year:f,...Se,entered_by:r?.id},$e=Me?.psychomotor?.id;$e?await T($e,_e):await G(_e),he.success("Psychomotor domain assessment saved")}catch{he.error("Failed to save psychomotor domain assessment")}},Ee=j.useCallback(async()=>{try{await b(),await E(),await I(),P&&await k(Number(P)),me(new Date),he.success("Data refreshed successfully")}catch(_e){console.error("Error refreshing data:",_e),he.error("Failed to refresh data")}},[P,k,b,E,I]);j.useEffect(()=>{const _e=setInterval(async()=>{try{await I()}catch($e){console.error("Error auto-refreshing compiled results:",$e)}},3e4);return()=>clearInterval(_e)},[I]),j.useEffect(()=>{const _e=async()=>{try{await I()}catch($e){console.error("Error refreshing on focus:",$e)}};return window.addEventListener("focus",_e),()=>window.removeEventListener("focus",_e)},[I]);const Te=async()=>{try{he.info("Refreshing data..."),await I(),await b(),he.success("Data refreshed successfully")}catch(_e){console.error("Error refreshing data:",_e),he.error("Failed to refresh data")}},dt=async()=>{try{await b(),ee(!0),he.success("Results generated successfully! Positions and averages calculated.")}catch(_e){console.error("Error generating results:",_e),he.error("Failed to generate results. Please try again.")}};j.useEffect(()=>{P&&Ee()},[P]),j.useEffect(()=>{if(!P)return;const _e=setInterval(async()=>{try{await b(),console.log("Scores refreshed automatically")}catch($e){console.error("Auto refresh scores failed:",$e)}},3e4);return()=>clearInterval(_e)},[P,b]),j.useEffect(()=>{(async()=>{if(r?.role==="teacher"){const $e=await $(),gt=await z();if(!$e){he.error("You do not have permission to view results");return}if(!gt){he.error("You do not have permission to manage scores");return}}})()},[r,$,z]);const st=r?t.find(_e=>_e.id===r.linked_id):null,ft=j.useMemo(()=>st?n.some(_e=>_e.classTeacherId===st.id&&_e.status==="Active"):!1,[st,n]),et=j.useMemo(()=>st?n.filter(_e=>_e.classTeacherId===st.id&&_e.status==="Active"):[],[st,n]),it=j.useMemo(()=>P?s.filter(_e=>_e.class_id===Number(P)&&_e.status==="Active").sort((_e,$e)=>_e.lastName.localeCompare($e.lastName)):[],[P,s]),Ue=j.useMemo(()=>P?x.filter($e=>$e.class_id===Number(P)&&$e.term===m&&$e.academic_year===f&&$e.status==="Active"):[],[P,x,m,f]),We=j.useMemo(()=>W?it.find(_e=>_e.id===W):null,[W,it]),Bt=j.useMemo(()=>{if(!We||!P)return null;const _e=A.find(bt=>bt.student_id===We.id&&bt.class_id===Number(P)&&bt.term===m&&bt.academic_year===f);if(_e){const bt=_e.total_attendance_days||F()[m]||60,Ot=_e.times_present||0;return{requiredDays:bt,attendedDays:Ot,attendanceRate:bt>0?Ot/bt*100:0,ratio:`${Ot}/${bt}`,timesAbsent:_e.times_absent||0}}const gt=F()[m]||60,Ft=je[We.id]||0;return{requiredDays:gt,attendedDays:Ft,attendanceRate:gt>0?Ft/gt*100:0,ratio:`${Ft}/${gt}`,timesAbsent:0}},[We,P,m,f,A,je,F]);j.useEffect(()=>{if(We&&P){const _e=i.find(Ft=>Ft.student_id===We.id&&Ft.class_id===Number(P)&&Ft.term===m&&Ft.academic_year===f);nt(_e?{attentiveness:_e.attentiveness||3,honesty:_e.honesty||3,punctuality:_e.punctuality||3,neatness:_e.neatness||3,attentiveness_remark:_e.attentiveness_remark||"",honesty_remark:_e.honesty_remark||"",punctuality_remark:_e.punctuality_remark||"",neatness_remark:_e.neatness_remark||""}:{attentiveness:3,honesty:3,punctuality:3,neatness:3,attentiveness_remark:"",honesty_remark:"",punctuality_remark:"",neatness_remark:""});const $e=c.find(Ft=>Ft.student_id===We.id&&Ft.class_id===Number(P)&&Ft.term===m&&Ft.academic_year===f);X($e?{sports:$e.sports||3,handwork:$e.handwork||3,drawing:$e.drawing||3,music:$e.music||3,sports_remark:$e.sports_remark||"",handwork_remark:$e.handwork_remark||"",drawing_remark:$e.drawing_remark||"",music_remark:$e.music_remark||""}:{sports:3,handwork:3,drawing:3,music:3,sports_remark:"",handwork_remark:"",drawing_remark:"",music_remark:""});const gt=A.find(Ft=>Ft.student_id===We.id&&Ft.class_id===Number(P)&&Ft.term===m&&Ft.academic_year===f);gt&&Pe(Ft=>({...Ft,[We.id]:gt.times_present||0}))}},[We?.id,P,i,c,A,m,f]);const mt=j.useMemo(()=>{if(!it.length)return[];const $e=it.map(Ot=>{const Lt=a.filter(us=>us.student_id===Ot.id),Vt=Lt.filter(us=>us.status==="Submitted"&&Ue.some(Ts=>Ts&&Number(Ts.id)===Number(us.subject_assignment_id)));Ot.id===it[0]?.id&&(console.log(`=== DEBUG for ${Ot.firstName} ${Ot.lastName} ===`),console.log("Class Subjects:",Ue.map(us=>({id:us.id,subject_name:us.subject_name}))),console.log("Student Scores:",Lt.map(us=>({id:us.id,subject_assignment_id:us.subject_assignment_id,total:us.total,status:us.status}))),console.log("Relevant Scores (matching class):",Vt.map(us=>({id:us.id,subject_assignment_id:us.subject_assignment_id,total:us.total}))));const Ns=i.find(us=>us.student_id===Ot.id&&us.class_id===Number(P)&&us.term===m),Yt=c.find(us=>us.student_id===Ot.id&&us.class_id===Number(P)&&us.term===m),Ht=A.find(us=>us.student_id===Ot.id&&us.class_id===Number(P)&&us.term===m),_t=Vt.length,Ls=Ue.length>0?Ue.length:Vt.length,vs=Ns!==void 0,Gt=Yt!==void 0,Xs=Ht?.status==="Submitted"||Ht?.status==="Approved";Ht?.status;const yt=Vt.reduce((us,Ts)=>{const tr=Number(Ts.total)||0;return us+tr},0);Ot.id===it[0]?.id&&console.log(`SCORE DEBUG for ${Ot.firstName}:`,{relevantScoresCount:Vt.length,relevantScores:Vt.map(us=>({id:us.id,total:us.total,type:typeof us.total})),calculatedTotal:yt});const Fs=Vt.length>0?Math.round(yt/Vt.length*100)/100:0;return{studentId:Ot.id,studentName:`${Ot.firstName} ${Ot.lastName}`,completedSubjects:_t,totalSubjects:Ls,hasAffective:vs,hasPsychomotor:Gt,isSubmitted:Xs,averageScore:Fs,totalScore:yt,isComplete:_t===Ls&&vs&&Gt,studentScores:Vt}}).sort((Ot,Lt)=>Number(Lt.totalScore)-Number(Ot.totalScore));let gt=1;return $e.map((Ot,Lt)=>(Lt>0&&Number(Ot.totalScore)<Number($e[Lt-1].totalScore)&&(gt=Lt+1),{...Ot,position:gt,totalStudents:$e.length}))},[it,a,Ue,i,c,A,P,m,pe]),Me=j.useMemo(()=>{if(!We)return null;const $e=a.filter(Gt=>Gt.student_id===We.id).filter(Gt=>Gt.status==="Submitted"&&Ue.some(Xs=>Xs&&Number(Xs.id)===Number(Gt.subject_assignment_id))),gt=i.find(Gt=>Gt.student_id===We.id&&Gt.class_id===Number(P)&&Gt.academic_year===f),Ft=c.find(Gt=>Gt.student_id===We.id&&Gt.class_id===Number(P)&&Gt.academic_year===f),bt=A.find(Gt=>Gt.student_id===We.id&&Gt.class_id===Number(P)&&Gt.term===m&&Gt.academic_year===f),Ot=bt?.status==="Submitted"||bt?.status==="Approved",Lt=bt?.status==="Rejected";console.log("Student Result Debug:",{studentId:We?.id,existingResult:bt,isSubmitted:Ot,isRejected:Lt,status:bt?.status});const Vt=$e.reduce((Gt,Xs)=>Gt+(Number(Xs.total)||0),0),Ns=Vt>0?parseFloat(Vt.toPrecision(3)):0,Yt=$e.length>0?Math.round(Ns/$e.length*100)/100:0,Ht=mt.find(Gt=>Gt.studentId===We.id),_t=Ht?.position||0,Ls=Ht?.totalStudents||0,vs=$e.length===(Ue||[]).length&&$e.every(Gt=>Gt.status==="Submitted")&&gt!==void 0&&Ft!==void 0;return{student:We,scores:$e,affective:gt,psychomotor:Ft,totalScore:Ns,averageScore:Yt,position:_t,totalStudents:Ls,subjectsCompleted:$e.filter(Gt=>Gt.status==="Submitted").length,totalSubjects:(Ue||[]).length,isComplete:vs,existingResult:bt,isSubmitted:Ot,isRejected:Lt}},[We,a,Ue,i,c,A,P,m,f,mt]),Ve=j.useMemo(()=>{const _e=mt.filter(gt=>gt.averageScore>0),$e=_e.map(gt=>gt.averageScore);return $e.length===0?{classAverage:0,highestScore:0,lowestScore:0,totalStudents:0}:{classAverage:Math.round($e.reduce((gt,Ft)=>gt+Ft,0)/$e.length*100)/100,highestScore:Math.max(...$e),lowestScore:Math.min(...$e),totalStudents:_e.length}},[mt]),wt=()=>{if(!We||!Me||!st){he.error("Missing required data");return}const _e=n.find(Lt=>Lt.id===Number(P));if(!_e||_e.classTeacherId!==st.id){he.error("You can only compile results for your assigned class");return}if(!Me.isComplete){he.error("Cannot submit incomplete result. Ensure all scores and assessments are entered.");return}const $e=mt.find(Lt=>Lt.studentId===We.id),gt=$e?.position||0,Ft=$e?.totalStudents||0;let bt=K;if(ie&&!bt.trim()&&(bt=rp(Me.averageScore,gt,Ft)),!bt.trim()){he.error("Please enter a class teacher comment or enable auto-comment");return}const Ot={student_id:We.id,class_id:Number(P),term:m,academic_year:f,scores:Me.scores,affective:Me.affective||null,psychomotor:Me.psychomotor||null,total_score:Me.totalScore,average_score:Me.averageScore,class_average:Ve.classAverage,position:gt,total_students:Ft,times_present:Bt?.attendedDays||0,times_absent:Bt?.timesAbsent||0,total_attendance_days:Bt?.requiredDays||F()[m]||60,term_begin:"",term_end:"",next_term_begin:"",class_teacher_name:`${st.firstName} ${st.lastName}`,class_teacher_comment:bt,principal_name:"",principal_comment:eO(Me.averageScore),principal_signature:"",compiled_by:1,compiled_date:new Date().toISOString(),status:"Submitted",approved_by:null,approved_date:null,rejection_reason:null};Me.existingResult?(u(Me.existingResult.id,Ot),he.success(`Result updated for ${We.firstName} ${We.lastName}`)):(d(Ot),he.success(`Result submitted for ${We.firstName} ${We.lastName}`)),le(""),ae(null),se(!1)},As=()=>{if(!P||!st){he.error("Please select a class");return}const _e=n.find(Ft=>Ft.id===Number(P));if(!_e||_e.classTeacherId!==st.id){he.error("Only the class teacher can compile results for this class");return}const $e=mt.filter(Ft=>Ft.isComplete&&!Ft.isSubmitted);if($e.length===0){he.error("No complete results to submit");return}let gt=0;$e.forEach(Ft=>{const bt=it.find(yt=>yt.id===Ft.studentId);if(!bt)return;const Ot=a.filter(yt=>yt.student_id===bt.id&&Ue.some(Fs=>Fs&&Fs.id===yt.subject_assignment_id)),Lt=i.find(yt=>yt.student_id===bt.id&&yt.class_id===Number(P)&&yt.term===m),Vt=c.find(yt=>yt.student_id===bt.id&&yt.class_id===Number(P)&&yt.term===m),Ns=Ot.reduce((yt,Fs)=>yt+(Number(Fs.total)||0),0),Yt=Math.round(Ns/(Ot||[]).length*100)/100,Ht=mt.filter(yt=>yt.averageScore>0).map(yt=>yt.averageScore),_t=Math.round((Ht||[]).reduce((yt,Fs)=>yt+Fs,0)/(Ht||[]).length*100)/100,vs=[...Ht].sort((yt,Fs)=>Fs-yt).indexOf(Yt)+1;let Gt="";Yt>=70?Gt="Excellent performance! Keep up the outstanding work.":Yt>=60?Gt="Very good performance. Continue to work hard.":Yt>=50?Gt="Good effort. There is room for improvement.":Yt>=40?Gt="Fair performance. More effort is needed.":Gt="Needs serious improvement. Please put in more effort.";const Xs={student_id:bt.id,class_id:Number(P),term:m,academic_year:f,scores:Ot,affective:Lt||null,psychomotor:Vt||null,total_score:Ns,average_score:Yt,class_average:_t,position:vs,total_students:it.length,times_present:je[bt.id]||0,times_absent:0,total_attendance_days:F()[m]||60,term_begin:"",term_end:"",next_term_begin:"",class_teacher_name:`${st.firstName} ${st.lastName}`,class_teacher_comment:Gt,principal_name:"Dr. Ibrahim Musa",principal_comment:"",principal_signature:"",compiled_by:1,compiled_date:new Date().toISOString(),status:"Submitted",approved_by:null,approved_date:null,rejection_reason:null};d(Xs),gt++}),he.success(`Successfully submitted ${gt} results for approval`),he.success(`${gt} results submitted to admin for approval!`)};return ft?e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("h1",{className:"text-[#0A2540] text-lg mb-1",children:"Compile Results"}),e.jsx("p",{className:"text-gray-600 text-sm",children:W?"Review and compile student result":"Select a class to view students and compile their results"}),fe&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last refreshed: ",fe.toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{onClick:Te,variant:"outline",size:"sm",className:"flex items-center gap-1 border-[#0A2540]/20 h-8",children:[e.jsx(vu,{className:"h-3 w-3"}),"Refresh"]}),e.jsxs(Ce,{onClick:dt,size:"sm",className:"bg-[#F59E0B] hover:bg-[#D97706] text-white rounded-lg flex items-center gap-1 h-8",children:[e.jsx(kc,{className:"h-3 w-3"}),"Generate"]})]})]}),!W&&e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-sm",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#3B82F6] to-[#2563EB] text-white rounded-t-xl px-4 py-3",children:e.jsx(Hs,{className:"text-base",children:"Select Class"})}),e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-1 block text-sm",children:"Class"}),e.jsxs(Qt,{value:P,onValueChange:ce,children:[e.jsx(Pt,{className:"h-9 rounded-lg border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Select class"})}),e.jsx(Rt,{children:et.map(_e=>e.jsx(be,{value:_e.id.toString(),children:_e.name},_e.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-1 block text-sm",children:"Term & Year"}),e.jsx("div",{className:"h-9 flex items-center px-3 rounded-lg border border-[#0A2540]/20 bg-gray-50",children:e.jsxs("p",{className:"text-[#0A2540] text-sm",children:[m," ",f]})})]})]}),P&&Ue.length>0&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-xs text-blue-900",children:[e.jsxs("strong",{children:[Ue.length," subjects"]})," assigned to this class for ",m," ",f]})})]})]}),!W&&P&&e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-sm",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#3B82F6] to-[#2563EB] text-white rounded-t-xl px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Students List"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:[it.length," students in class"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(Ce,{onClick:As,disabled:(mt||[]).filter(_e=>_e.isComplete&&!_e.isSubmitted).length===0,className:"bg-white text-[#10B981] hover:bg-gray-100 rounded-lg h-8 text-sm",children:[e.jsx(Uc,{className:"w-3 h-3 mr-1"}),"Submit All"]})})]})}),e.jsx(ke,{className:"p-3",children:it.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Is,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No students in this class"})]}):e.jsx("div",{className:"space-y-1",children:it.map(_e=>{const $e=mt.find(gt=>gt.studentId===_e.id);return e.jsx("div",{className:"p-2 border border-[#0A2540]/10 rounded hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer",onClick:()=>ae(_e.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Sc,{className:"w-8 h-8 border border-[#3B82F6]",children:[_e.photo_url?e.jsx("img",{src:_e.photo_url,alt:`${_e.firstName} ${_e.lastName}`,className:"w-full h-full object-cover rounded-full",onError:gt=>{gt.currentTarget.style.display="none",gt.currentTarget.nextElementSibling?.classList.remove("hidden")}}):null,e.jsxs(Ec,{className:"bg-[#3B82F6] text-white text-xs",children:[_e.firstName[0],_e.lastName[0]]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[#0A2540] font-medium text-sm",children:[_e.firstName," ",_e.lastName]}),e.jsx("p",{className:"text-xs text-gray-600",children:_e.admissionNumber})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Scores"}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs(Ct,{variant:$e?.completedSubjects===$e?.totalSubjects?"default":"outline",className:`rounded text-xs ${$e?.completedSubjects===$e?.totalSubjects?"bg-green-100 text-green-800 border-green-300":"bg-yellow-100 text-yellow-800 border-yellow-300"}`,children:[$e?.completedSubjects||0,"/",$e?.totalSubjects||0]})})]}),e.jsx("div",{className:"text-center",children:e.jsx(kr,{className:`w-3 h-3 ${$e?.hasAffective?"text-green-600":"text-gray-300"}`})}),e.jsx("div",{className:"text-center",children:e.jsx(kr,{className:`w-3 h-3 ${$e?.hasPsychomotor?"text-green-600":"text-gray-300"}`})}),e.jsx("div",{className:"text-center",children:$e?.isSubmitted?e.jsxs(Ct,{className:"bg-green-100 text-green-800 border-green-300 text-xs",children:[e.jsx(kr,{className:"w-2 h-2 mr-1"}),"Sub"]}):$e?.isComplete?e.jsx(Ct,{className:"bg-blue-100 text-blue-800 border-blue-300 text-xs",children:"Ready"}):e.jsx(Ct,{className:"bg-gray-100 text-gray-800 border-gray-300 text-xs",children:"Pending"})})]})]})},_e.id)})})})]}),W&&We&&Me&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Ce,{onClick:()=>{ae(null),le("")},variant:"outline",size:"sm",className:"rounded-lg border-[#0A2540]/20 h-8",children:[e.jsx(Fu,{className:"w-3 h-3 mr-1"}),"Back"]}),e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-sm",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#3B82F6] to-[#2563EB] text-white rounded-t-xl px-4 py-3",children:e.jsxs(Hs,{className:"flex items-center gap-2 text-base",children:[e.jsxs(Sc,{className:"w-8 h-8 border border-white",children:[We.photo_url?e.jsx("img",{src:We.photo_url,alt:`${We.firstName} ${We.lastName}`,className:"w-full h-full object-cover rounded-full",onError:_e=>{_e.currentTarget.style.display="none",_e.currentTarget.nextElementSibling?.classList.remove("hidden")}}):null,e.jsxs(Ec,{className:"bg-white text-[#3B82F6] text-xs",children:[We.firstName[0],We.lastName[0]]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-base",children:[We.firstName," ",We.lastName]}),e.jsx("p",{className:"text-xs font-normal opacity-90",children:We.admissionNumber})]})]})}),e.jsxs(ke,{className:"p-3",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Class"}),e.jsx("p",{className:"text-[#0A2540] font-medium text-sm",children:We.className})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Gender"}),e.jsx("p",{className:"text-[#0A2540] font-medium text-sm",children:We.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Term"}),e.jsx("p",{className:"text-[#0A2540] font-medium text-sm",children:m})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Year"}),e.jsx("p",{className:"text-[#0A2540] font-medium text-sm",children:f})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 mt-3",children:[e.jsxs("div",{className:"p-2 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-900",children:"Subjects"}),e.jsxs("p",{className:"text-sm text-blue-900 font-bold",children:[Me.subjectsCompleted,"/",Me.totalSubjects]})]}),e.jsxs("div",{className:"p-2 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-xs text-purple-900",children:"Total"}),e.jsx("p",{className:"text-sm text-purple-900 font-bold",children:Me.totalScore})]}),e.jsxs("div",{className:"p-2 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-xs text-green-900",children:"Average"}),e.jsxs("p",{className:"text-sm text-green-900 font-bold",children:[Me.averageScore,"%"]})]}),e.jsxs("div",{className:"p-2 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("p",{className:"text-xs text-orange-900",children:"Position"}),e.jsx("p",{className:"text-sm text-orange-900 font-bold",children:Me.position>0?`${Me.position}/${Me.totalStudents}`:"N/A"})]}),e.jsxs("div",{className:"p-2 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx("p",{className:"text-xs text-indigo-900",children:"Attendance"}),e.jsx("p",{className:"text-sm text-indigo-900 font-bold",children:Bt?.ratio||"0/0"}),e.jsxs("p",{className:"text-xs text-indigo-700",children:[Bt?.attendanceRate.toFixed(1)||"0","%"]})]})]})]})]}),Me?.isRejected&&e.jsx(ye,{className:"border-red-200 bg-red-50 shadow-sm",children:e.jsx(ke,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Is,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-1",children:"Result Rejected"}),e.jsx("p",{className:"text-xs text-red-700 mb-2",children:"This result was rejected by the administrator. Please review and make necessary corrections before resubmitting."}),Me?.existingResult?.rejection_reason&&e.jsxs("div",{className:"bg-red-100 border border-red-200 rounded p-2",children:[e.jsx("p",{className:"text-xs font-medium text-red-800",children:"Rejection Reason:"}),e.jsx("p",{className:"text-xs text-red-700",children:Me.existingResult.rejection_reason})]})]})]})})}),e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-sm",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#10B981] to-[#059669] text-white rounded-t-xl px-4 py-3",children:e.jsxs(Hs,{className:"flex items-center gap-2 text-base",children:[e.jsx(Kr,{className:"w-4 h-4"}),"Subject Scores"]})}),e.jsx(ke,{className:"p-3",children:Ue.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Is,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No subjects assigned to this class"})]}):e.jsx("div",{className:"space-y-2",children:Ue.map(_e=>{const $e=Me.scores.find(gt=>gt.subject_assignment_id===_e.id);return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Kr,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#0A2540]",children:_e.subject_name||"Unknown Subject"}),e.jsx("p",{className:"text-xs text-gray-600",children:_e.subject_code||""})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"CA1"}),e.jsx("p",{className:"text-sm font-medium",children:$e?.ca1||0})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"CA2"}),e.jsx("p",{className:"text-sm font-medium",children:$e?.ca2||0})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Exam"}),e.jsx("p",{className:"text-sm font-medium",children:$e?.exam||0})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total"}),e.jsx("p",{className:"text-sm font-bold text-green-600",children:$e?.total||0})]})]})]},_e.id)})})})]}),e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-sm",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#6366F1] to-[#4F46E5] text-white px-4 py-3 rounded-t-xl",children:e.jsxs(Hs,{className:"flex items-center gap-2 text-base",children:[e.jsx(Qs,{className:"w-4 h-4"}),"Attendance Record"]})}),e.jsx(ke,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium text-[#0A2540]",children:"Days Present"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Required: ",Bt?.requiredDays||60," days for ",m]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{type:"number",min:"0",max:Bt?.requiredDays||60,value:je[We?.id||0]||0,onChange:_e=>Pe($e=>({...$e,[We?.id||0]:parseInt(_e.target.value)||0})),className:"w-20 text-center rounded-lg",disabled:Me?.isSubmitted&&!Me?.isRejected}),e.jsx("span",{className:"text-sm text-gray-600",children:"days"})]})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-800",children:"Attendance Ratio:"}),e.jsx("span",{className:"text-lg font-bold text-indigo-900",children:Bt?.ratio||"0/60"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-xs text-indigo-700",children:"Attendance Rate:"}),e.jsxs("span",{className:"text-sm font-semibold text-indigo-800",children:[Bt?.attendanceRate.toFixed(1)||"0.0","%"]})]})]}),Me?.isSubmitted&&!Me?.isRejected&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Attendance cannot be modified after result submission."}),Me?.isRejected&&e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Result was rejected. You can edit and resubmit."})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-sm",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#8B5CF6] to-[#7C3AED] text-white px-4 py-3 rounded-t-xl",children:e.jsx(Hs,{className:"text-base",children:"Affective Domain"})}),e.jsxs(ke,{className:"p-4 space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"attentiveness",label:"Attentiveness"},{key:"honesty",label:"Honesty"},{key:"punctuality",label:"Punctuality"},{key:"neatness",label:"Neatness"}].map(_e=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(He,{className:"text-xs font-medium text-gray-700",children:_e.label}),e.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map($e=>e.jsx("button",{type:"button",onClick:()=>nt(gt=>({...gt,[_e.key]:$e})),className:`w-6 h-6 rounded-full border-2 text-xs font-semibold transition-all ${De[_e.key]===$e?"bg-purple-600 border-purple-600 text-white":"bg-white border-gray-300 text-gray-600 hover:border-purple-400"}`,disabled:Me?.isSubmitted&&!Me?.isRejected,children:$e},$e))}),e.jsx($a,{value:De[`${_e.key}_remark`],onChange:$e=>nt(gt=>({...gt,[`${_e.key}_remark`]:$e.target.value})),placeholder:`${_e.label} remarks...`,className:"min-h-[40px] text-xs resize-none",disabled:Me?.isSubmitted&&!Me?.isRejected})]},_e.key))}),e.jsx(Ce,{onClick:Ie,disabled:Me?.isSubmitted&&!Me?.isRejected,className:"w-full bg-purple-600 hover:bg-purple-700 text-white h-8 text-sm",children:"Save Affective Assessment"})]})]}),e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-sm",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#EC4899] to-[#DB2777] text-white px-4 py-3 rounded-t-xl",children:e.jsx(Hs,{className:"text-base",children:"Psychomotor Domain"})}),e.jsxs(ke,{className:"p-4 space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"sports",label:"Sports"},{key:"handwork",label:"Handwork"},{key:"drawing",label:"Drawing"},{key:"music",label:"Music"}].map(_e=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(He,{className:"text-xs font-medium text-gray-700",children:_e.label}),e.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map($e=>e.jsx("button",{type:"button",onClick:()=>X(gt=>({...gt,[_e.key]:$e})),className:`w-6 h-6 rounded-full border-2 text-xs font-semibold transition-all ${Se[_e.key]===$e?"bg-pink-600 border-pink-600 text-white":"bg-white border-gray-300 text-gray-600 hover:border-pink-400"}`,disabled:Me?.isSubmitted&&!Me?.isRejected,children:$e},$e))}),e.jsx($a,{value:Se[`${_e.key}_remark`],onChange:$e=>X(gt=>({...gt,[`${_e.key}_remark`]:$e.target.value})),placeholder:`${_e.label} remarks...`,className:"min-h-[40px] text-xs resize-none",disabled:Me?.isSubmitted&&!Me?.isRejected})]},_e.key))}),e.jsx(Ce,{onClick:rt,disabled:Me?.isSubmitted&&!Me?.isRejected,className:"w-full bg-pink-600 hover:bg-pink-700 text-white h-8 text-sm",children:"Save Psychomotor Assessment"})]})]})]}),e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-sm",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#F59E0B] to-[#D97706] text-white px-4 py-3 rounded-t-xl",children:e.jsx(Hs,{className:"text-base",children:"Class Teacher Comment"})}),e.jsxs(ke,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"auto-comment",checked:ie,onChange:_e=>se(_e.target.checked),disabled:Me?.isSubmitted&&!Me?.isRejected,className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),e.jsx(He,{htmlFor:"auto-comment",className:"text-sm text-gray-700",children:"Use auto-generated comment"})]}),ie&&R&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select a comment:"}),e.jsx("div",{className:"space-y-1",children:Qy(Me?.averageScore||0,mt.find(_e=>_e.studentId===We.id)?.position||0,mt.find(_e=>_e.studentId===We.id)?.totalStudents||0).map((_e,$e)=>e.jsx("div",{onClick:()=>{le(_e),q(!1)},className:"p-2 bg-white border border-gray-200 rounded cursor-pointer hover:bg-orange-50 hover:border-orange-300 transition-colors",children:e.jsx("p",{className:"text-sm text-gray-700",children:_e})},$e))}),e.jsx(Ce,{onClick:()=>q(!1),variant:"outline",size:"sm",className:"mt-2 h-6 text-xs",children:"Close"})]}),ie&&!R&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ce,{onClick:()=>q(!0),variant:"outline",size:"sm",className:"h-6 text-xs",children:[e.jsx(vu,{className:"w-3 h-3 mr-1"}),"Generate Options"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Click to select auto-comment"})]})]})]}),We&&e.jsxs("div",{className:"mb-4",children:[Me?.existingResult&&e.jsxs(Si,{className:`mb-4 ${Me.existingResult.status==="Rejected"?"bg-red-50 border-red-200":Me.existingResult.status==="Approved"?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:[Me.existingResult.status==="Rejected"&&e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-4 w-4 text-red-600"}),e.jsxs(Ga,{className:"text-red-800",children:[e.jsx("strong",{children:"Result Rejected by Admin"}),Me.existingResult.rejection_reason&&e.jsxs("p",{className:"text-sm mt-1",children:["Reason: ",Me.existingResult.rejection_reason]}),e.jsx("p",{className:"text-sm mt-2",children:"You can now edit and resubmit this result."})]})]}),Me.existingResult.status==="Approved"&&e.jsxs(e.Fragment,{children:[e.jsx(kr,{className:"h-4 w-4 text-green-600"}),e.jsxs(Ga,{className:"text-green-800",children:[e.jsx("strong",{children:"Result Approved"})," - This result has been approved and published."]})]}),Me.existingResult.status==="Submitted"&&e.jsxs(e.Fragment,{children:[e.jsx(Ci,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(Ga,{className:"text-yellow-800",children:[e.jsx("strong",{children:"Result Pending Approval"})," - This result is waiting for admin approval."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold text-blue-600",children:mt.find(_e=>_e.studentId===We.id)?.position||0}),e.jsx("p",{className:"text-xs text-gray-600",children:"Position"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:mt.find(_e=>_e.studentId===We.id)?.totalStudents||0}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total Students"})]})]})]}),e.jsxs(ye,{className:"border-[#0A2540]/10 shadow-sm",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#F59E0B] to-[#D97706] text-white px-4 py-3 rounded-t-xl",children:e.jsx(Hs,{className:"text-base",children:"Class Teacher Comment"})}),e.jsxs(ke,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"auto-comment",checked:ie,onChange:_e=>se(_e.target.checked),disabled:Me?.isSubmitted&&!Me?.isRejected,className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),e.jsx(He,{htmlFor:"auto-comment",className:"text-sm text-gray-700",children:"Use auto-generated comment"})]}),ie&&!R&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ce,{onClick:()=>q(!0),variant:"outline",size:"sm",className:"h-6 text-xs",children:[e.jsx(vu,{className:"w-3 h-3 mr-1"}),"Generate Options"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Click to select auto-comment"})]}),ie&&We&&Me&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-green-800 mb-1",children:"Preview:"}),e.jsx("p",{className:"text-xs text-green-700",children:rp(Me.averageScore,mt.find(_e=>_e.studentId===We.id)?.position||0,mt.find(_e=>_e.studentId===We.id)?.totalStudents||0)})]}),ie&&R&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select a comment:"}),e.jsx("div",{className:"space-y-1",children:Qy(Me?.averageScore||0,mt.find(_e=>_e.studentId===We.id)?.position||0,mt.find(_e=>_e.studentId===We.id)?.totalStudents||0).map((_e,$e)=>e.jsx("div",{onClick:()=>{le(_e),q(!1)},className:"p-2 bg-white border border-gray-200 rounded cursor-pointer hover:bg-orange-50 hover:border-orange-300 transition-colors",children:e.jsx("p",{className:"text-sm text-gray-700",children:_e})},$e))}),e.jsx(Ce,{onClick:()=>q(!1),variant:"outline",size:"sm",className:"mt-2 h-6 text-xs",children:"Close"})]}),e.jsx($a,{value:ie?K||"":K||Me?.existingResult?.class_teacher_comment||"",onChange:_e=>!ie&&le(_e.target.value),placeholder:"Enter your comment for this student...",className:"min-h-20 rounded-lg border-[#0A2540]/20 text-sm",disabled:ie||Me?.existingResult?.status==="Submitted"||Me?.existingResult?.status==="Approved"}),Me?.existingResult?.status==="Submitted"&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"This result has been submitted and cannot be edited."})]})]}),e.jsx(ye,{className:"border-[#0A2540]/10 shadow-sm",children:e.jsx(ke,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[#0A2540] font-medium text-sm mb-1",children:"Ready to Submit?"}),e.jsx("p",{className:"text-xs text-gray-600",children:Me?.isComplete?"All requirements met. Submit for approval.":"Complete all requirements before submitting."})]}),e.jsxs(Ce,{onClick:wt,disabled:!Me?.isComplete||!ie&&!K.trim()||ie&&!K.trim()&&!R||Me?.isSubmitted&&!Me?.isRejected,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-lg px-6 h-8 text-sm",children:[e.jsx(Uc,{className:"w-3 h-3 mr-1"}),Me?.isSubmitted&&!Me?.isRejected?"Submitted":Me?.isRejected?"Resubmit":"Submit"]})]})})})]})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Is,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Only class teachers can compile results. You must be assigned as a class teacher to access this page."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Contact the administrator if you believe this is an error."})]})})}function sO(){const{classes:r,students:t,parents:s,currentUser:n,teachers:a,getTeacherAssignments:i,compiledResults:c}=ys(),[A,d]=j.useState(""),[u,m]=j.useState(()=>{const T=n?a.find(L=>L.id===n.linked_id):null;return r.filter(L=>L.classTeacherId===T?.id)[0]?.id||r[0]?.id||1}),[f,x]=j.useState("all"),[g,y]=j.useState(null),b=n?a.find(T=>T.id===n.linked_id):null,B=r.filter(T=>T.classTeacherId===b?.id),N=B.find(T=>T.id===u)||B[0],E=j.useMemo(()=>N?t.filter(T=>T.class_id===u&&T.status==="Active").map((T,V)=>{const G=s.find(O=>O.id===T.parent_id),L=c.filter(O=>O.student_id===T.id&&O.status==="Approved"),F=L.length>0?L.reduce((O,P)=>O+P.average_score,0)/L.length:0;return{...T,parentName:G?`${G.firstName} ${G.lastName}`:"N/A",parentPhone:G?.phone||"N/A",parentEmail:G?.email||"N/A",attendance:0,averageScore:F||0,position:V+1}}).sort((T,V)=>V.averageScore-T.averageScore).map((T,V)=>({...T,position:V+1})):[],[t,u,s,c,N]),I=T=>{y(T)},k=(E||[]).filter(T=>{const V=`${T.firstName||""} ${T.lastName||""}`,G=V&&V.toLowerCase().includes(A.toLowerCase())||T.admissionNumber&&T.admissionNumber.toLowerCase().includes(A.toLowerCase())||T.parentName&&T.parentName.toLowerCase().includes(A.toLowerCase()),L=f==="all"||T.gender===f;return G&&L}),$={totalStudents:E?.length||0,maleCount:E?.filter(T=>T.gender==="Male").length||0,femaleCount:E?.filter(T=>T.gender==="Female").length||0,averageAttendance:E?.length?E.reduce((T,V)=>T+(V.attendance||0),0)/E.length:0,averageScore:E?.length?E.reduce((T,V)=>T+(V.averageScore||0),0)/E.length:0},z=T=>T?T.split(" ").map(V=>V[0]).join("").toUpperCase():"??",H=()=>{const T=["Student ID","Name","Gender","DOB","Parent Name","Parent Phone","Parent Email","Attendance %","Average Score","Position"],V=k.map(P=>[P.admissionNumber,`${P.firstName} ${P.lastName}`,P.gender,new Date(P.date_of_birth).toLocaleDateString("en-GB"),P.parentName,P.parentPhone,P.parentEmail,P.attendance,P.averageScore,P.position]),G=[T,...V].map(P=>P.join(",")).join(`
`),L=new Blob([G],{type:"text/csv"}),F=URL.createObjectURL(L),O=document.createElement("a");O.href=F,O.download=`${N?.name||"class"}-class-list-${new Date().toISOString().split("T")[0]}.csv`,O.click()};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-[#0A2540] mb-2",children:["Class List - ",N?.name||"No Class Assigned"]}),e.jsx("p",{className:"text-gray-600",children:"Manage and view your class students"})]}),B.length>0&&e.jsxs(Qt,{value:u.toString(),onValueChange:T=>m(Number(T)),children:[e.jsx(Pt,{className:"w-48 border-[#0A2540]/20 rounded-xl",children:e.jsx(Tt,{})}),e.jsx(Rt,{children:B.map(T=>e.jsx(be,{value:T.id.toString(),children:T.name},T.id))})]})]}),B.length===0&&e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsxs(ke,{className:"p-6 text-center",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-[#0A2540] mb-2",children:"No Classes Assigned"}),e.jsx("p",{className:"text-gray-600",children:"You haven't been assigned any classes yet. Please contact the administrator."})]})}),B.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Students"}),e.jsx("p",{className:"text-[#0A2540]",children:$.totalStudents})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Male"}),e.jsx("p",{className:"text-[#0A2540]",children:$.maleCount})]}),e.jsx("div",{className:"bg-indigo-100 p-3 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-indigo-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Female"}),e.jsx("p",{className:"text-[#0A2540]",children:$.femaleCount})]}),e.jsx("div",{className:"bg-pink-100 p-3 rounded-xl",children:e.jsx(Qs,{className:"w-6 h-6 text-pink-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Avg Attendance"}),e.jsxs("p",{className:"text-[#0A2540]",children:[$.averageAttendance.toFixed(1),"%"]})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:e.jsx(Ed,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Class Average"}),e.jsxs("p",{className:"text-[#0A2540]",children:[$.averageScore.toFixed(1),"%"]})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-xl",children:e.jsx(kc,{className:"w-6 h-6 text-yellow-600"})})]})})})]}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Et,{type:"text",placeholder:"Search by name, ID, or parent...",value:A,onChange:T=>d(T.target.value),className:"pl-10 border-[#0A2540]/20 focus:border-[#FFD700] rounded-xl"})]}),e.jsxs(Qt,{value:f,onValueChange:x,children:[e.jsx(Pt,{className:"border-[#0A2540]/20 rounded-xl",children:e.jsx(Tt,{placeholder:"Gender"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Genders"}),e.jsx(be,{value:"Male",children:"Male"}),e.jsx(be,{value:"Female",children:"Female"})]})]}),e.jsxs(Ce,{onClick:H,className:"bg-[#0A2540] hover:bg-[#0A2540]/90 text-white rounded-xl",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export Class List"]})]})})}),e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"border-b border-[#0A2540]/10 bg-[#0A2540]/5",children:e.jsxs(Hs,{className:"text-[#0A2540]",children:["Students (",(k||[]).length,")"]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#0A2540]/5",children:[e.jsx(lt,{className:"text-[#0A2540]",children:"Position"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Student"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Gender"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Parent/Guardian"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Contact"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Attendance"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Average Score"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Actions"})]})}),e.jsx(Ln,{children:(k||[]).length===0?e.jsx(os,{children:e.jsx(Je,{colSpan:8,className:"text-center py-8 text-gray-500",children:"No students found"})}):k.map(T=>e.jsxs(os,{className:"hover:bg-[#0A2540]/5",children:[e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[T.position<=3&&e.jsx(kc,{className:`w-4 h-4 ${T.position===1?"text-yellow-500":T.position===2?"text-gray-400":"text-orange-600"}`}),e.jsx("span",{className:"text-[#0A2540]",children:T.position})]})}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Sc,{className:"h-10 w-10 bg-[#0A2540] text-white",children:e.jsx(Ec,{className:"bg-[#0A2540] text-white",children:z(`${T.firstName} ${T.lastName}`)})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[#0A2540]",children:[T.firstName," ",T.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:T.admissionNumber})]})]})}),e.jsx(Je,{children:e.jsx(Ct,{variant:T.gender==="Male"?"default":"secondary",className:"rounded-xl",children:T.gender})}),e.jsx(Je,{children:e.jsx("div",{children:e.jsx("p",{className:"text-[#0A2540]",children:T.parentName})})}),e.jsx(Je,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(If,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:T.parentPhone})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Uf,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600 truncate max-w-[200px]",children:T.parentEmail})]})]})}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 w-16",children:e.jsx("div",{className:`h-2 rounded-full ${T.attendance>=90?"bg-green-500":T.attendance>=75?"bg-yellow-500":"bg-red-500"}`,style:{width:`${T.attendance}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[T.attendance,"%"]})]})}),e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[#0A2540]",children:[T.averageScore.toFixed(1),"%"]}),e.jsx(Ct,{className:`rounded-xl ${T.averageScore>=70?"bg-green-100 text-green-800":T.averageScore>=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:T.averageScore>=70?"Excellent":T.averageScore>=50?"Good":"Needs Improvement"})]})}),e.jsx(Je,{children:e.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>I(T),className:"text-[#0A2540] hover:text-[#FFD700] hover:bg-[#FFD700]/10 rounded-xl",children:e.jsx(kn,{className:"w-4 h-4"})})})]},T.id))})]})})})]}),e.jsx(Zs,{open:!!g,onOpenChange:()=>y(null),children:e.jsxs(er,{className:"max-w-2xl rounded-xl",children:[e.jsxs(ur,{children:[e.jsx(hr,{className:"text-[#0A2540]",children:"Student Details"}),e.jsxs(Hn,{children:["Complete information for ",g&&`${g.firstName} ${g.lastName}`]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Sc,{className:"h-20 w-20 bg-[#0A2540] text-white text-xl",children:e.jsx(Ec,{className:"bg-[#0A2540] text-white",children:g&&z(`${g.firstName} ${g.lastName}`)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[#0A2540]",children:g&&`${g.firstName} ${g.lastName}`}),e.jsx("p",{className:"text-gray-600",children:g?.admissionNumber}),e.jsx(Ct,{variant:"secondary",className:"mt-1 rounded-xl",children:g?.gender})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Date of Birth"}),e.jsx("p",{className:"text-[#0A2540]",children:g&&new Date(g.date_of_birth).toLocaleDateString("en-GB")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Academic Year"}),e.jsx("p",{className:"text-[#0A2540]",children:g?.academic_year||"2024/2025"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Class Position"}),e.jsxs("p",{className:"text-[#0A2540]",children:[g?.position," / ",E.length]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Status"}),e.jsx(Ct,{className:"bg-green-100 text-green-800 rounded-xl",children:"Active"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-[#0A2540]",children:"Performance"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Average Score"}),e.jsxs("p",{className:"text-[#0A2540] text-xl",children:[g?.averageScore.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Attendance Rate"}),e.jsxs("p",{className:"text-[#0A2540] text-xl",children:[g?.attendance,"%"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-[#0A2540]",children:"Parent/Guardian Information"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Name"}),e.jsx("p",{className:"text-[#0A2540]",children:g?.parentName})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Phone"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(If,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-[#0A2540]",children:g?.parentPhone})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Uf,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-[#0A2540]",children:g?.parentEmail})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Class"}),e.jsx("p",{className:"text-[#0A2540]",children:g?.className})]})]})]})]})]})})]})]})}function rO(){const{currentUser:r,teachers:t,classes:s,students:n,getStudentsByClass:a,addAttendance:i,getAttendancesByDate:c,getTeacherAssignments:A,currentTerm:d,currentAcademicYear:u}=ys(),[m,f]=j.useState(0),[x,g]=j.useState(new Date().toISOString().split("T")[0]),[y,b]=j.useState({}),[B,N]=j.useState({}),E=t.find(W=>W.id===r?.linked_id),I=s.filter(W=>W.classTeacherId===E?.id),k=m?a(m):[],z=c(x).some(W=>W.class_id===m&&W.date===x),H=(W,ae)=>{b({...y,[W]:ae})},T=(W,ae)=>{N({...B,[W]:ae})},V=W=>{const ae={};k.forEach(K=>{ae[K.id]=W}),b(ae),he.success(`Marked all students as ${W}`)},G=()=>{if(!m){he.error("Please select a class");return}if(k.length===0){he.error("No students in selected class");return}const W=k.filter(ae=>!y[ae.id]);if(W.length>0){he.error(`Please mark attendance for all students (${W.length} remaining)`);return}k.forEach(ae=>{i({student_id:ae.id,class_id:m,date:x,status:y[ae.id],marked_by:r?.linked_id||0,marked_date:new Date().toISOString(),term:d,academicYear:u,remarks:B[ae.id]||""})}),he.success("Attendance marked successfully!"),b({}),N({})},L=Object.keys(y||{}).length,F=Object.values(y||{}).filter(W=>W==="Present").length,O=Object.values(y||{}).filter(W=>W==="Absent").length,P=Object.values(y||{}).filter(W=>W==="Late").length,ce=Object.values(y||{}).filter(W=>W==="Excused").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-slate-900 mb-2",children:"Mark Attendance"}),e.jsx("p",{className:"text-slate-600",children:"Record student attendance for your class"})]}),e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-slate-700",children:"Select Class"}),e.jsxs("select",{value:m,onChange:W=>{f(Number(W.target.value)),b({}),N({})},className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"Choose a class..."}),I.map(W=>e.jsxs("option",{value:W.id,children:[W.name," - ",W.currentStudents," Students"]},W.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-slate-700",children:"Attendance Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:x,onChange:W=>g(W.target.value),max:new Date().toISOString().split("T")[0],className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10"}),e.jsx(jn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"})]})]})]}),z&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[e.jsx(Is,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsx("div",{children:e.jsxs("p",{className:"text-yellow-800",children:["Attendance has already been marked for this class on ",x,". Submitting again will create duplicate records."]})})]})]}),m>0&&k.length>0&&e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-800 mb-1",children:"Quick Actions"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Mark all students at once"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ce,{onClick:()=>V("Present"),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Mark All Present"]}),e.jsxs(Ce,{onClick:()=>V("Absent"),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ba,{className:"w-4 h-4 mr-2"}),"Mark All Absent"]})]})]}),L>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl text-slate-900",children:[L,"/",k.length]}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Marked"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-green-600",children:F}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Present"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-red-600",children:O}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Absent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-yellow-600",children:P}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Late"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl text-blue-600",children:ce}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Excused"})]})]})]}),m>0&&k.length>0&&e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-slate-800 mb-4",children:["Students - ",k.length," Total"]}),e.jsx("div",{className:"space-y-3",children:k.map(W=>{const ae=y[W.id];return e.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-slate-900",children:[W.firstName," ",W.lastName]}),e.jsxs("p",{className:"text-slate-600 text-sm",children:[W.admissionNumber,"  ",W.gender]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>H(W.id,"Present"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-all ${ae==="Present"?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Cc,{className:"w-4 h-4"}),"Present"]}),e.jsxs("button",{onClick:()=>H(W.id,"Absent"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-all ${ae==="Absent"?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(ba,{className:"w-4 h-4"}),"Absent"]}),e.jsxs("button",{onClick:()=>H(W.id,"Late"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-all ${ae==="Late"?"bg-yellow-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Ci,{className:"w-4 h-4"}),"Late"]}),e.jsxs("button",{onClick:()=>H(W.id,"Excused"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-all ${ae==="Excused"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Is,{className:"w-4 h-4"}),"Excused"]})]})]}),ae&&ae!=="Present"&&e.jsx("div",{className:"mt-3",children:e.jsx("input",{type:"text",placeholder:`Add remarks for ${ae.toLowerCase()} status...`,value:B[W.id]||"",onChange:K=>T(W.id,K.target.value),className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})})]},W.id)})}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(Ce,{onClick:()=>{b({}),N({})},className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Clear All"}),e.jsx(Ce,{onClick:G,disabled:L!==k.length,className:"bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Attendance"})]})]}),m===0&&e.jsxs(ye,{className:"p-12 bg-white rounded-xl shadow-sm border border-slate-200 text-center",children:[e.jsx(jn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-slate-900 mb-2",children:"No Class Selected"}),e.jsx("p",{className:"text-slate-600",children:"Please select a class to begin marking attendance"})]}),m>0&&k.length===0&&e.jsxs(ye,{className:"p-12 bg-white rounded-xl shadow-sm border border-slate-200 text-center",children:[e.jsx(Is,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-slate-900 mb-2",children:"No Students Found"}),e.jsx("p",{className:"text-slate-600",children:"This class has no students enrolled"})]})]})}function nO(){const{students:r,parents:t,currentUser:s,classes:n,teachers:a,getTeacherAssignments:i}=ys(),c=a.find(b=>b.id===s?.linked_id),A=n.filter(b=>b.classTeacherId===c?.id),d=r.filter(b=>A.some(B=>B.id===b.class_id)),[u,m]=j.useState({recipientType:"single",studentId:"",classId:"",subject:"",message:""}),[f,x]=j.useState([]),g=b=>{b.preventDefault();const B={id:f.length+1,...u,timestamp:new Date().toLocaleString(),status:"Sent"};x([B,...f]),he.success("Message sent successfully!"),m({recipientType:"single",studentId:"",classId:"",subject:"",message:""})},y=()=>u.recipientType==="single"?u.studentId?1:0:u.recipientType==="class"?d.filter(b=>b.class_id===Number(u.classId)).length:d.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Message Parents"}),e.jsx("p",{className:"text-[#6B7280]",children:"Send messages and updates to parents/guardians"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"border-b border-[#E5E7EB] bg-[#F9FAFB] p-4",children:e.jsx("h2",{className:"font-semibold text-[#1F2937]",children:"Compose Message"})}),e.jsx(ke,{className:"p-6",children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(He,{htmlFor:"recipientType",children:"Send To *"}),e.jsxs(Qt,{value:u.recipientType,onValueChange:b=>m({...u,recipientType:b}),children:[e.jsx(Pt,{className:"rounded-lg",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"single",children:"Single Student Parent"}),e.jsx(be,{value:"class",children:"All Parents in Class"}),e.jsx(be,{value:"all",children:"All Parents"})]})]})]}),u.recipientType==="single"&&e.jsxs("div",{children:[e.jsx(He,{htmlFor:"student",children:"Select Student *"}),e.jsxs(Qt,{value:u.studentId,onValueChange:b=>m({...u,studentId:b}),required:!0,children:[e.jsx(Pt,{className:"rounded-lg",children:e.jsx(Tt,{placeholder:"Choose student"})}),e.jsx(Rt,{children:d.map(b=>{const B=n.find(N=>N.id===b.class_id);return e.jsxs(be,{value:b.id.toString(),children:[b.firstName," ",b.lastName," - ",B?.name||"Unknown Class"]},b.id)})})]})]}),u.recipientType==="class"&&e.jsxs("div",{children:[e.jsx(He,{htmlFor:"class",children:"Select Class *"}),e.jsxs(Qt,{value:u.classId,onValueChange:b=>m({...u,classId:b}),required:!0,children:[e.jsx(Pt,{className:"rounded-lg",children:e.jsx(Tt,{placeholder:"Choose class"})}),e.jsx(Rt,{children:A.map(b=>e.jsx(be,{value:b.id.toString(),children:b.name},b.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"subject",children:"Subject *"}),e.jsx(Et,{id:"subject",value:u.subject,onChange:b=>m({...u,subject:b.target.value}),placeholder:"Message subject",className:"rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"message",children:"Message *"}),e.jsx($a,{id:"message",value:u.message,onChange:b=>m({...u,message:b.target.value}),placeholder:"Type your message here...",className:"rounded-lg min-h-[200px]",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#F9FAFB] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"w-5 h-5 text-[#6B7280]"}),e.jsxs("span",{className:"text-sm text-[#6B7280]",children:[y()," recipient(s)"]})]}),e.jsxs(Ce,{type:"submit",className:"rounded-lg bg-[#3B82F6] hover:bg-[#2563EB]",children:[e.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Send Message"]})]})]})})]})}),e.jsx("div",{children:e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"border-b border-[#E5E7EB] bg-[#F9FAFB] p-4",children:e.jsx("h2",{className:"font-semibold text-[#1F2937]",children:"Sent Messages"})}),e.jsx(ke,{className:"p-4 max-h-[600px] overflow-y-auto",children:f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xo,{className:"w-12 h-12 text-[#9CA3AF] mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-[#6B7280]",children:"No messages sent yet"})]}):e.jsx("div",{className:"space-y-3",children:f.map(b=>e.jsxs("div",{className:"p-3 border border-[#E5E7EB] rounded-lg",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[e.jsx(kr,{className:"w-4 h-4 text-[#10B981] flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm text-[#1F2937] truncate",children:b.subject}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:b.timestamp})]})]}),e.jsx("p",{className:"text-xs text-[#6B7280] line-clamp-2",children:b.message})]},b.id))})})]})})]})]})}function aO(){const{currentUser:r,teachers:t,classes:s,subjects:n,subjectAssignments:a,students:i,scores:c,getPendingScores:A,rejectScore:d,approveScore:u,getTeacherClasses:m,currentAcademicYear:f,currentTerm:x,addNotification:g}=ys(),{broadcast:y}=JB(),[b,B]=j.useState("all"),[N,E]=j.useState("all"),[I,k]=j.useState("submitted"),[$,z]=j.useState(""),[H,T]=j.useState(!1),[V,G]=j.useState(null),L=r?t.find(ie=>ie.id===r.linked_id):null,F=L?m(L.id):[],P=c.map(ie=>{const se=a.find(fe=>fe.id===ie.subject_assignment_id),R=i.find(fe=>fe.id===ie.student_id),q=se?n.find(fe=>fe.id===se.subject_id):null,te=se?s.find(fe=>fe.id===se.class_id):null,de=se?t.find(fe=>fe.id===se.teacher_id):null;return{...ie,student_name:R?`${R.firstName} ${R.lastName}`:"Unknown Student",subject_name:q?q.name:"Unknown Subject",class_name:te?te.name:"Unknown Class",teacher_name:de?`${de.firstName} ${de.lastName}`:"Unknown Teacher",class_id:se?.class_id||0,academic_year:ie.academic_year||f,term:ie.term||x}}).filter(ie=>!(!F.some(R=>R.classId===ie.class_id)||b!=="all"&&ie.class_id!==parseInt(b)||N!=="all"&&ie.subject_assignment_id!==parseInt(N)||I==="submitted"&&ie.status!=="Submitted"||I==="rejected"&&ie.status!=="Rejected"||I==="all"&&!["Submitted","Rejected"].includes(ie.status))),ce=Array.from(new Set(P.map(ie=>({id:ie.subject_assignment_id,name:ie.subject_name})))),W=async()=>{if(!V||!$.trim()){he.error("Please provide a rejection reason");return}try{await d(V.id,$,r.id);const ie=a.find(se=>se.id===V.subject_assignment_id);ie&&t.find(R=>R.id===ie.teacher_id)&&(await g({title:"Score Rejected - Correction Required",message:`Your score for ${V.student_name} in ${V.subject_name} (${V.class_name}) was rejected. Reason: ${$}. Please review and resubmit.`,type:"warning",targetAudience:"teachers",sentBy:r.id,sentDate:new Date().toISOString(),isRead:!1,readBy:[]}),y({id:Date.now(),title:"Score Rejected - Correction Required",message:`Score for ${V.student_name} in ${V.subject_name} was rejected. Please review and resubmit.`,type:"warning",targetAudience:"teachers",sentDate:new Date().toISOString()})),he.success(`Score rejected and ${V.teacher_name} notified`),z(""),T(!1),G(null)}catch{he.error("Failed to reject score")}},ae=async ie=>{try{await u(ie.id,r.id);const se=a.find(R=>R.id===ie.subject_assignment_id);se&&t.find(q=>q.id===se.teacher_id)&&(await g({title:"Score Approved",message:`Your score for ${ie.student_name} in ${ie.subject_name} (${ie.class_name}) has been approved.`,type:"success",targetAudience:"teachers",sentBy:r.id,sentDate:new Date().toISOString(),isRead:!1,readBy:[]}),y({id:Date.now(),title:"Score Approved",message:`Score for ${ie.student_name} in ${ie.subject_name} has been approved.`,type:"success",targetAudience:"teachers",sentDate:new Date().toISOString()})),he.success("Score approved successfully")}catch{he.error("Failed to approve score")}},K=ie=>{switch(ie){case"Submitted":return e.jsx(Ct,{className:"bg-blue-100 text-blue-800",children:"Pending Review"});case"Rejected":return e.jsx(Ct,{className:"bg-red-100 text-red-800",children:"Rejected"});default:return e.jsx(Ct,{className:"bg-gray-100 text-gray-800",children:"Draft"})}},le=ie=>{if(!ie)return"text-gray-600";switch(ie){case"A":return"text-green-600 font-bold";case"B":return"text-blue-600 font-bold";case"C":return"text-yellow-600 font-bold";case"D":return"text-orange-600 font-bold";case"F":return"text-red-600 font-bold";default:return"text-gray-600"}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Score Approval"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve/reject scores submitted by subject teachers"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:L&&`Class Teacher: ${L.firstName} ${L.lastName}`})]}),e.jsxs(ye,{children:[e.jsx(It,{children:e.jsxs(Hs,{className:"flex items-center gap-2",children:[e.jsx(op,{className:"w-5 h-5"}),"Filters"]})}),e.jsx(ke,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium",children:"Class"}),e.jsxs(Qt,{value:b,onValueChange:B,children:[e.jsx(Pt,{children:e.jsx(Tt,{placeholder:"Select class"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Classes"}),F.map(ie=>e.jsx(be,{value:ie.classId.toString(),children:ie.className},ie.classId))]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium",children:"Subject"}),e.jsxs(Qt,{value:N,onValueChange:E,children:[e.jsx(Pt,{children:e.jsx(Tt,{placeholder:"Select subject"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Subjects"}),ce.map(ie=>e.jsx(be,{value:ie.id.toString(),children:ie.name},ie.id))]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium",children:"Status"}),e.jsxs(Qt,{value:I,onValueChange:k,children:[e.jsx(Pt,{children:e.jsx(Tt,{placeholder:"Select status"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"submitted",children:"Pending Review"}),e.jsx(be,{value:"rejected",children:"Rejected"}),e.jsx(be,{value:"all",children:"All"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[P.length," scores found"]})})]})})]}),e.jsx("div",{className:"space-y-4",children:P.length===0?e.jsx(ye,{children:e.jsxs(ke,{className:"p-8 text-center",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Scores Found"}),e.jsx("p",{className:"text-gray-600",children:"No scores match the current filters or no scores have been submitted for review."})]})}):P.map(ie=>e.jsx(ye,{className:"hover:shadow-md transition-shadow",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:ie.student_name}),e.jsx("p",{className:"text-sm text-gray-600",children:ie.class_name})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:ie.subject_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["by ",ie.teacher_name]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:ie.total}),e.jsx("p",{className:`text-sm ${le(ie.grade)}`,children:ie.grade||"N/A"})]}),e.jsxs("div",{className:"text-right",children:[K(ie.status),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ie.entered_date&&new Date(ie.entered_date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"CA 1"}),e.jsx("p",{className:"font-semibold",children:ie.ca1})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"CA 2"}),e.jsx("p",{className:"font-semibold",children:ie.ca2})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Exam"}),e.jsx("p",{className:"font-semibold",children:ie.exam})]})]}),ie.status==="Rejected"&&ie.rejection_reason&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ba,{className:"w-4 h-4 text-red-600"}),e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Rejection Reason:"})]}),e.jsx("p",{className:"text-sm text-red-700",children:ie.rejection_reason}),ie.rejected_date&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Rejected on ",new Date(ie.rejected_date).toLocaleDateString()]})]}),ie.remark&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Teacher's Remark:"}),e.jsx("p",{className:"text-sm text-blue-700",children:ie.remark})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[ie.status==="Submitted"&&e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>ae(ie),className:"text-green-600 border-green-600 hover:bg-green-50",children:[e.jsx(kr,{className:"w-4 h-4 mr-2"}),"Approve"]}),e.jsxs(Ce,{variant:"outline",size:"sm",onClick:()=>{G(ie),T(!0)},className:"text-red-600 border-red-600 hover:bg-red-50",children:[e.jsx(ba,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),e.jsxs(Ce,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})})},ie.id))}),e.jsx(Zs,{open:H,onOpenChange:T,children:e.jsxs(er,{className:"sm:max-w-md",children:[e.jsx(ur,{children:e.jsx(hr,{className:"text-red-600",children:"Reject Score"})}),V&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm font-medium",children:V.student_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[V.subject_name," - ",V.class_name]}),e.jsxs("p",{className:"text-sm font-bold",children:["Score: ",V.total]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium",children:"Rejection Reason"}),e.jsx($a,{value:$,onChange:ie=>z(ie.target.value),placeholder:"Please explain why this score is being rejected...",className:"mt-1",rows:3})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(Ce,{onClick:W,className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ba,{className:"w-4 h-4 mr-2"}),"Reject Score"]}),e.jsx(Ce,{variant:"outline",onClick:()=>{T(!1),z(""),G(null)},children:"Cancel"})]})]})]})})]})}function ZB({userRole:r}){const{currentUser:t,classes:s,students:n,parents:a,teachers:i,examTimetables:c,getExamTimetablesByClass:A,currentTerm:d,currentAcademicYear:u}=ys(),[m,f]=j.useState(0),g=(()=>{if(r==="teacher"){const E=i.find(I=>I.id===t?.linked_id);return s.filter(I=>I.classTeacherId===E?.id)}else if(r==="parent"){const E=a.find(I=>I.id===t?.linked_id);if(E){const I=n.filter(k=>E.student_ids?.includes(k.id)).map(k=>k.class_id);return s.filter(k=>I.includes(k.id))}}return s})();g.length===1&&m===0&&f(g[0].id);const y=m===0?c.filter(E=>E.term===d&&E.academic_year===u):c.filter(E=>E.class_id===m&&E.term===d&&E.academic_year===u),b=y.reduce((E,I)=>{const k=I.exam_date;return E[k]||(E[k]=[]),E[k].push(I),E},{}),B=Object.keys(b).sort();B.forEach(E=>{b[E].sort((I,k)=>I.start_time.localeCompare(k.start_time))});const N=()=>{let E=`Graceland Royal Academy Gombe - Exam Timetable
`;E+=`Term: ${d}, Academic Year: ${u}
`,E+=`Class: ${m?s.find(z=>z.id===m)?.name:"All Classes"}

`,E+=`Date,Day,Subject,Start Time,End Time,Duration (mins),Venue,Instructions
`,y.sort((z,H)=>z.exam_date!==H.exam_date?z.exam_date.localeCompare(H.exam_date):z.start_time.localeCompare(H.start_time)).forEach(z=>{const H=new Date(z.exam_date),T=H.toLocaleDateString("en-US",{weekday:"long"}),V=H.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});E+=`${V},${T},${z.subject_name},${z.start_time},${z.end_time},${z.duration_minutes},${z.venue},"${z.instructions||"N/A"}"
`});const I=new Blob([E],{type:"text/csv"}),k=window.URL.createObjectURL(I),$=document.createElement("a");$.href=k,$.download=`exam-timetable-${m||"all"}-${new Date().toISOString().split("T")[0]}.csv`,$.click()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-slate-900 mb-2",children:"Exam Timetable"}),e.jsxs("p",{className:"text-slate-600",children:[d," - ",u]})]}),(y||[]).length>0&&e.jsxs(Ce,{onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download"]})]}),g.length>1&&e.jsx(ye,{className:"p-4 bg-white rounded-xl shadow-sm border border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-slate-700",children:"Select Class:"}),e.jsxs("select",{value:m,onChange:E=>f(Number(E.target.value)),className:"p-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"All Classes"}),g.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]})]})}),B.length===0?e.jsxs(ye,{className:"p-12 bg-white rounded-xl shadow-sm border border-slate-200 text-center",children:[e.jsx(jn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-slate-900 mb-2",children:"No Exams Scheduled"}),e.jsx("p",{className:"text-slate-600",children:"There are no exams scheduled for this class in the current term"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(ye,{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm mb-1",children:"Total Exams"}),e.jsx("p",{className:"text-3xl text-blue-900",children:(y||[]).length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm mb-1",children:"Exam Days"}),e.jsx("p",{className:"text-3xl text-blue-900",children:B.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm mb-1",children:"First Exam"}),e.jsx("p",{className:"text-blue-900",children:new Date(B[0]).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm mb-1",children:"Last Exam"}),e.jsx("p",{className:"text-blue-900",children:new Date(B[B.length-1]).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})}),B.map(E=>{const I=b[E],k=new Date(E).toLocaleDateString("en-US",{weekday:"long"}),$=new Date(E).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-3 border-b border-slate-200",children:[e.jsx(jn,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-slate-900",children:k}),e.jsx("p",{className:"text-slate-600 text-sm",children:$})]}),e.jsxs("span",{className:"ml-auto px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[I.length," exam",I.length!==1?"s":""]})]}),e.jsx("div",{className:"space-y-3",children:I.map(z=>e.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg hover:border-blue-300 transition-colors",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h4",{className:"text-slate-900",children:z.subject_name}),e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs",children:z.exam_type}),m===0&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:z.class_name}),e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[z.duration_minutes," minutes"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(Ci,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[z.start_time," - ",z.end_time]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(Jy,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:z.venue})]})]}),z.instructions&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-2",children:[e.jsx(Vn,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsx("div",{children:e.jsx("p",{className:"text-yellow-800 text-sm",children:z.instructions})})]})]})})},z.id))})]},E)}),e.jsxs(ye,{className:"p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[e.jsxs("h3",{className:"text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(Vn,{className:"w-5 h-5"}),"Important Examination Guidelines"]}),e.jsxs("ul",{className:"space-y-2 text-purple-800 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-purple-600",children:""}),e.jsx("span",{children:"Arrive at the examination venue at least 15 minutes before the scheduled start time"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-purple-600",children:""}),e.jsx("span",{children:"Bring all required materials (pens, pencils, calculator if allowed)"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-purple-600",children:""}),e.jsx("span",{children:"Electronic devices (mobile phones, smartwatches) are not allowed in the exam hall"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-purple-600",children:""}),e.jsx("span",{children:"Follow all instructions given by the examination supervisors"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-purple-600",children:""}),e.jsx("span",{children:"Any form of cheating or examination malpractice will result in serious disciplinary action"})]})]})]})]})]})}function gv(){const{currentUser:r,changePassword:t}=ys(),[s,n]=j.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,i]=j.useState(!1),[c,A]=j.useState(!1),[d,u]=j.useState(!1),[m,f]=j.useState({}),x=()=>{const b={};return s.currentPassword||(b.currentPassword="Current password is required"),s.newPassword?s.newPassword.length<6&&(b.newPassword="Password must be at least 6 characters"):b.newPassword="New password is required",s.confirmPassword?s.newPassword!==s.confirmPassword&&(b.confirmPassword="Passwords do not match"):b.confirmPassword="Please confirm your new password",f(b),Object.keys(b).length===0},g=b=>{if(b.preventDefault(),!x()){he.error("Please fix the errors in the form");return}if(!r){he.error("No user logged in");return}t(r.id,s.currentPassword,s.newPassword)?(he.success("Password changed successfully!"),n({currentPassword:"",newPassword:"",confirmPassword:""}),f({})):(he.error("Current password is incorrect"),f({currentPassword:"Incorrect password"}))},y=()=>{n({currentPassword:"",newPassword:"",confirmPassword:""}),f({})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Change Password"}),e.jsx("p",{className:"text-[#6B7280]",children:"Update your account password for security"})]}),e.jsxs(Si,{className:"bg-blue-50 border-blue-200 rounded-xl",children:[e.jsx(_u,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Ga,{className:"text-gray-900",children:[e.jsx("strong",{children:"Password Security Tips:"}),e.jsx("br",{})," Use at least 6 characters",e.jsx("br",{})," Include a mix of uppercase, lowercase, numbers, and symbols",e.jsx("br",{})," Avoid using personal information",e.jsx("br",{})," Don't reuse passwords from other accounts"]})]}),e.jsx("form",{onSubmit:g,children:e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical max-w-2xl",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_u,{className:"w-5 h-5 text-[#3B82F6]"}),e.jsx("h3",{className:"text-lg text-[#1F2937]",children:"Update Password"})]})}),e.jsxs(ke,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Current Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Et,{type:a?"text":"password",placeholder:"Enter current password",value:s.currentPassword,onChange:b=>n({...s,currentPassword:b.target.value}),className:`h-12 rounded-lg border ${m.currentPassword?"border-red-500":"border-[#E5E7EB]"} bg-[#F9FAFB] text-[#1F2937] pr-12`}),e.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#6B7280] hover:text-[#1F2937]",children:a?e.jsx(Bg,{className:"w-5 h-5"}):e.jsx(kn,{className:"w-5 h-5"})})]}),m.currentPassword&&e.jsx("p",{className:"text-xs text-red-500",children:m.currentPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Et,{type:c?"text":"password",placeholder:"Enter new password",value:s.newPassword,onChange:b=>n({...s,newPassword:b.target.value}),className:`h-12 rounded-lg border ${m.newPassword?"border-red-500":"border-[#E5E7EB]"} bg-[#F9FAFB] text-[#1F2937] pr-12`}),e.jsx("button",{type:"button",onClick:()=>A(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#6B7280] hover:text-[#1F2937]",children:c?e.jsx(Bg,{className:"w-5 h-5"}):e.jsx(kn,{className:"w-5 h-5"})})]}),m.newPassword&&e.jsx("p",{className:"text-xs text-red-500",children:m.newPassword}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"Minimum 6 characters"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Confirm New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Et,{type:d?"text":"password",placeholder:"Re-enter new password",value:s.confirmPassword,onChange:b=>n({...s,confirmPassword:b.target.value}),className:`h-12 rounded-lg border ${m.confirmPassword?"border-red-500":"border-[#E5E7EB]"} bg-[#F9FAFB] text-[#1F2937] pr-12`}),e.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#6B7280] hover:text-[#1F2937]",children:d?e.jsx(Bg,{className:"w-5 h-5"}):e.jsx(kn,{className:"w-5 h-5"})})]}),m.confirmPassword&&e.jsx("p",{className:"text-xs text-red-500",children:m.confirmPassword})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(Ce,{type:"button",onClick:y,variant:"outline",className:"flex-1 rounded-lg border-[#E5E7EB] text-[#6B7280] hover:bg-[#F9FAFB] hover:text-[#1F2937]",children:"Reset"}),e.jsxs(Ce,{type:"submit",className:"flex-1 bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-lg shadow-clinical hover:shadow-clinical-lg transition-all",children:[e.jsx(ol,{className:"w-4 h-4 mr-2"}),"Change Password"]})]})]})]})})]})}function iO({onLogout:r}){const{currentUser:t,teachers:s,getTeacherAssignments:n,getTeacherClasses:a,getTeacherResponsibilities:i,getUnreadNotifications:c,getActivityLogs:A}=ys(),[d,u]=j.useState("dashboard"),[m,f]=j.useState(!1);XB(t?.role,t?.id);const x=t?s.find($=>$.id===t.linked_id):null,g=x?.id,y=g?i(g):{isClassTeacher:!1,assignedClassesCount:0,totalStudentsCount:0,subjectsCount:0,classTeacherClassesCount:0},b=g?a(g):[],B=y.isClassTeacher,N=x?`${x.firstName} ${x.lastName}`:"Teacher",E=c(),I=[{icon:e.jsx(lp,{className:"w-5 h-5"}),label:"Dashboard",id:"dashboard"},{icon:e.jsx(Qs,{className:"w-5 h-5"}),label:"Class List",id:"class-list"},{icon:e.jsx(Gl,{className:"w-5 h-5"}),label:"Enter Scores",id:"enter-scores"},{icon:e.jsx(D4,{className:"w-5 h-5"}),label:"Compile Results",id:"compile-results",classTeacherOnly:!0},{icon:e.jsx(kr,{className:"w-5 h-5"}),label:"Approve Scores",id:"approve-scores",classTeacherOnly:!0},{icon:e.jsx(xo,{className:"w-5 h-5"}),label:"Message Parents",id:"message-parents"},{icon:e.jsx(_u,{className:"w-5 h-5"}),label:"Change Password",id:"change-password"},{icon:e.jsx(jn,{className:"w-5 h-5"}),label:"Exam Timetable",id:"exam-timetable"},{icon:e.jsx(Ci,{className:"w-5 h-5"}),label:"Mark Attendance",id:"mark-attendance"},{icon:e.jsx(_0,{className:"w-5 h-5"}),label:"Logout",id:"logout"}].filter($=>!$.classTeacherOnly||B),k=$=>{$==="logout"?r():u($)};return e.jsxs("div",{className:"min-h-screen bg-[#F4F6F9]",children:[e.jsx(xp,{items:I,activeItem:d,onItemClick:k}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx(vp,{userName:N,userRole:B?"Class Teacher":"Subject Teacher",notificationCount:E.length,onLogout:r,onNotificationClick:()=>f(!0)}),e.jsxs("main",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:[d==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Teacher Dashboard"}),e.jsx("p",{className:"text-[#6B7280]",children:B?"Welcome, Class Teacher. Manage your class and student assessments.":"Welcome, Subject Teacher. Enter scores for your assigned subjects."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Classes Assigned"}),e.jsx(Kr,{className:"w-5 h-5 text-[#3B82F6]"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:y.assignedClassesCount}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"Total classes"})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Total Students"}),e.jsx(Qs,{className:"w-5 h-5 text-[#3B82F6]"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:y.totalStudentsCount}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"Across all classes"})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Class Teacher Role"}),e.jsx(Qs,{className:"w-5 h-5 text-[#10B981]"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:y.classTeacherClassesCount}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"Classes managed"})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(ye,{className:"rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Subject Assignments"}),e.jsx(Kr,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:y.subjectsCount}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"Subjects teaching"})]})}),e.jsx(ye,{className:"rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200",children:e.jsxs(ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Class Teacher Status"}),e.jsx(Qs,{className:"w-5 h-5 text-green-600"})]}),e.jsx("p",{className:"text-[#1F2937] mb-1 font-semibold",children:y.isClassTeacher?"Active":"Not Assigned"}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:y.isClassTeacher?"Managing classes":"No class teacher role"})]})})]}),e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937]",children:"Your Classes & Subjects"})}),e.jsx(ke,{className:"space-y-3 p-5 pt-5",children:b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Kr,{className:"w-12 h-12 text-[#9CA3AF] mx-auto mb-3"}),e.jsx("p",{className:"text-[#6B7280]",children:"No class assignments yet"})]}):b.map($=>e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1F2937] font-medium",children:$.className}),e.jsxs("p",{className:"text-[#6B7280] text-sm",children:[$.classLevel,"  ",$.studentCount," students"]})]}),e.jsxs(Ct,{className:"bg-[#3B82F6] text-white border-0 text-xs",children:[$.subjects.length," subjects"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-2",children:"Assigned Subjects:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:$.subjects.map(z=>e.jsx(Ct,{className:"bg-gray-100 text-gray-800 border-0 text-xs",children:z.subjectName},z.subjectId))})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs(Ce,{onClick:()=>u("class-list"),variant:"outline",size:"sm",className:"rounded-lg border-[#E5E7EB] text-[#6B7280]",children:[e.jsx(Qs,{className:"w-4 h-4 mr-1"}),"View Students"]}),$.subjects.length>0&&e.jsxs(Ce,{onClick:()=>u("enter-scores"),size:"sm",className:"bg-[#3B82F6] text-white hover:bg-[#2563EB] rounded-lg",children:[e.jsx(Gl,{className:"w-4 h-4 mr-1"}),"Enter Scores"]})]})]},$.classId))})]})]}),d==="class-list"&&e.jsx(sO,{}),d==="enter-scores"&&e.jsx(XD,{}),d==="compile-results"&&e.jsx(tO,{}),d==="approve-scores"&&e.jsx(aO,{}),d==="message-parents"&&e.jsx(nO,{}),d==="change-password"&&e.jsx(gv,{}),d==="exam-timetable"&&e.jsx(ZB,{userRole:"teacher"}),d==="mark-attendance"&&e.jsx(rO,{}),!["dashboard","class-list","enter-scores","compile-results","approve-scores","message-parents","change-password","mark-attendance","exam-timetable"].includes(d)&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical max-w-md w-full",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#3B82F6] flex items-center justify-center mx-auto mb-4 text-white",children:I.find($=>$.id===d)?.icon}),e.jsx("h3",{className:"text-[#1F2937] mb-3",children:I.find($=>$.id===d)?.label}),e.jsxs("p",{className:"text-[#6B7280]",children:["This section contains the functionality for ",I.find($=>$.id===d)?.label.toLowerCase(),"."]})]})})})})]})]}),e.jsx(Zs,{open:m,onOpenChange:f,children:e.jsx(er,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:e.jsx(jp,{})})})]})}function oO(){const{students:r,currentUser:t,getFeeStructureByClass:s,getStudentFeeBalance:n,addPayment:a,updateStudentFeeBalance:i,currentTerm:c,currentAcademicYear:A,payments:d,parents:u,addNotification:m}=ys(),[f,x]=j.useState(""),[g,y]=j.useState(null),[b,B]=j.useState({amount:"",paymentMethod:"",referenceNumber:""}),N=g?r.find(z=>z.id===g):null,E=N?s(N.classId,c,A):null,I=N?n(N.id,c,A):null,k=()=>{const z=r.find(H=>H.firstName&&H.firstName.toLowerCase().includes(f.toLowerCase())||H.lastName&&H.lastName.toLowerCase().includes(f.toLowerCase())||H.admissionNumber&&H.admissionNumber.toLowerCase().includes(f.toLowerCase())||H.firstName&&H.lastName&&`${H.firstName} ${H.lastName}`.toLowerCase().includes(f.toLowerCase()));z?y(z.id):(y(null),he.error("Student not found"))},$=z=>{if(z.preventDefault(),!g||!t){he.error("Please select a student");return}if(!b.amount||parseFloat(b.amount)<=0){he.error("Please enter a valid payment amount");return}if(!b.paymentMethod){he.error("Please select a payment method");return}const H=parseFloat(b.amount),T=I?.balance||0;if(H>T){he.error(`Payment amount exceeds balance (${T.toLocaleString()})`);return}const V=`REC/${new Date().getFullYear()}/${String(d.length+1).padStart(4,"0")}`,G=b.referenceNumber||`TRX${Date.now()}`,L=b.paymentMethod==="Cash",F=L?"Verified":"Pending";a({studentId:g,studentName:`${N?.firstName} ${N?.lastName}`,amount:H,paymentType:H>=T?"Full Payment":"Partial Payment",term:c,academicYear:A,paymentMethod:b.paymentMethod,reference:G,recordedBy:t.id,recordedDate:new Date().toISOString(),status:F,receiptNumber:V}),L?(i(g),N?.parentId&&u.find(P=>P.id===N.parentId)&&m({title:" Fee Payment Confirmed",message:`Payment of ${H.toLocaleString()} for ${N.firstName} ${N.lastName} (${N.className}) has been verified and confirmed. Receipt No: ${V}. Payment Method: ${b.paymentMethod}`,type:"success",targetAudience:"parents",sentBy:t.id}),he.success(`Payment of ${H.toLocaleString()} recorded and verified! Receipt: ${V}`)):he.success(`Payment of ${H.toLocaleString()} recorded successfully! Receipt: ${V}. Awaiting verification.`),y(null),x(""),B({amount:"",paymentMethod:"",referenceNumber:""})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Record Payment"}),e.jsx("p",{className:"text-[#6B7280]",children:"Search for student and record fee payment"})]}),e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical max-w-2xl",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937]",children:"Search Student"})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#6B7280]"}),e.jsx(Et,{value:f,onChange:z=>x(z.target.value),onKeyPress:z=>z.key==="Enter"&&k(),placeholder:"Enter student name or admission number...",className:"h-12 pl-10 rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] text-[#1F2937]"})]}),e.jsx(Ce,{onClick:k,className:"h-12 bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-lg shadow-clinical hover:shadow-clinical-lg transition-all whitespace-nowrap px-8",children:"Search"})]})})]}),N&&I&&e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical max-w-2xl",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-[#1F2937]",children:"Student Payment Details"}),e.jsx(Ct,{className:I.balance>0?"bg-[#EF4444] text-white border-0":"bg-[#10B981] text-white border-0",children:I.balance>0?"Outstanding":"Fully Paid"})]})}),e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] mb-1",children:"Student Name"}),e.jsxs("p",{className:"text-[#1F2937]",children:[N.firstName," ",N.lastName]})]}),e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] mb-1",children:"Class"}),e.jsx("p",{className:"text-[#1F2937]",children:N.className})]}),e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] mb-1",children:"Total Fee"}),e.jsxs("p",{className:"text-[#1F2937]",children:["",E?.totalFee.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280] mb-1",children:"Amount Paid"}),e.jsxs("p",{className:"text-[#10B981]",children:["",I.totalPaid.toLocaleString()]})]}),e.jsxs("div",{className:"p-4 bg-[#FEF2F2] border border-[#EF4444] rounded-lg md:col-span-2",children:[e.jsx("p",{className:"text-[#6B7280] mb-1",children:"Outstanding Balance"}),e.jsxs("p",{className:"text-[#1F2937] text-xl",children:["",I.balance.toLocaleString()]})]})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Amount Paid () *"}),e.jsx(Et,{required:!0,type:"number",value:b.amount,onChange:z=>B({...b,amount:z.target.value}),placeholder:"Enter amount",max:I.balance,className:"h-12 rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] text-[#1F2937]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Payment Method *"}),e.jsxs(Qt,{value:b.paymentMethod,onValueChange:z=>B({...b,paymentMethod:z}),children:[e.jsx(Pt,{className:"h-12 rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] text-[#1F2937]",children:e.jsx(Tt,{placeholder:"Select payment method"})}),e.jsxs(Rt,{className:"bg-white border-[#E5E7EB]",children:[e.jsx(be,{value:"Cash",className:"text-[#1F2937]",children:"Cash"}),e.jsx(be,{value:"Bank Transfer",className:"text-[#1F2937]",children:"Bank Transfer"}),e.jsx(be,{value:"POS",className:"text-[#1F2937]",children:"POS"}),e.jsx(be,{value:"Online Payment",className:"text-[#1F2937]",children:"Online Payment"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Reference Number"}),e.jsx(Et,{value:b.referenceNumber,onChange:z=>B({...b,referenceNumber:z.target.value}),placeholder:"Optional: Transaction/Receipt reference",className:"h-12 rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] text-[#1F2937]"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(Ce,{type:"button",variant:"outline",onClick:()=>y(null),className:"flex-1 h-12 rounded-lg border-[#E5E7EB] text-[#6B7280] hover:bg-[#F9FAFB] hover:text-[#1F2937]",children:"Cancel"}),e.jsxs(Ce,{type:"submit",className:"flex-1 h-12 bg-[#10B981] hover:bg-[#059669] text-white rounded-lg shadow-clinical hover:shadow-clinical-lg transition-all",children:[e.jsx(kr,{className:"w-5 h-5 mr-2"}),"Record Payment"]})]})]})]})]})]})}function lO(){const{payments:r,students:t}=ys(),[s,n]=j.useState(""),[a,i]=j.useState("all"),[c,A]=j.useState("all"),d=r.filter(y=>{const b=y.studentName&&y.studentName.toLowerCase().includes(s.toLowerCase())||y.reference&&y.reference.toLowerCase().includes(s.toLowerCase())||y.receiptNumber&&y.receiptNumber.toLowerCase().includes(s.toLowerCase()),B=a==="all"||y.status===a,N=c==="all"||y.paymentType===c;return b&&B&&N}),u=r.filter(y=>y.status==="Verified").reduce((y,b)=>y+b.amount,0),m=r.filter(y=>y.status==="Pending").reduce((y,b)=>y+b.amount,0),f=r.filter(y=>y.status==="Verified").length,x=y=>{switch(y){case"Verified":return e.jsxs(Ct,{className:"bg-green-100 text-green-800 border-green-300",children:[e.jsx(kr,{className:"w-3 h-3 mr-1"}),"Verified"]});case"Pending":return e.jsxs(Ct,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[e.jsx(Ci,{className:"w-3 h-3 mr-1"}),"Pending"]});case"Rejected":return e.jsxs(Ct,{className:"bg-red-100 text-red-800 border-red-300",children:[e.jsx(ba,{className:"w-3 h-3 mr-1"}),"Rejected"]});default:return e.jsx(Ct,{className:"bg-gray-100 text-gray-800",children:y})}},g=()=>{const y=["Payment ID","Student Name","Receipt No","Fee Type","Amount","Payment Method","Transaction Ref","Status","Date"],b=d.map(k=>[k.id,k.studentName,k.receiptNumber,k.paymentType,k.amount,k.paymentMethod,k.reference,k.status,new Date(k.recordedDate).toLocaleDateString()]),B=[y,...b].map(k=>k.join(",")).join(`
`),N=new Blob([B],{type:"text/csv"}),E=URL.createObjectURL(N),I=document.createElement("a");I.href=E,I.download=`payment-history-${new Date().toISOString().split("T")[0]}.csv`,I.click()};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#0A2540] mb-2",children:"Payment History"}),e.jsx("p",{className:"text-gray-600",children:"View and manage all payment transactions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-[#0A2540]",children:["",u.toLocaleString()]})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:e.jsx(bo,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pending Payments"}),e.jsxs("p",{className:"text-[#0A2540]",children:["",m.toLocaleString()]})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-xl",children:e.jsx(Ci,{className:"w-6 h-6 text-yellow-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Completed Transactions"}),e.jsx("p",{className:"text-[#0A2540]",children:f})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(kr,{className:"w-6 h-6 text-blue-600"})})]})})})]}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Et,{type:"text",placeholder:"Search by name, ID, or ref...",value:s,onChange:y=>n(y.target.value),className:"pl-10 border-[#0A2540]/20 focus:border-[#FFD700] rounded-xl"})]}),e.jsxs(Qt,{value:a,onValueChange:i,children:[e.jsx(Pt,{className:"border-[#0A2540]/20 rounded-xl",children:e.jsx(Tt,{placeholder:"Status"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Status"}),e.jsx(be,{value:"Verified",children:"Verified"}),e.jsx(be,{value:"Pending",children:"Pending"}),e.jsx(be,{value:"Rejected",children:"Rejected"})]})]}),e.jsxs(Qt,{value:c,onValueChange:A,children:[e.jsx(Pt,{className:"border-[#0A2540]/20 rounded-xl",children:e.jsx(Tt,{placeholder:"Fee Type"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Fee Types"}),e.jsx(be,{value:"Full Payment",children:"Full Payment"}),e.jsx(be,{value:"Partial Payment",children:"Partial Payment"})]})]}),e.jsxs(Ce,{onClick:g,className:"bg-[#0A2540] hover:bg-[#0A2540]/90 text-white rounded-xl",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#0A2540]/5",children:[e.jsx(lt,{className:"text-[#0A2540]",children:"Payment ID"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Student"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Receipt No."}),e.jsx(lt,{className:"text-[#0A2540]",children:"Fee Type"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Amount"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Payment Method"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Transaction Ref"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Status"}),e.jsx(lt,{className:"text-[#0A2540]",children:"Date"})]})}),e.jsx(Ln,{children:d.length===0?e.jsx(os,{children:e.jsx(Je,{colSpan:9,className:"text-center py-8 text-gray-500",children:"No payment records found"})}):d.map(y=>{const b=t.find(B=>B.id===y.studentId);return e.jsxs(os,{className:"hover:bg-[#0A2540]/5",children:[e.jsxs(Je,{className:"text-[#0A2540]",children:["PAY",String(y.id).padStart(3,"0")]}),e.jsx(Je,{children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[#0A2540]",children:y.studentName}),e.jsx("p",{className:"text-sm text-gray-500",children:b?.admissionNumber})]})}),e.jsx(Je,{className:"text-sm text-gray-600 font-mono",children:y.receiptNumber}),e.jsx(Je,{children:y.paymentType}),e.jsxs(Je,{className:"text-[#0A2540]",children:["",y.amount.toLocaleString()]}),e.jsx(Je,{children:y.paymentMethod}),e.jsx(Je,{className:"text-sm text-gray-600 font-mono",children:y.reference}),e.jsx(Je,{children:x(y.status)}),e.jsx(Je,{children:new Date(y.recordedDate).toLocaleDateString("en-GB")})]},y.id)})})]})})})})]})}function cO(){const{payments:r,verifyPayment:t,updatePayment:s,updateStudentFeeBalance:n,students:a,parents:i,users:c,addNotification:A,currentUser:d}=ys(),[u,m]=j.useState(null),[f,x]=j.useState(!1),[g,y]=j.useState(""),b=r.filter(I=>I.status==="Pending"),B=I=>{const k=r.find($=>$.id===I);if(k){t(I),n(k.student_id);const $=a.find(z=>z.id===k.student_id);$&&$.parent_id&&i.find(H=>H.id===$.parent_id)&&A({title:" Fee Payment Confirmed",message:`Payment of ${k.amount.toLocaleString()} for ${$.first_name} ${$.last_name} (${$.class_name||"N/A"}) has been verified and confirmed. Receipt No: ${k.receipt_number}`,type:"success",targetAudience:"parents",sentBy:d?.id||1}),he.success(`Payment ${k.receipt_number} verified successfully!`)}},N=()=>{if(u){if(!g.trim()){he.error("Please provide a reason for rejection");return}s(u.id,{status:"Rejected"}),he.error(`Payment ${u.receiptNumber} rejected`),x(!1),m(null),y("")}},E=I=>{m(I),x(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Verify Payment Receipts"}),e.jsx("p",{className:"text-[#6B7280]",children:"Review and verify pending payment submissions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-[#6B7280]",children:"Pending Verification"}),e.jsx(Vn,{className:"w-5 h-5 text-[#F59E0B]"})]}),e.jsx("p",{className:"text-3xl text-[#1F2937]",children:b.length})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-[#6B7280]",children:"Total Amount"}),e.jsx(kr,{className:"w-5 h-5 text-[#10B981]"})]}),e.jsxs("p",{className:"text-3xl text-[#1F2937]",children:["",b.reduce((I,k)=>I+k.amount,0).toLocaleString()]})]})}),e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsxs(ke,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-[#6B7280]",children:"Verified Today"}),e.jsx(kr,{className:"w-5 h-5 text-[#3B82F6]"})]}),e.jsx("p",{className:"text-3xl text-[#1F2937]",children:r.filter(I=>I.status==="Verified"&&new Date(I.recorded_date).toDateString()===new Date().toDateString()).length})]})})]}),e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-[#1F2937]",children:"Pending Payment Verifications"}),e.jsx(Ct,{className:"bg-[#F59E0B] text-white border-0",children:b.length})]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#2563EB] border-none hover:bg-[#2563EB]",children:[e.jsx(lt,{className:"text-white",children:"Date"}),e.jsx(lt,{className:"text-white",children:"Student Name"}),e.jsx(lt,{className:"text-white",children:"Receipt No."}),e.jsx(lt,{className:"text-white",children:"Amount"}),e.jsx(lt,{className:"text-white",children:"Payment Type"}),e.jsx(lt,{className:"text-white",children:"Method"}),e.jsx(lt,{className:"text-white",children:"Reference"}),e.jsx(lt,{className:"text-white text-center",children:"Actions"})]})}),e.jsx(Ln,{children:b.length===0?e.jsx(os,{className:"bg-white",children:e.jsx(Je,{colSpan:8,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(kr,{className:"w-12 h-12 text-[#10B981]"}),e.jsx("p",{className:"text-[#1F2937]",children:"No pending payments to verify"}),e.jsx("p",{className:"text-[#6B7280] text-sm",children:"All payments have been processed"})]})})}):b.map(I=>e.jsxs(os,{className:"bg-white border-b border-[#E5E7EB] hover:bg-[#F9FAFB]",children:[e.jsx(Je,{className:"text-[#1F2937]",children:new Date(I.recorded_date).toLocaleDateString()}),e.jsx(Je,{className:"text-[#1F2937] font-medium",children:I.student_name}),e.jsx(Je,{className:"text-[#6B7280] font-mono text-sm",children:I.receipt_number}),e.jsxs(Je,{className:"text-[#1F2937] font-medium",children:["",I.amount.toLocaleString()]}),e.jsx(Je,{className:"text-[#6B7280]",children:I.payment_type}),e.jsx(Je,{className:"text-[#6B7280]",children:I.payment_method}),e.jsx(Je,{className:"text-[#6B7280] font-mono text-xs",children:I.reference}),e.jsx(Je,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(Ce,{onClick:()=>B(I.id),size:"sm",className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-lg h-8 shadow-clinical hover:shadow-clinical-lg transition-all",children:[e.jsx(kr,{className:"w-4 h-4 mr-1"}),"Verify"]}),e.jsxs(Ce,{onClick:()=>E(I),size:"sm",variant:"outline",className:"border-[#EF4444] text-[#EF4444] hover:bg-[#FEF2F2] rounded-lg h-8",children:[e.jsx(ba,{className:"w-4 h-4 mr-1"}),"Reject"]})]})})]},I.id))})]})})})]}),e.jsx(Zs,{open:f,onOpenChange:x,children:e.jsxs(er,{className:"max-w-md rounded-lg bg-white border border-[#E5E7EB] text-[#1F2937]",children:[e.jsx(ur,{children:e.jsx(hr,{className:"text-[#1F2937]",children:"Reject Payment"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[u&&e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-sm text-[#6B7280] mb-2",children:"Payment Details:"}),e.jsx("p",{className:"text-[#1F2937] font-medium",children:u.studentName}),e.jsxs("p",{className:"text-[#6B7280] text-sm",children:["Receipt: ",u.receiptNumber," | Amount: ",u.amount.toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-[#1F2937]",children:["Reason for Rejection ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($a,{placeholder:"Enter reason for rejecting this payment...",value:g,onChange:I=>y(I.target.value),rows:4,className:"rounded-lg border border-[#E5E7EB] bg-white text-[#1F2937]"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(Ce,{onClick:()=>{x(!1),m(null),y("")},variant:"outline",className:"rounded-lg border-[#E5E7EB] text-[#6B7280]",children:"Cancel"}),e.jsxs(Ce,{onClick:N,className:"bg-[#EF4444] hover:bg-[#DC2626] text-white rounded-lg",children:[e.jsx(ba,{className:"w-4 h-4 mr-2"}),"Reject Payment"]})]})]})})]})}function AO(){const{classes:r,currentTerm:t,currentAcademicYear:s,addFeeStructure:n,updateFeeStructure:a,getFeeStructureByClass:i,feeStructures:c}=ys(),[A,d]=j.useState(""),[u,m]=j.useState(t),[f,x]=j.useState(s),[g,y]=j.useState({tuitionFee:"",developmentLevy:"",sportsFee:"",examFee:"",booksFee:"",uniformFee:"",transportFee:""}),b=k=>{d(k);const $=i(Number(k),u,f);y($?{tuitionFee:$.tuitionFee.toString(),developmentLevy:$.developmentLevy.toString(),sportsFee:$.sportsFee.toString(),examFee:$.examFee.toString(),booksFee:$.booksFee.toString(),uniformFee:$.uniformFee.toString(),transportFee:$.transportFee.toString()}:{tuitionFee:"",developmentLevy:"",sportsFee:"",examFee:"",booksFee:"",uniformFee:"",transportFee:""})},B=(k,$)=>{($===""||/^\d+$/.test($))&&y({...g,[k]:$})},N=()=>Object.values(g).reduce((k,$)=>k+($?parseInt($):0),0),E=()=>{if(!A){he.error("Please select a class");return}if(N()===0){he.error("Please enter at least one fee amount");return}const $=r.find(T=>T.id===Number(A));if(!$)return;const z={classId:Number(A),className:$.name,level:$.level,term:u,academicYear:f,tuitionFee:parseInt(g.tuitionFee||"0"),developmentLevy:parseInt(g.developmentLevy||"0"),sportsFee:parseInt(g.sportsFee||"0"),examFee:parseInt(g.examFee||"0"),booksFee:parseInt(g.booksFee||"0"),uniformFee:parseInt(g.uniformFee||"0"),transportFee:parseInt(g.transportFee||"0")},H=i(Number(A),u,f);H?(a(H.id,z),he.success("Fee structure updated successfully!")):(n(z),he.success("Fee structure created successfully!"))},I=r.filter(k=>k.status==="Active");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Set Fee Structure"}),e.jsx("p",{className:"text-[#6B7280]",children:"Define and manage school fees per class and term"})]}),e.jsxs(Si,{className:"bg-[#007C91]/10 border-[#007C91] rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-[#007C91]"}),e.jsx(Ga,{className:"text-[#007C91]",children:"Set fees for each class and term. Parents will see these fees in real-time on their dashboard."})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsx(Hs,{className:"text-[#1F2937]",children:"Fee Configuration"})}),e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Class"}),e.jsxs(Qt,{value:A,onValueChange:b,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]",children:e.jsx(Tt,{placeholder:"Select class"})}),e.jsx(Rt,{children:I.map(k=>e.jsxs(be,{value:k.id.toString(),children:[k.name," (",k.level,")"]},k.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Term"}),e.jsxs(Qt,{value:u,onValueChange:m,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"First Term",children:"First Term"}),e.jsx(be,{value:"Second Term",children:"Second Term"}),e.jsx(be,{value:"Third Term",children:"Third Term"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Academic Year"}),e.jsxs(Qt,{value:f,onValueChange:x,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"2023/2024",children:"2023/2024"}),e.jsx(be,{value:"2024/2025",children:"2024/2025"}),e.jsx(be,{value:"2025/2026",children:"2025/2026"})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Tuition Fee ()"}),e.jsx(Et,{type:"text",value:g.tuitionFee,onChange:k=>B("tuitionFee",k.target.value),placeholder:"0",className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Development Levy ()"}),e.jsx(Et,{type:"text",value:g.developmentLevy,onChange:k=>B("developmentLevy",k.target.value),placeholder:"0",className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Sports Fee ()"}),e.jsx(Et,{type:"text",value:g.sportsFee,onChange:k=>B("sportsFee",k.target.value),placeholder:"0",className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Exam Fee ()"}),e.jsx(Et,{type:"text",value:g.examFee,onChange:k=>B("examFee",k.target.value),placeholder:"0",className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Books Fee ()"}),e.jsx(Et,{type:"text",value:g.booksFee,onChange:k=>B("booksFee",k.target.value),placeholder:"0",className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Uniform Fee ()"}),e.jsx(Et,{type:"text",value:g.uniformFee,onChange:k=>B("uniformFee",k.target.value),placeholder:"0",className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Transport Fee ()"}),e.jsx(Et,{type:"text",value:g.transportFee,onChange:k=>B("transportFee",k.target.value),placeholder:"0",className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-[#007C91]/10 rounded-lg border border-[#007C91]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[#1F2937]",children:"Total Fee"}),e.jsxs("span",{className:"text-[#007C91]",children:["",N().toLocaleString()]})]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs(Ce,{onClick:E,className:"bg-[#007C91] hover:bg-[#006073] text-white rounded-xl shadow-clinical hover:shadow-clinical-lg transition-all",children:[e.jsx(ol,{className:"w-4 h-4 mr-2"}),"Save Fee Structure"]})})]})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsx(Hs,{className:"text-[#1F2937]",children:"Existing Fee Structures"})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#007C91] text-white",children:[e.jsx("th",{className:"text-left p-4",children:"Class"}),e.jsx("th",{className:"text-left p-4",children:"Level"}),e.jsx("th",{className:"text-left p-4",children:"Term"}),e.jsx("th",{className:"text-left p-4",children:"Year"}),e.jsx("th",{className:"text-right p-4",children:"Total Fee"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-8 text-[#6B7280]",children:"No fee structures created yet"})}):c.map(k=>e.jsxs("tr",{className:"border-b border-[#E5E7EB] hover:bg-[#F9FAFB]",children:[e.jsx("td",{className:"p-4 text-[#1F2937]",children:k.className}),e.jsx("td",{className:"p-4 text-[#6B7280]",children:k.level}),e.jsx("td",{className:"p-4 text-[#6B7280]",children:k.term}),e.jsx("td",{className:"p-4 text-[#6B7280]",children:k.academicYear}),e.jsxs("td",{className:"p-4 text-right text-[#007C91]",children:["",k.totalFee.toLocaleString()]})]},k.id))})]})})})]})]})}function eC(r,t,s,n,a){n=n||{};var i=1.15,c=a.internal.scaleFactor,A=a.internal.getFontSize()/c,d=a.getLineHeightFactor?a.getLineHeightFactor():i,u=A*d,m=/\r\n|\r|\n/g,f="",x=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof r=="string"?r.split(m):r,x=f.length||1),s+=A*(2-i),n.valign==="middle"?s-=x/2*u:n.valign==="bottom"&&(s-=x*u),n.halign==="center"||n.halign==="right"){var g=A;if(n.halign==="center"&&(g*=.5),f&&x>=1){for(var y=0;y<f.length;y++)a.text(f[y],t-a.getStringUnitWidth(f[y])*g,s),s+=u;return a}t-=a.getStringUnitWidth(r)*g}return n.halign==="justify"?a.text(r,t,s,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(r,t,s),a}var Ty={},Eu=(function(){function r(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return r.setDefaults=function(t,s){s===void 0&&(s=null),s?s.__autoTableDocumentDefaults=t:Ty=t},r.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},r.prototype.applyStyles=function(t,s){var n,a,i;s===void 0&&(s=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var c=this.jsPDFDocument.internal.getFont(),A=c.fontStyle,d=c.fontName;if(t.font&&(d=t.font),t.fontStyle){A=t.fontStyle;var u=this.getFontList()[d];u&&u.indexOf(A)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),A=u[0])}if(this.jsPDFDocument.setFont(d,A),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!s){var m=r.unifyColor(t.fillColor);m&&(n=this.jsPDFDocument).setFillColor.apply(n,m),m=r.unifyColor(t.textColor),m&&(a=this.jsPDFDocument).setTextColor.apply(a,m),m=r.unifyColor(t.lineColor),m&&(i=this.jsPDFDocument).setDrawColor.apply(i,m),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},r.prototype.splitTextToSize=function(t,s,n){return this.jsPDFDocument.splitTextToSize(t,s,n)},r.prototype.rect=function(t,s,n,a,i){return this.jsPDFDocument.rect(t,s,n,a,i)},r.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},r.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},r.prototype.getDocument=function(){return this.jsPDFDocument},r.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},r.prototype.addPage=function(){return this.jsPDFDocument.addPage()},r.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},r.prototype.getGlobalOptions=function(){return Ty||{}},r.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},r.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},r.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},r.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},r.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},r.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},r})(),C0=function(r,t){return C0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])},C0(r,t)};function tC(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");C0(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}var sC=(function(r){tC(t,r);function t(s){var n=r.call(this)||this;return n._element=s,n}return t})(Array);function dO(r){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function uO(r){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[r]}function np(r,t,s){s.applyStyles(t,!0);var n=Array.isArray(r)?r:[r],a=n.map(function(i){return s.getTextWidth(i)}).reduce(function(i,c){return Math.max(i,c)},0);return a}function rC(r,t,s,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;r.applyStyles({lineWidth:a,lineColor:i});var c=nC(a,!1);c&&r.rect(s.x,s.y,t.getWidth(r.pageSize().width),n.y-s.y,c)}function nC(r,t){var s=r>0,n=t||t===0;return s&&n?"DF":s?"S":n?"F":null}function Pp(r,t){var s,n,a,i;if(r=r||t,Array.isArray(r)){if(r.length>=4)return{top:r[0],right:r[1],bottom:r[2],left:r[3]};if(r.length===3)return{top:r[0],right:r[1],bottom:r[2],left:r[1]};if(r.length===2)return{top:r[0],right:r[1],bottom:r[0],left:r[1]};r.length===1?r=r[0]:r=t}return typeof r=="object"?(typeof r.vertical=="number"&&(r.top=r.vertical,r.bottom=r.vertical),typeof r.horizontal=="number"&&(r.right=r.horizontal,r.left=r.horizontal),{left:(s=r.left)!==null&&s!==void 0?s:t,top:(n=r.top)!==null&&n!==void 0?n:t,right:(a=r.right)!==null&&a!==void 0?a:t,bottom:(i=r.bottom)!==null&&i!==void 0?i:t}):(typeof r!="number"&&(r=t),{top:r,right:r,bottom:r,left:r})}function aC(r,t){var s=Pp(t.settings.margin,0);return r.pageSize().width-(s.left+s.right)}function hO(r,t,s,n,a){var i={},c=1.3333333333333333,A=Ex(t,function(I){return a.getComputedStyle(I).backgroundColor});A!=null&&(i.fillColor=A);var d=Ex(t,function(I){return a.getComputedStyle(I).color});d!=null&&(i.textColor=d);var u=fO(n,s);u&&(i.cellPadding=u);var m="borderTopColor",f=c*s,x=n.borderTopWidth;if(n.borderBottomWidth===x&&n.borderRightWidth===x&&n.borderLeftWidth===x){var g=(parseFloat(x)||0)/f;g&&(i.lineWidth=g)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?m="borderRightColor":i.lineWidth.bottom?m="borderBottomColor":i.lineWidth.left&&(m="borderLeftColor"));var y=Ex(t,function(I){return a.getComputedStyle(I)[m]});y!=null&&(i.lineColor=y);var b=["left","right","center","justify"];b.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),b=["middle","bottom","top"],b.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var B=parseInt(n.fontSize||"");isNaN(B)||(i.fontSize=B/c);var N=mO(n);N&&(i.fontStyle=N);var E=(n.fontFamily||"").toLowerCase();return r.indexOf(E)!==-1&&(i.font=E),i}function mO(r){var t="";return(r.fontWeight==="bold"||r.fontWeight==="bolder"||parseInt(r.fontWeight)>=700)&&(t="bold"),(r.fontStyle==="italic"||r.fontStyle==="oblique")&&(t+="italic"),t}function Ex(r,t){var s=iC(r,t);if(!s)return null;var n=s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function iC(r,t){var s=t(r);return s==="rgba(0, 0, 0, 0)"||s==="transparent"||s==="initial"||s==="inherit"?r.parentElement==null?null:iC(r.parentElement,t):s}function fO(r,t){var s=[r.paddingTop,r.paddingRight,r.paddingBottom,r.paddingLeft],n=96/(72/t),a=(parseInt(r.lineHeight)-parseInt(r.fontSize))/t/2,i=s.map(function(A){return parseInt(A||"0")/n}),c=Pp(i,0);return a>c.top&&(c.top=a),a>c.bottom&&(c.bottom=a),c}function oC(r,t,s,n,a){var i,c;n===void 0&&(n=!1),a===void 0&&(a=!1);var A;typeof t=="string"?A=s.document.querySelector(t):A=t;var d=Object.keys(r.getFontList()),u=r.scaleFactor(),m=[],f=[],x=[];if(!A)return console.error("Html table could not be found with input: ",t),{head:m,body:f,foot:x};for(var g=0;g<A.rows.length;g++){var y=A.rows[g],b=(c=(i=y?.parentElement)===null||i===void 0?void 0:i.tagName)===null||c===void 0?void 0:c.toLowerCase(),B=pO(d,u,s,y,n,a);B&&(b==="thead"?m.push(B):b==="tfoot"?x.push(B):f.push(B))}return{head:m,body:f,foot:x}}function pO(r,t,s,n,a,i){for(var c=new sC(n),A=0;A<n.cells.length;A++){var d=n.cells[A],u=s.getComputedStyle(d);if(a||u.display!=="none"){var m=void 0;i&&(m=hO(r,d,t,u,s)),c.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:m,_element:d,content:gO(d)})}}var f=s.getComputedStyle(n);if(c.length>0&&(a||f.display!=="none"))return c}function gO(r){var t=r.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(s){return s.trim()}).join(`
`),t.innerText||t.textContent||""}function xO(r,t,s){for(var n=0,a=[r,t,s];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Fc(r,t,s,n,a){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(r),c=1;c<arguments.length;c++){var A=arguments[c];if(A!=null)for(var d in A)Object.prototype.hasOwnProperty.call(A,d)&&(i[d]=A[d])}return i}function lC(r,t){var s=new Eu(r),n=s.getDocumentOptions(),a=s.getGlobalOptions();xO(a,n,t);var i=Fc({},a,n,t),c;typeof window<"u"&&(c=window);var A=vO(a,n,t),d=wO(a,n,t),u=bO(s,i),m=NO(s,i,c);return{id:t.tableId,content:m,hooks:d,styles:A,settings:u}}function vO(r,t,s){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(d){if(d==="columnStyles"){var u=r[d],m=t[d],f=s[d];n.columnStyles=Fc({},u,m,f)}else{var x=[r,t,s],g=x.map(function(y){return y[d]||{}});n[d]=Fc({},g[0],g[1],g[2])}},i=0,c=Object.keys(n);i<c.length;i++){var A=c[i];a(A)}return n}function wO(r,t,s){for(var n=[r,t,s],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,c=n;i<c.length;i++){var A=c[i];A.didParseCell&&a.didParseCell.push(A.didParseCell),A.willDrawCell&&a.willDrawCell.push(A.willDrawCell),A.didDrawCell&&a.didDrawCell.push(A.didDrawCell),A.willDrawPage&&a.willDrawPage.push(A.willDrawPage),A.didDrawPage&&a.didDrawPage.push(A.didDrawPage)}return a}function bO(r,t){var s,n,a,i,c,A,d,u,m,f,x,g,y=Pp(t.margin,40/r.scaleFactor()),b=(s=yO(r,t.startY))!==null&&s!==void 0?s:y.top,B;t.showFoot===!0?B="everyPage":t.showFoot===!1?B="never":B=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var N;t.showHead===!0?N="everyPage":t.showHead===!1?N="never":N=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var E=(i=t.useCss)!==null&&i!==void 0?i:!1,I=t.theme||(E?"plain":"striped"),k=!!t.horizontalPageBreak,$=(c=t.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(A=t.includeHiddenHtml)!==null&&A!==void 0?A:!1,useCss:E,theme:I,startY:b,margin:y,pageBreak:(d=t.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(m=t.tableWidth)!==null&&m!==void 0?m:"auto",showHead:N,showFoot:B,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(x=t.tableLineColor)!==null&&x!==void 0?x:200,horizontalPageBreak:k,horizontalPageBreakRepeat:$,horizontalPageBreakBehaviour:(g=t.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function yO(r,t){var s=r.getLastAutoTable(),n=r.scaleFactor(),a=r.pageNumber(),i=!1;if(s&&s.startPageNumber){var c=s.startPageNumber+s.pageNumber-1;i=c===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&s?.finalY!=null?s.finalY+20/n:null}function NO(r,t,s){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var c=t.includeHiddenHtml;if(s){var A=oC(r,t.html,s,c,t.useCss)||{};n=A.head||n,a=A.body||n,i=A.foot||n}else console.error("Cannot parse html in non browser environment")}var d=t.columns||jO(n,a,i);return{columns:d,head:n,body:a,foot:i}}function jO(r,t,s){var n=r[0]||t[0]||s[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var c=1,A;Array.isArray(n)?A=n[parseInt(i)]:A=n[i],typeof A=="object"&&!Array.isArray(A)&&(c=A?.colSpan||1);for(var d=0;d<c;d++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(d>0?"_".concat(d):"");var m={dataKey:u};a.push(m)}}),a}var S0=(function(){function r(t,s,n){this.table=s,this.pageNumber=s.pageNumber,this.settings=s.settings,this.cursor=n,this.doc=t.getDocument()}return r})(),BO=(function(r){tC(t,r);function t(s,n,a,i,c,A){var d=r.call(this,s,n,A)||this;return d.cell=a,d.row=i,d.column=c,d.section=i.section,d}return t})(S0),CO=(function(){function r(t,s){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=s.columns,this.head=s.head,this.body=s.body,this.foot=s.foot}return r.prototype.getHeadHeight=function(t){return this.head.reduce(function(s,n){return s+n.getMaxCellHeight(t)},0)},r.prototype.getFootHeight=function(t){return this.foot.reduce(function(s,n){return s+n.getMaxCellHeight(t)},0)},r.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},r.prototype.callCellHooks=function(t,s,n,a,i,c){for(var A=0,d=s;A<d.length;A++){var u=d[A],m=new BO(t,this,n,a,i,c),f=u(m)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},r.prototype.callEndPageHooks=function(t,s){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new S0(t,this,s))}},r.prototype.callWillDrawPageHooks=function(t,s){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new S0(t,this,s))}},r.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var s=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return s}else{var n=this.settings.margin;return t-n.left-n.right}},r})(),cC=(function(){function r(t,s,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof sC&&(this.raw=t._element,this.element=t._element),this.index=s,this.section=n,this.cells=a,this.spansMultiplePages=i}return r.prototype.getMaxCellHeight=function(t){var s=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=s.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},r.prototype.hasRowSpan=function(t){var s=this;return t.filter(function(n){var a=s.cells[n.index];return a?a.rowSpan>1:!1}).length>0},r.prototype.canEntireRowFit=function(t,s){return this.getMaxCellHeight(s)<=t},r.prototype.getMinimumRowHeight=function(t,s){var n=this;return t.reduce(function(a,i){var c=n.cells[i.index];if(!c)return 0;var A=s.getLineHeight(c.styles.fontSize),d=c.padding("vertical"),u=d+A;return u>a?u:a},0)},r})(),AC=(function(){function r(t,s,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=s,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var c=i!=null?""+i:"",A=/\r\n|\r|\n/g;this.text=c.split(A)}return r.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var s=this.height-this.padding("vertical");t=this.y+s/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},r.prototype.getContentHeight=function(t,s){s===void 0&&(s=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*s,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},r.prototype.padding=function(t){var s=Pp(this.styles.cellPadding,0);return t==="vertical"?s.top+s.bottom:t==="horizontal"?s.left+s.right:s[t]},r})(),SO=(function(){function r(t,s,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=s,this.index=n}return r.prototype.getMaxCustomCellWidth=function(t){for(var s=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],c=i.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(s=Math.max(s,c.styles.cellWidth))}return s},r})();function EO(r,t){FO(r,t);var s=[],n=0;t.columns.forEach(function(i){var c=i.getMaxCustomCellWidth(t);c?i.width=c:(i.width=i.wrappedWidth,s.push(i)),n+=i.width});var a=t.getWidth(r.pageSize().width)-n;a&&(a=E0(s,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=E0(s,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/r.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),kO(t),UO(t,r),_O(t)}function FO(r,t){var s=r.scaleFactor(),n=t.settings.horizontalPageBreak,a=aC(r,t);t.allRows().forEach(function(i){for(var c=0,A=t.columns;c<A.length;c++){var d=A[c],u=i.cells[d.index];if(u){var m=t.hooks.didParseCell;t.callCellHooks(r,m,u,i,d,null);var f=u.padding("horizontal");u.contentWidth=np(u.text,u.styles,r)+f;var x=np(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,r);if(u.minReadableWidth=x+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/s;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var c=0,A=t.columns;c<A.length;c++){var d=A[c],u=i.cells[d.index];if(u&&u.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,u.wrappedWidth),d.minWidth=Math.max(d.minWidth,u.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,u.minReadableWidth);else{var m=t.styles.columnStyles[d.dataKey]||t.styles.columnStyles[d.index]||{},f=m.cellWidth||m.minCellWidth;f&&typeof f=="number"&&(d.minWidth=f,d.wrappedWidth=f)}u&&(u.colSpan>1&&!d.minWidth&&(d.minWidth=u.minWidth),u.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=u.minWidth))}})}function E0(r,t,s){for(var n=t,a=r.reduce(function(g,y){return g+y.wrappedWidth},0),i=0;i<r.length;i++){var c=r[i],A=c.wrappedWidth/a,d=n*A,u=c.width+d,m=s(c),f=u<m?m:u;t-=f-c.width,c.width=f}if(t=Math.round(t*1e10)/1e10,t){var x=r.filter(function(g){return t<0?g.width>s(g):!0});x.length&&(t=E0(x,t,s))}return t}function _O(r){for(var t={},s=1,n=r.allRows(),a=0;a<n.length;a++)for(var i=n[a],c=0,A=r.columns;c<A.length;c++){var d=A[c],u=t[d.index];if(s>1)s--,delete i.cells[d.index];else if(u)u.cell.height+=i.height,s=u.cell.colSpan,delete i.cells[d.index],u.left--,u.left<=1&&delete t[d.index];else{var m=i.cells[d.index];if(!m)continue;if(m.height=i.height,m.rowSpan>1){var f=n.length-a,x=m.rowSpan>f?f:m.rowSpan;t[d.index]={cell:m,left:x,row:i}}}}}function kO(r){for(var t=r.allRows(),s=0;s<t.length;s++)for(var n=t[s],a=null,i=0,c=0,A=0;A<r.columns.length;A++){var d=r.columns[A];if(c-=1,c>1&&r.columns[A+1])i+=d.width,delete n.cells[d.index];else if(a){var u=a;delete n.cells[d.index],a=null,u.width=d.width+i}else{var u=n.cells[d.index];if(!u)continue;if(c=u.colSpan,i=0,u.colSpan>1){a=u,i+=d.width;continue}u.width=d.width+i}}}function UO(r,t){for(var s={count:0,height:0},n=0,a=r.allRows();n<a.length;n++){for(var i=a[n],c=0,A=r.columns;c<A.length;c++){var d=A[c],u=i.cells[d.index];if(u){t.applyStyles(u.styles,!0);var m=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,m+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Py(u.text,m,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=Py(u.text,m,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,m);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var x=u.contentHeight/u.rowSpan;u.rowSpan>1&&s.count*s.height<x*u.rowSpan?s={height:x,count:u.rowSpan}:s&&s.count>0&&s.height>x&&(x=s.height),x>i.height&&(i.height=x)}}s.count--}}function Py(r,t,s,n,a){return r.map(function(i){return IO(i,t,s,n,a)})}function IO(r,t,s,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=np(r,s,n))return r;for(;t<np(r+a,s,n)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+a}function dC(r,t){var s=new Eu(r),n=LO(t,s.scaleFactor()),a=new CO(t,n);return EO(s,a),s.applyStyles(s.userStyles),a}function LO(r,t){var s=r.content,n=TO(s.columns);if(s.head.length===0){var a=Ry(n,"head");a&&s.head.push(a)}if(s.foot.length===0){var a=Ry(n,"foot");a&&s.foot.push(a)}var i=r.settings.theme,c=r.styles;return{columns:n,head:Fx("head",s.head,n,c,i,t),body:Fx("body",s.body,n,c,i,t),foot:Fx("foot",s.foot,n,c,i,t)}}function Fx(r,t,s,n,a,i){var c={},A=t.map(function(d,u){for(var m=0,f={},x=0,g=0,y=0,b=s;y<b.length;y++){var B=b[y];if(c[B.index]==null||c[B.index].left===0)if(g===0){var N=void 0;Array.isArray(d)?N=d[B.index-x-m]:N=d[B.dataKey];var E={};typeof N=="object"&&!Array.isArray(N)&&(E=N?.styles||{});var I=PO(r,B,u,a,n,i,E),k=new AC(N,I,r);f[B.dataKey]=k,f[B.index]=k,g=k.colSpan-1,c[B.index]={left:k.rowSpan-1,times:g}}else g--,x++;else c[B.index].left--,g=c[B.index].times,m++}return new cC(d,u,r,f)});return A}function Ry(r,t){var s={};return r.forEach(function(n){if(n.raw!=null){var a=QO(t,n.raw);a!=null&&(s[n.dataKey]=a)}}),Object.keys(s).length>0?s:null}function QO(r,t){if(r==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(r==="foot"&&typeof t=="object")return t.footer;return null}function TO(r){return r.map(function(t,s){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:s:a=s,new SO(a,t,s)})}function PO(r,t,s,n,a,i,c){var A=uO(n),d;r==="head"?d=a.headStyles:r==="body"?d=a.bodyStyles:r==="foot"&&(d=a.footStyles);var u=Fc({},A.table,A[r],a.styles,d),m=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=r==="body"?m:{},x=r==="body"&&s%2===0?Fc({},A.alternateRow,a.alternateRowStyles):{},g=dO(i),y=Fc({},g,u,x,f);return Fc(y,c)}function RO(r,t,s){var n;s===void 0&&(s={});var a=aC(r,t),i=new Map,c=[],A=[],d=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?d=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(d=[t.settings.horizontalPageBreakRepeat]),d.forEach(function(x){var g=t.columns.find(function(y){return y.dataKey===x||y.index===x});g&&!i.has(g.index)&&(i.set(g.index,!0),c.push(g.index),A.push(t.columns[g.index]),a-=g.wrappedWidth)});for(var u=!0,m=(n=s?.start)!==null&&n!==void 0?n:0;m<t.columns.length;){if(i.has(m)){m++;continue}var f=t.columns[m].wrappedWidth;if(u||a>=f)u=!1,c.push(m),A.push(t.columns[m]),a-=f;else break;m++}return{colIndexes:c,columns:A,lastIndex:m-1}}function DO(r,t){for(var s=[],n=0;n<t.columns.length;n++){var a=RO(r,t,{start:n});a.columns.length&&(s.push(a),n=a.lastIndex)}return s}function uC(r,t){var s=t.settings,n=s.startY,a=s.margin,i={x:a.left,y:n},c=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),A=n+a.bottom+c;if(s.pageBreak==="avoid"){var d=t.body,u=d.reduce(function(x,g){return x+g.height},0);A+=u}var m=new Eu(r);(s.pageBreak==="always"||s.startY!=null&&A>m.pageSize().height)&&(mC(m),i.y=a.top),t.callWillDrawPageHooks(m,i);var f=Fc({},i);t.startPageNumber=m.pageNumber(),s.horizontalPageBreak?OO(m,t,f,i):(m.applyStyles(m.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(x){return Pc(m,t,x,i,t.columns)}),m.applyStyles(m.userStyles),t.body.forEach(function(x,g){var y=g===t.body.length-1;ap(m,t,x,y,f,i,t.columns)}),m.applyStyles(m.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(x){return Pc(m,t,x,i,t.columns)})),rC(m,t,f,i),t.callEndPageHooks(m,i),t.finalY=i.y,r.lastAutoTable=t,m.applyStyles(m.userStyles)}function OO(r,t,s,n){var a=DO(r,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,m){r.applyStyles(r.userStyles),m>0?Ih(r,t,s,n,u.columns,!0):Dy(r,t,n,u.columns),MO(r,t,s,n,u.columns),_x(r,t,n,u.columns)});else for(var c=-1,A=a[0],d=function(){var u=c;if(A){r.applyStyles(r.userStyles);var m=A.columns;c>=0?Ih(r,t,s,n,m,!0):Dy(r,t,n,m),u=Oy(r,t,c+1,n,m),_x(r,t,n,m)}var f=u-c;a.slice(1).forEach(function(x){r.applyStyles(r.userStyles),Ih(r,t,s,n,x.columns,!0),Oy(r,t,c+1,n,x.columns,f),_x(r,t,n,x.columns)}),c=u};c<t.body.length-1;)d()}function Dy(r,t,s,n){var a=t.settings;r.applyStyles(r.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return Pc(r,t,i,s,n)})}function MO(r,t,s,n,a){r.applyStyles(r.userStyles),t.body.forEach(function(i,c){var A=c===t.body.length-1;ap(r,t,i,A,s,n,a)})}function Oy(r,t,s,n,a,i){r.applyStyles(r.userStyles),i=i??t.body.length;var c=Math.min(s+i,t.body.length),A=-1;return t.body.slice(s,c).forEach(function(d,u){var m=s+u===t.body.length-1,f=hC(r,t,m,n);d.canEntireRowFit(f,a)&&(Pc(r,t,d,n,a),A=s+u)}),A}function _x(r,t,s,n){var a=t.settings;r.applyStyles(r.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return Pc(r,t,i,s,n)})}function HO(r,t,s){var n=s.getLineHeight(r.styles.fontSize),a=r.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function KO(r,t,s,n){var a={};r.spansMultiplePages=!0,r.height=0;for(var i=0,c=0,A=s.columns;c<A.length;c++){var d=A[c],u=r.cells[d.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var m=new AC(u.raw,u.styles,u.section);m=Fc(m,u),m.text=[];var f=HO(u,t,n);u.text.length>f&&(m.text=u.text.splice(f,u.text.length));var x=n.scaleFactor(),g=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(x,g),u.contentHeight>=t&&(u.contentHeight=t,m.styles.minCellHeight-=t),u.contentHeight>r.height&&(r.height=u.contentHeight),m.contentHeight=m.getContentHeight(x,g),m.contentHeight>i&&(i=m.contentHeight),a[d.index]=m}}var y=new cC(r.raw,-1,r.section,a,!0);y.height=i;for(var b=0,B=s.columns;b<B.length;b++){var d=B[b],m=y.cells[d.index];m&&(m.height=y.height);var u=r.cells[d.index];u&&(u.height=r.height)}return y}function VO(r,t,s,n){var a=r.pageSize().height,i=n.settings.margin,c=i.top+i.bottom,A=a-c;t.section==="body"&&(A-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var d=t.getMinimumRowHeight(n.columns,r),u=d<s;if(d>A)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var m=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>A;return f?(m&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(m||n.settings.rowPageBreak==="avoid")}function ap(r,t,s,n,a,i,c){var A=hC(r,t,n,i);if(s.canEntireRowFit(A,c))Pc(r,t,s,i,c);else if(VO(r,s,A,t)){var d=KO(s,A,t,r);Pc(r,t,s,i,c),Ih(r,t,a,i,c),ap(r,t,d,n,a,i,c)}else Ih(r,t,a,i,c),ap(r,t,s,n,a,i,c)}function Pc(r,t,s,n,a){n.x=t.settings.margin.left;for(var i=0,c=a;i<c.length;i++){var A=c[i],d=s.cells[A.index];if(!d){n.x+=A.width;continue}r.applyStyles(d.styles),d.x=n.x,d.y=n.y;var u=t.callCellHooks(r,t.hooks.willDrawCell,d,s,A,n);if(u===!1){n.x+=A.width;continue}zO(r,d,n);var m=d.getTextPos();eC(d.text,m.x,m.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},r.getDocument()),t.callCellHooks(r,t.hooks.didDrawCell,d,s,A,n),n.x+=A.width}n.y+=s.height}function zO(r,t,s){var n=t.styles;if(r.getDocument().setFillColor(r.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=nC(n.lineWidth,n.fillColor);a&&r.rect(t.x,s.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&r.rect(t.x,s.y,t.width,t.height,"F"),$O(r,t,s,n.lineWidth))}function $O(r,t,s,n){var a,i,c,A;n.top&&(a=s.x,i=s.y,c=s.x+t.width,A=s.y,n.right&&(c+=.5*n.right),n.left&&(a-=.5*n.left),d(n.top,a,i,c,A)),n.bottom&&(a=s.x,i=s.y+t.height,c=s.x+t.width,A=s.y+t.height,n.right&&(c+=.5*n.right),n.left&&(a-=.5*n.left),d(n.bottom,a,i,c,A)),n.left&&(a=s.x,i=s.y,c=s.x,A=s.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(A+=.5*n.bottom),d(n.left,a,i,c,A)),n.right&&(a=s.x+t.width,i=s.y,c=s.x+t.width,A=s.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(A+=.5*n.bottom),d(n.right,a,i,c,A));function d(u,m,f,x,g){r.getDocument().setLineWidth(u),r.getDocument().line(m,f,x,g,"S")}}function hC(r,t,s,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&s)&&(a+=t.getFootHeight(t.columns)),r.pageSize().height-n.y-a}function Ih(r,t,s,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),r.applyStyles(r.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(A){return Pc(r,t,A,n,a)}),t.callEndPageHooks(r,n);var c=t.settings.margin;rC(r,t,s,n),mC(r),t.pageNumber++,n.x=c.left,n.y=c.top,s.y=c.top,t.callWillDrawPageHooks(r,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(A){return Pc(r,t,A,n,a)}),r.applyStyles(r.userStyles))}function mC(r){var t=r.pageNumber();r.setPage(t+1);var s=r.pageNumber();return s===t?(r.addPage(),!0):!1}function GO(r){r.API.autoTable=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var n=t[0],a=lC(this,n),i=dC(this,a);return uC(this,i),this},r.API.lastAutoTable=!1,r.API.autoTableText=function(t,s,n,a){eC(t,s,n,a,this)},r.API.autoTableSetDefaults=function(t){return Eu.setDefaults(t,this),this},r.autoTableSetDefaults=function(t,s){Eu.setDefaults(t,s)},r.API.autoTableHtmlToJson=function(t,s){var n;if(s===void 0&&(s=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Eu(this),i=oC(a,t,window,s,!1),c=i.head,A=i.body,d=((n=c[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:d,rows:A,data:A}}}var kx;function WO(r,t){var s=lC(r,t),n=dC(r,s);uC(r,n)}try{if(typeof window<"u"&&window){var My=window,Hy=My.jsPDF||((kx=My.jspdf)===null||kx===void 0?void 0:kx.jsPDF);Hy&&GO(Hy)}}catch(r){console.error("Could not apply autoTable plugin",r)}function qO(){const{payments:r,students:t,classes:s,feeStructures:n,studentFeeBalances:a,currentTerm:i,currentAcademicYear:c,schoolSettings:A}=ys(),[d,u]=j.useState("all"),[m,f]=j.useState(i),[x,g]=j.useState(c),[y,b]=j.useState("all"),B=()=>a.filter(H=>(d==="all"||H.class_id===Number(d))&&H.academic_year===x&&H.term===m),N=()=>{const H=B(),T=H.reduce((ce,W)=>ce+W.total_fee_required,0),V=H.reduce((ce,W)=>ce+W.total_paid,0),G=H.reduce((ce,W)=>ce+W.balance,0),L=H.filter(ce=>ce.status==="Paid").length,F=H.filter(ce=>ce.status==="Partial").length,O=H.filter(ce=>ce.status==="Unpaid").length,P=T>0?(V/T*100).toFixed(1):"0";return{totalExpected:T,totalCollected:V,totalOutstanding:G,fullyPaid:L,partiallyPaid:F,unpaid:O,collectionRate:P,totalStudents:H.length}},E=()=>{const H=new hs,T=N(),V=B();H.setFontSize(18),H.text(A.school_name,105,15,{align:"center"}),H.setFontSize(12),H.text(A.school_motto,105,22,{align:"center"}),H.setFontSize(14),H.text("Payment Report",105,32,{align:"center"}),H.setFontSize(10),H.text(`Term: ${m}`,14,42),H.text(`Academic Year: ${x}`,14,48),H.text(`Generated: ${new Date().toLocaleDateString()}`,14,54),H.setFontSize(12),H.text("Summary Statistics",14,65),H.setFontSize(10),H.text(`Total Expected: ${T.totalExpected.toLocaleString()}`,14,72),H.text(`Total Collected: ${T.totalCollected.toLocaleString()}`,14,78),H.text(`Outstanding: ${T.totalOutstanding.toLocaleString()}`,14,84),H.text(`Collection Rate: ${T.collectionRate}%`,14,90),H.text(`Total Students: ${T.totalStudents}`,110,72),H.text(`Fully Paid: ${T.fullyPaid}`,110,78),H.text(`Partially Paid: ${T.partiallyPaid}`,110,84),H.text(`Unpaid: ${T.unpaid}`,110,90);const G=V.map(L=>{const F=t.find(P=>P.id===L.student_id),O=s.find(P=>P.id===L.class_id);return[F?`${F.firstName} ${F.lastName}`:"N/A",O?.name||"N/A",`${L.total_fee_required.toLocaleString()}`,`${L.total_paid.toLocaleString()}`,`${L.balance.toLocaleString()}`,L.status]});WO(H,{head:[["Student Name","Class","Required","Paid","Balance","Status"]],body:G,startY:100,theme:"grid",headStyles:{fillColor:[0,124,145]},styles:{fontSize:8}}),H.save(`Payment_Report_${m}_${x}.pdf`),he.success("Report exported successfully!")},I=()=>{const H=B(),T=N();let V=`Payment Report
`;V+=`${A.school_name}
`,V+=`Term: ${m}, Academic Year: ${x}
`,V+=`Generated: ${new Date().toLocaleDateString()}

`,V+=`Summary Statistics
`,V+=`Total Expected,${T.totalExpected}
`,V+=`Total Collected,${T.totalCollected}
`,V+=`Outstanding,${T.totalOutstanding}
`,V+=`Collection Rate,${T.collectionRate}%
`,V+=`Total Students,${T.totalStudents}
`,V+=`Fully Paid,${T.fullyPaid}
`,V+=`Partially Paid,${T.partiallyPaid}
`,V+=`Unpaid,${T.unpaid}

`,V+=`Student Name,Admission Number,Class,Required,Paid,Balance,Status
`,H.forEach(O=>{const P=t.find(W=>W.id===O.student_id),ce=s.find(W=>W.id===O.class_id);V+=`${P?`${P.firstName} ${P.lastName}`:"N/A"},`,V+=`${P?.admissionNumber||"N/A"},`,V+=`${ce?.name||"N/A"},`,V+=`${O.total_fee_required},`,V+=`${O.total_paid},`,V+=`${O.balance},`,V+=`${O.status}
`});const G=new Blob([V],{type:"text/csv"}),L=window.URL.createObjectURL(G),F=document.createElement("a");F.href=L,F.download=`Payment_Report_${m}_${x}.csv`,F.click(),he.success("CSV exported successfully!")},k=N(),$=B(),z=s.filter(H=>H.status==="Active");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Payment Reports"}),e.jsx("p",{className:"text-[#6B7280]",children:"Generate and export comprehensive payment reports"})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(op,{className:"w-5 h-5 text-[#007C91]"}),e.jsx(Hs,{className:"text-[#1F2937]",children:"Report Filters"})]})}),e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Class"}),e.jsxs(Qt,{value:d,onValueChange:u,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Classes"}),z.map(H=>e.jsx(be,{value:H.id.toString(),children:H.name},H.id))]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Term"}),e.jsxs(Qt,{value:m,onValueChange:f,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"First Term",children:"First Term"}),e.jsx(be,{value:"Second Term",children:"Second Term"}),e.jsx(be,{value:"Third Term",children:"Third Term"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Academic Year"}),e.jsxs(Qt,{value:x,onValueChange:g,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"2023/2024",children:"2023/2024"}),e.jsx(be,{value:"2024/2025",children:"2024/2025"}),e.jsx(be,{value:"2025/2026",children:"2025/2026"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Payment Status"}),e.jsxs(Qt,{value:y,onValueChange:b,children:[e.jsx(Pt,{className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all",children:"All Statuses"}),e.jsx(be,{value:"Paid",children:"Fully Paid"}),e.jsx(be,{value:"Partial",children:"Partially Paid"}),e.jsx(be,{value:"Unpaid",children:"Unpaid"})]})]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsxs(Ce,{onClick:E,className:"bg-[#007C91] hover:bg-[#006073] text-white rounded-xl shadow-clinical",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),e.jsxs(Ce,{onClick:I,variant:"outline",className:"border-[#007C91] text-[#007C91] hover:bg-[#007C91]/10 rounded-xl",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsx(ye,{className:"rounded-xl bg-gradient-to-br from-[#007C91] to-[#006073] text-white shadow-clinical",children:e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(bo,{className:"w-6 h-6"})}),e.jsx(Ed,{className:"w-5 h-5 opacity-70"})]}),e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Total Expected"}),e.jsxs("h3",{className:"text-white",children:["",k.totalExpected.toLocaleString()]})]})}),e.jsx(ye,{className:"rounded-xl bg-gradient-to-br from-[#10B981] to-[#059669] text-white shadow-clinical",children:e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(bo,{className:"w-6 h-6"})}),e.jsxs("span",{className:"text-sm opacity-80",children:[k.collectionRate,"%"]})]}),e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Total Collected"}),e.jsxs("h3",{className:"text-white",children:["",k.totalCollected.toLocaleString()]})]})}),e.jsx(ye,{className:"rounded-xl bg-gradient-to-br from-[#EF4444] to-[#DC2626] text-white shadow-clinical",children:e.jsxs(ke,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(Is,{className:"w-6 h-6"})})}),e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Outstanding"}),e.jsxs("h3",{className:"text-white",children:["",k.totalOutstanding.toLocaleString()]})]})}),e.jsx(ye,{className:"rounded-xl bg-gradient-to-br from-[#F4B400] to-[#F59E0B] text-white shadow-clinical",children:e.jsxs(ke,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(Qs,{className:"w-6 h-6"})})}),e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Total Students"}),e.jsx("h3",{className:"text-white",children:k.totalStudents})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#6B7280] text-sm mb-1",children:"Fully Paid"}),e.jsx("h3",{className:"text-[#10B981]",children:k.fullyPaid})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#10B981]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[#10B981]",children:""})})]})})}),e.jsx(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#6B7280] text-sm mb-1",children:"Partially Paid"}),e.jsx("h3",{className:"text-[#F59E0B]",children:k.partiallyPaid})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#F59E0B]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[#F59E0B]",children:""})})]})})}),e.jsx(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#6B7280] text-sm mb-1",children:"Unpaid"}),e.jsx("h3",{className:"text-[#EF4444]",children:k.unpaid})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#EF4444]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[#EF4444]",children:""})})]})})})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vn,{className:"w-5 h-5 text-[#007C91]"}),e.jsx(Hs,{className:"text-[#1F2937]",children:"Detailed Payment Report"})]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#007C91] text-white",children:[e.jsx("th",{className:"text-left p-4",children:"Student Name"}),e.jsx("th",{className:"text-left p-4",children:"Class"}),e.jsx("th",{className:"text-right p-4",children:"Required"}),e.jsx("th",{className:"text-right p-4",children:"Paid"}),e.jsx("th",{className:"text-right p-4",children:"Balance"}),e.jsx("th",{className:"text-center p-4",children:"Status"})]})}),e.jsx("tbody",{children:$.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center p-8 text-[#6B7280]",children:"No payment records found for the selected filters"})}):$.map(H=>{const T=t.find(G=>G.id===H.student_id),V=s.find(G=>G.id===H.class_id);return e.jsxs("tr",{className:"border-b border-[#E5E7EB] hover:bg-[#F9FAFB]",children:[e.jsx("td",{className:"p-4 text-[#1F2937]",children:T?`${T.firstName} ${T.lastName}`:"N/A"}),e.jsx("td",{className:"p-4 text-[#6B7280]",children:V?.name||"N/A"}),e.jsxs("td",{className:"p-4 text-right text-[#1F2937]",children:["",H.total_fee_required.toLocaleString()]}),e.jsxs("td",{className:"p-4 text-right text-[#10B981]",children:["",H.total_paid.toLocaleString()]}),e.jsxs("td",{className:"p-4 text-right text-[#EF4444]",children:["",H.balance.toLocaleString()]}),e.jsx("td",{className:"p-4 text-center",children:e.jsx(Ct,{className:`rounded-full ${H.status==="Paid"?"bg-[#10B981] text-white":H.status==="Partial"?"bg-[#F59E0B] text-white":"bg-[#EF4444] text-white"}`,children:H.status})})]},H.id)})})]})})})]})]})}function YO(){const{bankAccountSettings:r,updateBankAccountSettings:t,currentUser:s}=ys(),[n,a]=j.useState({bankName:"",accountName:"",accountNumber:"",paymentMethods:{bankTransfer:!0,onlinePayment:!1,cash:!0}});j.useEffect(()=>{r&&a({bankName:r.bankName,accountName:r.accountName,accountNumber:r.accountNumber,paymentMethods:r.paymentMethods})},[r]);const i=(d,u)=>{a({...n,[d]:u})},c=(d,u)=>{a({...n,paymentMethods:{...n.paymentMethods,[d]:u}})},A=()=>{if(!n.bankName||!n.accountName||!n.accountNumber){he.error("Please fill in all required fields");return}if(!s){he.error("User not authenticated");return}t({bankName:n.bankName,accountName:n.accountName,accountNumber:n.accountNumber,paymentMethods:n.paymentMethods,updatedBy:s.id}),he.success("Bank account settings saved successfully!")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Bank Account Settings"}),e.jsx("p",{className:"text-[#6B7280]",children:"Manage school bank account and payment methods"})]}),e.jsxs(Si,{className:"bg-[#007C91]/10 border-[#007C91] rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-[#007C91]"}),e.jsx(Ga,{className:"text-[#007C91]",children:"This information will be displayed to parents for fee payments. Ensure all details are accurate."})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#007C91]/10 flex items-center justify-center",children:e.jsx($y,{className:"w-6 h-6 text-[#007C91]"})}),e.jsxs("div",{children:[e.jsx(Hs,{className:"text-[#1F2937]",children:"Bank Account Information"}),e.jsx("p",{className:"text-sm text-[#6B7280] mt-1",children:"Configure school bank account details"})]})]})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Bank Name *"}),e.jsx(Et,{type:"text",value:n.bankName,onChange:d=>i("bankName",d.target.value),placeholder:"e.g., First Bank of Nigeria",className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Account Name *"}),e.jsx(Et,{type:"text",value:n.accountName,onChange:d=>i("accountName",d.target.value),placeholder:"e.g., Graceland Royal Academy Gombe",className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#1F2937] mb-2 block",children:"Account Number *"}),e.jsx(Et,{type:"text",value:n.accountNumber,onChange:d=>i("accountNumber",d.target.value),placeholder:"e.g., 1234567890",maxLength:10,className:"rounded-lg border-[#E5E7EB] focus:border-[#007C91]"})]})]})})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#F4B400]/10 flex items-center justify-center",children:e.jsx(Xl,{className:"w-6 h-6 text-[#F4B400]"})}),e.jsxs("div",{children:[e.jsx(Hs,{className:"text-[#1F2937]",children:"Payment Methods"}),e.jsx("p",{className:"text-sm text-[#6B7280] mt-1",children:"Select available payment options for parents"})]})]})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB] hover:border-[#007C91] transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wa,{id:"bankTransfer",checked:n.paymentMethods.bankTransfer,onCheckedChange:d=>c("bankTransfer",d)}),e.jsx(He,{htmlFor:"bankTransfer",className:"text-[#1F2937] cursor-pointer",children:"Bank Transfer"})]}),e.jsx("span",{className:"text-sm text-[#6B7280]",children:"Direct transfer to school account"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB] hover:border-[#007C91] transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wa,{id:"onlinePayment",checked:n.paymentMethods.onlinePayment,onCheckedChange:d=>c("onlinePayment",d)}),e.jsx(He,{htmlFor:"onlinePayment",className:"text-[#1F2937] cursor-pointer",children:"Online Payment Gateway"})]}),e.jsx("span",{className:"text-sm text-[#6B7280]",children:"Paystack, Flutterwave, etc."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB] hover:border-[#007C91] transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wa,{id:"cash",checked:n.paymentMethods.cash,onCheckedChange:d=>c("cash",d)}),e.jsx(He,{htmlFor:"cash",className:"text-[#1F2937] cursor-pointer",children:"Cash Payment"})]}),e.jsx("span",{className:"text-sm text-[#6B7280]",children:"Payment at school office"})]})]})})]}),r&&e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsx(Hs,{className:"text-[#1F2937]",children:"Current Settings"})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg",children:[e.jsx("p",{className:"text-sm text-[#6B7280] mb-1",children:"Bank Name"}),e.jsx("p",{className:"text-[#1F2937]",children:r.bankName})]}),e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg",children:[e.jsx("p",{className:"text-sm text-[#6B7280] mb-1",children:"Account Number"}),e.jsx("p",{className:"text-[#1F2937]",children:r.accountNumber})]}),e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg md:col-span-2",children:[e.jsx("p",{className:"text-sm text-[#6B7280] mb-1",children:"Account Name"}),e.jsx("p",{className:"text-[#1F2937]",children:r.accountName})]}),e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg md:col-span-2",children:[e.jsx("p",{className:"text-sm text-[#6B7280] mb-2",children:"Active Payment Methods"}),e.jsxs("div",{className:"flex gap-2",children:[r.paymentMethods.bankTransfer&&e.jsx("span",{className:"px-3 py-1 bg-[#007C91] text-white text-sm rounded-full",children:"Bank Transfer"}),r.paymentMethods.onlinePayment&&e.jsx("span",{className:"px-3 py-1 bg-[#007C91] text-white text-sm rounded-full",children:"Online Payment"}),r.paymentMethods.cash&&e.jsx("span",{className:"px-3 py-1 bg-[#007C91] text-white text-sm rounded-full",children:"Cash"})]})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(Ce,{onClick:A,className:"bg-[#007C91] hover:bg-[#006073] text-white rounded-xl shadow-clinical hover:shadow-clinical-lg transition-all",children:[e.jsx(ol,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})}function JO(){const{students:r,classes:t,addPayment:s,currentAcademicYear:n,currentTerm:a}=ys(),[i,c]=j.useState(""),[A,d]=j.useState(""),[u,m]=j.useState(""),[f,x]=j.useState(new Date().toISOString().split("T")[0]),[g,y]=j.useState(a),[b,B]=j.useState(""),[N,E]=j.useState(""),[I,k]=j.useState(""),$=t.filter(F=>F.status==="Active"),z=r.filter(F=>{const O=!A||F.classId===Number(A);if(!I)return O;const P=I.toLowerCase(),ce=F.firstName&&F.firstName.toLowerCase().includes(P)||F.lastName&&F.lastName.toLowerCase().includes(P)||F.admissionNumber&&F.admissionNumber.toLowerCase().includes(P);return O&&ce}),H=F=>r.filter(O=>O.classId===F&&O.status==="Active").length,T=r.find(F=>F.id===Number(i)),V=F=>{d(F),c("")},G=()=>{const F=new Date,O=F.getFullYear().toString().slice(-2),P=(F.getMonth()+1).toString().padStart(2,"0"),ce=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`RCP${O}${P}${ce}`},L=()=>{if(!i){he.error("Please select a student");return}if(!u||Number(u)<=0){he.error("Please enter a valid amount");return}if(!f){he.error("Please select payment date");return}const F=N||G();s({studentId:Number(i),amount:Number(u),recordedDate:f,term:g,academicYear:n,paymentMethod:"Cash",status:"Verified",verifiedBy:1,verifiedDate:new Date().toISOString(),receiptNumber:F,description:b||`School fees payment - ${g} ${n}`,proofOfPayment:""}),he.success(`Payment of ${Number(u).toLocaleString()} recorded successfully! Receipt: ${F}`),c(""),d(""),m(""),x(new Date().toISOString().split("T")[0]),B(""),E(""),k("")};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#0A2540] mb-2",children:"Manual Payment Entry"}),e.jsx("p",{className:"text-gray-600",children:"Record cash payments for student fees"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#10B981] to-[#059669] text-white rounded-t-xl",children:e.jsxs(Hs,{className:"flex items-center gap-2",children:[e.jsx(bo,{className:"w-5 h-5"}),"Enter Payment Details"]})}),e.jsxs(ke,{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Select Class"}),e.jsxs(Qt,{value:A,onValueChange:V,children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Select class first"})}),e.jsx(Rt,{className:"max-h-64",children:$.map(F=>e.jsxs(be,{value:F.id.toString(),children:[F.name," (",H(F.id)," students)"]},F.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Search Student *"}),e.jsxs("div",{className:"relative mb-2",children:[e.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Et,{value:I,onChange:F=>k(F.target.value),placeholder:"Search by name or admission number",className:"h-12 pl-10 rounded-xl border-[#0A2540]/20",disabled:!A})]}),e.jsxs(Qt,{value:i,onValueChange:c,children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:A?"Select student":"Select class first"})}),e.jsx(Rt,{className:"max-h-64",children:z.map(F=>e.jsxs(be,{value:F.id.toString(),children:[F.firstName," ",F.lastName," - ",F.admissionNumber," (",F.className,")"]},F.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Amount () *"}),e.jsx(Et,{type:"number",value:u,onChange:F=>m(F.target.value),placeholder:"Enter amount",className:"h-12 rounded-xl border-[#0A2540]/20",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Payment Date *"}),e.jsx(Et,{type:"date",value:f,onChange:F=>x(F.target.value),className:"h-12 rounded-xl border-[#0A2540]/20"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Term *"}),e.jsxs(Qt,{value:g,onValueChange:y,children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"First Term",children:"First Term"}),e.jsx(be,{value:"Second Term",children:"Second Term"}),e.jsx(be,{value:"Third Term",children:"Third Term"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Receipt Number (Optional)"}),e.jsx(Et,{value:N,onChange:F=>E(F.target.value),placeholder:"Auto-generated if left blank",className:"h-12 rounded-xl border-[#0A2540]/20"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to auto-generate"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Description (Optional)"}),e.jsx($a,{value:b,onChange:F=>B(F.target.value),placeholder:"Additional notes or description",className:"min-h-24 rounded-xl border-[#0A2540]/20"})]}),e.jsxs(Ce,{onClick:L,className:"w-full h-12 bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(ol,{className:"w-4 h-4 mr-2"}),"Record Payment"]})]})]}),e.jsxs("div",{className:"space-y-6",children:[T&&e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#3B82F6] to-[#2563EB] text-white rounded-t-xl",children:e.jsxs(Hs,{className:"flex items-center gap-2",children:[e.jsx(Zl,{className:"w-5 h-5"}),"Student Information"]})}),e.jsxs(ke,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"w-16 h-16 rounded-full bg-[#3B82F6] text-white flex items-center justify-center text-2xl font-bold",children:[T.firstName[0],T.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-[#0A2540] font-bold text-lg",children:[T.firstName," ",T.lastName]}),e.jsx("p",{className:"text-gray-600",children:T.admissionNumber})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Class"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:T.className})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Level"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:T.level})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gender"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:T.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:T.status})]})]})]})]}),T&&u&&e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#F59E0B] to-[#D97706] text-white rounded-t-xl",children:e.jsxs(Hs,{className:"flex items-center gap-2",children:[e.jsx(Xl,{className:"w-5 h-5"}),"Payment Summary"]})}),e.jsxs(ke,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-900 mb-1",children:"Amount to Record"}),e.jsxs("p",{className:"text-3xl text-green-900 font-bold",children:["",Number(u).toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Student:"}),e.jsxs("span",{className:"text-[#0A2540] font-medium",children:[T.firstName," ",T.lastName]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Admission No:"}),e.jsx("span",{className:"text-[#0A2540] font-medium",children:T.admissionNumber})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Class:"}),e.jsx("span",{className:"text-[#0A2540] font-medium",children:T.className})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),e.jsx("span",{className:"text-[#0A2540] font-medium",children:new Date(f).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Term:"}),e.jsx("span",{className:"text-[#0A2540] font-medium",children:g})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("span",{className:"text-[#0A2540] font-medium",children:"Cash"})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Receipt Number:"}),e.jsx("span",{className:"text-[#0A2540] font-medium",children:N||"Auto-generated"})]})]})]})]}),e.jsx(ye,{className:"border-blue-200 bg-blue-50",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Vn,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-blue-900 font-medium mb-2",children:"Instructions"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Select the student who made the payment"}),e.jsx("li",{children:" Enter the exact amount received in cash"}),e.jsx("li",{children:" Verify the payment date is correct"}),e.jsx("li",{children:" Select the appropriate term"}),e.jsx("li",{children:" Receipt number will be auto-generated if not provided"}),e.jsx("li",{children:' Payment will be marked as "Verified" immediately'})]})]})]})})})]})]})]})}function XO(){const{currentUser:r,students:t,parents:s,notifications:n,addNotification:a,markNotificationAsRead:i}=ys(),[c,A]=j.useState({recipientType:"all_parents",parentId:"",subject:"",message:""}),[d,u]=j.useState(!1),[m,f]=j.useState(""),[x,g]=j.useState(null),y=async E=>{E.preventDefault();try{let I="parents",k="All Parents";if(c.recipientType==="specific_parent"&&c.parentId){const $=s.find(z=>z.id===parseInt(c.parentId));k=`${$?.firstName} ${$?.lastName}`}await a({title:`Accountant Message: ${c.subject}`,message:`From: School Accountant
To: ${k}
Subject: ${c.subject}

${c.message}`,type:"info",targetAudience:I,sentBy:r?.id||0,sentDate:new Date().toISOString(),isRead:!1,readBy:[]}),he.success(`Message sent to ${k} successfully!`),A({recipientType:"all_parents",parentId:"",subject:"",message:""})}catch{he.error("Failed to send message. Please try again.")}},b=E=>{g(E),f(""),u(!0)},B=async()=>{if(!(!m.trim()||!x))try{const I=(x.originalNotification||x).message.split(`
`)[0];await a({title:`Re: ${x.title}`,message:`Accountant Reply:

${m}

---
Original Message:
${x.message}`,type:"info",targetAudience:"parents",sentBy:r?.id||0,sentDate:new Date().toISOString(),isRead:!1,readBy:[]}),he.success("Reply sent successfully!"),u(!1),f(""),g(null)}catch{he.error("Failed to send reply. Please try again.")}},N=n.filter(E=>E.type==="message"&&E.targetAudience==="accountants").sort((E,I)=>new Date(I.sentDate).getTime()-new Date(E.sentDate).getTime());return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Message Parents"}),e.jsx("p",{className:"text-[#6B7280]",children:"Send messages to parents regarding fees and payments"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"border-b border-[#E5E7EB] bg-[#F9FAFB] p-4",children:e.jsx("h2",{className:"font-semibold text-[#1F2937]",children:"Compose Message"})}),e.jsx(ke,{className:"p-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(He,{htmlFor:"recipient",children:"Send To *"}),e.jsxs(Qt,{value:c.recipientType,onValueChange:E=>A({...c,recipientType:E}),required:!0,children:[e.jsx(Pt,{className:"rounded-lg",children:e.jsx(Tt,{placeholder:"Select recipient"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"all_parents",children:"All Parents"}),e.jsx(be,{value:"specific_parent",children:"Specific Parent"})]})]})]}),c.recipientType==="specific_parent"&&e.jsxs("div",{children:[e.jsx(He,{htmlFor:"parent",children:"Select Parent *"}),e.jsxs(Qt,{value:c.parentId,onValueChange:E=>A({...c,parentId:E}),required:!0,children:[e.jsx(Pt,{className:"rounded-lg",children:e.jsx(Tt,{placeholder:"Select parent"})}),e.jsx(Rt,{children:s.map(E=>e.jsxs(be,{value:E.id.toString(),children:[E.firstName," ",E.lastName]},E.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"subject",children:"Subject *"}),e.jsx(Et,{id:"subject",value:c.subject,onChange:E=>A({...c,subject:E.target.value}),placeholder:"Message subject (e.g., Fee Payment Reminder)",className:"rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"message",children:"Message *"}),e.jsx($a,{id:"message",value:c.message,onChange:E=>A({...c,message:E.target.value}),placeholder:"Type your message here...",className:"rounded-lg min-h-[200px]",required:!0})]}),e.jsxs(Ce,{type:"submit",className:"w-full rounded-lg bg-[#007C91] hover:bg-[#005A6B] text-white",children:[e.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Send Message to Parents"]})]})})]})}),e.jsx("div",{children:e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"border-b border-[#E5E7EB] bg-[#F9FAFB] p-4",children:e.jsx("h2",{className:"font-semibold text-[#1F2937]",children:"Quick Tips"})}),e.jsxs(ke,{className:"p-4 space-y-4 text-sm text-[#6B7280]",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(bo,{className:"w-5 h-5 text-[#007C91] flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[#1F2937] mb-1",children:"Fee Related Messages"}),e.jsx("p",{children:"Use this for fee reminders, payment confirmations, and financial notices."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Qs,{className:"w-5 h-5 text-[#007C91] flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[#1F2937] mb-1",children:"Targeted Communication"}),e.jsx("p",{children:"Send to all parents for general announcements or specific parents for individual matters."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(xo,{className:"w-5 h-5 text-[#007C91] flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[#1F2937] mb-1",children:"Clear Subject Line"}),e.jsx("p",{children:"Use descriptive subjects to help parents understand the message purpose quickly."})]})]})]})]})})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"border-b border-[#E5E7EB] bg-[#F9FAFB] p-4",children:e.jsxs(Hs,{className:"text-[#1F2937] flex items-center gap-2",children:[e.jsx(xo,{className:"w-5 h-5"}),"Parent Messages (",N.length,")"]})}),e.jsx(ke,{className:"p-4",children:N.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(xo,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No parent messages received"})]}):e.jsx("div",{className:"space-y-3",children:N.map(E=>e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(Ct,{className:"bg-purple-100 text-purple-800 border-purple-300",children:[e.jsx(xo,{className:"w-3 h-3 mr-1"}),"Parent Message"]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(E.sentDate).toLocaleDateString()})]}),e.jsx("h4",{className:"font-semibold text-[#1F2937] mb-1",children:E.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:E.message})]}),e.jsxs(Ce,{size:"sm",variant:"outline",onClick:()=>b(E),className:"flex-shrink-0",children:[e.jsx(Zy,{className:"w-4 h-4 mr-1"}),"Reply"]})]})},E.id))})})]}),e.jsx(Zs,{open:d,onOpenChange:u,children:e.jsxs(er,{className:"max-w-2xl",children:[e.jsx(ur,{children:e.jsx(hr,{className:"text-[#1F2937]",children:"Reply to Parent Message"})}),e.jsxs("div",{className:"space-y-4",children:[x&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-[#1F2937] mb-2",children:"Original Message:"}),e.jsx("p",{className:"text-sm text-gray-600",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:x.message})]}),e.jsxs("div",{children:[e.jsx(He,{htmlFor:"reply-message",children:"Your Reply *"}),e.jsx($a,{id:"reply-message",value:m,onChange:E=>f(E.target.value),placeholder:"Type your reply here...",className:"rounded-lg min-h-[150px]",required:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ce,{onClick:B,disabled:!m.trim(),className:"bg-[#007C91] hover:bg-[#005A6B] text-white",children:[e.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Send Reply"]}),e.jsx(Ce,{variant:"outline",onClick:()=>{u(!1),f(""),g(null)},children:"Cancel"})]})]})]})})]})}function ZO({onLogout:r}){const{payments:t,currentUser:s,accountants:n,studentFeeBalances:a,students:i,classes:c,currentTerm:A,currentAcademicYear:d,getUnreadNotifications:u}=ys(),[m,f]=j.useState("dashboard"),x=s&&n.length>0?n.find(L=>L.id===s.linked_id):null,g=x?`${x.firstName||""} ${x.lastName||""}`.trim():"Accountant",y=[{icon:e.jsx(lp,{className:"w-5 h-5"}),label:"Dashboard",id:"dashboard"},{icon:e.jsx(Xl,{className:"w-5 h-5"}),label:"Set Fees",id:"set-fees"},{icon:e.jsx(gd,{className:"w-5 h-5"}),label:"Record Payments",id:"record-payments"},{icon:e.jsx(bo,{className:"w-5 h-5"}),label:"Manual Payment Entry",id:"manual-payment-entry"},{icon:e.jsx(kr,{className:"w-5 h-5"}),label:"Verify Receipts",id:"verify-receipts"},{icon:e.jsx(_f,{className:"w-5 h-5"}),label:"Payment Reports",id:"payment-reports"},{icon:e.jsx(Vn,{className:"w-5 h-5"}),label:"Payment History",id:"payment-history"},{icon:e.jsx($y,{className:"w-5 h-5"}),label:"Bank Settings",id:"bank-settings"},{icon:e.jsx(xo,{className:"w-5 h-5"}),label:"Message Parents",id:"message-parents"},{icon:e.jsx(_u,{className:"w-5 h-5"}),label:"Change Password",id:"change-password"},{icon:e.jsx(_0,{className:"w-5 h-5"}),label:"Logout",id:"logout"}],b=L=>{L==="logout"?r():f(L)},B=t.filter(L=>L.status==="Pending"),N=s?u():[];a.length>0&&a[0].academic_year;const E=a.reduce((L,F)=>L+F.total_fee_required,0),I=a.reduce((L,F)=>L+F.total_paid,0),k=a.reduce((L,F)=>L+F.balance,0),$=E>0?(I/E*100).toFixed(1):"0",z=new Date().toDateString();t.slice(0,5).sort((L,F)=>new Date(F.recorded_date).getTime()-new Date(L.recorded_date).getTime());const H=t.filter(L=>new Date(L.recorded_date).toDateString()===z&&L.status==="Verified"),T=H.reduce((L,F)=>L+F.amount,0),[V,G]=j.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-[#F4F6F9]",children:[e.jsx(xp,{items:y,activeItem:m,onItemClick:b,themeColor:"#007C91"}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx(vp,{userName:g,userRole:"Accountant",notificationCount:N.length,onLogout:r,onNotificationClick:()=>G(!0)}),e.jsx("main",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:m==="dashboard"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Accountant Dashboard"}),e.jsx("p",{className:"text-[#6B7280]",children:"Financial Management & Fee Collection"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ye,{className:"rounded-xl bg-gradient-to-br from-[#007C91] to-[#006073] text-white border-0 shadow-clinical hover:shadow-clinical-lg transition-all",children:e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(Ed,{className:"w-6 h-6"})}),e.jsxs("span",{className:"text-sm opacity-80",children:[$,"%"]})]}),e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Total Collected"}),e.jsxs("h3",{className:"text-white",children:["",I.toLocaleString()]}),e.jsx("p",{className:"text-xs text-white/60 mt-2",children:A})]})}),e.jsx(ye,{className:"rounded-xl bg-gradient-to-br from-[#10B981] to-[#059669] text-white border-0 shadow-clinical hover:shadow-clinical-lg transition-all",children:e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(bo,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm opacity-80",children:"Today"})]}),e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Today's Revenue"}),e.jsxs("h3",{className:"text-white",children:["",T.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-white/60 mt-2",children:[H.length," payments"]})]})}),e.jsx(ye,{className:"rounded-xl bg-gradient-to-br from-[#F59E0B] to-[#F4B400] text-white border-0 shadow-clinical hover:shadow-clinical-lg transition-all",children:e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(gd,{className:"w-6 h-6"})}),e.jsx(Ct,{className:"bg-white/20 text-white border-0",children:B.length})]}),e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Pending Verification"}),e.jsx("h3",{className:"text-white",children:B.length}),e.jsx("p",{className:"text-xs text-white/60 mt-2",children:"Awaiting approval"})]})}),e.jsx(ye,{className:"rounded-xl bg-gradient-to-br from-[#EF4444] to-[#DC2626] text-white border-0 shadow-clinical hover:shadow-clinical-lg transition-all",children:e.jsxs(ke,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(bo,{className:"w-6 h-6"})})}),e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Outstanding"}),e.jsxs("h3",{className:"text-white",children:["",k.toLocaleString()]}),e.jsx("p",{className:"text-xs text-white/60 mt-2",children:"Requires follow-up"})]})})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsxs(Hs,{className:"text-[#1F2937]",children:["Fee Collection Progress - ",A]})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[#6B7280] text-sm",children:"Collection Rate"}),e.jsxs("span",{className:"text-[#007C91]",children:[$,"%"]})]}),e.jsx("div",{className:"w-full bg-[#E5E7EB] rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-[#007C91] to-[#10B981] h-full rounded-full transition-all duration-500",style:{width:`${$}%`}})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg",children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Expected"}),e.jsxs("p",{className:"text-[#1F2937]",children:["",E.toLocaleString()]})]}),e.jsxs("div",{className:"p-4 bg-[#10B981]/10 rounded-lg",children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Collected"}),e.jsxs("p",{className:"text-[#10B981]",children:["",I.toLocaleString()]})]}),e.jsxs("div",{className:"p-4 bg-[#EF4444]/10 rounded-lg",children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Outstanding"}),e.jsxs("p",{className:"text-[#EF4444]",children:["",k.toLocaleString()]})]})]})]})})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Hs,{className:"text-[#1F2937]",children:"Pending Payment Verifications"}),e.jsx(Ct,{className:"bg-[#F59E0B] text-white border-0 rounded-full",children:B.length})]})}),e.jsxs(ke,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#007C91] border-none hover:bg-[#007C91]",children:[e.jsx(lt,{className:"text-white",children:"Student Name"}),e.jsx(lt,{className:"text-white",children:"Term"}),e.jsx(lt,{className:"text-white",children:"Amount"}),e.jsx(lt,{className:"text-white",children:"Date"}),e.jsx(lt,{className:"text-white",children:"Payment Method"}),e.jsx(lt,{className:"text-white text-center",children:"Action"})]})}),e.jsx(Ln,{children:B.length===0?e.jsx(os,{className:"bg-white",children:e.jsx(Je,{colSpan:6,className:"text-center py-8 text-[#6B7280]",children:"No pending payments to verify"})}):B.slice(0,5).map(L=>e.jsxs(os,{className:"bg-white border-b border-[#E5E7EB] hover:bg-[#F9FAFB]",children:[e.jsx(Je,{className:"text-[#1F2937]",children:L.student_name}),e.jsx(Je,{className:"text-[#6B7280]",children:L.term}),e.jsxs(Je,{className:"text-[#007C91]",children:["",L.amount.toLocaleString()]}),e.jsx(Je,{className:"text-[#6B7280]",children:new Date(L.recorded_date).toLocaleDateString()}),e.jsx(Je,{className:"text-[#6B7280]",children:L.payment_method}),e.jsx(Je,{className:"text-center",children:e.jsxs(Ce,{onClick:()=>f("verify-receipts"),className:"bg-[#007C91] hover:bg-[#006073] text-white rounded-xl text-xs h-9 shadow-clinical hover:shadow-clinical-lg transition-all",children:[e.jsx(kn,{className:"w-3 h-3 mr-1"}),"Verify"]})})]},L.id))})]})}),B.length>5&&e.jsx("div",{className:"p-4 border-t border-[#E5E7EB] text-center",children:e.jsxs(Ce,{onClick:()=>f("verify-receipts"),variant:"outline",className:"text-[#007C91] border-[#007C91] hover:bg-[#007C91]/10 rounded-xl",children:["View All ",B.length," Pending Payments"]})})]})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-6 border-b border-[#E5E7EB]",children:e.jsx(Hs,{className:"text-[#1F2937]",children:"Recent Verified Payments"})}),e.jsx(ke,{className:"p-6",children:t.filter(L=>L.status==="Verified").slice(0,5).map(L=>e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#E5E7EB] last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[#1F2937]",children:L.student_name}),e.jsx("p",{className:"text-sm text-[#6B7280]",children:L.payment_type})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[#007C91]",children:["$",L.amount]}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:new Date(L.recorded_date).toLocaleDateString()})]})]},L.id))})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all cursor-pointer group",onClick:()=>f("set-fees"),children:e.jsxs(ke,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-[#007C91]/10 flex items-center justify-center group-hover:bg-[#007C91]/20 transition-all",children:e.jsx(Xl,{className:"w-8 h-8 text-[#007C91]"})}),e.jsx("h3",{className:"text-[#1F2937] mb-2",children:"Set Fee Structure"}),e.jsx("p",{className:"text-sm text-[#6B7280]",children:"Configure fees for classes"})]})}),e.jsx(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all cursor-pointer group",onClick:()=>f("record-payments"),children:e.jsxs(ke,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-[#10B981]/10 flex items-center justify-center group-hover:bg-[#10B981]/20 transition-all",children:e.jsx(gd,{className:"w-8 h-8 text-[#10B981]"})}),e.jsx("h3",{className:"text-[#1F2937] mb-2",children:"Record Payment"}),e.jsx("p",{className:"text-sm text-[#6B7280]",children:"Record payments"})]})}),e.jsx(ye,{className:"rounded-xl bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all cursor-pointer group",onClick:()=>f("payment-reports"),children:e.jsxs(ke,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-[#F4B400]/10 flex items-center justify-center group-hover:bg-[#F4B400]/20 transition-all",children:e.jsx(_f,{className:"w-8 h-8 text-[#F4B400]"})}),e.jsx("h3",{className:"text-[#1F2937] mb-2",children:"Payment Reports"}),e.jsx("p",{className:"text-sm text-[#6B7280]",children:"View payment reports"})]})})]})]}):null}),m!=="dashboard"&&e.jsxs("main",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:[m==="set-fees"&&e.jsx(AO,{}),m==="record-payments"&&e.jsx(oO,{}),m==="manual-payment-entry"&&e.jsx(JO,{}),m==="payment-reports"&&e.jsx(qO,{}),m==="payment-history"&&e.jsx(lO,{}),m==="bank-settings"&&e.jsx(YO,{}),m==="message-parents"&&e.jsx(XO,{}),m==="change-password"&&e.jsx(gv,{}),m==="verify-receipts"&&e.jsx(cO,{})]})]}),e.jsx(Zs,{open:V,onOpenChange:G,children:e.jsx(er,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:e.jsx(jp,{})})})]})}function eM(){const{currentUser:r,parents:t,students:s,compiledResults:n,getScoresByStudent:a,currentTerm:i,currentAcademicYear:c}=ys(),[A,d]=j.useState(""),[u,m]=j.useState(i),[f,x]=j.useState(c),g=r?t.find(z=>z.id===r.linkedId):null,y=g?s.filter(z=>g.studentIds.includes(z.id)):[],b=y.find(z=>z.id===Number(A)),B=b?n.filter(z=>z.studentId===b.id&&z.status==="Approved"):[],N=b?n.find(z=>z.studentId===b.id&&z.term===u&&z.academicYear===f&&z.status==="Approved"):null,E=N?N.scores:[],I=z=>{he.success(`Downloading ${z.term} ${z.academicYear} report card...`)},k=z=>{he.info(`Opening ${z.term} ${z.academicYear} detailed report...`)},$=z=>z==="A"?"bg-[#28A745]":z==="B"?"bg-[#1E90FF]":z==="C"?"bg-[#FFC107]":"bg-[#DC3545]";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-white mb-2",children:"Performance Reports"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"View and download academic performance reports"})]}),e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-white",children:"Select Child"}),e.jsxs(Qt,{value:A,onValueChange:d,children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{placeholder:"Choose child"})}),e.jsx(Rt,{className:"bg-[#0F243E] border-white/10",children:y.map(z=>e.jsxs(be,{value:z.id.toString(),className:"text-white hover:bg-[#1E90FF]",children:[z.firstName," ",z.lastName," - ",z.className]},z.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-white",children:"Academic Year"}),e.jsxs(Qt,{value:f,onValueChange:x,children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{placeholder:"Select year"})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"2024/2025",className:"text-white hover:bg-[#1E90FF]",children:"2024/2025"}),e.jsx(be,{value:"2023/2024",className:"text-white hover:bg-[#1E90FF]",children:"2023/2024"}),e.jsx(be,{value:"2022/2023",className:"text-white hover:bg-[#1E90FF]",children:"2022/2023"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-white",children:"Term"}),e.jsxs(Qt,{value:u,onValueChange:m,children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-white/10 bg-[#0F243E] text-white",children:e.jsx(Tt,{placeholder:"Select term"})}),e.jsxs(Rt,{className:"bg-[#0F243E] border-white/10",children:[e.jsx(be,{value:"First Term",className:"text-white hover:bg-[#1E90FF]",children:"First Term"}),e.jsx(be,{value:"Second Term",className:"text-white hover:bg-[#1E90FF]",children:"Second Term"}),e.jsx(be,{value:"Third Term",className:"text-white hover:bg-[#1E90FF]",children:"Third Term"})]})]})]})]})})}),A&&N?e.jsxs(e.Fragment,{children:[e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsx("h3",{className:"text-white",children:"Current Term Performance Summary"})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Average Score"}),e.jsxs("p",{className:"text-2xl text-white",children:[N.averageScore.toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Position"}),e.jsxs("p",{className:"text-2xl text-[#FFD700]",children:[N.position,N.position===1?"st":N.position===2?"nd":N.position===3?"rd":"th"]})]}),e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Out of"}),e.jsx("p",{className:"text-2xl text-white",children:N.totalStudents})]}),e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Attendance"}),e.jsxs("p",{className:"text-2xl text-[#28A745]",children:[Math.round(N.timesPresent/N.totalAttendanceDays*100),"%"]})]})]})})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsxs("h3",{className:"text-white",children:["Subject Performance - ",u," ",f]})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gradient-to-r from-[#1E90FF] to-[#00BFFF] border-none hover:bg-gradient-to-r",children:[e.jsx(lt,{className:"text-white",children:"Subject"}),e.jsx(lt,{className:"text-white text-center",children:"1st CA (20)"}),e.jsx(lt,{className:"text-white text-center",children:"2nd CA (20)"}),e.jsx(lt,{className:"text-white text-center",children:"Exam (60)"}),e.jsx(lt,{className:"text-white text-center",children:"Total (100)"}),e.jsx(lt,{className:"text-white text-center",children:"Grade"}),e.jsx(lt,{className:"text-white text-center",children:"Remark"})]})}),e.jsx(Ln,{children:E.length===0?e.jsx(os,{className:"bg-[#0F243E] border-b border-white/5",children:e.jsx(Je,{colSpan:7,className:"text-center py-8",children:e.jsx("p",{className:"text-white",children:"No scores available for this term"})})}):E.map((z,H)=>e.jsxs(os,{className:"bg-[#0F243E] border-b border-white/5 hover:bg-[#132C4A]",children:[e.jsx(Je,{className:"text-white",children:z.subjectName}),e.jsx(Je,{className:"text-center text-[#C0C8D3]",children:z.ca1}),e.jsx(Je,{className:"text-center text-[#C0C8D3]",children:z.ca2}),e.jsx(Je,{className:"text-center text-[#C0C8D3]",children:z.exam}),e.jsx(Je,{className:"text-center text-white font-medium",children:z.total}),e.jsx(Je,{className:"text-center",children:e.jsx(Ct,{className:`${$(z.grade)} text-white border-0`,children:z.grade})}),e.jsx(Je,{className:"text-center text-[#C0C8D3]",children:z.remark})]},H))})]})})})]}),e.jsxs(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:[e.jsx(It,{className:"p-5 border-b border-white/10",children:e.jsx("h3",{className:"text-white",children:"Term Reports History"})}),e.jsx(ke,{className:"p-5 space-y-3",children:B.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Vn,{className:"w-12 h-12 mx-auto mb-3 text-[#C0C8D3]"}),e.jsx("p",{className:"text-white mb-1",children:"No approved results yet"}),e.jsx("p",{className:"text-sm text-[#C0C8D3]",children:"Results will appear here once approved by admin"})]}):B.map(z=>e.jsxs("div",{className:"p-4 bg-[#0F243E] rounded-xl border border-white/5 hover:border-white/10 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white",children:[z.academicYear," - ",z.term]}),e.jsxs("p",{className:"text-xs text-[#C0C8D3]",children:["Class Average: ",z.averageScore.toFixed(1),"%"]})]}),e.jsx(Ct,{className:"bg-[#28A745] text-white border-0",children:"Approved"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 bg-[#132C4A] rounded-lg border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Average"}),e.jsxs("p",{className:"text-white",children:[z.averageScore.toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-3 bg-[#132C4A] rounded-lg border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Position"}),e.jsxs("p",{className:"text-[#FFD700]",children:[z.position,z.position===1?"st":z.position===2?"nd":z.position===3?"rd":"th"]})]}),e.jsxs("div",{className:"p-3 bg-[#132C4A] rounded-lg border border-white/5",children:[e.jsx("p",{className:"text-xs text-[#C0C8D3] mb-1",children:"Out of"}),e.jsx("p",{className:"text-white",children:z.totalStudents})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{onClick:()=>k(z),className:"flex-1 bg-[#1E90FF] hover:bg-[#00BFFF] text-white rounded-xl shadow-md hover:scale-105 transition-all h-10",children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(Ce,{onClick:()=>I(z),className:"flex-1 bg-[#28A745] hover:bg-[#28A745]/90 text-white rounded-xl shadow-md hover:scale-105 transition-all h-10",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download"]})]})]},z.id))})]})]}):A&&!N?e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx(Vn,{className:"w-16 h-16 mx-auto mb-4 text-[#1E90FF]"}),e.jsx("h3",{className:"text-white mb-2",children:"No Results Available"}),e.jsxs("p",{className:"text-[#C0C8D3]",children:["No approved results for ",b?.firstName," ",b?.lastName," in ",u," ",f]})]})}):e.jsx(ye,{className:"rounded-xl bg-[#132C4A] border border-white/10 shadow-lg",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx(Vn,{className:"w-16 h-16 mx-auto mb-4 text-[#1E90FF]"}),e.jsx("h3",{className:"text-white mb-2",children:"No Child Selected"}),e.jsx("p",{className:"text-[#C0C8D3]",children:"Please select a child to view their performance reports"})]})})]})}const fC=j.forwardRef(({studentId:r,term:t,academicYear:s,className:n=""},a)=>{const{students:i,classes:c,scores:A,affectiveDomains:d,psychomotorDomains:u,compiledResults:m,subjectAssignments:f,subjectRegistrations:x}=ys(),g=i.find(G=>G.id===r);if(!g)return null;const y=m.find(G=>G.studentId===r&&G.term===t&&G.academicYear===s&&G.status==="Approved");if(!y)return e.jsx("div",{className:"p-8 text-center bg-white rounded-xl border border-gray-200",children:e.jsx("p",{className:"text-gray-600",children:"No approved result available for this term"})});const b=c.find(G=>G.id===g.classId),B=x.filter(G=>G.classId===g.classId&&G.term===t&&G.academicYear===s&&G.status==="Active"),E=(y.scores||[]).filter(G=>B.some(L=>f.some(F=>F.id===G.subjectAssignmentId&&F.subjectId===L.subjectId))),I=E.reduce((G,L)=>G+L.total,0),k=(E||[]).length>0?Math.round(I/(E||[]).length*100)/100:0,$=y.affective,z=y.psychomotor,H=G=>G?new Date(G).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"",T=G=>G===5?"Excellent":G===4?"Very Good":G===3?"Good":G===2?"Fair":G===1?"Poor":"",V=()=>t==="First Term"?"15-SEP-2025":t==="Second Term"?"08-JAN-2026":t==="Third Term"?"15-APR-2026":"";return e.jsxs("div",{ref:a,className:`bg-white p-8 ${n}`,style:{fontFamily:"Arial, sans-serif"},children:[e.jsxs("div",{className:"text-center mb-6 border-b-2 border-green-600 pb-4",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})})}),e.jsx("h1",{className:"text-green-600 font-bold text-2xl mb-1",children:"GRACELAND ROYAL ACADEMY"}),e.jsx("p",{className:"text-sm text-gray-700 mb-1",children:"BEHIND HAKIM PALACE OPPOSITE NNPC DEPOT TUNFURE, GOMBE"}),e.jsx("p",{className:"text-sm text-gray-600",children:"gracelandroyalacademy05@gmail.com"})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-4 mb-6",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("div",{className:"w-24 h-28 border-2 border-gray-300 rounded overflow-hidden bg-gray-100 flex items-center justify-center",children:g.photoUrl?e.jsx("img",{src:g.photoUrl,alt:`${g.firstName} ${g.lastName}`,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-4xl text-gray-400",children:""})})}),e.jsx("div",{className:"col-span-5",children:e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 font-medium",children:"NAME:"}),e.jsxs("td",{className:"py-1 font-bold",children:[g.firstName.toUpperCase()," ",g.lastName.toUpperCase()]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 font-medium",children:"ADM NO:"}),e.jsx("td",{className:"py-1",children:g.admissionNumber})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 font-medium",children:"GENDER:"}),e.jsx("td",{className:"py-1",children:g.gender.toUpperCase()})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 font-medium",children:"DOB:"}),e.jsx("td",{className:"py-1",children:H(g.dateOfBirth)})]})]})})}),e.jsx("div",{className:"col-span-5",children:e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 font-medium",children:"SESSION:"}),e.jsx("td",{className:"py-1",children:s})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 font-medium",children:"TERM:"}),e.jsx("td",{className:"py-1 uppercase",children:t})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 font-medium",children:"CLASS:"}),e.jsx("td",{className:"py-1",children:b?.name||g.className})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 font-medium",children:"NO. OF TIMES PRESENT:"}),e.jsxs("td",{className:"py-1",children:[y.timesPresent,"/",y.totalAttendanceDays||0]})]})]})})}),e.jsxs("div",{className:"col-span-12 text-right text-sm",children:[e.jsx("span",{className:"font-medium",children:"NO. IN CLASS:"})," ",e.jsx("span",{className:"font-bold",children:y.totalStudents}),e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:"TERM END:"})," ",e.jsx("span",{children:H(y.termEnd)||"25-JUL-2025"}),e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:"NEXT TERM BEGIN:"})," ",e.jsx("span",{children:y.nextTermBegin||V()})]})]}),e.jsx("div",{className:"text-center mb-2",children:e.jsxs("h2",{className:"font-bold text-sm uppercase",children:[t," Result Sheet"]})}),e.jsx("div",{className:"mb-6 border border-gray-800",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 border-b border-gray-800",children:[e.jsx("th",{className:"border-r border-gray-800 p-1 text-left",style:{width:"3%"},children:"S/N"}),e.jsx("th",{className:"border-r border-gray-800 p-1 text-left",style:{width:"15%"},children:"SUBJECT"}),e.jsxs("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"5%"},children:["1st CA",e.jsx("br",{}),e.jsx("span",{className:"font-normal",children:"20"})]}),e.jsxs("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"5%"},children:["2nd CA",e.jsx("br",{}),e.jsx("span",{className:"font-normal",children:"20"})]}),e.jsxs("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"5%"},children:["Exams",e.jsx("br",{}),e.jsx("span",{className:"font-normal",children:"60"})]}),e.jsxs("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"6%"},children:["TOTAL",e.jsx("br",{}),e.jsx("span",{className:"font-normal",children:"100"})]}),e.jsxs("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"6%"},children:["CLASS AVG",e.jsx("br",{}),e.jsx("span",{className:"font-normal",children:"100%"})]}),e.jsx("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"5%"},children:"GRADE"}),e.jsx("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"10%"},children:"REMARK"}),e.jsxs("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"6%"},children:["CLASS MIN",e.jsx("br",{}),e.jsx("span",{className:"font-normal",children:"0"})]}),e.jsxs("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"6%"},children:["CLASS MAX",e.jsx("br",{}),e.jsx("span",{className:"font-normal",children:"100"})]}),e.jsxs("th",{className:"border-gray-800 p-1 text-center",style:{width:"18%"},children:["SUBJECT",e.jsx("br",{}),"TEACHERS"]})]})}),e.jsxs("tbody",{children:[E.map((G,L)=>e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:L+1}),e.jsx("td",{className:"border-r border-gray-800 p-1 font-medium",children:G.subjectName.toUpperCase()}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:G.ca1}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:G.ca2}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:G.exam}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center font-bold",children:G.total}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:G.classAverage}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center font-bold",children:G.grade}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:G.remark}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:G.classMin}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:G.classMax}),e.jsx("td",{className:"border-gray-800 p-1 text-center",children:G.subjectTeacher})]},L)),e.jsxs("tr",{className:"bg-gray-100 font-bold border-b border-gray-800",children:[e.jsxs("td",{colSpan:5,className:"border-r border-gray-800 p-1",children:["TOTAL SCORE: ",e.jsx("span",{className:"ml-2",children:I.toFixed(1)})]}),e.jsxs("td",{colSpan:2,className:"border-r border-gray-800 p-1",children:["STUDENT AVERAGE: ",e.jsx("span",{className:"ml-2",children:k})]}),e.jsxs("td",{colSpan:3,className:"border-r border-gray-800 p-1",children:["CLASS AVERAGE: ",e.jsx("span",{className:"ml-2",children:y.classAverage})]}),e.jsxs("td",{colSpan:2,className:"border-gray-800 p-1",children:["STUDENT POSITION:"," ",e.jsxs("span",{className:"ml-2",children:[y.position,y.position===1?"st":y.position===2?"nd":y.position===3?"rd":"th"]})]})]})]})]})}),e.jsx("div",{className:"mb-6 border border-gray-800",children:e.jsx("table",{className:"w-full text-xs",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-2 font-bold bg-gray-100",style:{width:"20%"},children:"CLASS TEACHER"}),e.jsx("td",{className:"p-2 font-medium",children:y.classTeacherName})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-2 font-bold bg-gray-100",children:"CLASS TEACHER'S COMMENT"}),e.jsx("td",{className:"p-2",children:y.classTeacherComment})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-2 font-bold bg-gray-100",children:"PRINCIPAL"}),e.jsx("td",{className:"p-2 font-medium",children:y.principalName})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-2 font-bold bg-gray-100",children:"PRINCIPAL'S COMMENT"}),e.jsx("td",{className:"p-2",children:y.principalComment||"Keep up the good work!"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border-r border-gray-800 p-2 font-bold bg-gray-100",children:"PRINCIPAL'S SIGNATURE"}),e.jsx("td",{className:"p-2",children:y.principalSignature?e.jsx("img",{src:y.principalSignature,alt:"Signature",className:"h-8"}):e.jsx("div",{className:"h-8 flex items-center",children:e.jsx("span",{className:"text-gray-400 italic",children:"_________________"})})})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-800",children:[e.jsx("div",{className:"bg-gray-100 border-b border-gray-800 p-2 text-center font-bold text-xs",children:"AFFECTIVE AREAS"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-800 bg-gray-50",children:[e.jsx("th",{className:"border-r border-gray-800 p-1 text-left",children:"PERSONAL & SOCIAL QUALITIES"}),e.jsx("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"15%"},children:"SCORES"}),e.jsx("th",{className:"p-1 text-center",style:{width:"25%"},children:"REMARK"})]})}),e.jsx("tbody",{children:$&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"ATTENTIVENESS"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:$.attentiveness}),e.jsx("td",{className:"p-1 text-center",children:T($.attentiveness)})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"HONESTY"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:$.honesty}),e.jsx("td",{className:"p-1 text-center",children:T($.honesty)})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"NEATNESS"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:$.neatness}),e.jsx("td",{className:"p-1 text-center",children:T($.neatness)})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"OBEDIENCE"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:$.obedience}),e.jsx("td",{className:"p-1 text-center",children:T($.obedience)})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"SENSE OF RESPONSIBILITY"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:$.senseOfResponsibility}),e.jsx("td",{className:"p-1 text-center",children:T($.senseOfResponsibility)})]})]})})]})]}),e.jsxs("div",{className:"border border-gray-800",children:[e.jsx("div",{className:"bg-gray-100 border-b border-gray-800 p-2 text-center font-bold text-xs",children:"PSYCHOMOTOR SKILLS"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-800 bg-gray-50",children:[e.jsx("th",{className:"border-r border-gray-800 p-1 text-left",children:"PERSONAL & SOCIAL QUALITIES"}),e.jsx("th",{className:"border-r border-gray-800 p-1 text-center",style:{width:"15%"},children:"SCORES"}),e.jsx("th",{className:"p-1 text-center",style:{width:"25%"},children:"REMARK"})]})}),e.jsx("tbody",{children:z&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"ATTENTION TO DIRECTION"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:z.attentionToDirection}),e.jsx("td",{className:"p-1 text-center",children:T(z.attentionToDirection)})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"CONSIDERATE OF OTHERS"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:z.considerateOfOthers}),e.jsx("td",{className:"p-1 text-center",children:T(z.considerateOfOthers)})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"HANDWRITING"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:z.handwriting}),e.jsx("td",{className:"p-1 text-center",children:T(z.handwriting)})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"SPORTS"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:z.sports}),e.jsx("td",{className:"p-1 text-center",children:T(z.sports)})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"VERBAL FLUENCY"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:z.verbalFluency}),e.jsx("td",{className:"p-1 text-center",children:T(z.verbalFluency)})]}),e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"border-r border-gray-800 p-1",children:"WORKS WELL INDEPENDENTLY"}),e.jsx("td",{className:"border-r border-gray-800 p-1 text-center",children:z.worksWellIndependently}),e.jsx("td",{className:"p-1 text-center",children:T(z.worksWellIndependently)})]})]})})]})]})]}),e.jsx("div",{className:"text-center text-xs text-gray-500 mt-4",children:e.jsx("p",{className:"italic",children:"Wisdom & Illumination"})})]})});fC.displayName="StudentResultSheet";function tM(){const{currentUser:r,students:t,parents:s,compiledResults:n,currentTerm:a,currentAcademicYear:i}=ys(),[c,A]=j.useState(null),[d,u]=j.useState(a),[m,f]=j.useState(i),x=j.useRef(null),g=()=>{if(x.current){const I=window.open("","_blank");if(I){const k=x.current.innerHTML,$=`
          <style>
            @page {
              size: A4;
              margin: 0.5in;
            }
            
            @media print {
              body {
                margin: 0;
                font-family: Arial, sans-serif;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .bg-white {
                background: white !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .text-green-600 {
                color: #16a34a !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .border-b-2 {
                border-bottom: 2px solid #16a34a !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .border-gray-800 {
                border: 1px solid #1f2937 !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .border-r {
                border-right: 1px solid #1f2937 !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .bg-gray-100 {
                background: #f3f4f6 !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .font-bold {
                font-weight: bold !important;
              }
              
              .text-center {
                text-align: center !important;
              }
              
              table {
                border-collapse: collapse !important;
                width: 100% !important;
              }
              
              td, th {
                padding: 4px !important;
                font-size: 10px !important;
                vertical-align: top !important;
              }
              
              .grid {
                display: block !important;
              }
              
              .col-span-2, .col-span-5, .col-span-12 {
                display: block !important;
                width: 100% !important;
              }
              
              .w-24, .w-20 {
                width: 96px !important;
                height: 112px !important;
                margin: 0 auto 8px !important;
                display: block !important;
              }
              
              .mb-6 {
                margin-bottom: 1rem !important;
              }
              
              .mb-2 {
                margin-bottom: 0.5rem !important;
              }
              
              .mb-1 {
                margin-bottom: 0.25rem !important;
              }
              
              .py-1 {
                padding: 2px 0 !important;
              }
              
              .p-1 {
                padding: 4px !important;
              }
              
              .p-2 {
                padding: 8px !important;
              }
              
              .text-sm {
                font-size: 12px !important;
              }
              
              .text-xs {
                font-size: 10px !important;
              }
              
              .text-2xl {
                font-size: 24px !important;
              }
              
              .gap-4 {
                margin-bottom: 1rem !important;
              }
              
              /* Ensure images don't break */
              img {
                max-width: 100% !important;
                height: auto !important;
                page-break-inside: avoid;
              }
              
              /* Avoid page breaks in important sections */
              .border {
                page-break-inside: avoid;
              }
              
              table {
                page-break-inside: auto;
              }
              
              tr {
                page-break-inside: avoid;
              }
              
              /* Footer styling */
              .text-gray-500 {
                color: #6b7280 !important;
              }
              
              .italic {
                font-style: italic !important;
              }
            }
          </style>
        `;I.document.write("<html><head><title>Result Sheet - Graceland Royal Academy</title>"),I.document.write($),I.document.write("</head><body>"),I.document.write(k),I.document.write("</body></html>"),I.document.close(),I.focus(),setTimeout(()=>{I.print(),I.close(),he.success("Result sheet printed successfully with original design preserved")},500)}}},y=()=>{g(),he.info("Use your browser's 'Save as PDF' option in the print dialog")},b=r?s.find(I=>I.id===r.linked_id):null,B=j.useMemo(()=>b?b?.student_ids?t.filter(I=>b.student_ids.includes(I.id)):[]:[],[b,t]),N=j.useMemo(()=>c?n.filter(I=>I.student_id===c&&I.term===d&&I.academic_year===m&&I.status==="Approved"):[],[c,d,m,n]),E=B.find(I=>I.id===c);return b?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[#0A2540] mb-2",children:"View Results"}),e.jsx("p",{className:"text-gray-600",children:"View approved academic results for your children"})]}),e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#3B82F6] to-[#2563EB] text-white rounded-t-xl",children:e.jsx(Hs,{children:"Select Student & Term"})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Select Child"}),e.jsxs(Qt,{value:c?.toString()||"",onValueChange:I=>A(Number(I)),children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{placeholder:"Select a child"})}),e.jsx(Rt,{children:B.map(I=>e.jsxs(be,{value:I.id.toString(),children:[I.first_name," ",I.last_name," - ",I.class_name||"N/A"]},I.id))})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Term"}),e.jsxs(Qt,{value:d,onValueChange:u,children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"First Term",children:"First Term"}),e.jsx(be,{value:"Second Term",children:"Second Term"}),e.jsx(be,{value:"Third Term",children:"Third Term"})]})]})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-[#0A2540] mb-2 block",children:"Academic Year"}),e.jsxs(Qt,{value:m,onValueChange:f,children:[e.jsx(Pt,{className:"h-12 rounded-xl border-[#0A2540]/20",children:e.jsx(Tt,{})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"2024/2025",children:"2024/2025"}),e.jsx(be,{value:"2025/2026",children:"2025/2026"})]})]})]})]})})]}),B.length===0&&e.jsx(ye,{className:"border-yellow-200 bg-yellow-50",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx(Zl,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-[#0A2540] text-lg mb-2",children:"No Children Linked"}),e.jsx("p",{className:"text-gray-600",children:"You don't have any children linked to your account yet."}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Please contact the school administration to link your children."})]})}),B.length>0&&!c&&e.jsx(ye,{className:"border-blue-200 bg-blue-50",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx(Vn,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-[#0A2540] text-lg mb-2",children:"Select a Child"}),e.jsx("p",{className:"text-gray-600",children:"Please select one of your children from the dropdown above to view their results."})]})}),c&&N.length===0&&e.jsx(ye,{className:"border-orange-200 bg-orange-50",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx(Is,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-[#0A2540] text-lg mb-2",children:"No Results Available"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["No approved results found for ",E?.first_name," ",E?.last_name]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["for ",d," ",m]}),e.jsx("p",{className:"text-gray-500 text-sm mt-3",children:"Results may still be pending approval by the administration."})]})}),c&&N.length>0&&e.jsx("div",{className:"space-y-6",children:N.map(I=>e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#10B981] to-[#059669] text-white rounded-t-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Hs,{className:"mb-1",children:[E?.first_name," ",E?.last_name]}),e.jsxs("p",{className:"text-sm opacity-90",children:[E?.class_name||"N/A","  ",d," ",m]})]}),e.jsx(Ct,{className:"bg-white text-[#10B981] rounded-xl px-4",children:"Approved"})]})}),e.jsxs(ke,{className:"p-6",children:[e.jsx("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-1",children:"Total Score"}),e.jsx("p",{className:"text-2xl text-blue-900 font-bold",children:I.total_score}),e.jsxs("p",{className:"text-sm text-blue-700",children:[I.class_average,"%"]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Zs,{children:[e.jsx(Rh,{asChild:!0,children:e.jsxs(Ce,{className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl flex-1",children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"View Full Result Sheet"]})}),e.jsxs(er,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ur,{children:e.jsxs(hr,{children:["Result Sheet - ",E?.first_name," ",E?.last_name]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(fC,{ref:x,studentId:c,term:d,academicYear:m}),e.jsxs("div",{className:"flex gap-3 justify-end border-t pt-4",children:[e.jsxs(Ce,{onClick:g,variant:"outline",className:"rounded-xl",children:[e.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Print"]}),e.jsxs(Ce,{onClick:y,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})]})]}),e.jsxs(Ce,{onClick:g,variant:"outline",className:"rounded-xl",children:[e.jsx(Lh,{className:"w-4 h-4 mr-2"}),"Print"]}),e.jsxs(Ce,{onClick:y,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download"]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[e.jsx("h4",{className:"text-[#0A2540] font-medium mb-3",children:"Subject Performance"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:I.scores.slice(0,6).map((k,$)=>e.jsx("div",{className:"p-3 bg-white rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-[#0A2540]",children:k.subject_name}),e.jsxs(Ct,{className:`rounded-xl ${k.grade==="A"?"bg-green-100 text-green-800 border-green-300":k.grade==="B"?"bg-blue-100 text-blue-800 border-blue-300":k.grade==="C"?"bg-yellow-100 text-yellow-800 border-yellow-300":k.grade==="D"?"bg-orange-100 text-orange-800 border-orange-300":"bg-red-100 text-red-800 border-red-300"}`,children:[k.total," (",k.grade,")"]})]})},$))}),I.scores.length>6&&e.jsxs("p",{className:"text-sm text-gray-600 mt-3 text-center",children:["... and ",I.scores.length-6," more subjects"]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-900 font-medium mb-2",children:"Class Teacher's Comment:"}),e.jsx("p",{className:"text-blue-900",children:I.class_teacher_comment}),e.jsxs("p",{className:"text-sm text-blue-800 mt-2",children:["- ",I.class_teacher_name]})]}),I.principalComment&&e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-xl border border-purple-200",children:[e.jsx("p",{className:"text-sm text-purple-900 font-medium mb-2",children:"Principal's Comment:"}),e.jsx("p",{className:"text-purple-900",children:I.principal_comment}),e.jsxs("p",{className:"text-sm text-purple-800 mt-2",children:["- ",I.principal_name]})]})]})]},I.id))})]}):e.jsx("div",{className:"p-6",children:e.jsx(ye,{className:"border-red-200 bg-red-50",children:e.jsxs(ke,{className:"p-6 text-center",children:[e.jsx(Is,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),e.jsx("p",{className:"text-red-800",children:"Unable to load parent information"})]})})})}function sM(){const{currentUser:r,students:t,parents:s,feeStructures:n,studentFeeBalances:a,payments:i,getFeeStructureByClass:c,getStudentFeeBalance:A,addPayment:d,updateStudentFeeBalance:u,currentTerm:m,currentAcademicYear:f}=ys(),[x,g]=j.useState(null),[y,b]=j.useState(""),[B,N]=j.useState(""),[E,I]=j.useState(""),[k,$]=j.useState(!1),[z,H]=j.useState(!1),T=r?s.find(ae=>ae.id===r.linkedId):null,V=T?t.filter(ae=>T.studentIds.includes(ae.id)):[],G=x?t.find(ae=>ae.id===x):null,L=G?c(G.classId,m,f):null,F=G?A(G.id,m,f):null,O=G?i.filter(ae=>ae.studentId===G.id&&ae.term===m&&ae.academicYear===f&&ae.status==="Verified"):[],P=()=>{if(!x||!r){he.error("Please select a student");return}if(!y||parseFloat(y)<=0){he.error("Please enter a valid payment amount");return}if(!B){he.error("Please select a payment method");return}const ae=parseFloat(y),K=F?.balance||0;if(ae>K){he.error(`Payment amount exceeds balance (${K.toLocaleString()})`);return}const le=`REC/${new Date().getFullYear()}/${String(i.length+1).padStart(4,"0")}`,ie=E||`TRX${Date.now()}`;d({studentId:x,studentName:`${G?.firstName} ${G?.lastName}`,amount:ae,paymentType:ae>=K?"Full Payment":"Partial Payment",term:m,academicYear:f,paymentMethod:B,reference:ie,recordedBy:r.id,recordedDate:new Date().toISOString(),status:"Verified",receiptNumber:le}),u(x),he.success(`Payment of ${ae.toLocaleString()} successful! Receipt: ${le}`),b(""),N(""),I(""),$(!1)},ce=()=>{F&&(b(F.balance.toString()),$(!0))},W=ae=>{he.success(`Downloading receipt ${ae.receiptNumber}...`)};return T?V.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl text-gray-900 mb-2",children:"Pay School Fees"}),e.jsx("p",{className:"text-gray-600",children:"Make payments for your children's school fees"})]}),e.jsxs(Si,{className:"bg-blue-50 border-blue-200 rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-blue-600"}),e.jsx(Ga,{className:"text-gray-900",children:"No children linked to your account. Please contact the school administrator to link your children."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl text-gray-900 mb-2",children:"Pay School Fees"}),e.jsx("p",{className:"text-gray-600",children:"View fee structures, balances, and make payments for your children"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(ae=>{const K=A(ae.id,m,f),le=c(ae.classId,m,f);return e.jsx(ye,{className:`rounded-xl bg-white border shadow-sm cursor-pointer transition-all ${x===ae.id?"border-[#2563EB] shadow-md":"border-gray-200 hover:border-[#3B82F6]"}`,onClick:()=>g(ae.id),children:e.jsxs(ke,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg text-gray-900 font-medium",children:[ae.firstName," ",ae.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:ae.className})]}),x===ae.id&&e.jsx(Ct,{className:"bg-[#2563EB] text-white border-0",children:"Selected"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Fee:"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:["",le?.totalFee.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Paid:"}),e.jsxs("span",{className:"text-green-600 font-medium",children:["",K?.totalPaid.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Balance:"}),e.jsxs("span",{className:`font-medium ${(K?.balance||0)>0?"text-red-600":"text-green-600"}`,children:["",K?.balance.toLocaleString()||"0"]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(Ct,{className:`${K?.status==="Paid"?"bg-[#10B981] text-white":K?.status==="Partial"?"bg-[#F59E0B] text-white":"bg-[#EF4444] text-white"} border-0`,children:K?.status||"Unpaid"})})]})},ae.id)})}),G&&e.jsxs(e.Fragment,{children:[e.jsxs(ye,{className:"rounded-xl bg-white border border-gray-200 shadow-sm",children:[e.jsx(It,{className:"p-5 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gd,{className:"w-5 h-5 text-[#2563EB]"}),e.jsxs("h3",{className:"text-lg text-gray-900",children:["Fee Structure - ",G.firstName," ",G.lastName," (",G.className,")"]})]}),e.jsx(Ce,{onClick:()=>H(!0),variant:"outline",size:"sm",className:"rounded-xl border-gray-300 text-gray-700",children:"View Details"})]})}),e.jsxs(ke,{className:"p-5",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Fee Required"}),e.jsxs("p",{className:"text-2xl text-gray-900",children:["",L?.totalFee.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Amount Paid"}),e.jsxs("p",{className:"text-2xl text-green-600",children:["",F?.totalPaid.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Balance Due"}),e.jsxs("p",{className:"text-2xl text-red-600",children:["",F?.balance.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Status"}),e.jsx(Ct,{className:`${F?.status==="Paid"?"bg-[#10B981] text-white":F?.status==="Partial"?"bg-[#F59E0B] text-white":"bg-[#EF4444] text-white"} border-0 text-lg`,children:F?.status||"Unpaid"})]})]}),(F?.balance||0)>0&&e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs(Ce,{onClick:()=>$(!0),className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl shadow-sm",children:[e.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Make Partial Payment"]}),e.jsxs(Ce,{onClick:ce,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl shadow-sm",children:[e.jsx(bo,{className:"w-4 h-4 mr-2"}),"Pay Full Balance (",F?.balance.toLocaleString(),")"]})]}),F?.status==="Paid"&&e.jsxs(Si,{className:"bg-green-50 border-green-200 rounded-xl mt-4",children:[e.jsx(Is,{className:"h-4 w-4 text-green-600"}),e.jsxs(Ga,{className:"text-gray-900",children:[" All fees paid for ",m," - ",f]})]})]})]}),e.jsxs(ye,{className:"rounded-xl bg-white border border-gray-200 shadow-sm",children:[e.jsx(It,{className:"p-5 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg text-gray-900",children:"Payment History"})}),e.jsx(ke,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-[#2563EB] border-none hover:bg-[#2563EB]",children:[e.jsx(lt,{className:"text-white",children:"Date"}),e.jsx(lt,{className:"text-white",children:"Receipt No."}),e.jsx(lt,{className:"text-white",children:"Amount"}),e.jsx(lt,{className:"text-white",children:"Payment Type"}),e.jsx(lt,{className:"text-white",children:"Method"}),e.jsx(lt,{className:"text-white",children:"Status"}),e.jsx(lt,{className:"text-white text-center",children:"Action"})]})}),e.jsx(Ln,{children:O.length===0?e.jsx(os,{className:"bg-white",children:e.jsx(Je,{colSpan:7,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(gd,{className:"w-12 h-12 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:"No payment records"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Make your first payment to see history here"})]})})}):O.map(ae=>e.jsxs(os,{className:"bg-white border-b border-gray-100 hover:bg-gray-50",children:[e.jsx(Je,{className:"text-gray-900",children:new Date(ae.recordedDate).toLocaleDateString()}),e.jsx(Je,{className:"text-gray-900 font-mono text-sm",children:ae.receiptNumber}),e.jsxs(Je,{className:"text-gray-900 font-medium",children:["",ae.amount.toLocaleString()]}),e.jsx(Je,{className:"text-gray-600",children:ae.paymentType}),e.jsx(Je,{className:"text-gray-600",children:ae.paymentMethod}),e.jsx(Je,{children:e.jsx(Ct,{className:"bg-[#10B981] text-white border-0",children:ae.status})}),e.jsx(Je,{className:"text-center",children:e.jsxs(Ce,{onClick:()=>W(ae),size:"sm",variant:"ghost",className:"text-[#2563EB] hover:bg-blue-50",children:[e.jsx(Ur,{className:"w-4 h-4 mr-1"}),"Receipt"]})})]},ae.id))})]})})})]})]}),e.jsx(Zs,{open:k,onOpenChange:$,children:e.jsxs(er,{className:"max-w-md rounded-xl bg-white border border-gray-200 text-gray-900",children:[e.jsx(ur,{children:e.jsx(hr,{className:"text-gray-900",children:"Make Payment"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student:"}),e.jsxs("p",{className:"text-lg text-gray-900",children:[G?.firstName," ",G?.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:G?.className})]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Outstanding Balance:"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:["",F?.balance.toLocaleString()||"0"]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-gray-700",children:["Payment Amount () ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Et,{type:"number",placeholder:"Enter amount",value:y,onChange:ae=>b(ae.target.value),className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Maximum: ",F?.balance.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(He,{className:"text-gray-700",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(Qt,{value:B,onValueChange:N,children:[e.jsx(Pt,{className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900",children:e.jsx(Tt,{placeholder:"Select payment method"})}),e.jsxs(Rt,{className:"bg-white border-gray-200",children:[e.jsx(be,{value:"Bank Transfer",className:"text-gray-900",children:"Bank Transfer"}),e.jsx(be,{value:"Cash",className:"text-gray-900",children:"Cash"}),e.jsx(be,{value:"Card Payment",className:"text-gray-900",children:"Card Payment"}),e.jsx(be,{value:"Mobile Money",className:"text-gray-900",children:"Mobile Money"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-gray-700",children:"Transaction Reference (Optional)"}),e.jsx(Et,{placeholder:"Enter transaction reference",value:E,onChange:ae=>I(ae.target.value),className:"h-12 rounded-xl border border-gray-300 bg-white text-gray-900"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(Ce,{onClick:()=>$(!1),variant:"outline",className:"rounded-xl border-gray-300 text-gray-700",children:"Cancel"}),e.jsxs(Ce,{onClick:P,className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Confirm Payment"]})]})]})}),e.jsx(Zs,{open:z,onOpenChange:H,children:e.jsxs(er,{className:"max-w-2xl rounded-xl bg-white border border-gray-200 text-gray-900",children:[e.jsx(ur,{children:e.jsxs(hr,{className:"text-gray-900",children:["Fee Structure - ",G?.className]})}),L&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[m," - ",f]})}),e.jsxs(Un,{children:[e.jsx(In,{children:e.jsxs(os,{className:"bg-gray-100",children:[e.jsx(lt,{className:"text-gray-900",children:"Fee Item"}),e.jsx(lt,{className:"text-gray-900 text-right",children:"Amount ()"})]})}),e.jsxs(Ln,{children:[e.jsxs(os,{className:"border-b border-gray-100",children:[e.jsx(Je,{className:"text-gray-900",children:"Tuition Fee"}),e.jsx(Je,{className:"text-gray-900 text-right",children:L.tuitionFee.toLocaleString()})]}),e.jsxs(os,{className:"border-b border-gray-100",children:[e.jsx(Je,{className:"text-gray-900",children:"Development Levy"}),e.jsx(Je,{className:"text-gray-900 text-right",children:L.developmentLevy.toLocaleString()})]}),e.jsxs(os,{className:"border-b border-gray-100",children:[e.jsx(Je,{className:"text-gray-900",children:"Sports Fee"}),e.jsx(Je,{className:"text-gray-900 text-right",children:L.sportsFee.toLocaleString()})]}),e.jsxs(os,{className:"border-b border-gray-100",children:[e.jsx(Je,{className:"text-gray-900",children:"Exam Fee"}),e.jsx(Je,{className:"text-gray-900 text-right",children:L.examFee.toLocaleString()})]}),e.jsxs(os,{className:"border-b border-gray-100",children:[e.jsx(Je,{className:"text-gray-900",children:"Books Fee"}),e.jsx(Je,{className:"text-gray-900 text-right",children:L.booksFee.toLocaleString()})]}),e.jsxs(os,{className:"border-b border-gray-100",children:[e.jsx(Je,{className:"text-gray-900",children:"Uniform Fee"}),e.jsx(Je,{className:"text-gray-900 text-right",children:L.uniformFee.toLocaleString()})]}),e.jsxs(os,{className:"border-b border-gray-100",children:[e.jsx(Je,{className:"text-gray-900",children:"Transport Fee"}),e.jsx(Je,{className:"text-gray-900 text-right",children:L.transportFee.toLocaleString()})]}),e.jsxs(os,{className:"bg-blue-50",children:[e.jsx(Je,{className:"text-gray-900 font-bold",children:"TOTAL FEE"}),e.jsxs(Je,{className:"text-gray-900 font-bold text-right text-lg",children:["",L.totalFee.toLocaleString()]})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(Ce,{onClick:()=>H(!1),variant:"outline",className:"rounded-xl border-gray-300 text-gray-700",children:"Close"})})]})})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs(Si,{className:"bg-yellow-50 border-yellow-200 rounded-xl",children:[e.jsx(Is,{className:"h-4 w-4 text-yellow-600"}),e.jsx(Ga,{className:"text-gray-900",children:"Parent account not found. Please contact the school administrator."})]})})}function rM(){const{currentUser:r,parents:t,students:s,getAttendancesByStudent:n,currentTerm:a,currentAcademicYear:i}=ys(),[c,A]=j.useState(0),[d,u]=j.useState("summary"),m=t.find(H=>H.id===r?.linkedId),f=m&&m.studentIds?s.filter(H=>m.studentIds.includes(H.id)):[],x=s.find(H=>H.id===c),g=c?n(c).filter(H=>H.term===a&&H.academicYear===i):[],y=g.filter(H=>H.status==="Present").length,b=g.filter(H=>H.status==="Absent").length,B=g.filter(H=>H.status==="Late").length,N=g.filter(H=>H.status==="Excused").length,E=g.length,I=E>0?((y+B)/E*100).toFixed(1):0,k=g.reduce((H,T)=>{const V=T.date.substring(0,7);return H[V]||(H[V]=[]),H[V].push(T),H},{}),$=H=>{switch(H){case"Present":return e.jsx(Cc,{className:"w-5 h-5 text-green-600"});case"Absent":return e.jsx(ba,{className:"w-5 h-5 text-red-600"});case"Late":return e.jsx(Ci,{className:"w-5 h-5 text-yellow-600"});case"Excused":return e.jsx(Is,{className:"w-5 h-5 text-blue-600"})}},z=H=>{switch(H){case"Present":return"bg-green-100 text-green-700 border-green-200";case"Absent":return"bg-red-100 text-red-700 border-red-200";case"Late":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"Excused":return"bg-blue-100 text-blue-700 border-blue-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-slate-900 mb-2",children:"View Attendance"}),e.jsx("p",{className:"text-slate-600",children:"Monitor your child's attendance records"})]}),e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-slate-700",children:"Select Child"}),e.jsxs("select",{value:c,onChange:H=>A(Number(H.target.value)),className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:0,children:"Choose a child..."}),f.map(H=>e.jsxs("option",{value:H.id,children:[H.firstName," ",H.lastName," - ",H.className]},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-slate-700",children:"View Mode"}),e.jsxs("select",{value:d,onChange:H=>u(H.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"summary",children:"Summary View"}),e.jsx("option",{value:"detailed",children:"Detailed View"})]})]})]}),x&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-200 rounded-full flex items-center justify-center",children:e.jsx(Qs,{className:"w-6 h-6 text-blue-700"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-slate-900",children:[x.firstName," ",x.lastName]}),e.jsxs("p",{className:"text-slate-600 text-sm",children:[x.className,"  ",x.admissionNumber]})]})]})})]}),c>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsxs(ye,{className:"p-4 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsx("p",{className:"text-slate-600 text-sm mb-1",children:"Total Days"}),e.jsx("p",{className:"text-2xl text-slate-900",children:E})]}),e.jsxs(ye,{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Cc,{className:"w-4 h-4 text-green-600"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Present"})]}),e.jsx("p",{className:"text-2xl text-green-900",children:y})]}),e.jsxs(ye,{className:"p-4 bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ba,{className:"w-4 h-4 text-red-600"}),e.jsx("p",{className:"text-red-700 text-sm",children:"Absent"})]}),e.jsx("p",{className:"text-2xl text-red-900",children:b})]}),e.jsxs(ye,{className:"p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ci,{className:"w-4 h-4 text-yellow-600"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Late"})]}),e.jsx("p",{className:"text-2xl text-yellow-900",children:B})]}),e.jsxs(ye,{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Is,{className:"w-4 h-4 text-blue-600"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Excused"})]}),e.jsx("p",{className:"text-2xl text-blue-900",children:N})]}),e.jsxs(ye,{className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ed,{className:"w-4 h-4 text-purple-600"}),e.jsx("p",{className:"text-purple-700 text-sm",children:"Rate"})]}),e.jsxs("p",{className:"text-2xl text-purple-900",children:[I,"%"]})]})]}),c>0&&E>0&&e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"text-slate-800 mb-4",children:"Attendance Performance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-slate-700",children:"Attendance Rate"}),e.jsxs("span",{className:"text-slate-900",children:[I,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${Number(I)>=90?"bg-green-600":Number(I)>=75?"bg-yellow-600":"bg-red-600"}`,style:{width:`${I}%`}})})]}),e.jsx("div",{className:`p-4 rounded-lg border \${
              Number(attendanceRate) >= 90
                ? 'bg-green-50 border-green-200'
                : Number(attendanceRate) >= 75
                ? 'bg-yellow-50 border-yellow-200'
                : 'bg-red-50 border-red-200'
            }`,children:e.jsx("p",{className:`${Number(I)>=90?"text-green-800":Number(I)>=75?"text-yellow-800":"text-red-800"}`,children:Number(I)>=90?" Excellent attendance! Keep up the great work.":Number(I)>=75?" Good attendance, but there is room for improvement.":" Attendance needs improvement. Please ensure regular school attendance."})})]})]}),c>0&&d==="detailed"&&e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"text-slate-800 mb-4",children:"Detailed Attendance Records"}),Object.keys(k).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(jn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"No attendance records found for this term"})]}):e.jsx("div",{className:"space-y-6",children:Object.keys(k).sort().reverse().map(H=>{const T=new Date(H+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"}),V=k[H];return e.jsxs("div",{children:[e.jsx("h4",{className:"text-slate-700 mb-3",children:T}),e.jsx("div",{className:"space-y-2",children:V.sort((G,L)=>L.date.localeCompare(G.date)).map(G=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[$(G.status),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-900",children:new Date(G.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),G.remarks&&e.jsxs("p",{className:"text-slate-600 text-sm mt-1",children:["Remarks: ",G.remarks]})]})]}),e.jsx("span",{className:`px-4 py-2 rounded-lg border ${z(G.status)}`,children:G.status})]},G.id))})]},H)})})]}),c>0&&d==="summary"&&E>0&&e.jsxs(ye,{className:"p-6 bg-white rounded-xl shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"text-slate-800 mb-4",children:"Attendance Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-slate-700 mb-3",children:"Status Breakdown"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Cc,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-green-900",children:"Present"})]}),e.jsxs("span",{className:"text-green-900",children:[y," days"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ba,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-red-900",children:"Absent"})]}),e.jsxs("span",{className:"text-red-900",children:[b," days"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ci,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-yellow-900",children:"Late"})]}),e.jsxs("span",{className:"text-yellow-900",children:[B," days"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Is,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-blue-900",children:"Excused"})]}),e.jsxs("span",{className:"text-blue-900",children:[N," days"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-slate-700 mb-3",children:"Recent Absences"}),e.jsxs("div",{className:"space-y-2",children:[g.filter(H=>H.status==="Absent").sort((H,T)=>T.date.localeCompare(H.date)).slice(0,5).map(H=>e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-red-900 text-sm",children:new Date(H.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),H.remarks&&e.jsx("p",{className:"text-red-700 text-xs mt-1",children:H.remarks})]},H.id)),b===0&&e.jsxs("div",{className:"p-8 text-center text-slate-500",children:[e.jsx(Cc,{className:"w-12 h-12 mx-auto mb-2 text-green-500"}),e.jsx("p",{children:"No absences recorded!"})]})]})]})]})]}),c===0&&e.jsxs(ye,{className:"p-12 bg-white rounded-xl shadow-sm border border-slate-200 text-center",children:[e.jsx(jn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-slate-900 mb-2",children:"No Child Selected"}),e.jsx("p",{className:"text-slate-600",children:"Please select a child to view their attendance records"})]}),c>0&&E===0&&e.jsxs(ye,{className:"p-12 bg-white rounded-xl shadow-sm border border-slate-200 text-center",children:[e.jsx(Is,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-slate-900 mb-2",children:"No Attendance Records"}),e.jsx("p",{className:"text-slate-600",children:"No attendance has been recorded for this student in the current term"})]})]})}function nM({onNavigateToResults:r,onNavigateToFees:t}){const{currentUser:s,parents:n,students:a,classes:i,compiledResults:c,payments:A,currentTerm:d,currentAcademicYear:u,getParentChildren:m}=ys(),f=s?n.find(g=>g.id===s.linked_id):null,x=j.useMemo(()=>f?m(f.id).map(y=>{const b=c.find(k=>k.student_id===y.id&&k.term===d&&k.academic_year===u&&k.status==="Approved"),N=A.filter(k=>k.student_id===y.id).reduce((k,$)=>k+$.amount,0),E=15e4,I=E-N;return{id:y.id,firstName:y.firstName,lastName:y.lastName,fullName:y.fullName,admissionNumber:y.admissionNumber,className:y.className,level:y.classLevel,gender:y.gender,dateOfBirth:y.dateOfBirth,photoUrl:y.photoUrl,status:y.status||"Active",classTeacher:i.find(k=>k.id===y.classId)?.classTeacher||"Not Assigned",hasResult:b!==void 0,averageScore:b?.average_score||0,position:b?.position||0,totalStudents:b?.total_students||0,feeBalance:I,totalFee:E,paymentStatus:I>0?"Pending":"Paid"}}):[],[f,m,c,A,d,u,i]);return f?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#0A2540] mb-2",children:"My Children"}),e.jsx("p",{className:"text-gray-600",children:"View and manage information for your linked children"})]}),e.jsxs(ye,{className:"border-[#0A2540]/10",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#3B82F6] to-[#2563EB] text-white rounded-t-xl",children:e.jsxs(Hs,{className:"flex items-center gap-2",children:[e.jsx(Zl,{className:"w-5 h-5"}),"Parent/Guardian Information"]})}),e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Zl,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),e.jsxs("p",{className:"text-[#0A2540] font-medium",children:[f.firstName," ",f.lastName]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(If,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:f.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(Uf,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:f.email})]})]})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Children"}),e.jsx("p",{className:"text-[#0A2540] text-2xl font-bold",children:x.length})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(G4,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Active Students"}),e.jsx("p",{className:"text-[#0A2540] text-2xl font-bold",children:x.filter(g=>g.status==="Active").length})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Yl,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsx(ke,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Current Term"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:d}),e.jsx("p",{className:"text-gray-600 text-sm",children:u})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(jn,{className:"w-6 h-6 text-purple-600"})})]})})})]}),x.length===0?e.jsx(ye,{className:"border-[#0A2540]/10",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-[#0A2540] text-lg mb-2",children:"No Children Linked"}),e.jsx("p",{className:"text-gray-600",children:"You don't have any children linked to your account yet."}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Please contact the school administration to link your children to your parent portal."})]})}):e.jsx("div",{className:"space-y-6",children:x.map(g=>e.jsxs(ye,{className:"border-[#0A2540]/10 hover:shadow-lg transition-all",children:[e.jsx(It,{className:"bg-gradient-to-r from-[#10B981] to-[#059669] text-white rounded-t-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Sc,{className:"w-16 h-16 border-4 border-white",children:g.photoUrl?e.jsx("img",{src:g.photoUrl,alt:g.fullName,className:"w-full h-full object-cover"}):e.jsxs(Ec,{className:"bg-white text-[#10B981] text-xl",children:[g.firstName[0],g.lastName[0]]})}),e.jsxs("div",{children:[e.jsx(Hs,{className:"text-white mb-1",children:g.fullName}),e.jsx("p",{className:"text-white/90 text-sm",children:g.admissionNumber})]})]}),e.jsx(Ct,{className:`rounded-xl ${g.status==="Active"?"bg-white text-[#10B981]":"bg-yellow-100 text-yellow-800"}`,children:g.status})]})}),e.jsxs(ke,{className:"p-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Class"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yl,{className:"w-4 h-4 text-blue-600"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:g.className})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Level"}),e.jsx(Ct,{variant:"outline",className:"rounded-xl",children:g.level})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Gender"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:g.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Date of Birth"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jn,{className:"w-4 h-4 text-purple-600"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:new Date(g.dateOfBirth).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Class Teacher"}),e.jsx("p",{className:"text-[#0A2540] font-medium",children:g.classTeacher})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("p",{className:"text-sm text-blue-900",children:["Latest Result (",d,")"]}),g.hasResult&&e.jsx(Ct,{className:"bg-green-100 text-green-800 border-green-300 rounded-xl",children:"Available"})]}),g.hasResult?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-900",children:"Average Score:"}),e.jsxs("span",{className:"text-blue-900 font-bold",children:[g.averageScore,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-900",children:"Position:"}),e.jsxs("span",{className:"text-blue-900 font-bold",children:[g.position,"/",g.totalStudents]})]}),e.jsxs(Ce,{onClick:r,size:"sm",className:"w-full mt-2 bg-[#3B82F6] hover:bg-[#2563EB] text-white rounded-xl",children:[e.jsx(Vn,{className:"w-4 h-4 mr-2"}),"View Full Result"]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-blue-800 text-sm",children:"No result available yet"}),e.jsx("p",{className:"text-blue-700 text-xs mt-1",children:"Result pending approval"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-green-900",children:"Fee Status"}),e.jsx(Ct,{className:`rounded-xl ${g.paymentStatus==="Paid"?"bg-green-100 text-green-800 border-green-300":"bg-yellow-100 text-yellow-800 border-yellow-300"}`,children:g.paymentStatus})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-900",children:"Total Fee:"}),e.jsxs("span",{className:"text-green-900 font-bold",children:["",g.totalFee.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-900",children:"Balance:"}),e.jsxs("span",{className:`font-bold ${g.feeBalance>0?"text-red-600":"text-green-600"}`,children:["",g.feeBalance.toLocaleString()]})]}),g.feeBalance>0&&e.jsxs(Ce,{onClick:t,size:"sm",className:"w-full mt-2 bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[e.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Pay Fees"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs(Ce,{onClick:r,variant:"outline",className:"rounded-xl border-[#0A2540]/20",children:[e.jsx(kn,{className:"w-4 h-4 mr-2"}),"View Results"]}),e.jsxs(Ce,{onClick:t,variant:"outline",className:"rounded-xl border-[#0A2540]/20",children:[e.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Fee History"]}),e.jsxs(Ce,{variant:"outline",className:"rounded-xl border-[#0A2540]/20",children:[e.jsx(jn,{className:"w-4 h-4 mr-2"}),"View Attendance"]})]})]})]},g.id))})]}):e.jsx("div",{className:"p-6",children:e.jsx(ye,{className:"border-red-200 bg-red-50",children:e.jsx(ke,{className:"p-6 text-center",children:e.jsx("p",{className:"text-red-800",children:"Unable to load parent information"})})})})}function aM({onLogout:r}){const{currentUser:t,parents:s,getParentChildren:n,getParentPermissions:a,getUnreadNotifications:i,notifications:c,getStudentFeeBalance:A,currentTerm:d,currentAcademicYear:u,createPaymentAPI:m,loadPaymentsFromAPI:f}=ys(),[x,g]=j.useState("dashboard"),[y,b]=j.useState(null),[B,N]=j.useState(!1),E=t?s.find(F=>F.id===t.linked_id):null,I=E?`${E.firstName} ${E.lastName}`:"Parent",k=t?i().length:0,$=E?n(E.id):[],z={childrenCount:$.length,hasFinancialObligations:$.some(F=>F.feeBalance>0),totalOutstandingBalance:$.reduce((F,O)=>F+(O.feeBalance||0),0)},H=$.map(F=>({id:F.id,name:F.fullName,class:F.className,balance:F.feeBalance,photo:F.photoUrl||"",totalFee:F.totalFees})),T=c.filter(F=>F.targetAudience==="parents"&&F.title.includes("Fee Payment")).sort((F,O)=>new Date(O.sentDate).getTime()-new Date(F.sentDate).getTime()).slice(0,5),V=[{icon:e.jsx(lp,{className:"w-5 h-5"}),label:"Dashboard",id:"dashboard"},{icon:e.jsx(Qs,{className:"w-5 h-5"}),label:"My Children",id:"my-children"},{icon:e.jsx(Vn,{className:"w-5 h-5"}),label:"View Results",id:"view-results"},{icon:e.jsx(Xl,{className:"w-5 h-5"}),label:"Pay Fees",id:"pay-fees"},{icon:e.jsx(Ci,{className:"w-5 h-5"}),label:"View Attendance",id:"view-attendance"},{icon:e.jsx(jn,{className:"w-5 h-5"}),label:"Exam Timetable",id:"exam-timetable"},{icon:e.jsx(_u,{className:"w-5 h-5"}),label:"Change Password",id:"change-password"}],G=F=>{F==="logout"?r():g(F)},L=({child:F})=>{const[O,P]=j.useState(""),[ce,W]=j.useState("bank_transfer"),[ae,K]=j.useState(!1),le=async()=>{if(!O||parseFloat(O)<=0){he.error("Please enter a valid payment amount");return}if(parseFloat(O)>F.balance){he.error("Payment amount cannot exceed outstanding balance");return}K(!0);try{const ie={studentId:F.id,amount:parseFloat(O),paymentType:"fee_payment",paymentMethod:ce,term:d,academicYear:u,transactionReference:`TRX${Date.now()}`,receiptNumber:`RCP${Date.now()}`,recordedBy:t?.id,notes:`Payment by ${I} for ${F.name}`};if(await m(ie)){he.success(`Payment of ${parseFloat(O).toLocaleString()} submitted successfully! Receipt: ${ie.receiptNumber}`),await f(),P(""),W("bank_transfer"),K(!1);const R=document.querySelector("[data-payment-dialog]");R&&R.close()}}catch(ie){console.error("Payment error:",ie),he.error("Payment submission failed. Please try again."),K(!1)}};return e.jsxs(Zs,{children:[e.jsx(Rh,{asChild:!0,children:e.jsx(Ce,{className:"bg-[#3B82F6] text-white hover:bg-[#2563EB] rounded-lg shadow-clinical hover:shadow-clinical-lg transition-all","data-payment-dialog-trigger":!0,children:"Pay Now"})}),e.jsxs(er,{className:"max-w-md rounded-lg bg-white border border-[#E5E7EB] text-[#1F2937]","data-payment-dialog":!0,children:[e.jsx(ur,{children:e.jsxs(hr,{className:"text-[#1F2937]",children:["Pay Fees - ",F.name]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-[#6B7280]",children:"Outstanding Balance"}),e.jsxs("p",{className:"text-[#1F2937] font-semibold",children:["",F.balance.toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Amount to Pay ()"}),e.jsx(Et,{type:"number",placeholder:"Enter amount",value:O,onChange:ie=>P(ie.target.value),className:"h-12 rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] text-[#1F2937]",max:F.balance,min:"1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Payment Method"}),e.jsxs(Qt,{value:ce,onValueChange:W,children:[e.jsx(Pt,{className:"h-12 rounded-lg border border-[#E5E7EB] bg-[#F9FAFB] text-[#1F2937]",children:e.jsx(Tt,{placeholder:"Select payment method"})}),e.jsxs(Rt,{children:[e.jsx(be,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(be,{value:"cash",children:"Cash"}),e.jsx(be,{value:"pos",children:"POS"}),e.jsx(be,{value:"cheque",children:"Cheque"}),e.jsx(be,{value:"online_payment",children:"Online Payment"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"text-[#1F2937]",children:"Upload Payment Proof (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-[#E5E7EB] rounded-lg p-4 text-center cursor-pointer hover:border-[#3B82F6] transition-colors bg-[#F9FAFB]",children:[e.jsx(yo,{className:"w-6 h-6 mx-auto mb-2 text-[#6B7280]"}),e.jsx("p",{className:"text-[#6B7280] text-sm",children:"Click to upload receipt/proof"}),e.jsx("p",{className:"text-xs text-[#6B7280] mt-1",children:"PNG, JPG up to 5MB"})]})]}),e.jsx(Ce,{className:"w-full h-12 bg-[#10B981] text-white hover:bg-[#059669] rounded-lg shadow-clinical",onClick:le,disabled:ae,children:ae?"Processing...":"Submit Payment"})]})]})]})};return e.jsxs("div",{className:"min-h-screen bg-[#F4F6F9]",children:[e.jsx(xp,{items:V,activeItem:x,onItemClick:G}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx(vp,{userName:I,userRole:"Parent",notificationCount:k,onLogout:r,onNotificationClick:()=>N(!0)}),e.jsxs("main",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:[x==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-[#1F2937] mb-2",children:"Parent Dashboard"}),e.jsx("p",{className:"text-[#6B7280]",children:"Monitor your children's academic progress and manage fees"})]}),e.jsx(ye,{className:"rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200",children:e.jsx(ke,{className:"p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qs,{className:"w-6 h-6 text-green-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#1F2937] font-medium mb-2",children:"Your Access & Responsibilities"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-[#6B7280]",children:"View Results"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-[#6B7280]",children:"View Attendance"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-[#6B7280]",children:"Make Payments"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-[#6B7280]",children:"View Reports"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-[#6B7280]",children:"View Timetable"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${z.hasFinancialObligations?"bg-orange-500":"bg-green-500"}`}),e.jsx("span",{className:"text-[#6B7280]",children:z.hasFinancialObligations?"Fees Due":"Fees Paid"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-[#6B7280]",children:["Children: ",e.jsx("strong",{className:"text-[#1F2937]",children:z.childrenCount})]}),z.hasFinancialObligations&&e.jsxs("span",{className:"text-orange-600",children:["Outstanding: ",e.jsxs("strong",{children:["",z.totalOutstandingBalance.toLocaleString()]})]})]})]})]})})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:H.map(F=>e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical hover:shadow-clinical-lg transition-all hover-lift",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#3B82F6] flex items-center justify-center",children:e.jsx(Zl,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[#1F2937]",children:F.name}),e.jsx("p",{className:"text-[#6B7280]",children:F.class})]})]})}),e.jsxs(ke,{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Total Fee"}),e.jsxs("p",{className:"text-[#1F2937] font-medium",children:["",F.totalFee.toLocaleString()]})]}),e.jsxs("div",{className:"p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]",children:[e.jsx("p",{className:"text-xs text-[#6B7280] mb-1",children:"Balance"}),e.jsxs("p",{className:F.balance>0?"text-[#EF4444] font-medium":"text-[#10B981] font-medium",children:["",F.balance.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ce,{onClick:()=>g("view-results"),variant:"outline",className:"flex-1 rounded-lg border-[#E5E7EB] text-[#6B7280] hover:bg-[#F9FAFB] hover:text-[#1F2937]",children:[e.jsx(Vn,{className:"w-4 h-4 mr-2"}),"View Result"]}),F.balance>0&&e.jsx(L,{child:F})]}),F.balance===0&&e.jsx("div",{className:"p-3 bg-[#DCFCE7] border border-[#10B981] rounded-lg text-center",children:e.jsx(Ct,{className:"bg-[#10B981] text-white border-0",children:"Fully Paid"})})]})]},F.id))}),T.length>0&&e.jsxs(ye,{className:"rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-[#10B981] shadow-clinical-lg",children:[e.jsx(It,{className:"p-5 border-b border-[#10B981]/20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gd,{className:"w-5 h-5 text-[#10B981]"}),e.jsx("h3",{className:"text-[#10B981]",children:"Fee Payment Confirmations"}),e.jsx(Ct,{className:"ml-auto bg-[#10B981] text-white border-0",children:T.length})]})}),e.jsxs(ke,{className:"space-y-3 p-5 pt-5",children:[T.map(F=>e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border border-[#10B981]/30 shadow-sm",children:[e.jsx(kr,{className:"w-5 h-5 text-[#10B981] flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[#1F2937] font-medium",children:F.title}),e.jsx("p",{className:"text-sm text-[#6B7280] mt-1",children:F.message}),e.jsxs("p",{className:"text-xs text-[#6B7280] mt-2",children:[new Date(F.sentDate).toLocaleDateString()," at ",new Date(F.sentDate).toLocaleTimeString()]})]})]},F.id)),e.jsx(Ce,{onClick:()=>g("notifications"),variant:"outline",className:"w-full rounded-lg border-[#10B981] text-[#10B981] hover:bg-[#10B981]/10",children:"View All Notifications"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937]",children:"Recent Notifications"})}),e.jsxs(ke,{className:"space-y-3 p-5 pt-5",children:[c.filter(F=>(F.targetAudience==="parents"||F.targetAudience==="all")&&!F.title.includes("Fee Payment")).sort((F,O)=>new Date(O.sentDate).getTime()-new Date(F.sentDate).getTime()).slice(0,3).map(F=>{const O=P=>P==="success"?"bg-[#10B981]":P==="warning"?"bg-[#F59E0B]":P==="error"?"bg-[#EF4444]":"bg-[#3B82F6]";return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB] hover:border-[#3B82F6] hover:shadow-clinical transition-all",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${O(F.type)}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[#1F2937] font-medium",children:F.title}),e.jsxs("p",{className:"text-xs text-[#6B7280] mt-1",children:[F.message.slice(0,60),"..."]}),e.jsx("p",{className:"text-xs text-[#6B7280] mt-1",children:new Date(F.sentDate).toLocaleDateString()})]})]},F.id)}),(c||[]).filter(F=>F.targetAudience==="parents"||F.targetAudience==="all").length===0&&e.jsx("div",{className:"text-center py-8 text-[#6B7280]",children:"No notifications yet"})]})]}),e.jsxs(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical",children:[e.jsx(It,{className:"p-5 border-b border-[#E5E7EB]",children:e.jsx("h3",{className:"text-[#1F2937]",children:"Quick Actions"})}),e.jsxs(ke,{className:"space-y-3 p-5 pt-5",children:[e.jsxs(Ce,{onClick:()=>g("view-results"),className:"w-full justify-start bg-[#F9FAFB] text-[#1F2937] hover:bg-[#3B82F6] hover:text-white rounded-lg h-12 border border-[#E5E7EB] transition-all",children:[e.jsx(Vn,{className:"w-5 h-5 mr-3"}),"View Academic Reports"]}),e.jsxs(Ce,{onClick:()=>g("pay-fees"),className:"w-full justify-start bg-[#F9FAFB] text-[#1F2937] hover:bg-[#3B82F6] hover:text-white rounded-lg h-12 border border-[#E5E7EB] transition-all",children:[e.jsx(Xl,{className:"w-5 h-5 mr-3"}),"Make Payment"]}),e.jsxs(Ce,{onClick:()=>g("notifications"),className:"w-full justify-start bg-[#F9FAFB] text-[#1F2937] hover:bg-[#3B82F6] hover:text-white rounded-lg h-12 border border-[#E5E7EB] transition-all",children:[e.jsx(gd,{className:"w-5 h-5 mr-3"}),"View Payment History"]}),e.jsxs(Ce,{onClick:()=>g("view-results"),className:"w-full justify-start bg-[#F9FAFB] text-[#1F2937] hover:bg-[#3B82F6] hover:text-white rounded-lg h-12 border border-[#E5E7EB] transition-all",children:[e.jsx(Ur,{className:"w-5 h-5 mr-3"}),"Download Report Card"]})]})]})]})]}),x==="my-children"&&e.jsx(nM,{onNavigateToResults:()=>g("view-results"),onNavigateToFees:()=>g("pay-fees")}),x==="view-results"&&e.jsx(tM,{}),x==="performance-reports"&&e.jsx(eM,{}),x==="pay-fees"&&e.jsx(sM,{}),x==="change-password"&&e.jsx(gv,{}),x==="view-attendance"&&e.jsx(rM,{}),x==="exam-timetable"&&e.jsx(ZB,{userRole:"parent"}),!["dashboard","my-children","view-results","performance-reports","pay-fees","change-password","view-attendance","exam-timetable"].includes(x)&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(ye,{className:"rounded-lg bg-white border border-[#E5E7EB] shadow-clinical max-w-md w-full",children:e.jsxs(ke,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#3B82F6] flex items-center justify-center mx-auto mb-4 text-white",children:V.find(F=>F.id===x)?.icon}),e.jsx("h3",{className:"text-[#1F2937] mb-3",children:V.find(F=>F.id===x)?.label}),e.jsxs("p",{className:"text-[#6B7280]",children:["This section contains the functionality for ",V.find(F=>F.id===x)?.label.toLowerCase(),"."]})]})})})})]})]}),e.jsx(Zs,{open:B,onOpenChange:N,children:e.jsx(er,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:e.jsx(jp,{})})})]})}const iM="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function oM(r){const[t,s]=j.useState(!1),n=()=>{s(!0)},{src:a,alt:i,style:c,className:A,...d}=r;return t?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${A??""}`,style:c,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:iM,alt:"Error loading image",...d,"data-original-url":a})})}):e.jsx("img",{src:a,alt:i,className:A,style:c,...d,onError:n})}function lM({onClose:r}){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between animate-in fade-in slide-in-from-top-2",children:[e.jsx(Ce,{onClick:r,variant:"outline",className:"rounded-xl border-2 border-[#0A2540] text-[#0A2540] hover:bg-[#0A2540] hover:text-white shadow-md",children:" Back"}),e.jsxs(Ce,{className:"bg-[#FFD700] text-[#0A2540] hover:bg-[#FFD700]/90 rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]}),e.jsxs(ye,{className:"bg-white rounded-2xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#0A2540] to-[#0d3558] text-white p-8 text-center",children:[e.jsx("div",{className:"flex items-center justify-center gap-4 mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center shadow-xl",children:e.jsx(Lf,{className:"w-10 h-10 text-[#0A2540]"})})}),e.jsx("h1",{className:"text-3xl mb-2 text-white",children:"Graceland Royal Academy Gombe"}),e.jsx("p",{className:"text-[#FFD700] italic text-lg",children:'"Wisdom & Illumination"'}),e.jsx("p",{className:"text-white/80 text-sm mt-2",children:"P.O. Box XXX, Gombe State, Nigeria"}),e.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-white/10 rounded-full backdrop-blur-sm",children:e.jsx("p",{className:"text-sm text-white",children:"Terminal Report - Second Term 2024/2025"})})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-start gap-6 mb-6 pb-6 border-b-2 border-gray-200",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg bg-gray-200 flex-shrink-0 overflow-hidden",children:e.jsx(oM,{src:"",alt:"Student",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student Name"}),e.jsx("p",{className:"text-[#0A2540]",children:"Fatima Abubakar Mohammed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student ID"}),e.jsx("p",{className:"text-[#0A2540]",children:"GRA/2024/0045"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Class"}),e.jsx("p",{className:"text-[#0A2540]",children:"JSS 2A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Session"}),e.jsx("p",{className:"text-[#0A2540]",children:"2024/2025"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Term"}),e.jsx("p",{className:"text-[#0A2540]",children:"Second Term"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Number in Class"}),e.jsx("p",{className:"text-[#0A2540]",children:"45"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg text-[#0A2540] mb-4",children:"Academic Performance"}),e.jsx("div",{className:"border-2 border-gray-200 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-[#0A2540] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Subject"}),e.jsx("th",{className:"p-3 text-center",children:"1st Test"}),e.jsx("th",{className:"p-3 text-center",children:"2nd Test"}),e.jsx("th",{className:"p-3 text-center",children:"Exam"}),e.jsx("th",{className:"p-3 text-center",children:"Total"}),e.jsx("th",{className:"p-3 text-center",children:"Grade"}),e.jsx("th",{className:"p-3 text-center",children:"Position"})]})}),e.jsxs("tbody",{children:[[{subject:"Mathematics",test1:18,test2:17,exam:50,total:85,grade:"A",position:"3rd"},{subject:"English Language",test1:16,test2:15,exam:47,total:78,grade:"B",position:"7th"},{subject:"Basic Science",test1:17,test2:18,exam:47,total:82,grade:"A",position:"4th"},{subject:"Social Studies",test1:15,test2:16,exam:45,total:76,grade:"B",position:"8th"},{subject:"Computer Studies",test1:19,test2:18,exam:51,total:88,grade:"A",position:"2nd"},{subject:"Basic Technology",test1:16,test2:17,exam:48,total:81,grade:"A",position:"5th"},{subject:"Home Economics",test1:18,test2:17,exam:49,total:84,grade:"A",position:"3rd"},{subject:"Civic Education",test1:17,test2:16,exam:46,total:79,grade:"B",position:"6th"},{subject:"Physical & Health Ed.",test1:18,test2:19,exam:52,total:89,grade:"A+",position:"1st"},{subject:"CRS/IRS",test1:16,test2:17,exam:47,total:80,grade:"A",position:"5th"}].map((t,s)=>e.jsxs("tr",{className:s%2===0?"bg-gray-50":"bg-white",children:[e.jsx("td",{className:"p-3",children:t.subject}),e.jsx("td",{className:"p-3 text-center",children:t.test1}),e.jsx("td",{className:"p-3 text-center",children:t.test2}),e.jsx("td",{className:"p-3 text-center",children:t.exam}),e.jsx("td",{className:"p-3 text-center",children:t.total}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded ${t.grade.includes("A")?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:t.grade})}),e.jsx("td",{className:"p-3 text-center",children:t.position})]},s)),e.jsxs("tr",{className:"bg-[#0A2540] text-white",children:[e.jsx("td",{className:"p-3",colSpan:4,children:"Total Score"}),e.jsx("td",{className:"p-3 text-center",children:"822/1000"}),e.jsx("td",{className:"p-3 text-center",colSpan:2,children:"Average: 82.2%"})]})]})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-[#FFD700]/10 border-2 border-[#FFD700] rounded-xl text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Overall Position"}),e.jsx("p",{className:"text-2xl text-[#0A2540]",children:"5th/45"})]}),e.jsxs("div",{className:"p-4 bg-green-50 border-2 border-green-200 rounded-xl text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Grade"}),e.jsx("p",{className:"text-2xl text-green-700",children:"A"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border-2 border-blue-200 rounded-xl text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Percentage"}),e.jsx("p",{className:"text-2xl text-blue-700",children:"82.2%"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg text-[#0A2540] mb-3",children:"Affective Domain"}),e.jsx("div",{className:"border-2 border-gray-200 rounded-xl overflow-hidden",children:e.jsx("table",{className:"w-full text-sm",children:e.jsx("tbody",{children:[{trait:"Punctuality",rating:5},{trait:"Neatness",rating:5},{trait:"Politeness",rating:4},{trait:"Honesty",rating:5},{trait:"Relationship with Others",rating:4}].map((t,s)=>e.jsxs("tr",{className:s%2===0?"bg-gray-50":"bg-white",children:[e.jsx("td",{className:"p-3",children:t.trait}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("div",{className:"flex justify-end gap-1",children:[1,2,3,4,5].map(n=>e.jsx("div",{className:`w-4 h-4 rounded-full ${n<=t.rating?"bg-[#FFD700]":"bg-gray-300"}`},n))})})]},s))})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg text-[#0A2540] mb-3",children:"Psychomotor Domain"}),e.jsx("div",{className:"border-2 border-gray-200 rounded-xl overflow-hidden",children:e.jsx("table",{className:"w-full text-sm",children:e.jsx("tbody",{children:[{skill:"Handwriting",rating:4},{skill:"Sports & Games",rating:5},{skill:"Handling of Tools",rating:4},{skill:"Drawing & Painting",rating:4},{skill:"Musical Skills",rating:3}].map((t,s)=>e.jsxs("tr",{className:s%2===0?"bg-gray-50":"bg-white",children:[e.jsx("td",{className:"p-3",children:t.skill}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("div",{className:"flex justify-end gap-1",children:[1,2,3,4,5].map(n=>e.jsx("div",{className:`w-4 h-4 rounded-full ${n<=t.rating?"bg-[#FFD700]":"bg-gray-300"}`},n))})})]},s))})})})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Class Teacher's Comment"}),e.jsx("p",{className:"text-[#0A2540]",children:"Fatima has shown excellent performance throughout the term. She is dedicated, hardworking, and participates actively in class. Keep up the outstanding work!"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Principal's Comment"}),e.jsx("p",{className:"text-[#0A2540]",children:"An impressive academic record. Well done! Continue to strive for excellence."})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 pt-6 border-t-2 border-gray-200",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-16 mb-2 border-b-2 border-gray-300"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Class Teacher's Signature"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-16 mb-2 border-b-2 border-gray-300"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Principal's Signature"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-16 mb-2 border-b-2 border-gray-300"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Parent's Signature"})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-gray-200 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Powered by Graceland Royal Academy Gombe  Wisdom & Illumination"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Next Term Begins: September 15, 2025"})]})]})]})]})})}var cM=(r,t,s,n,a,i,c,A)=>{let d=document.documentElement,u=["light","dark"];function m(g){(Array.isArray(r)?r:[r]).forEach(y=>{let b=y==="class",B=b&&i?a.map(N=>i[N]||N):a;b?(d.classList.remove(...B),d.classList.add(i&&i[g]?i[g]:g)):d.setAttribute(y,g)}),f(g)}function f(g){A&&u.includes(g)&&(d.style.colorScheme=g)}function x(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)m(n);else try{let g=localStorage.getItem(t)||s,y=c&&g==="system"?x():g;m(y)}catch{}},AM=j.createContext(void 0),dM={setTheme:r=>{},themes:[]},uM=()=>{var r;return(r=j.useContext(AM))!=null?r:dM};j.memo(({forcedTheme:r,storageKey:t,attribute:s,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:c,themes:A,nonce:d,scriptProps:u})=>{let m=JSON.stringify([s,t,i,r,A,c,n,a]).slice(1,-1);return j.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${cM.toString()})(${m})`}})});const hM=({...r})=>{const{theme:t="system"}=uM();return e.jsx(sk,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r})};function mM(){const[r,t]=j.useState("landing"),[s,n]=j.useState(""),[a,i]=j.useState(!1),c=(x,g)=>{i(!0),setTimeout(()=>{t(x),g!==void 0&&n(g),i(!1)},300)},A=()=>{c("login")},d=()=>{c("landing","")},u=x=>{c("dashboard",x)},m=()=>{c("landing","")},f=()=>{c("dashboard")};return e.jsx(nk,{children:e.jsx(YD,{children:e.jsxs("div",{className:`transition-opacity duration-300 ${a?"opacity-0":"opacity-100"}`,children:[r==="landing"&&e.jsx(KE,{onNavigateToLogin:A}),r==="login"&&e.jsx(ak,{onLogin:u,onNavigateToLanding:d}),r==="dashboard"&&s==="admin"&&e.jsx(JD,{onLogout:m}),r==="dashboard"&&s==="teacher"&&e.jsx(iO,{onLogout:m}),r==="dashboard"&&s==="accountant"&&e.jsx(ZO,{onLogout:m}),r==="dashboard"&&s==="parent"&&e.jsx(aM,{onLogout:m}),r==="report-card"&&e.jsx(lM,{onClose:f}),e.jsx(hM,{})]})})})}s4.createRoot(document.getElementById("root")).render(e.jsx(mM,{}));export{Si as A,Ce as B,Is as C,Et as I,He as L,Qt as S,jr as _,Ga as a,Pt as b,Tt as c,Rt as d,be as e,q4 as f,ol as g,fM as h,Ky as i,e as j,j as r,he as t,ys as u};
